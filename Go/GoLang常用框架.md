></h2>
- [**åŠ¨æ‰‹å®ç°ä¸€ä¸ªåº“**](#åŠ¨æ‰‹å®ç°ä¸€ä¸ªåº“)
	- [TravisCI](#TravisCI) 
	- [GitHub Actions](#GitHubActions) 
	- [DaoCloud](#DaoCloud)
- [**â€Œgo-collyæ¡†æ¶**](#go-collyæ¡†æ¶)
	- [go-collyæ¡†æ¶çš„ç‰¹æ€§](#go-collyæ¡†æ¶çš„ç‰¹æ€§)
	- [go-collyæ¡†æ¶ä½¿ç”¨](#go-collyæ¡†æ¶ä½¿ç”¨)
	- [å°†æŠ“å–çš„ç½‘é¡µå†…å®¹å­˜å‚¨åœ¨æ–‡ä»¶ä¸­](#å°†æŠ“å–çš„ç½‘é¡µå†…å®¹å­˜å‚¨åœ¨æ–‡ä»¶ä¸­)
- [**â€Œginæ¡†æ¶**](#â€Œginæ¡†æ¶)
	- [æŠŠçˆ¬è™«ç¨‹åºè®¾ç½®æˆWebæœåŠ¡](#æŠŠçˆ¬è™«ç¨‹åºè®¾ç½®æˆWebæœåŠ¡)
- [**â€Œcellnetç½‘ç»œåº“**](#cellnetç½‘ç»œåº“)
- [**â€Œå›¾è¡¨åº“â€”â€”go-chart**](#å›¾è¡¨åº“â€”â€”go-chart)
- [**å›¾è¡¨åº“go-echarts**](#å›¾è¡¨åº“go-echarts)
- [**packråº“å¤„ç†æ¨¡æ¿å¼•æ“å†…çš„æ–‡ä»¶**](#packråº“å¤„ç†æ¨¡æ¿å¼•æ“å†…çš„æ–‡ä»¶)
- [**â€ŒGJSONè§£æJSONæ•°æ®**](#GJSONè§£æJSONæ•°æ®)
- [**IrisWebæ¡†æ¶**](#IrisWebæ¡†æ¶)
	- [IrisWebæ¡†æ¶è¯¦è§£](#IrisWebæ¡†æ¶è¯¦è§£) 
	- [å¿«é€Ÿå…¥é—¨](#å¿«é€Ÿå…¥é—¨) 
	- [ä¸­é—´ä»¶](#ä¸­é—´ä»¶) 
	- [MVCæ¨¡å¼](#MVCæ¨¡å¼) 
	- [è§£æJSONè¯·æ±‚](#è§£æJSONè¯·æ±‚) 
	- [é›†æˆGORM](#é›†æˆGORM) 
	- [éƒ¨ç½²](#éƒ¨ç½²)
- **æ•°æ®åº“æ¡†æ¶**
	- [Redis](#Redis)
	- [GORMå’ŒXORMè¯¦ä»‹](#GORMå’ŒXORMè¯¦ä»‹)
		- [GORMä½¿ç”¨](#GORMä½¿ç”¨)
			- [GORMå®šä¹‰æ¨¡å‹](#GORMå®šä¹‰æ¨¡å‹) 
			- [GORMåˆå§‹åŒ–æ•°æ®åº“](#GORMåˆå§‹åŒ–æ•°æ®åº“) 
			- [GORMæ’å…¥æ•°æ®](#GORMæ’å…¥æ•°æ®) 
			- [GORMæŸ¥è¯¢æ•°æ®](#GORMæŸ¥è¯¢æ•°æ®) 
			- [GORMæ›´æ–°æ•°æ®](#GORMæ›´æ–°æ•°æ®) 
			- [GORMåˆ é™¤æ•°æ®](#GORMåˆ é™¤æ•°æ®)
	- [XORMä½¿ç”¨](#XORMä½¿ç”¨)
		- [XORMå®šä¹‰æ¨¡å‹](#XORMå®šä¹‰æ¨¡å‹) 
		- [XORMåˆå§‹åŒ–æ•°æ®åº“](#XORMåˆå§‹åŒ–æ•°æ®åº“) 
		- [XORMæ’å…¥æ•°æ®](#XORMæ’å…¥æ•°æ®) 
		- [XORMæŸ¥è¯¢æ•°æ®](#XORMæŸ¥è¯¢æ•°æ®)
			- [é¡¹ç›®å®è·µ1-JOIN(select)](#é¡¹ç›®å®è·µ1-JOIN(select))
			-  [é¡¹ç›®å®è·µ2-where(select)](#é¡¹ç›®å®è·µ2-where(select))
		- [XORMæ›´æ–°æ•°æ®](#XORMæ›´æ–°æ•°æ®) 
		- [XORMåˆ é™¤æ•°æ®](#XORMåˆ é™¤æ•°æ®)
	- [ä¸»è¦åŒºåˆ«](#ä¸»è¦åŒºåˆ«)
		- [ä»€ä¹ˆæ—¶å€™é€‰ç”¨ï¼Ÿ](#ä»€ä¹ˆæ—¶å€™é€‰ç”¨ï¼Ÿ)
	- [modelåºåˆ—åŒ–å’Œç»§æ‰¿](#modelåºåˆ—åŒ–å’Œç»§æ‰¿)
- [**å®‰å…¨**](#å®‰å…¨)
	- [cryptoåº“](#cryptoåº“)
		- [cryptoå“ˆå¸Œ](#cryptoå“ˆå¸Œ)


<br/>

***
<br/><br/><br/>
> <h1 id="åŠ¨æ‰‹å®ç°ä¸€ä¸ªåº“">åŠ¨æ‰‹å®ç°ä¸€ä¸ªåº“</h1>


- **Golang æºä»£ç æŒç»­é›†æˆå·¥å…·çš„ç”¨é€”å’ŒåŠŸèƒ½**

<br/>

- è¿™äº›å·¥å…·ä¸»è¦ç”¨äº**æŒç»­é›†æˆï¼ˆCIï¼‰å’ŒæŒç»­äº¤ä»˜/éƒ¨ç½²ï¼ˆCDï¼‰**ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­è‡ªåŠ¨åŒ–ä»¥ä¸‹ä»»åŠ¡ï¼š

	- **è‡ªåŠ¨åŒ–æ„å»º**ï¼šæ£€æµ‹ä»£ç æ›´æ”¹åï¼Œè‡ªåŠ¨ç¼–è¯‘å’Œæ„å»ºä»£ç ã€‚
	- **è‡ªåŠ¨åŒ–æµ‹è¯•**ï¼šè¿è¡Œå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ï¼Œç¡®ä¿ä»£ç è´¨é‡ã€‚
	- **ä»£ç è´¨é‡æ£€æŸ¥**ï¼šæ‰§è¡Œä»£ç é™æ€åˆ†æï¼ˆå¦‚ lintï¼‰ä»¥æ£€æµ‹æ½œåœ¨é—®é¢˜ã€‚
	- **è‡ªåŠ¨åŒ–éƒ¨ç½²**ï¼šåœ¨ä»£ç é€šè¿‡éªŒè¯åï¼Œå°†å…¶éƒ¨ç½²åˆ°ç”Ÿäº§æˆ–å…¶ä»–ç¯å¢ƒã€‚
	- **å›¢é˜Ÿåä½œ**ï¼šåœ¨ä»£ç åˆå¹¶æˆ–æäº¤åï¼Œå¿«é€Ÿè·å¾—æ„å»ºå’Œæµ‹è¯•ç»“æœï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚

<br/>

ä»¥ä¸‹æ˜¯ **TravisCI**ã€**GitHub Actions** å’Œ **DaoCloud** çš„å…·ä½“ä»‹ç»å’Œç”¨é€”ã€‚


- **å·¥å…·å¯¹æ¯”æ€»ç»“**

| å·¥å…·         | ç‰¹ç‚¹                                      | é€‚ç”¨åœºæ™¯                          | ä¼˜åŠ¿                          |
|--------------|------------------------------------------|-----------------------------------|-------------------------------|
| **TravisCI** | ç»å…¸ CI æœåŠ¡ï¼Œè½»é‡çº§ï¼Œå¼€æºé¡¹ç›®å‹å¥½         | å°å‹æˆ–ä¸­å‹é¡¹ç›®çš„æŒç»­é›†æˆ          | é…ç½®ç®€å•ï¼Œæ–‡æ¡£ä¸°å¯Œ            |
| **GitHub Actions** | æ·±åº¦é›†æˆ GitHubï¼ŒåŠŸèƒ½å¼ºå¤§ä¸”çµæ´»          | GitHub æ‰˜ç®¡çš„é¡¹ç›®æŒç»­é›†æˆ          | ç¤¾åŒºèµ„æºä¸°å¯Œï¼Œå¼ºå¤§çš„è§¦å‘æœºåˆ¶   |
| **DaoCloud** | å›½å†…æœåŠ¡ï¼Œæ”¯æŒå®¹å™¨åŒ–ã€äº‘åŸç”Ÿ               | å›½å†…é¡¹ç›®ï¼Œä¾èµ– Docker æˆ– Kubernetes | å›¾å½¢åŒ–ç•Œé¢ï¼Œå›½å†…æœåŠ¡ç¨³å®š       |

æ ¹æ®ä½ çš„é¡¹ç›®æ‰˜ç®¡å¹³å°ã€éœ€æ±‚å’Œå›¢é˜Ÿåä½œæ–¹å¼é€‰æ‹©åˆé€‚çš„å·¥å…·ï¼š  
- **å¼€æºé¡¹ç›®**ï¼šæ¨è TravisCI æˆ– GitHub Actionsã€‚
- **å›½å†…ç§æœ‰é¡¹ç›®**ï¼šæ¨è DaoCloudã€‚



<br/><br/><br/>

> <h2 id="TravisCI">TravisCI</h2>

- **ç”¨é€”**

TravisCI æ˜¯ä¸€æ¬¾æµè¡Œçš„æŒç»­é›†æˆæœåŠ¡ï¼Œæ”¯æŒå¤šä¸ªç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬ Goã€‚ä¸»è¦ç”¨äº GitHub ä»“åº“çš„æŒç»­é›†æˆã€‚å®ƒä¼šåœ¨ä»£ç æ¨é€æˆ–æäº¤ Pull Request æ—¶è§¦å‘è‡ªåŠ¨åŒ–æµç¨‹ã€‚

<br/>

- **åŠŸèƒ½**
	- è‡ªåŠ¨åŒ–æ„å»ºå’Œæµ‹è¯•ã€‚
	- æ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿï¼ˆLinuxã€macOSã€Windowsï¼‰ã€‚
	- é›†æˆ Docker æ”¯æŒå¤æ‚çš„æ„å»ºç¯å¢ƒã€‚
	- ä¸ GitHub æ·±åº¦é›†æˆï¼Œå¯åœ¨ PR ä¸­æ˜¾ç¤ºæµ‹è¯•çŠ¶æ€ã€‚

<br/>

- **ä½¿ç”¨ç¤ºä¾‹**
åœ¨é¡¹ç›®ä¸­æ·»åŠ  `.travis.yml` æ–‡ä»¶ï¼š

```yaml
language: go
go:
  - 1.19 # æŒ‡å®š Go ç‰ˆæœ¬
script:
  - go build -v ./...  # ç¼–è¯‘é¡¹ç›®
  - go test -v ./...   # è¿è¡Œæµ‹è¯•
```

<br/>

**ç”¨é€”åœºæ™¯**ï¼š
- å¿«é€Ÿè®¾ç½®å’Œè¿è¡ŒæŒç»­é›†æˆã€‚
- æ£€æµ‹ Go é¡¹ç›®ä¸­ä»£ç çš„æ„å»ºå’Œæµ‹è¯•çŠ¶æ€ã€‚


<br/><br/><br/>
> <h2 id="GitHubActions">GitHub Actions</h2>

- **ç”¨é€”**

GitHub Actions æ˜¯ GitHub è‡ªå¸¦çš„ CI/CD å·¥å…·ï¼Œä¸“é—¨ä¸º GitHub ä»“åº“è®¾è®¡ã€‚é€šè¿‡å®šä¹‰ **workflow** æ–‡ä»¶ï¼Œä½ å¯ä»¥è‡ªåŠ¨åŒ–é¡¹ç›®çš„æ•´ä¸ªå¼€å‘å‘¨æœŸï¼ŒåŒ…æ‹¬æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²ç­‰ã€‚

<br/>
- **åŠŸèƒ½**
	- ä½¿ç”¨ YAML æ–‡ä»¶å®šä¹‰æ„å»ºæµç¨‹ï¼ˆ`.github/workflows/*.yml`ï¼‰ã€‚
	- ä¸°å¯Œçš„ç¤¾åŒº Actionsï¼ˆå¤ç”¨å…¶ä»–å¼€å‘è€…çš„ä»»åŠ¡æ¨¡æ¿ï¼‰ã€‚
	- æ”¯æŒäº‹ä»¶è§¦å‘ï¼ˆå¦‚ Pushã€PR æˆ– Schedule å®šæ—¶ä»»åŠ¡ï¼‰ã€‚
	- æä¾›å¤šå¹³å°æ”¯æŒï¼ˆLinuxã€Windowsã€macOSï¼‰ã€‚

<br/>

- **ä½¿ç”¨ç¤ºä¾‹**

åœ¨é¡¹ç›®ä¸­æ·»åŠ  `.github/workflows/ci.yml` æ–‡ä»¶ï¼š

```yaml
name: Go CI
on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Set up Go
        uses: actions/setup-go@v4
        with:
          go-version: 1.19
      - name: Install dependencies
        run: go mod tidy
      - name: Build
        run: go build ./...
      - name: Test
        run: go test ./...
```

<br/>

- **ç”¨é€”åœºæ™¯**ï¼š
	- **å¼€æºé¡¹ç›®**ï¼šé€‚åˆ GitHub æ‰˜ç®¡çš„å¼€æºé¡¹ç›®ï¼Œç¤¾åŒºç”¨æˆ·å¯ä»¥å¿«é€Ÿè´¡çŒ®ã€‚
	- **å›¢é˜Ÿåä½œ**ï¼šåœ¨ä»£ç åˆå¹¶å‰ç¡®ä¿ä»£ç è´¨é‡ã€‚

<br/><br/><br/>
> <h2 id="DaoCloud">DaoCloud</h2>

- **ç”¨é€”**
DaoCloud æ˜¯ä¸­å›½å¼€å‘è€…å¸¸ç”¨çš„ä¸€ä½“åŒ–äº‘åŸç”Ÿå·¥å…·å¹³å°ï¼Œæ”¯æŒ CI/CDã€å®¹å™¨åŒ–éƒ¨ç½²ã€DevOps ç®¡ç†ç­‰åŠŸèƒ½ã€‚ç‰¹åˆ«é€‚åˆä¸­å›½çš„å¼€å‘è€…å’Œä¼ä¸šä½¿ç”¨ã€‚

<br/>

- **åŠŸèƒ½**
	- å›¾å½¢åŒ–ç•Œé¢ï¼Œæ“ä½œç®€å•æ˜“ç”¨ã€‚
	- æ”¯æŒä»æºç æ„å»ºã€æµ‹è¯•åˆ° Docker é•œåƒç”Ÿæˆçš„å…¨æµç¨‹ã€‚
	- ä¸å›½å†…ä»£ç æ‰˜ç®¡å¹³å°ï¼ˆå¦‚ Giteeï¼‰æ·±åº¦é›†æˆã€‚
	- æä¾›æ›´å¿«çš„å›½å†…é•œåƒåŠ é€ŸæœåŠ¡ã€‚

<br/>

- **ä½¿ç”¨ç¤ºä¾‹**

é€šè¿‡å›¾å½¢åŒ–ç•Œé¢å®Œæˆä»¥ä¸‹é…ç½®ï¼š
	1. é€‰æ‹©ä»£ç æºï¼ˆå¦‚ GitHub æˆ– Giteeï¼‰ã€‚
	2. æ·»åŠ æ„å»ºä»»åŠ¡ï¼Œä¾‹å¦‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
go build ./...
go test ./...
docker build -t myapp .
```

3. é…ç½®è‡ªåŠ¨åŒ–éƒ¨ç½²åˆ° Kubernetes é›†ç¾¤æˆ–å…¶ä»–ç¯å¢ƒã€‚

- **ç”¨é€”åœºæ™¯**ï¼š
	- å›½å†…é¡¹ç›®çš„æŒç»­é›†æˆå’Œäº¤ä»˜ã€‚
	- å¿«é€Ÿå®ç° CI/CD å’Œå®¹å™¨åŒ–äº¤ä»˜ã€‚

<br/>




<br/>

***
<br/><br/><br/>
> <h1 id="go-collyæ¡†æ¶">go-collyæ¡†æ¶</h1>

go-collyæ˜¯ä½¿ç”¨Goè¯­è¨€å®ç°çš„ç½‘ç»œçˆ¬è™«æ¡†æ¶ã€‚go-collyä»¥å›è°ƒå‡½æ•°çš„å½¢å¼æä¾›äº†ä¸€ç»„æ¥å£ï¼Œé€šè¿‡è¿™äº›æ¥å£èƒ½å¤Ÿå®ç°ä»»æ„ç±»å‹çš„çˆ¬è™«ã€‚å¼€å‘è€…ä½¿ç”¨go-collyæ¡†æ¶å¯ä»¥è½»æ¾åœ°ä»Webé¡µé¢ä¸­çˆ¬å–ç»“æ„åŒ–æ•°æ®ã€‚

<br/>
**é€šè¿‡å¦‚ä¸‹å‘½ä»¤ä¸‹è½½åˆ°é¡¹ç›®ä¸­ï¼š**

```
cd cd /Users/ganghuang/HGFiles/GitHub/GoProject/MLC_GO
go get -u github.com/gocolly/colly/...
```


<br/><br/><br/>
> <h2 id="go-collyæ¡†æ¶çš„ç‰¹æ€§">go-collyæ¡†æ¶çš„ç‰¹æ€§</h2>
- **go-collyæ¡†æ¶å…·æœ‰å¦‚ä¸‹ç‰¹æ€§ã€‚**
	- æ¸…æ™°çš„APIã€‚å¿«é€Ÿï¼ˆå•æ ¸>1kè¯·æ±‚/sï¼‰â€‹ã€‚
	- ç®¡ç†æ¯ä¸ªåŸŸçš„è¯·æ±‚å»¶è¿Ÿå’Œæœ€å¤§å¹¶å‘æ€§ã€‚
	- è‡ªåŠ¨cookieå’Œä¼šè¯å¤„ç†ã€‚
	- åŒæ­¥ï¼å¼‚æ­¥ï¼å¹¶è¡ŒæŠ“å–ã€‚é«˜é€Ÿç¼“å­˜ã€‚
	- è‡ªåŠ¨å¤„ç†éUnicodeçš„ç¼–ç ã€‚
	- æ”¯æŒRobots.txtå®šåˆ¶Agentä¿¡æ¯ã€‚
	- å®šåˆ¶æŠ“å–é¢‘æ¬¡ã€‚



<br/><br/><br/>
> <h2 id="go-collyæ¡†æ¶ä½¿ç”¨">go-collyæ¡†æ¶ä½¿ç”¨</h2>

**å¯¼å…¥æ¡†æ¶**

```
import "github.com/gocolly/colly"
```

<br/>

&emsp; ä½¿ç”¨go-collyæ¡†æ¶çš„å…³é”®æ˜¯åˆ›å»ºCollectorå¯¹è±¡ï¼ˆå³â€œæ”¶é›†å™¨â€â€‹ï¼‰â€‹ï¼Œè¯¥å¯¹è±¡çš„ä½œç”¨æ˜¯ç®¡ç†ç½‘ç»œé€šä¿¡ï¼Œå¹¶è´Ÿè´£åœ¨æ”¶é›†ä»»åŠ¡è¿è¡Œæ—¶æ‰§è¡Œé™„åŠ çš„å›è°ƒå‡½æ•°ã€‚é€šè¿‡è°ƒç”¨collyåº“ä¸­çš„NewCollector()å‡½æ•°ï¼Œå³å¯åˆ›å»ºCollectorå¯¹è±¡ã€‚å…¶è¯­æ³•æ ¼å¼å¦‚ä¸‹ã€‚

```
colly.NewCollector()
```

<br/>

![go.0.0.55.png](./../Pictures/go.0.0.55.png)


- **è¿™äº›å›è°ƒå‡½æ•°åœ¨æ”¶é›†ä»»åŠ¡è¿è¡Œæ—¶è¢«æœ‰åºè°ƒç”¨ï¼Œè°ƒç”¨é¡ºåºå¦‚ä¸‹ã€‚**
	- OnRequest()å‡½æ•°åœ¨è¯·æ±‚å‘å‡ºå‰è¢«è°ƒç”¨ã€‚
	- OnError()å‡½æ•°åœ¨è¯·æ±‚è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æ—¶è¢«è°ƒç”¨ã€‚
	- OnResponse()å‡½æ•°åœ¨æ”¶åˆ°å“åº”åè¢«è°ƒç”¨ã€‚
		- å¦‚æœå“åº”æ¶ˆæ¯çš„å†…å®¹æ˜¯HTMLï¼Œåˆ™åœ¨OnResponse()å‡½æ•°æ‰§è¡Œå®Œæ¯•åè°ƒç”¨OnHTML()å‡½æ•°ã€‚
		- å¦‚æœå“åº”æ¶ˆæ¯çš„å†…å®¹æ˜¯HTMLæˆ–XMLï¼Œåˆ™åœ¨OnHTML()å‡½æ•°æ‰§è¡Œå®Œæ¯•åè°ƒç”¨OnXML()å‡½æ•°ã€‚
		- OnXML()å‡½æ•°æ‰§è¡Œå®Œæ¯•åè°ƒç”¨OnScraped()å‡½æ•°ã€‚

<br/><br/>

è¿è¡Œç¨‹åºåï¼Œç¨‹åºæ ¹æ®http://news.baidu.comå¼€å§‹æŠ“å–é¡µé¢ç»“æœã€‚é€šè¿‡å›è°ƒå‡½æ•°OnHTML()ï¼Œèƒ½å¤Ÿåˆ†æé¡µé¢ä¸­çš„æ–°é—»æ ‡é¢˜åŠå…¶é“¾æ¥ã€‚ä»£ç å¦‚ä¸‹:

```
package main

import (
	"fmt"

	"github.com/gocolly/colly"
)

func main() {
	// æ ¹æ®http://news.baidu.comå¼€å§‹æŠ“å–é¡µé¢ç»“æœ
	testCrawlerBaidu()
}

/// çˆ¬è™«ç™¾åº¦ç½‘é¡µ
func testCrawlerBaidu(){
	c := colly.NewCollector(
		// colly.AllowedDomains("news.baidu.com"),
		colly.UserAgent("Opera/9.80(Windows NT 6.1; U; zh-cn) Presto/2.9.168 Version/11.50"))
	// å‘å‡ºè¯·æ±‚æ—¶å‘ Collector å¯¹è±¡é™„åŠ çš„å›è°ƒå‡½æ•°
	c.OnRequest(func(r *colly.Request){
		// è®¾ç½®è¯·æ±‚å¤´
		r.Headers.Set("Host", "baidu.com")
		r.Headers.Set("Connection", "keep-alive")
		r.Headers.Set("Accept", "*/*")
		r.Headers.Set("Origin", "")
		r.Headers.Set("Referer", "http://www.baidu.com")
		r.Headers.Set("Accept-Encoding", "gzip, deflate")
		r.Headers.Set("Accept-Language", "zh-CN, zh;q=0.9")
		fmt.Println("æ­£åœ¨è®¿é—®ï¼š", r.URL)
	})

	// å¤„ç†HTMLä¸­çš„æ–‡æ¡£æ ‡é¢˜
	c.OnHTML("title", func (e *colly.HTMLElement)  {
		fmt.Println("æ–‡æ¡£æ ‡é¢˜ï¼š", e.Text)
	})

	// å¤„ç†HTMLä¸­çš„æ–‡æ¡£å†…å®¹
	c.OnHTML("body", func (e *colly.HTMLElement)  {
		e.ForEach(".hotnews a", func (i int, el *colly.HTMLElement)  {
			band := el.Attr("href")
			title := el.Text
			fmt.Printf("æ–‡æ¡£å†…å®¹ %d: %s\n%s\n", i+1, title, band)
		})
	})

	// è·å–æ”¶åˆ°çš„å“åº”å†…å®¹çš„æ•°é‡
	c.OnResponse(func(r *colly.Response){
		fmt.Println("æ”¶åˆ°å“åº”å†…å®¹çš„æ•°é‡ï¼š ", r.StatusCode)
	})
	
	// é™åˆ¶ visit çš„çº¿ç¨‹æ•°ï¼Œ visit å¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ª
	c.Limit(&colly.LimitRule{
		Parallelism: 2,
	})

	c.Visit("http://news.baidu.com")
}
```

**Log:**

```
ganghuang@GangHuangs-MacBook-Pro TestCrawlerBaidu % go run test_crawler_baidu.go
æ­£åœ¨è®¿é—®ï¼š http://news.baidu.com
æ”¶åˆ°å“åº”å†…å®¹çš„æ•°é‡ï¼š  200
æ–‡æ¡£æ ‡é¢˜ï¼š ç™¾åº¦æ–°é—»â€”â€”æµ·é‡ä¸­æ–‡èµ„è®¯å¹³å°
æ–‡æ¡£å†…å®¹ 1: ä¹ è¿‘å¹³å‘å…¨å›½å„æ—äººæ°‘è‡´ä»¥æ–°æ˜¥ç¥ç¦
https://content-static.cctvnews.cctv.com/snow-book/index.html?item_id=5200598709432592760&toc_style_id=feeds_default&track_id=34D9D8BD-D879-4708-BF3E-A8D868C6C660_759409923605&share_to=copy_url
æ–‡æ¡£å†…å®¹ 2: ä¹ è¿‘å¹³æ˜¥èŠ‚å‰å¤•èµ´è¾½å®çœ‹æœ›æ…°é—®åŸºå±‚å¹²éƒ¨ç¾¤ä¼—
https://news.cctv.com/2025/01/24/ARTI6hnAgPkfUOy7vO9AAjFB250124.shtml
æ–‡æ¡£å†…å®¹ 3: æ€»ä¹¦è®°çš„å…³æ€€è®©æˆ‘ä»¬æ„Ÿåˆ°å¹¸ç¦æ¸©æš–
https://h.xinhuaxmt.com/vh512/share/12380734?newstype=1001&homeshow=1
æ–‡æ¡£å†…å®¹ 4: è½¬å‹å‡çº§ â€œæ™ºâ€é€ å¼ºä¼ ä¼ ç»Ÿé’¢ä¼ç„•å‘é’æ˜¥
https://content-static.cctvnews.cctv.com/snow-book/index.html?item_id=16973667513549662031&toc_style_id=feeds_default&track_id=3C71E229-8F36-461A-8F0A-AAD40C7030ED_759408113589&share_to=copy_url
æ–‡æ¡£å†…å®¹ 5: ä¹ è¿‘å¹³è¾½å®è¡Œï½œçƒŸç«æ°”é‡Œå¹´å‘³æµ“â€”â€”èµ°è¿›æ²ˆé˜³å¤§ä¸œå‰¯é£Ÿå“å•†åœº
https://content-static.cctvnews.cctv.com/snow-book/index.html?item_id=1274157371348255293&toc_style_id=feeds_default&track_id=25D644CD-6C11-463A-921D-8BC0F1C6B019_759329323922&share_to=copy_url
æ–‡æ¡£å†…å®¹ 6: å‘â€œæ–°â€å‘åŠ› é€â€œè´¨â€è€Œè¡Œ
https://content-static.cctvnews.cctv.com/snow-book/index.html?item_id=16224630468348415654&toc_style_id=feeds_default&share_to=copy_url&track_id=24e45dbe-d36d-4e2a-82b5-1d3700f1f9a2
æ–‡æ¡£å†…å®¹ 7: æ—¶æ”¿Vlogï½œä¸Šè”ï¼šå¹´è´§ç½®åŠä¸­ ä¸‹è”ï¼šä»Šæ—¥å®œâ€œå¤§ä¸œâ€ æ¨ªæ‰¹ï¼šè€é¦™äº†
https://content-static.cctvnews.cctv.com/snow-book/index.html?item_id=95295998088496574&channelId=1119&toc_style_id=feeds_default&track_id=D9D2124E-0D13-4872-A820-380C0AF85403_759396097754&share_to=copy_url
æ–‡æ¡£å†…å®¹ 8: å»¶å®‰è‹¹æœäº§ä¸šé‡Œçš„æ–°è´¨ç”Ÿäº§åŠ›ï¼ˆæ–°æ˜¥èµ°åŸºå±‚ï¼‰
https://www.peopleapp.com/column/30048094126-500006064834
æ–‡æ¡£å†…å®¹ 9: æ–°æ˜¥èµ°åŸºå±‚ï½œâ€œéš§é“æ¢é™©å®¶â€å‡ºæµ·è®°
https://app.people.cn/h5/detail/normal/6157882818937856
æ–‡æ¡£å†…å®¹ 10: å¤§å¸‚åœºçœ‹ä¸­å›½å¹´ï½œé€›ç™¾å¹´å¤§é›† å¯»ä¹¡æ„è®°å¿†
https://www.cnr.cn/tj/tjtp/20250124/t20250124_527050755.shtml
```

<br/><br/>
> <h2 id="æŠ“å–æŒ‡å®šè¿æ¥çš„ç½‘é¡µå†…å®¹"> æŠ“å–æŒ‡å®šè¿æ¥çš„ç½‘é¡µå†…å®¹ </h2>

æ§åˆ¶å°æ‰“å°çš„æŠ“å–ç»“æœæ˜¯çˆ¬è™«ç¨‹åºé€šè¿‡é™åˆ¶åŸŸåã€è®¾ç½®æŠ“å–æ·±åº¦ã€è¿‡æ»¤URLåå¾—åˆ°çš„ã€‚é€šè¿‡è®¿é—®http://news.baidu.comå‘ç°è¯¥é“¾æ¥çš„ç½‘é¡µå†…å®¹å¾ˆä¸°å¯Œï¼Œæ¶‰åŠæ–¹æ–¹é¢é¢çš„é¢†åŸŸã€‚é‚£ä¹ˆï¼Œå¦‚ä½•æ‰èƒ½æŠŠhttp://news.baidu.comçš„ç½‘é¡µå†…å®¹å…¨éƒ¨æŠ“å–ä¸‹æ¥å‘¢ï¼Ÿä»£ç å¦‚ä¸‹ã€‚

```
// è®¿é—®æŒ‡å®šç½‘å€
testCrawlerAppointWebpage("https://news.baidu.com")


/// æŠ“å–æŒ‡å®šè¿æ¥çš„ç½‘é¡µå†…å®¹ urls: æŒ‡å®šé“¾æ¥
func testCrawlerAppointWebpage(urls string) {
	// åˆ›å»º Collector å¯¹è±¡
	c := colly.NewCollector()
	/* 
	* æ˜¯å¦æŠ“å–æŒ‡å®šé“¾æ¥çš„ç½‘é¡µå†…å®¹
	* åˆå§‹è®¾ç½®ä¸ºä¸æŠ“å–æŒ‡å®šé“¾æ¥çš„ç½‘é¡µå†…å®¹
	 */
	visited := false
	// ä½¿ç”¨ Collector å¯¹è±¡æŠ“å– URL
	c.OnResponse(func (r *colly.Response)  {
		if !visited {
			visited = true
			r.Request.Visit("/get?q=2")
		}
	})

	// å¯¹æŒ‡å®šé“¾æ¥ç½‘é¡µå†…å®¹è¿›è¡Œå¤„ç†
	c.OnHTML("a[href]", func (e *colly.HTMLElement)  {
		href := e.Text	// è·å–æŒ‡å®šé“¾æ¥çš„ç½‘é¡µå†…å®¹
		fmt.Println("ğŸ ç½‘é¡µå†…å®¹ï¼š",href)	// æ‰“å°æŒ‡å®šé“¾æ¥çš„ç½‘é¡µå†…å®¹
	})
	c.Visit(urls)	//è®¿é—®æŒ‡å®šé“¾æ¥
}
```

**Log**

```
ganghuang@GangHuangs-MacBook-Pro TestCrawlerBaidu % go run test_crawler_baidu.go
ğŸ ç½‘é¡µå†…å®¹ï¼š ç½‘é¡µ
ğŸ ç½‘é¡µå†…å®¹ï¼š è´´å§
ğŸ ç½‘é¡µå†…å®¹ï¼š çŸ¥é“
ğŸ ç½‘é¡µå†…å®¹ï¼š éŸ³ä¹
ğŸ ç½‘é¡µå†…å®¹ï¼š å›¾ç‰‡
ğŸ ç½‘é¡µå†…å®¹ï¼š è§†é¢‘
ğŸ ç½‘é¡µå†…å®¹ï¼š åœ°å›¾
ğŸ ç½‘é¡µå†…å®¹ï¼š æ–‡åº“
ğŸ ç½‘é¡µå†…å®¹ï¼š 




ğŸ ç½‘é¡µå†…å®¹ï¼š å¸®åŠ©
ğŸ ç½‘é¡µå†…å®¹ï¼š é¦–é¡µ
ğŸ ç½‘é¡µå†…å®¹ï¼š å›½å†…
ğŸ ç½‘é¡µå†…å®¹ï¼š å›½é™…
ğŸ ç½‘é¡µå†…å®¹ï¼š å†›äº‹
ğŸ ç½‘é¡µå†…å®¹ï¼š è´¢ç»
ğŸ ç½‘é¡µå†…å®¹ï¼š å¨±ä¹
ğŸ ç½‘é¡µå†…å®¹ï¼š ä½“è‚²
ğŸ ç½‘é¡µå†…å®¹ï¼š äº’è”ç½‘
ğŸ ç½‘é¡µå†…å®¹ï¼š ç§‘æŠ€
ğŸ ç½‘é¡µå†…å®¹ï¼š æ¸¸æˆ
ğŸ ç½‘é¡µå†…å®¹ï¼š å¥³äºº
ğŸ ç½‘é¡µå†…å®¹ï¼š æ±½è½¦
ğŸ ç½‘é¡µå†…å®¹ï¼š æˆ¿äº§
ğŸ ç½‘é¡µå†…å®¹ï¼š é¦–é¡µ
ğŸ ç½‘é¡µå†…å®¹ï¼š å›½å†…
ğŸ ç½‘é¡µå†…å®¹ï¼š å›½é™…
ğŸ ç½‘é¡µå†…å®¹ï¼š å†›äº‹
ğŸ ç½‘é¡µå†…å®¹ï¼š è´¢ç»
ğŸ ç½‘é¡µå†…å®¹ï¼š å¨±ä¹
ğŸ ç½‘é¡µå†…å®¹ï¼š ä½“è‚²
ğŸ ç½‘é¡µå†…å®¹ï¼š äº’è”ç½‘
ğŸ ç½‘é¡µå†…å®¹ï¼š ç§‘æŠ€
ğŸ ç½‘é¡µå†…å®¹ï¼š æ¸¸æˆ
ğŸ ç½‘é¡µå†…å®¹ï¼š å¥³äºº
ğŸ ç½‘é¡µå†…å®¹ï¼š æ±½è½¦
ğŸ ç½‘é¡µå†…å®¹ï¼š æˆ¿äº§
ğŸ ç½‘é¡µå†…å®¹ï¼š 


ç‚¹å‡»åˆ·æ–°ï¼Œå°†ä¼šæœ‰æœªè¯»æ¨è


ğŸ ç½‘é¡µå†…å®¹ï¼š çƒ­ç‚¹è¦é—»
ğŸ ç½‘é¡µå†…å®¹ï¼š 
ğŸ ç½‘é¡µå†…å®¹ï¼š ä¹ è¿‘å¹³å‘å…¨å›½å„æ—äººæ°‘è‡´ä»¥æ–°æ˜¥ç¥ç¦
ğŸ ç½‘é¡µå†…å®¹ï¼š ä¹ è¿‘å¹³æ˜¥èŠ‚å‰å¤•èµ´è¾½å®çœ‹æœ›æ…°é—®åŸºå±‚å¹²éƒ¨ç¾¤ä¼—
ğŸ ç½‘é¡µå†…å®¹ï¼š æ€»ä¹¦è®°çš„å…³æ€€è®©æˆ‘ä»¬æ„Ÿåˆ°å¹¸ç¦æ¸©æš–
ğŸ ç½‘é¡µå†…å®¹ï¼š è½¬å‹å‡çº§ â€œæ™ºâ€é€ å¼ºä¼ ä¼ ç»Ÿé’¢ä¼ç„•å‘é’æ˜¥
ğŸ ç½‘é¡µå†…å®¹ï¼š ä¹ è¿‘å¹³è¾½å®è¡Œï½œçƒŸç«æ°”é‡Œå¹´å‘³æµ“â€”â€”èµ°è¿›æ²ˆé˜³å¤§ä¸œå‰¯é£Ÿå“å•†åœº
ğŸ ç½‘é¡µå†…å®¹ï¼š å‘â€œæ–°â€å‘åŠ› é€â€œè´¨â€è€Œè¡Œ
ğŸ ç½‘é¡µå†…å®¹ï¼š æ—¶æ”¿Vlogï½œä¸Šè”ï¼šå¹´è´§ç½®åŠä¸­ ä¸‹è”ï¼šä»Šæ—¥å®œâ€œå¤§ä¸œâ€ æ¨ªæ‰¹ï¼šè€é¦™äº†
ğŸ ç½‘é¡µå†…å®¹ï¼š å»¶å®‰è‹¹æœäº§ä¸šé‡Œçš„æ–°è´¨ç”Ÿäº§åŠ›ï¼ˆæ–°æ˜¥èµ°åŸºå±‚ï¼‰
ğŸ ç½‘é¡µå†…å®¹ï¼š æ–°æ˜¥èµ°åŸºå±‚ï½œâ€œéš§é“æ¢é™©å®¶â€å‡ºæµ·è®°
ğŸ ç½‘é¡µå†…å®¹ï¼š å¤§å¸‚åœºçœ‹ä¸­å›½å¹´ï½œé€›ç™¾å¹´å¤§é›† å¯»ä¹¡æ„è®°å¿†
ğŸ ç½‘é¡µå†…å®¹ï¼š ä¸­ç»è¯„è®ºï¼š1.4ä¸‡äº¿æ–¤ï¼ä¸­å›½ç²®â€œè—â€åœ¨å“ªï¼Ÿ
ğŸ ç½‘é¡µå†…å®¹ï¼š å…±äº«ä¸­å›½å‘å±•æœºé‡ ç¾å›½ä¼ä¸šæŒç»­çœ‹å¥½ä¸­å›½å¸‚åœº
ğŸ ç½‘é¡µå†…å®¹ï¼š æˆ‘åœ¨ä¸­å›½è¿‡å¤§å¹´ï½œå½“â€œéé—ç‰ˆâ€æ˜¥èŠ‚é‡ä¸Šéé—å½ç»£
ğŸ ç½‘é¡µå†…å®¹ï¼š é¦™æ¸¯ç‚¹äº®é”¦é²¤é†’ç‹®å½©ç¯è¿æ–°æ˜¥
ğŸ ç½‘é¡µå†…å®¹ï¼š ä¸“é¢˜ï¼šäº¬å½©æ˜¥èŠ‚çš„Nç§æ‰“å¼€æ–¹å¼
ğŸ ç½‘é¡µå†…å®¹ï¼š ä»Šæ—¥è¾Ÿè°£
ğŸ ç½‘é¡µå†…å®¹ï¼š åŒ—äº¬ç½‘ç«™è¾Ÿè°£å¹³å°
ğŸ ç½‘é¡µå†…å®¹ï¼š äº’è”ç½‘è”åˆè¾Ÿè°£å¹³å°
ğŸ ç½‘é¡µå†…å®¹ï¼š å¤šåœ°â€œç¦æ”¹é™â€æ˜ç¡®æ˜¥èŠ‚å¯ç‡ƒæ”¾çƒŸèŠ±çˆ†ç«¹
ğŸ ç½‘é¡µå†…å®¹ï¼š æš´é›ªã€å¯’æ½®ã€å¤§é›¾ä¸‰é¢„è­¦é½å‘ï¼å¤šåœ°é«˜é€Ÿå°é—­ï¼Œåˆ—è½¦åœè¿
ğŸ ç½‘é¡µå†…å®¹ï¼š ä¼ ç»Ÿä¹ ä¿—è¿æ˜¥èŠ‚ æ¥çœ‹è¿™äº›åœ°æ–¹çš„æµ“æµ“å¹´å‘³
ğŸ ç½‘é¡µå†…å®¹ï¼š é“è·¯æ¡¥éš§å·¥å­©å­å¹´å‰åç«è½¦â€œçœ‹çˆ¸çˆ¸â€ çˆ¶äº²åœ¨å´–å£å–Šåˆ°é£™æ³ª
ğŸ ç½‘é¡µå†…å®¹ï¼š å›½å®¶è¯ç›‘å±€è¯å®¡ä¸­å¿ƒå›åº”ä¸ªåˆ«å“ç§æ•°æ®é‡å¤ï¼šç¼–è¾‘é”™è¯¯å¯¼è‡´
ğŸ ç½‘é¡µå†…å®¹ï¼š ç¾å›½æ€»ç»Ÿç‰¹æœ—æ™®ç§°å°†å†æ¬¡å’Œæœé²œé¢†å¯¼äººå–å¾—è”ç³»
ğŸ ç½‘é¡µå†…å®¹ï¼š 

ç‚¹å‡»åˆ·æ–°ï¼Œå°†ä¼šæœ‰æœªè¯»æ¨è

ğŸ ç½‘é¡µå†…å®¹ï¼š æ›´å¤šä¸ªæ€§æ¨èæ–°é—»
ğŸ ç½‘é¡µå†…å®¹ï¼š 


ğŸ ç½‘é¡µå†…å®¹ï¼š 


ğŸ ç½‘é¡µå†…å®¹ï¼š 
ğŸ ç½‘é¡µå†…å®¹ï¼š 8
ğŸ ç½‘é¡µå†…å®¹ï¼š 7
ğŸ ç½‘é¡µå†…å®¹ï¼š 6
ğŸ ç½‘é¡µå†…å®¹ï¼š 5
ğŸ ç½‘é¡µå†…å®¹ï¼š 4
ğŸ ç½‘é¡µå†…å®¹ï¼š 3
ğŸ ç½‘é¡µå†…å®¹ï¼š 2
ğŸ ç½‘é¡µå†…å®¹ï¼š 1
ğŸ ç½‘é¡µå†…å®¹ï¼š 
ğŸ ç½‘é¡µå†…å®¹ï¼š 
ğŸ ç½‘é¡µå†…å®¹ï¼š å¹´çš„å‘³é“
ğŸ ç½‘é¡µå†…å®¹ï¼š é£å¤©é€æ¢¦æ¢è‹ç©¹
ğŸ ç½‘é¡µå†…å®¹ï¼š ä»Šå†¬ä»¥æ¥æœ€å¼ºé›¨é›ªæ¥è¢­
ğŸ ç½‘é¡µå†…å®¹ï¼š åˆç¡å¯ä»¥ä¿®å¤å…¨èº«å¤šä¸ªå™¨å®˜
ğŸ ç½‘é¡µå†…å®¹ï¼š è€å›å±±æ™¯åŒºç´§æ€¥é—­å›­
ğŸ ç½‘é¡µå†…å®¹ï¼š åŒ»ç”Ÿè¯´è¿™6ç§ç—…æ˜¯è¡°è€çš„è¡¨ç°
ğŸ ç½‘é¡µå†…å®¹ï¼š ç›‘æ§æ‹ä¸‹ç«ç®­æ®‹éª¸æ‰è½ç¬é—´
ğŸ ç½‘é¡µå†…å®¹ï¼š æ²³é‡Œé’“èµ·æ•´ç®±ç°é‡‘?è°£è¨€
ğŸ ç½‘é¡µå†…å®¹ï¼š ç¬¬ä¸€æ‰¹å¤–å›½ç½‘å‹å·²åˆ°ä¸­å›½â€œèµ¶æ˜¥è¿â€
ğŸ ç½‘é¡µå†…å®¹ï¼š ç¾æ‹¨æ¬¾25äº¿ç¾å…ƒåº”å¯¹æ´›æ‰çŸ¶å±±ç«
ğŸ ç½‘é¡µå†…å®¹ï¼š 
ğŸ ç½‘é¡µå†…å®¹ï¼š 
ğŸ ç½‘é¡µå†…å®¹ï¼š 
ğŸ ç½‘é¡µå†…å®¹ï¼š è¾Ÿè°£
ğŸ ç½‘é¡µå†…å®¹ï¼š ä¸¾æŠ¥
ğŸ ç½‘é¡µå†…å®¹ï¼š äºŒç»´ç 
ğŸ ç½‘é¡µå†…å®¹ï¼š æ”¶è—æœ¬ç«™
ğŸ ç½‘é¡µå†…å®¹ï¼š æœç´¢
ğŸ ç½‘é¡µå†…å®¹ï¼š ç”¨æˆ·åé¦ˆ
ğŸ ç½‘é¡µå†…å®¹ï¼š 
ğŸ ç½‘é¡µå†…å®¹ï¼š Androidç‰ˆä¸‹è½½
ğŸ ç½‘é¡µå†…å®¹ï¼š iPhoneç‰ˆä¸‹è½½
ğŸ ç½‘é¡µå†…å®¹ï¼š ç”¨æˆ·åè®®
ğŸ ç½‘é¡µå†…å®¹ï¼š éšç§ç­–ç•¥
ğŸ ç½‘é¡µå†…å®¹ï¼š ä¼ä¸šæ¨å¹¿
ğŸ ç½‘é¡µå†…å®¹ï¼š æŠ•è¯‰ä¸­å¿ƒ
ğŸ ç½‘é¡µå†…å®¹ï¼š è¥ä¸šæ‰§ç…§
ğŸ ç½‘é¡µå†…å®¹ï¼š ã€Šäº’è”ç½‘æ–°é—»ä¿¡æ¯æœåŠ¡è®¸å¯ã€‹ç¼–å·ï¼š11220180008
ğŸ ç½‘é¡µå†…å®¹ï¼š ã€Šäº’è”ç½‘å®—æ•™ä¿¡æ¯æœåŠ¡è®¸å¯è¯ã€‹ç¼–å·ï¼šäº¬ï¼ˆ2022ï¼‰0000043
ğŸ ç½‘é¡µå†…å®¹ï¼š ä½¿ç”¨ç™¾åº¦å‰å¿…è¯»
ğŸ ç½‘é¡µå†…å®¹ï¼š 

ğŸ ç½‘é¡µå†…å®¹ï¼š 

ğŸ ç½‘é¡µå†…å®¹ï¼š 
```


<br/><br/>
> <h2 id="å°†æŠ“å–çš„ç½‘é¡µå†…å®¹å­˜å‚¨åœ¨æ–‡ä»¶ä¸­">å°†æŠ“å–çš„ç½‘é¡µå†…å®¹å­˜å‚¨åœ¨æ–‡ä»¶ä¸­</h2>

é€šè¿‡19.4èŠ‚çš„æ“ä½œå·²ç»æŠŠhttp://news.baidu.comçš„ç½‘é¡µå†…å®¹å…¨éƒ¨æŠ“å–ä¸‹æ¥ï¼Œå¹¶æŠŠè¿™äº›å†…å®¹æ‰“å°åœ¨æ§åˆ¶å°ä¸Šã€‚ä½†æ˜¯ï¼Œå¦‚ä½•æ‰èƒ½æŠŠæŠ“å–ä¸‹æ¥çš„ç½‘é¡µå†…å®¹å­˜å‚¨åœ¨æ–‡ä»¶ä¸­å‘¢ï¼Ÿä»£ç å¦‚ä¸‹ã€‚

```
// å­˜å‚¨çˆ¬è™«æ–‡ä»¶
func testCrawlerAppointWebpageAndSaveTxt(urls string) {
	// åˆ›å»º Collector å¯¹è±¡
	c := colly.NewCollector()
	/* 
	* æ˜¯å¦æŠ“å–æŒ‡å®šé“¾æ¥çš„ç½‘é¡µå†…å®¹
	* åˆå§‹è®¾ç½®ä¸ºä¸æŠ“å–æŒ‡å®šé“¾æ¥çš„ç½‘é¡µå†…å®¹
	 */
	visited := false
	// ä½¿ç”¨ Collector å¯¹è±¡æŠ“å– URL
	c.OnResponse(func (r *colly.Response)  {
		if !visited {
			visited = true
			r.Request.Visit("/get?q=2")
		}
	})

	// æ–‡ä»¶çš„åˆ›å»ºå’ŒæŒç»­å†™å…¥
	filename := "news.txt"	// æ–‡ä»¶å
	var f *os.File
	var fileErr error 
	if testCheckFileExist(filename) {	// å¦‚æœæ–‡ä»¶å­˜åœ¨
		f, fileErr = os.OpenFile(filename, os.O_APPEND | os.O_WRONLY, 0666)	// æ‰“å¼€æ–‡ä»¶
		if fileErr != nil {
			fmt.Printf("âŒ æ‰“å¼€æ–‡ä»¶ news.txt å¤±è´¥ï¼š%v\n", fileErr)
		}
	} else {
		f,_ = os.Create(filename)	// åˆ›å»ºæ–‡ä»¶
		fmt.Println("ğŸ æ–°å»ºæ–‡ä»¶ news.txt")

	}
	defer f.Close()	// å…³é—­æ–‡ä»¶
	write := bufio.NewWriter(f)
	defer write.Flush()

	// å¯¹æŒ‡å®šé“¾æ¥ç½‘é¡µå†…å®¹è¿›è¡Œå¤„ç†
	c.OnHTML("a[href]", func (e *colly.HTMLElement)  {
		href := e.Text	// è·å–æŒ‡å®šé“¾æ¥çš„ç½‘é¡µå†…å®¹
		write.WriteString("ğŸ’ "+href+"\n")
		fmt.Println("ğŸ ç½‘é¡µå†…å®¹ï¼š",href)	// æ‰“å°æŒ‡å®šé“¾æ¥çš„ç½‘é¡µå†…å®¹
	})


	c.Visit(urls)	//è®¿é—®æŒ‡å®šé“¾æ¥
}
/* æ£€æµ‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨
* fileName æ–‡ä»¶å
 */
func testCheckFileExist(filename string) bool {
	var exist = true
	if _, err := os.Stat(filename); os.IsNotExist(err) {
		exist = false
	}
	return exist
}
```

æ•ˆæœå›¾ï¼š

![go.0.0.56.png](./../Pictures/go.0.0.56.png)

<br/>

***
<br/><br/><br/>
> <h1 id="â€Œginæ¡†æ¶">â€Œginæ¡†æ¶</h1>

è·å–ginæ¡†æ¶çš„åŒ…ï¼š

```
go get github.com/gin-gonic/gin
```

<br/><br/><br/>
> <h2 id="æŠŠçˆ¬è™«ç¨‹åºè®¾ç½®æˆWebæœåŠ¡">æŠŠçˆ¬è™«ç¨‹åºè®¾ç½®æˆWebæœåŠ¡</h2>

æŠŠçˆ¬è™«ç¨‹åºè®¾ç½®æˆWebæœåŠ¡ã€‚å…·ä½“ä¿®æ”¹å¦‚ä¸‹ï¼šè¿è¡Œä¿®æ”¹åçš„çˆ¬è™«ç¨‹åºï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®â€œæœ¬æœºIPï¼šç«¯å£â€â€‹ï¼›å½“åœ¨ç½‘é¡µä¸Šçœ‹åˆ°æç¤ºä¿¡æ¯ï¼ˆâ€‹â€œå·²ç»æŠŠhttp://news.baidu.comçš„ç½‘é¡µå†…å®¹å…¨éƒ¨æŠ“å–ä¸‹æ¥ï¼Œè¯·æŸ¥çœ‹å½“å‰é¡¹ç›®ç›®å½•ä¸‹çš„news.txtæ–‡ä»¶ï¼â€â€‹ï¼‰æ—¶ï¼Œè¯´æ˜å·²ç»æŠŠhttp://news.baidu.comçš„ç½‘é¡µå†…å®¹å…¨éƒ¨æŠ“å–ä¸‹æ¥ï¼Œå¹¶å­˜å‚¨åœ¨å½“å‰é¡¹ç›®ç›®å½•ä¸‹çš„news.txtæ–‡ä»¶ä¸­ã€‚

ä¸ºäº†æ»¡è¶³ä¸Šè¿°çš„ä¿®æ”¹è¦æ±‚ï¼Œéœ€è¦ä¸‹è½½ç¬¬ä¸‰æ–¹åŒ…ginã€‚å¦‚å›¾19.8æ‰€ç¤ºï¼Œä¸‹è½½ginåŒ…çš„æ­¥éª¤å¦‚ä¸‹ã€‚

```
// æŠŠçˆ¬è™«ç¨‹åºè®¾ç½®æˆWebæœåŠ¡
func testCrawlerAppointWebpageAndSaveTxtV2() {
	// åˆå§‹åŒ–å¼•æ“
	engine := gin.Default()
	// æ³¨å†Œä¸€ä¸ªè·¯ç”±å’Œå¤„ç†å‡½æ•°
	engine.Any("/", WebRoot)
	// ç»‘å®šç«¯å£
	engine.Run(":9200")
}
// å¤„ç†è·¯ç”±å‡½æ•°
func WebRoot(context *gin.Context){
	// è°ƒç”¨ testCrawlerAppointWebpageAndSaveTxt()å‡½æ•°
	testCrawlerAppointWebpageAndSaveTxt("https://news.baidu.com")
	// è®¾ç½®ç½‘é¡µä¸Šçš„æ–‡æœ¬å†…å®¹
	context.String(http.StatusOK, "å·²ç»æŠŠhttp://news.baidu.com çš„ç½‘é¡µå†…å®¹å…¨éƒ¨æŠ“å–ä¸‹æ¥\n è¯·æŸ¥çœ‹å½“å‰é¡¹ç›®ç›®å½•ä¸‹çš„news.txtæ–‡æœ¬æ–‡ä»¶ï¼")
}

// å­˜å‚¨çˆ¬è™«æ–‡ä»¶
func testCrawlerAppointWebpageAndSaveTxt(urls string) {
	// åˆ›å»º Collector å¯¹è±¡
	c := colly.NewCollector()
	/* 
	* æ˜¯å¦æŠ“å–æŒ‡å®šé“¾æ¥çš„ç½‘é¡µå†…å®¹
	* åˆå§‹è®¾ç½®ä¸ºä¸æŠ“å–æŒ‡å®šé“¾æ¥çš„ç½‘é¡µå†…å®¹
	 */
	visited := false
	// ä½¿ç”¨ Collector å¯¹è±¡æŠ“å– URL
	c.OnResponse(func (r *colly.Response)  {
		if !visited {
			visited = true
			r.Request.Visit("/get?q=2")
		}
	})

	// æ–‡ä»¶çš„åˆ›å»ºå’ŒæŒç»­å†™å…¥
	filename := "news.txt"	// æ–‡ä»¶å
	var f *os.File
	var fileErr error 
	if testCheckFileExist(filename) {	// å¦‚æœæ–‡ä»¶å­˜åœ¨
		f, fileErr = os.OpenFile(filename, os.O_APPEND | os.O_WRONLY, 0666)	// æ‰“å¼€æ–‡ä»¶
		if fileErr != nil {
			fmt.Printf("âŒ æ‰“å¼€æ–‡ä»¶ news.txt å¤±è´¥ï¼š%v\n", fileErr)
		}
	} else {
		f,_ = os.Create(filename)	// åˆ›å»ºæ–‡ä»¶
		fmt.Println("ğŸ æ–°å»ºæ–‡ä»¶ news.txt")

	}
	defer f.Close()	// å…³é—­æ–‡ä»¶
	write := bufio.NewWriter(f)
	defer write.Flush()

	// å¯¹æŒ‡å®šé“¾æ¥ç½‘é¡µå†…å®¹è¿›è¡Œå¤„ç†
	c.OnHTML("a[href]", func (e *colly.HTMLElement)  {
		href := e.Text	// è·å–æŒ‡å®šé“¾æ¥çš„ç½‘é¡µå†…å®¹
		write.WriteString("ğŸ’ "+href+"\n")
		fmt.Println("ğŸ ç½‘é¡µå†…å®¹ï¼š",href)	// æ‰“å°æŒ‡å®šé“¾æ¥çš„ç½‘é¡µå†…å®¹
	})


	c.Visit(urls)	//è®¿é—®æŒ‡å®šé“¾æ¥
}
/* æ£€æµ‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨
* fileName æ–‡ä»¶å
 */
func testCheckFileExist(filename string) bool {
	var exist = true
	if _, err := os.Stat(filename); os.IsNotExist(err) {
		exist = false
	}
	return exist
}
```

**Log:**

```
ganghuang@GangHuangs-MacBook-Pro TestCrawlerBaidu % go run test_crawler_baidu.go
ganghuang@GangHuangs-MacBook-Pro TestCrawlerBaidu % go run test_crawler_baidu.go
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:   export GIN_MODE=release
 - using code:  gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /                         --> main.WebRoot (3 handlers)
[GIN-debug] POST   /                         --> main.WebRoot (3 handlers)
[GIN-debug] PUT    /                         --> main.WebRoot (3 handlers)
[GIN-debug] PATCH  /                         --> main.WebRoot (3 handlers)
[GIN-debug] HEAD   /                         --> main.WebRoot (3 handlers)
[GIN-debug] OPTIONS /                         --> main.WebRoot (3 handlers)
[GIN-debug] DELETE /                         --> main.WebRoot (3 handlers)
[GIN-debug] CONNECT /                         --> main.WebRoot (3 handlers)
[GIN-debug] TRACE  /                         --> main.WebRoot (3 handlers)
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.
[GIN-debug] Listening and serving HTTP on :9200
```

<br/>

æ­¤æ—¶ï¼ŒMacç³»ç»Ÿå¼¹å‡ºå¦‚å›¾19.9æ‰€ç¤ºçš„Macå®‰å…¨è­¦æŠ¥ã€‚é€‰ä¸­â€œå…¬ç”¨ç½‘ç»œâ€å¤é€‰æ¡†ï¼Œå•å‡»â€œå…è®¸è®¿é—®â€æŒ‰é’®ã€‚

æ‰“å¼€é»˜è®¤æµè§ˆå™¨ï¼ˆæ¯”å¦‚ï¼šSafariæµè§ˆå™¨ï¼‰ï¼Œè®¿é—®â€œæœ¬æœºIPï¼šç«¯å£â€â€‹ï¼ˆå³127.0.0.1:9200ï¼‰â€‹ï¼Œå³å¯çœ‹åˆ°å¦‚å›¾19.10æ‰€ç¤ºçš„æç¤ºä¿¡æ¯ã€‚è¿™æ®µç¨‹åºåœ¨å½“å‰é¡¹ç›®ç›®å½•ä¸‹ç”Ÿæˆnews.txtæ–‡ä»¶ã€‚å•å‡»news.txtï¼Œå³å¯çœ‹åˆ°æŠ“å–çš„ç½‘é¡µå†…å®¹ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚

![go.0.0.57.png](./../Pictures/go.0.0.57.png)

<br/>

***
<br/><br/><br/>
># <h1 id="cellnetç½‘ç»œåº“">[cellnetç½‘ç»œåº“](https://github.com/davyxu/cellnet)</h1>

cellnetçš„è®¾è®¡ç†å¿µæ˜¯ï¼šé«˜æ€§èƒ½ã€ç®€å•ã€æ–¹ä¾¿ã€å¼€ç®±å³ç”¨ï¼Œå¸Œæœ›å¼€å‘è€…èƒ½ä½¿ç”¨cellnetè¿…é€Ÿå¼€å±•ä¸šåŠ¡å¼€å‘ï¼Œè€Œæ— é¡»ä¸ºåº•å±‚æ€§èƒ½è°ƒä¼˜åŠæ¶æ„æ‰©å±•è€Œæ‹…å¿§ã€‚

[cellnetç½‘ç»œåº“](https://github.com/davyxu/cellnet)å¤šä¸ªç‰ˆæœ¬çš„è¿­ä»£ï¼Œæ— è®ºæ˜¯ä½œä¸ºåˆå­¦è€…å­¦ä¹ çš„èŒƒä¾‹ï¼Œè¿˜æ˜¯ä½œä¸ºç§ç”¨ã€å•†ç”¨é¡¹ç›®çš„åŸºç¡€æ„å»ºä¹ƒè‡³æ ¸å¿ƒæŠ€æœ¯å±‚å·²ç»åœ¨ä¸šå†…å¹¿å—äº†è§£åŠä½¿ç”¨ã€‚

- **ä¸»è¦ä½¿ç”¨é¢†åŸŸï¼š**
	- æ¸¸æˆæœåŠ¡å™¨
	- æ–¹ä¾¿å®šåˆ¶ç§æœ‰åè®®ï¼Œå¿«é€Ÿæ„å»ºé€»è¾‘æœåŠ¡å™¨ã€ç½‘å…³æœåŠ¡å™¨ã€æœåŠ¡å™¨é—´äº’è”äº’é€šã€å¯¹æ¥ç¬¬ä¸‰æ–¹SDKã€è½¬æ¢ç¼–ç åè®®ç­‰
	- ARMè®¾å¤‡
	- è®¾å¤‡é—´ç½‘ç»œé€šè®¯
	- è¯åˆ¸è½¯ä»¶
	- å†…éƒ¨RPC

<br/><br/><br/>
> <h2 id="cellnetç½‘ç»œåº“çš„æµç¨‹åŠæ¶æ„">cellnetç½‘ç»œåº“çš„æµç¨‹åŠæ¶æ„</h2>

- cellnetçš„ä¸»è¦å¤„ç†æµç¨‹å’Œç»„ä»¶ç”±ä¸‹é¢å‡ ä¸ªéƒ¨åˆ†ç»„æˆã€‚
	- Socketè¿æ¥ç®¡ç†ï¼šcellnetç½‘ç»œåº“ä½¿ç”¨è¿æ¥å™¨å’Œæ¥å—å™¨(Connectorã€Acceptor)ç®¡ç†Socketè¿æ¥ã€‚
	- ä¼šè¯(Session)ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿æ¥ä½¿ç”¨ä¼šè¯(Session)å¤„ç†æ”¶å‘åŒ…æµç¨‹ã€‚æ”¶å‘åŒ…çš„æµç¨‹å°†äº‹ä»¶é€šè¿‡äº‹ä»¶å›è°ƒ(cellnet.EventFunc)æ´¾å‘ã€‚
	-  åŒ…å¤„ç†(packet)ï¼šcellnetä¸­çš„packetåŒ…å¤„ç†ä¼šè¯æ”¶å‘æµç¨‹æ´¾å‘çš„äº‹ä»¶ï¼Œå®ç°å˜é•¿å°åŒ…çš„è§£æã€å¤„ç†å’Œæ”¶å‘ã€‚
	-  ç¼–ç å™¨ï¼šç”¨æˆ·çš„å°åŒ…ä½¿ç”¨ç¼–ç å™¨(Codec)è´Ÿè´£åŸå§‹å°åŒ…çš„å­—èŠ‚æ•°ç»„å’Œç”¨æˆ·æ¶ˆæ¯é—´çš„è½¬æ¢ã€‚
	-  æ¶ˆæ¯é˜Ÿåˆ—ï¼šå¯ä»¥å°†æ”¶åˆ°çš„æ¶ˆæ¯æŒ‰é¡ºåºæ’é˜Ÿå¹¶æä¾›ç»™ç”¨æˆ·è¿›è¡Œå¤„ç†ã€‚
	-  æ¶ˆæ¯å…ƒä¿¡æ¯(MessageMeta)ï¼šä¸ºæ‰€æœ‰çš„ç³»ç»Ÿæä¾›é™æ€çš„æ¶ˆæ¯æ‰©å±•ä¿¡æ¯ï¼Œå¦‚æ¶ˆæ¯çš„IDã€ç¼–ç å™¨ã€åˆ›å»ºæ–¹æ³•ç­‰ã€‚

![go.0.0.58.png](./../Pictures/go.0.0.58.png)

<br/>

***
<br/><br/><br/>
> <h1 id="å›¾è¡¨åº“â€”â€”go-chart">å›¾è¡¨åº“â€”â€”go-chart</h1>

å¸‚é¢ä¸Šæœ‰è¯¸å¤šçš„å¼€æºå›¾è¡¨åº“ï¼Œæ¯”å¦‚ç™¾åº¦å¼€æºçš„EChartsã€é˜¿é‡Œå¼€æºçš„BizChartsã€Chart.jsã€HighChartsã€G2ã€D3ã€Googleå‡ºå“çš„Google Chartsç­‰ï¼Œè¿™äº›å¼€æºçš„åº“åœ¨å…¼å®¹æ€§ã€æ‹“å±•æ€§ã€æ”¯æŒå›¾è¡¨çš„ç§ç±»ã€äº¤äº’ç­‰å±‚é¢å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œå…·ä½“çš„é€‰æ‹©è¦ç»“åˆå…·ä½“çš„æƒ…å†µï¼ˆæ¯”å¦‚å¼€å‘è€…é€‰æ‹©çš„æŠ€æœ¯æ ˆã€éœ€è¦æ”¯æŒçš„å›¾è¡¨ç§ç±»ç­‰å„æ–¹é¢ï¼‰â€‹ã€‚


å‚ç…§ä¹‹å‰çš„æ€æƒ³ï¼Œæœ¬èŠ‚å°†åŸºäºchart.jsæ„å»ºä¸€ä¸ªå®Œæ•´çš„å›¾è¡¨åº“go-chartï¼Œæ”¯æŒæŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ã€é¥¼å›¾ã€é›·è¾¾å›¾ã€æ•£ç‚¹å›¾ã€æ°”æ³¡å›¾ç­‰ã€‚

[å®Œæ•´ä»£ç åœ°å€](https://github.com/goecharts/go-chart)


<br/>

***
<br/><br/><br/>
># <h1 id="å›¾è¡¨åº“go-echarts">[å›¾è¡¨åº“go-echarts](https://github.com/go-echarts/go-echarts)</h1>

åŸºäºEChartså›¾è¡¨åº“é€æ­¥è®²è§£å¦‚ä½•æ„å»ºå›¾è¡¨ï¼Œæ•´ä½“çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š

- æ˜ç¡®EChartså¦‚ä½•æ„å»ºå›¾è¡¨ã€‚
- å»¶ä¼¸åˆ°ä½¿ç”¨æ¨¡æ¿å¼•æ“åŠ è½½åŠ¨æ€æ•°æ®çš„æ–¹å¼æ„å»ºå›¾è¡¨ã€‚
- æŠ½å–å…¬å…±çš„ç»“æ„ä½“ï¼Œæ–¹ä¾¿ç»„åˆå¤ç”¨ã€‚
- å„å›¾è¡¨ç±»å‹å¯¹è±¡å®ç°å®šä¹‰çš„æ¥å£(Interface)ã€‚

å½“ç„¶ï¼Œè¿˜æœ‰å¾ˆå¤šç»†èŠ‚æ²¡æœ‰æ¶‰åŠï¼Œä½†æ˜¯æ•´ä½“æ€æƒ³çš†æ˜¯å¦‚æ­¤ï¼Œå¦‚æœæƒ³åŸºäºEChartsæ„å»ºæ›´ä¸ºä¸°å¯Œçš„å›¾è¡¨ç±»å‹ï¼Œé‚£ä¹ˆå¯ä»¥æŸ¥çœ‹[go-echarts](https://github.com/go-echarts/go-echarts)ï¼Œå…¶ä¸­é‡‡ç”¨çš„æ€ç»´æ–¹å¼æ˜¯ç±»ä¼¼çš„ï¼Œè€Œå®ç°çš„åŠŸèƒ½æ›´åŠ å®Œå–„ã€‚


<br/>

***
<br/><br/><br/>
> <h1 id="packråº“å¤„ç†æ¨¡æ¿å¼•æ“å†…çš„æ–‡ä»¶">packråº“å¤„ç†æ¨¡æ¿å¼•æ“å†…çš„æ–‡ä»¶</h1>

packråº“èƒ½å¤Ÿæ¯”è¾ƒä¼˜é›…åœ°å¤„ç†æ¨¡æ¿å¼•æ“å†…çš„æ–‡ä»¶ã€‚

**ä¸‹è½½å‘½ä»¤å¦‚ä¸‹ï¼š**

```
go get -u github.com/gobuffalo/packr
```

<br/>

***
<br/><br/><br/>
> <h1 id="GJSONè§£æJSONæ•°æ®">GJSONè§£æJSONæ•°æ®</h1>

GJSONæ˜¯ä¸€ä¸ªæ›´ä¾¿æ·çš„è§£æJSONæ•°æ®çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæ”¯æŒé“¾å¼æ“ä½œï¼Œèƒ½è®©è¯»è€…éå¸¸æ–¹ä¾¿åœ°è·å–ä»»æ„æ•°æ®ã€‚

**ä¸‹è½½**

```
go get -u github.com/tidwall/gjson
```


<br/>

***
<br/><br/><br/>
> <h1 id="IrisWebæ¡†æ¶">Iris Webæ¡†æ¶</h1>

<br/><br/><br/>
> <h2 id="IrisWebæ¡†æ¶è¯¦è§£">Iris Webæ¡†æ¶è¯¦è§£</h2>

- **1.ä»€ä¹ˆæ˜¯ Irisï¼Ÿ**

[Iris](https://www.iris-go.com/) æ˜¯ Go è¯­è¨€ä¸­çš„ä¸€ä¸ªé«˜æ€§èƒ½ã€åŠŸèƒ½ä¸°å¯Œçš„ Web æ¡†æ¶ï¼Œæä¾›äº†å¼ºå¤§çš„è·¯ç”±ã€MVC æ”¯æŒã€ä¸­é—´ä»¶æœºåˆ¶å’Œ WebSocket å¤„ç†èƒ½åŠ›ã€‚å®ƒæ˜¯ Go ç”Ÿæ€ä¸­**æœ€å¿«**çš„ Web æ¡†æ¶ä¹‹ä¸€ï¼Œå¹¶æ”¯æŒæ‰©å±•æ€§å¼ºçš„åŠŸèƒ½ï¼Œå¦‚ä¾èµ–æ³¨å…¥ã€JWT è®¤è¯ã€å¤šç§æ¨¡æ¿å¼•æ“ã€æ•°æ®åº“é›†æˆç­‰ã€‚

<br/>

- **2.Iris çš„ç‰¹ç‚¹**
	- **é«˜æ€§èƒ½**ï¼šIris å·ç§°æ˜¯ **æœ€å¿«çš„ Go Web æ¡†æ¶**ï¼Œæ¯” `gin` æ›´å¿«ï¼ˆå®˜æ–¹ Benchmark æµ‹è¯•ï¼‰ã€‚
	- **ç®€æ´æ˜“ç”¨**ï¼šAPI è®¾è®¡æ¸…æ™°ï¼Œä»£ç é£æ ¼ç®€æ´ã€‚
	- **MVC è®¾è®¡æ¨¡å¼**ï¼šæ”¯æŒ `Model-View-Controller` æ¶æ„ï¼Œé€‚ç”¨äºå¤§å‹é¡¹ç›®ã€‚
	- **å†…ç½®ä¸­é—´ä»¶**ï¼šæ”¯æŒ `JWT`ã€`CORS`ã€`æ—¥å¿—`ã€`Gzip` å‹ç¼©ç­‰ã€‚
	- **æ”¯æŒ WebSocket**ï¼šè½»æ¾æ„å»ºå®æ—¶åº”ç”¨ï¼Œå¦‚èŠå¤©å®¤ã€æ¨é€æœåŠ¡ç­‰ã€‚
	- **å¤šç§è§†å›¾å¼•æ“**ï¼šæ”¯æŒ HTMLã€Pugã€Djangoã€Markdownã€Reactã€Vue SSR ç­‰ã€‚
	- **ä¾èµ–æ³¨å…¥**ï¼šæ”¯æŒ `DIï¼ˆDependency Injectionï¼‰`ï¼Œæ–¹ä¾¿ç®¡ç†æœåŠ¡ã€‚

<br/>

- **3. å®‰è£… Iris**

å¯ä»¥ä½¿ç”¨ `go get` å®‰è£…ï¼š

```sh
go get github.com/kataras/iris/v12
```

æˆ–è€…ä½¿ç”¨ `go mod`ï¼š

```sh
go mod init myproject
go get github.com/kataras/iris/v12
```

<br/><br/><br/>
> <h2 id="å¿«é€Ÿå…¥é—¨">å¿«é€Ÿå…¥é—¨</h2>

```go
package main

import (
	"fmt"
	"github.com/kataras/iris/v12"
)

func main() {
	app := iris.New()

	// å®šä¹‰è·¯ç”±
	app.Get("/", func(ctx iris.Context) {
		ctx.WriteString("Hello, Iris!")
	})

	// å¯åŠ¨æœåŠ¡å™¨
	err := app.Listen(":8080")
	if err != nil {
		fmt.Println("æœåŠ¡å™¨å¯åŠ¨å¤±è´¥:", err)
	}
}
```

**è¿è¡Œ**

```sh
go run main.go
```

æµè§ˆå™¨è®¿é—® `http://localhost:8080/`ï¼Œå¯ä»¥çœ‹åˆ°ï¼š

```
Hello, Iris!
```

<br/><br/>
æˆ–è€…å¦‚ä¸‹ï¼š

```
package main

import "github.com/kataras/iris/v12"

func main() {
	practiceIrisWebLibV0_get()
}

func practiceIrisWebLibV0_get() {
	// é»˜è®¤æœåŠ¡å¼•æ“
	app := iris.Default()
	// è·¯ç”±ï¼š /ping
	// æ§åˆ¶é€»è¾‘ï¼š è¿”å›JSONæ ¼å¼å†…å®¹
	app.Get("/ping", func (ctx iris.Context)  {
		ctx.JSON(iris.Map{
			"message": "pong",
		})
	})
	// listen and serve on http://0.0.0.0:8080
	app.Run(iris.Addr(":8080"))
}
```

æ§åˆ¶å°è¿è¡Œï¼š

```
go run PLrisWebLibV0.go
[DBUG] 2025/02/02 12:02 Log level set to "debug"
[DBUG] 2025/02/02 12:02 Using <UUID4> to identify requests
[DBUG] 2025/02/02 12:02 API: 1 registered route (1 GET)
GET: /ping (./PLrisWebLibV0.go:23)

Iris Version: 12.2.11

Now listening on: 
> Network:  http://192.168.0.105:8080
> Local:    http://localhost:8080
Application started. Press CTRL+C to shut down.
```

åœ¨æµè§ˆå™¨è¾“å…¥ï¼š

```
http://localhost:8080/ping
```

å‡ºç°ï¼š

```
{"message":"pong"}
```


<br/><br/>

å¦‚ä½•è·å–åˆ°è·¯å¾„ä¸­çš„å‚æ•°ï¼Ÿé€šè¿‡iris.Contextã€‚

```
// é»˜è®¤æœåŠ¡å¼•æ“
app := iris.Default()
// è·¯ç”±ï¼š /ping
// æ§åˆ¶é€»è¾‘ï¼š è¿”å›JSONæ ¼å¼å†…å®¹
app.Get("/ping", func (ctx iris.Context)  {
	// å…¶ä»–çš„ç±»å‹éƒ½æä¾›äº†ç›¸åº”çš„æ–¹æ³•
	ctx.Params().GetInt("id")
})
```


<br/><br/><br/>
> <h2 id="è·¯ç”±">è·¯ç”±</h2>

- **åŸºæœ¬è·¯ç”±**

```go
app.Get("/hello", func(ctx iris.Context) {
	ctx.WriteString("Hello, World!")
})
```

**åŠ¨æ€è·¯ç”±**

```go
app.Get("/user/{id:int}", func(ctx iris.Context) {
	id := ctx.Params().GetIntDefault("id", 0)
	ctx.WriteString(fmt.Sprintf("User ID: %d", id))
})
```

- è®¿é—® `http://localhost:8080/user/123` è¿”å› `User ID: 123`

<br/><br/>

**é€šé…ç¬¦è·¯ç”±**

```go
app.Get("/files/{filepath:path}", func(ctx iris.Context) {
	filepath := ctx.Params().Get("filepath")
	ctx.WriteString("File path: " + filepath)
})
```

- è®¿é—® `http://localhost:8080/files/images/photo.jpg` è¿”å› `File path: images/photo.jpg`

<br/><br/><br/>
> <h2 id="ä¸­é—´ä»¶">ä¸­é—´ä»¶</h2>

- **å…¨å±€ä¸­é—´ä»¶**

```go
app.Use(func(ctx iris.Context) {
	ctx.Application().Logger().Infof("è¯·æ±‚è·¯å¾„: %s", ctx.Path())
	ctx.Next()
})
```

<br/>

**å±€éƒ¨ä¸­é—´ä»¶**

```go
app.Get("/admin", authMiddleware, func(ctx iris.Context) {
	ctx.WriteString("Welcome to Admin Panel")
})

func authMiddleware(ctx iris.Context) {
	token := ctx.GetHeader("Authorization")
	if token != "valid-token" {
		ctx.StatusCode(iris.StatusForbidden)
		ctx.WriteString("Unauthorized")
		return
	}
	ctx.Next()
}
```

- è®¿é—® `http://localhost:8080/admin`ï¼Œéœ€è¦æºå¸¦ `Authorization: valid-token` å¤´ï¼Œå¦åˆ™è¿”å› `Unauthorized`ã€‚

<br/><br/><br/>
> <h2 id="MVCæ¨¡å¼">MVC æ¨¡å¼</h2>

Iris æ”¯æŒ MVC ç»“æ„ï¼Œè®©ä»£ç æ›´æ¸…æ™°ã€‚

**åˆ›å»º MVC æ§åˆ¶å™¨**

```go
package main

import (
	"github.com/kataras/iris/v12"
)

type UserController struct{}

func (c *UserController) Get() string {
	return "Get All Users"
}

func (c *UserController) GetBy(id int) string {
	return fmt.Sprintf("User ID: %d", id)
}

func main() {
	app := iris.New()
	mvc.New(app.Party("/users")).Handle(new(UserController))
	app.Listen(":8080")
}
```

- è®¿é—® `http://localhost:8080/users` è¿”å› `Get All Users`

- è®¿é—® `http://localhost:8080/users/10` è¿”å› `User ID: 10`

<br/><br/><br/>
> <h2 id="è§£æJSONè¯·æ±‚">è§£æJSONè¯·æ±‚</h2>

```go
app.Post("/json", func(ctx iris.Context) {
	var user struct {
		Name  string `json:"name"`
		Email string `json:"email"`
	}

	if err := ctx.ReadJSON(&user); err != nil {
		ctx.StatusCode(iris.StatusBadRequest)
		ctx.WriteString("Invalid JSON")
		return
	}

	ctx.JSON(iris.Map{
		"message": "User Created",
		"user":    user,
	})
})
```
**æµ‹è¯•**

```sh
curl -X POST "http://localhost:8080/json" \
     -H "Content-Type: application/json" \
     -d '{"name": "Alice", "email": "alice@example.com"}'
```

è¿”å›ï¼š

```json
{
    "message": "User Created",
    "user": {
        "name": "Alice",
        "email": "alice@example.com"
    }
}
```

<br/><br/><br/>
> <h2 id="é›†æˆGORM">é›†æˆ GORM</h2>

```go
package main

import (
	"fmt"
	"github.com/kataras/iris/v12"
	"gorm.io/driver/mysql"
	"gorm.io/gorm"
)

type User struct {
	ID    uint   `gorm:"primaryKey"`
	Name  string `json:"name"`
	Email string `json:"email"`
}

var db *gorm.DB

func main() {
	var err error
	dsn := "root:password@tcp(127.0.0.1:3306)/test_db?charset=utf8mb4&parseTime=True&loc=Local"
	db, err = gorm.Open(mysql.Open(dsn), &gorm.Config{})
	if err != nil {
		panic("æ•°æ®åº“è¿æ¥å¤±è´¥: " + err.Error())
	}

	db.AutoMigrate(&User{})

	app := iris.New()

	app.Post("/users", func(ctx iris.Context) {
		var user User
		if err := ctx.ReadJSON(&user); err != nil {
			ctx.StatusCode(iris.StatusBadRequest)
			return
		}
		db.Create(&user)
		ctx.JSON(user)
	})

	app.Get("/users", func(ctx iris.Context) {
		var users []User
		db.Find(&users)
		ctx.JSON(users)
	})

	app.Listen(":8080")
}
```

- `POST /users` åˆ›å»ºç”¨æˆ·
- `GET /users` è·å–æ‰€æœ‰ç”¨æˆ·

<br/><br/><br/>
> <h2 id="éƒ¨ç½²">éƒ¨ç½²</h2>

**ç¼–è¯‘**

```sh
go build -o app main.go
```

**ä½¿ç”¨ `systemd` è¿è¡Œ**

åˆ›å»º `/etc/systemd/system/iris.service`ï¼š

```ini
[Unit]
Description=Iris Web Server
After=network.target

[Service]
ExecStart=/path/to/app
Restart=always
User=root

[Install]
WantedBy=multi-user.target
```
```sh
systemctl start iris
systemctl enable iris
```

<br/><br/>

### **æ€»ç»“**

| **åŠŸèƒ½** | **Iris æ”¯æŒ** |
|----------|--------------|
| é«˜æ€§èƒ½ | âœ… |
| è·¯ç”± | âœ… |
| MVC | âœ… |
| WebSocket | âœ… |
| ä¸­é—´ä»¶ | âœ… |
| è§†å›¾æ¨¡æ¿ | âœ… |
| ä¾èµ–æ³¨å…¥ | âœ… |
| æ•°æ®åº“é›†æˆ | âœ… |

Iris é€‚ç”¨äºé«˜æ€§èƒ½ Web åº”ç”¨ï¼Œæ˜¯ `Gin` çš„æœ‰åŠ›ç«äº‰è€…ã€‚å¦‚æœä½ éœ€è¦æ›´å¼ºå¤§çš„ MVC ç»“æ„ï¼ŒIris å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼ğŸš€


<br/>

***
<br/><br/><br/>
> <h1 id=""></h1>

è¦ä½¿ç”¨å¥½ORMï¼Œå…¶æ ¸å¿ƒè¿˜æ˜¯æŒæ¡å…³ç³»å‹æ•°æ®åº“çš„åŸç†ã€ä¼˜åŒ–ã€ç´¢å¼•ç­‰ã€‚å—è‡ªèº«é¡¹ç›®æ‰€é™ï¼Œè¯»è€…ä½¿ç”¨åŸºæœ¬çš„SQLåŠŸèƒ½å°±èƒ½å®Œæˆä»»åŠ¡ï¼Œå¦‚æœæ•°æ®é‡å¤§äº†ï¼Œé‚£ä¹ˆåŠ¿å¿…ä¼šé‡åˆ°æŸ¥è¯¢ç¼“æ…¢çš„é—®é¢˜ï¼›å¦‚æœæœåŠ¡å¤±è”ï¼Œé‚£ä¹ˆåŠ¿å¿…ä¼šé‡åˆ°æ•°æ®ä¸¢å¤±çš„é—®é¢˜ã€‚è¿™äº›æ‰æ˜¯å…³ç³»å‹æ•°æ®åº“ä½¿ç”¨çš„æ ¸å¿ƒï¼Œè¯»è€…éœ€è¦æ‡‚å¾—ç´¢å¼•çš„åŸç†ã€ç´¢å¼•çš„ä¼˜åŒ–ï¼Œæ‰èƒ½è®¾è®¡æ›´åŠ å¥å£®çš„æ¨¡å‹ï¼Œå®Œæˆä»»åŠ¡çš„åŒæ—¶ä½¿ç³»ç»Ÿå…·å¤‡æŒç»­è¿­ä»£çš„èƒ½åŠ›ã€‚

å»ºè®®è¯»è€…ç†Ÿç»ƒæŒæ¡ç¼–ç¨‹è¯­è¨€çš„åŒæ—¶å¤šç ”ç©¶åŸºç¡€åŸç†ï¼Œè¿™äº›åŸç†çš„æŒæ¡æ‰æ˜¯è¯»è€…åº”å¯¹ç¹å¤å˜åŒ–çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚

> <h1 id="Redis">Redis</h1>

Redisï¼ˆRemote Dictionary Serviceï¼Œè¿œç¨‹å­—å…¸æœåŠ¡ï¼‰æ˜¯äº’è”ç½‘é¢†åŸŸä½¿ç”¨å¹¿æ³›çš„å­˜å‚¨ä¸­é—´ä»¶ï¼Œä»¥å…¶é«˜æ€§èƒ½å’Œä¸°å¯Œçš„å®¢æˆ·ç«¯åº“åœ¨è½¯ä»¶é¢†åŸŸå¤§æ”¾å¼‚å½©ã€‚å‡ ä¹æ‰€æœ‰çš„äº’è”ç½‘åº”ç”¨éƒ½å¯ä»¥ä½¿ç”¨Redisï¼Œè¿˜æ˜¯ä»¥ç™¾åº¦çƒ­ç‚¹äº‹ä»¶æ’è¡Œæ¦œä¸ºä¾‹ï¼Œå…¶åå°å°±å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæœ‰åºé›†åˆzsetæ¥å®ç°ï¼Œå†æŒ‰åˆ†æ•°æ’åï¼Œåˆ†æ•°é«˜çš„çƒ­ç‚¹äº‹ä»¶æ’åé å‰ï¼›å†æ¯”å¦‚å¾®åšçš„ç‚¹èµã€è½¬å‘ã€è¯„è®ºç­‰è®¡æ•°çš„åŠŸèƒ½ï¼Œéƒ½å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²ç±»å‹çš„INCRè‡ªå¢åŠŸèƒ½ã€‚

- Redisæ ¸å¿ƒçš„åŸºæœ¬æ•°æ®ç»“æ„æœ‰5ç§ï¼š
	- åˆ†åˆ«ä¸ºstringï¼ˆå­—ç¬¦ä¸²ï¼‰â€‹ã€listï¼ˆåˆ—è¡¨ï¼‰â€‹ã€setï¼ˆé›†åˆï¼‰â€‹ã€hashï¼ˆå“ˆå¸Œï¼‰å’Œzsetï¼ˆæœ‰åºé›†åˆï¼‰â€‹ã€‚
	- ç†Ÿç»ƒæŒæ¡è¿™5ç§åŸºæœ¬æ•°æ®ç»“æ„çš„ä½¿ç”¨è‡³å…³é‡è¦ã€‚

Redisæä¾›äº†ä¸€å¥—æ“ä½œè¿™5ç§æ•°æ®ç»“æ„çš„å‘½ä»¤ï¼ŒåŒ…å«è¿›è¡Œæ•°æ®çš„æ–°å¢ã€åˆ é™¤ã€æ›´æ”¹ã€æŸ¥è¯¢ç­‰æ“ä½œã€‚

ä½¿ç”¨Redisé€šå¸¸é‡‡ç”¨å®¢æˆ·ç«¯/æœåŠ¡å™¨ç«¯æ¶æ„çš„æ¨¡å¼ï¼Œå®¢æˆ·ç«¯å¯ä»¥è¿æ¥æœ¬åœ°çš„RedisæœåŠ¡ï¼Œä¹Ÿå¯ä»¥è¿æ¥è¿œç¨‹çš„RedisæœåŠ¡ï¼Œä¸è¿‡æˆ‘ä»¬ä»ç„¶æ¨èRedisä»¥å®¹å™¨çš„å½¢å¼è¿è¡Œã€‚

<br/>

**ä¸‹è½½ï¼š**

```
go get github.com/gomodule/redigo/redis
```

<br/><br/><br/>
> <h2 id="GORMå’ŒXORMè¯¦ä»‹">GORMå’ŒXORMè¯¦ä»‹</h2>

**GORM** å’Œ **XORM** æ˜¯ Go è¯­è¨€ä¸­å¸¸ç”¨çš„ ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ¡†æ¶ï¼Œå®ƒä»¬éƒ½ç”¨äºæ“ä½œæ•°æ®åº“ï¼Œä½†åœ¨è®¾è®¡ç†å¿µã€æ˜“ç”¨æ€§ã€æ€§èƒ½ç­‰æ–¹é¢æœ‰æ‰€ä¸åŒã€‚

***

- **1. GORM vs XORM æ¦‚è§ˆ**

| ç‰¹æ€§         | GORM | XORM |
|-------------|------|------|
| **æ´»è·ƒåº¦** | ğŸ”¥ éå¸¸æ´»è·ƒï¼ˆGitHub 49k+ Starï¼‰ | ğŸš€ æ´»è·ƒï¼ˆGitHub 8k+ Starï¼‰ |
| **ä½¿ç”¨éš¾åº¦** | ğŸŒŸğŸŒŸğŸŒŸğŸŒŸï¼ˆåŠŸèƒ½å¼ºå¤§ï¼Œä½†å­¦ä¹ æ›²çº¿è¾ƒé™¡ï¼‰ | ğŸŒŸğŸŒŸğŸŒŸï¼ˆAPI è®¾è®¡æ›´ç®€æ´ï¼Œæ˜“ä¸Šæ‰‹ï¼‰ |
| **æ€§èƒ½** | ğŸŸ¡ ç›¸å¯¹è¾ƒæ…¢ï¼ˆåŠŸèƒ½ä¸°å¯Œï¼Œåå°„è¾ƒå¤šï¼‰ | ğŸŸ¢ æ›´å¿«ï¼ˆåŸºäºä»£ç ç”Ÿæˆä¼˜åŒ–ï¼Œè¾ƒå°‘åå°„ï¼‰ |
| **æ•°æ®åº“æ”¯æŒ** | âœ… MySQLã€PostgreSQLã€SQLiteã€SQL Server ç­‰ | âœ… åŒæ ·æ”¯æŒ MySQLã€PostgreSQLã€SQLiteã€SQL Server |
| **è‡ªåŠ¨è¿ç§»** | âœ… å†…ç½® `AutoMigrate`ï¼ˆé€‚åˆå¿«é€Ÿå¼€å‘ï¼‰ | âŒ æ²¡æœ‰è‡ªåŠ¨è¿ç§» |
| **é¢„åŠ è½½** | âœ… `Preload()`ã€`Joins()` | âœ… `Join()` |
| **äº‹åŠ¡** | âœ… `Begin()`, `Commit()`, `Rollback()` | âœ… `Transaction()` |
| **è½¯åˆ é™¤** | âœ… `gorm.DeletedAt` | âœ… `deleted` æ–¹å¼ |
| **ç»“æ„ä½“æ ‡ç­¾** | `gorm:"column:id;primaryKey"` | `xorm:"'id' pk"` |
| **æ”¯æŒ JSON ç»“æ„** | âœ…ï¼ˆé€šè¿‡ `json` è§£æï¼‰ | âœ…ï¼ˆæ”¯æŒ `JSON` å­—æ®µå­˜å‚¨ï¼‰ |


<br/><br/>
> <h3 id="GORMä½¿ç”¨">GORMä½¿ç”¨</h4>

<br/><br/>
> <h3 id="GORMå®šä¹‰æ¨¡å‹"> GORMå®šä¹‰æ¨¡å‹</h3>

```go
type User struct {
    gorm.Model  // æä¾› IDã€CreatedAtã€UpdatedAtã€DeletedAt
    Name  string `gorm:"size:100"`
    Age   int
}
```

<br/><br/>
> <h3 id="GORMåˆå§‹åŒ–æ•°æ®åº“"> GORM åˆå§‹åŒ–æ•°æ®åº“ </h3>

```go
db, err := gorm.Open(mysql.Open("root:password@tcp(127.0.0.1:3306)/test"), &gorm.Config{})
if err != nil {
    panic(err)
}

// è‡ªåŠ¨è¿ç§»
db.AutoMigrate(&User{})
```

<br/><br/>
> <h3 id="GORMæ’å…¥æ•°æ®"> GORMæ’å…¥æ•°æ® </h3>

```go
user := User{Name: "Alice", Age: 25}
db.Create(&user)
```


<br/><br/>
> <h3 id="GORMæŸ¥è¯¢æ•°æ®"> GORMæŸ¥è¯¢æ•°æ® </h3>

```go
var user User
db.First(&user, "name = ?", "Alice")
```

<br/>

**å¤šæ¡æŸ¥è¯¢**

```go
var users []User
db.Where("age > ?", 20).Find(&users)
```

<br/><br/>
> <h3 id="GORMæ›´æ–°æ•°æ®">GORMæ›´æ–°æ•°æ®</h3>

```go
db.Model(&user).Update("age", 30)
```

<br/><br/>
> <h3 id="GORMåˆ é™¤æ•°æ®">GORMåˆ é™¤æ•°æ®</h3>

```go
db.Delete(&user)
```


<br/><br/>
> <h3 id="XORMä½¿ç”¨"> XORMä½¿ç”¨</h4>

<br/><br/>
> <h3 id="XORMå®šä¹‰æ¨¡å‹"> XORMå®šä¹‰æ¨¡å‹</h3>

```go
type User struct {
    ID    int64  `xorm:"pk autoincr"` // ä¸»é”® & è‡ªå¢
    Name  string `xorm:"varchar(100)"`
    Age   int
}
```

<br/><br/>
> <h3 id="XORMåˆå§‹åŒ–æ•°æ®åº“">XORMåˆå§‹åŒ–æ•°æ®åº“ </h3>

```go
engine, err := xorm.NewEngine("mysql", "root:password@tcp(127.0.0.1:3306)/test")
if err != nil {
    panic(err)
}

// åˆ›å»ºè¡¨
err = engine.Sync2(new(User))
```

<br/><br/>
> <h3 id="XORMæ’å…¥æ•°æ®"> XORMæ’å…¥æ•°æ® </h3>

```go
user := User{Name: "Alice", Age: 25}
_, err := engine.Insert(&user)
```


<br/><br/>
> <h3 id="XORMæŸ¥è¯¢æ•°æ®"> XORMæŸ¥è¯¢æ•°æ® </h3>

```go
var user User
_, err := engine.Where("name = ?", "Alice").Get(&user)
```

<br/>

**å¤šæ¡æ•°æ®æŸ¥è¯¢**

```go
var users []User
err := engine.Where("age > ?", 20).Find(&users)
```

<br/><br/>
> <h2 id="é¡¹ç›®å®è·µ1-JOIN(select))"> é¡¹ç›®å®è·µ1-JOIN(select)) </h2>

```
func (engine *Engine) Join(joinOperator string, tablename interface{}, condition string, args ...interface{}) *Session {
	session := engine.NewSession()
	session.isAutoClose = true
	return session.Join(joinOperator, tablename, condition, args...)
}
```

**ä¸Šè¿°ä»£ç å¦‚ä½•ä½¿ç”¨ï¼Ÿè¯¦è§£**

<br/><br/>

- **ğŸ“Œ `Join` æ–¹æ³•è¯¦è§£**

è¿™ä¸ª `Join` æ–¹æ³•å±äº **`Engine` ç»“æ„ä½“**ï¼Œç”¨äº **æ‰§è¡Œ SQL JOIN è¯­å¥**ã€‚å®ƒé€šå¸¸ç”¨äº ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰åº“ï¼Œä¾‹å¦‚ `xorm`ã€‚

<br/>

- **ğŸ”¹ ä»£ç è§£æ**

```go
func (engine *Engine) Join(joinOperator string, tablename interface{}, condition string, args ...interface{}) *Session {
	session := engine.NewSession() // åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“ä¼šè¯
	session.isAutoClose = true     // è®¾ç½®ä¼šè¯è‡ªåŠ¨å…³é—­
	return session.Join(joinOperator, tablename, condition, args...) // è°ƒç”¨ Session çš„ Join æ–¹æ³•
}
```

- **1ï¸âƒ£ `engine.NewSession()`**
	- **åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“ä¼šè¯**ï¼Œç”¨äºæ‰§è¡Œ SQL è¯­å¥ã€‚
	- `engine` å¯èƒ½æ˜¯ **ORM çš„æ ¸å¿ƒå¯¹è±¡**ï¼Œç”¨äºç®¡ç†æ•°æ®åº“è¿æ¥ã€‚

<br/>

- **2ï¸âƒ£ `session.isAutoClose = true`**
	- **è‡ªåŠ¨å…³é—­æ•°æ®åº“ä¼šè¯**ï¼Œé˜²æ­¢è¿æ¥æ³„æ¼ã€‚

<br/>

- **3ï¸âƒ£ `session.Join(joinOperator, tablename, condition, args...)`**
	- **è°ƒç”¨ `Session` çš„ `Join` æ–¹æ³•**ï¼Œç”¨äºæ‰§è¡Œ SQL `JOIN` æŸ¥è¯¢ã€‚
	- `joinOperator`ï¼šæŒ‡å®š JOIN ç±»å‹ï¼ˆå¦‚ `"INNER"`, `"LEFT"`, `"RIGHT"`ï¼‰ã€‚
	- `tablename`ï¼šè¦ JOIN çš„è¡¨åï¼ˆå¯èƒ½æ˜¯ `string` æˆ– `struct`ï¼‰ã€‚
	- `condition`ï¼šJOIN æ¡ä»¶ï¼Œä¾‹å¦‚ `"a.id = b.user_id"`ã€‚
	- `args...`ï¼šæ¡ä»¶å‚æ•°ï¼ˆå¯é€‰ï¼‰ã€‚

<br/>

- **ğŸ”¹ æ¥è‡ª ORM åº“**ï¼ˆä¸€ä¸ª Go è¯­è¨€çš„ ORM åº“ï¼‰ã€‚

åœ¨ `xorm` ä¸­ï¼Œ`Join` æ–¹æ³•ç”¨äº **æ‰§è¡Œ SQL JOIN è¯­å¥**ï¼š

```go
func (session *Session) Join(joinOperator string, tablename interface{}, condition string, args ...interface{}) *Session
```

æ¥è‡ª

ğŸ“Œ **ç¤ºä¾‹ï¼šä½¿ç”¨ `xorm` æ‰§è¡Œ `JOIN`**

```go
engine := xorm.NewEngine("mysql", "user:password@/dbname")

var users []User
err := engine.Join("INNER", "order", "user.id = order.user_id").
              Where("user.age > ?", 18).
              Find(&users)

if err != nil {
    log.Fatal(err)
}
```
ğŸ”¹ **ç›¸å½“äºæ‰§è¡Œçš„ SQL**ï¼š

```sql
SELECT * FROM user
INNER JOIN order ON user.id = order.user_id
WHERE user.age > 18;
```

---

## **ğŸ“Œ ä½œç”¨**
1. **å°è£… `JOIN` é€»è¾‘**ï¼Œæ–¹ä¾¿ ORM è¿›è¡Œå…³è”æŸ¥è¯¢ã€‚
2. **åˆ›å»ºä¼šè¯å¹¶è‡ªåŠ¨å…³é—­**ï¼Œé¿å…è¿æ¥æ³„æ¼ã€‚
3. **ç”¨äº SQL å…³è”æŸ¥è¯¢**ï¼ˆ`INNER JOIN`ã€`LEFT JOIN`ã€`RIGHT JOIN` ç­‰ï¼‰ã€‚

---

## **ğŸ“Œ æ€»ç»“**
- è¿™ä¸ªæ–¹æ³•å±äº **`xorm` æˆ–ç±»ä¼¼ ORM åº“**ã€‚
- ä¸»è¦ä½œç”¨æ˜¯ **æ‰§è¡Œ SQL JOIN è¯­å¥**ï¼Œå°è£… `Session.Join()` é€»è¾‘ã€‚
- **è‡ªåŠ¨ç®¡ç†æ•°æ®åº“ä¼šè¯**ï¼Œé˜²æ­¢è¿æ¥æ³„æ¼ã€‚
- é€‚ç”¨äº **å…³è”æŸ¥è¯¢**ï¼ˆå¦‚ `user` å’Œ `order` è¡¨çš„å…³è”ï¼‰ã€‚

ğŸš€ **é€‚åˆç”¨åœ¨ ORM æŸ¥è¯¢æ—¶ï¼Œç®€åŒ– SQL JOIN é€»è¾‘ï¼**


<br/><br/>
> <h2 id="é¡¹ç›®å®è·µ2-where(select)">é¡¹ç›®å®è·µ2-where(select)</h2>

- **å…ˆçœ‹é¡¹ç›®ä¸­çš„ä¸€æ®µä»£ç ï¼š**

**database_v1.goæ–‡ä»¶**

```
var BeeQuickDatabase *xorm.Engine
```

<br/>

**controller.goæ–‡ä»¶ä½¿ç”¨**

```go

var vipMember model_v1.VipMember

_, dbErr := database_v1.BeeQuickDatabase.Where("level_name = ?", strings.ToUpper("v0")).Get(&vipMember); dbErr != nil {
		return account, error_v1.ErrorV1{
			Code:    http.StatusBadRequest,
			Message: dbErr.Error(),
			Detail:  "ä¼šå‘˜ç­‰çº§æœªå­˜åœ¨",
		}
	}
```

**`ä½œç”¨ï¼š`xorm ORM** è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢ï¼Œä¸»è¦ç”¨äºæŸ¥è¯¢ vipMember æ˜¯å¦å­˜åœ¨ã€‚

<br/>


- **ğŸ”¹ ä»£ç è§£æ**
	- **ğŸ“Œ `database_v1.go`**

```go
var BeeQuickDatabase *xorm.Engine
```
- ğŸ“Œ **å®šä¹‰ `BeeQuickDatabase` ä½œä¸ºå…¨å±€æ•°æ®åº“å¼•æ“**
	- **`xorm.Engine`** æ˜¯ `xorm` ORM çš„æ•°æ®åº“è¿æ¥å¯¹è±¡ã€‚
	- è¯¥å˜é‡åœ¨ **åº”ç”¨å¯åŠ¨æ—¶** è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶åœ¨å…¶ä»–æ–‡ä»¶ä¸­ **ç›´æ¥ä½¿ç”¨**ã€‚

<br/>

- **ğŸ“Œ `controller.go`**

```go
var vipMember model_v1.VipMember

_, dbErr := database_v1.BeeQuickDatabase.Where("level_name = ?", strings.ToUpper("v0")).Get(&vipMember)
if dbErr != nil {
    return account, error_v1.ErrorV1{
        Code:    http.StatusBadRequest,
        Message: dbErr.Error(),
        Detail:  "ä¼šå‘˜ç­‰çº§æœªå­˜åœ¨",
    }
}
```

- **1ï¸âƒ£ `database_v1.BeeQuickDatabase.Where("level_name = ?", strings.ToUpper("v0")).Get(&vipMember)`**
	- **æŸ¥è¯¢ `vipMember` æ˜¯å¦å­˜åœ¨**ï¼š
	  - **`Where("level_name = ?", strings.ToUpper("v0"))`**ï¼šæŸ¥è¯¢ `level_name` æ˜¯å¦ç­‰äº `"V0"`ï¼ˆè½¬å¤§å†™ï¼‰ã€‚
	  - **`Get(&vipMember)`**ï¼š
	    - **`vipMember` ç»“æ„ä½“**ä¼šè¢«å¡«å……æŸ¥è¯¢ç»“æœã€‚
	    - **è¿”å› `true/false`**ï¼šå¦‚æœæŸ¥è¯¢åˆ°æ•°æ®ï¼Œåˆ™è¿”å› `true`ï¼Œå¦åˆ™è¿”å› `false`ã€‚
	
- **2ï¸âƒ£ `if dbErr != nil {}`**
	- **æ£€æŸ¥æ˜¯å¦å‘ç”Ÿæ•°æ®åº“é”™è¯¯**ï¼š
	  - `dbErr != nil` è¡¨ç¤º SQL æ‰§è¡Œå‡ºé”™ï¼ˆä¾‹å¦‚æ•°æ®åº“è¿æ¥å¤±è´¥ï¼‰ã€‚
	  - è¿”å› `error_v1.ErrorV1` ç»“æ„ä½“ï¼Œè¡¨ç¤º **HTTP 400 é”™è¯¯ï¼ˆBad Requestï¼‰**ã€‚

<br/>

- **ğŸ”¹ ä»£ç ç¤ºä¾‹**
	- ğŸ“Œ **å®Œæ•´çš„ `vipMember` æŸ¥è¯¢ç¤ºä¾‹**

```go
type VipMember struct {
	base      `xorm:"extends"`
	LevelName string `xorm:"varchar(2) notnull unique 'level_name'" json:"level_name"`
	Start     int    `json:"start"`
	End       int    `json:"end"`
	Points    float64
	Comment   string `xorm:"varchar(128) notnull" json:"comment"`
	Period    int    `json:"period"`
	ToValue   int    `json:"to_value"`
}

var vipMember VipMember

// æŸ¥è¯¢ level_name ä¸º "V0" çš„ä¼šå‘˜
_, dbErr := database_v1.BeeQuickDatabase.Where("level_name = ?", "V0").Get(&vipMember)

if dbErr != nil {
    fmt.Println("æŸ¥è¯¢å¤±è´¥:", dbErr)
} else {
    fmt.Println("æŸ¥è¯¢æˆåŠŸ:", vipMember)
}
```

<br/>

- **ğŸ“Œ ä»£ç ä½œç”¨**
	1. **æŸ¥è¯¢ `vipMember` æ˜¯å¦å­˜åœ¨**ï¼ˆæ ¹æ® `level_name`ï¼‰ã€‚
	2. **æ£€æŸ¥æ•°æ®åº“æŸ¥è¯¢æ˜¯å¦æŠ¥é”™**ï¼ˆ`dbErr`ï¼‰ã€‚
	3. **å¦‚æœå‡ºé”™ï¼Œåˆ™è¿”å› HTTP 400 + é”™è¯¯ä¿¡æ¯**ã€‚

<br/>

- **ğŸ“Œ æ€»ç»“**
	- **`BeeQuickDatabase`** æ˜¯ `xorm.Engine`ï¼Œç”¨äºæ•°æ®åº“æ“ä½œã€‚
	- **`Where(...).Get(&vipMember)`** æŸ¥è¯¢ `level_name = "V0"` çš„æ•°æ®ã€‚
	- **å¦‚æœæŸ¥è¯¢å‡ºé”™**ï¼Œè¿”å› `error_v1.ErrorV1`ï¼ŒHTTP çŠ¶æ€ç  `400`ã€‚
	- é€‚ç”¨äº **ä¼šå‘˜ç­‰çº§æ ¡éªŒ** åœºæ™¯ã€‚ ğŸš€


<br/><br/>
> <h2 id="æºç Whereæ–¹æ³•ä½¿ç”¨">æºç Whereæ–¹æ³•ä½¿ç”¨</h2>

åœ¨ `xorm` åº“ä¸­ï¼ŒğŸ“Œ `Where` æ–¹æ³•ç”¨äºæ„å»º **`SQL WHERE` æŸ¥è¯¢æ¡ä»¶**ã€‚å®ƒé€šå¸¸ä¸å…¶ä»–æŸ¥è¯¢æ–¹æ³•ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ä¾¿åœ¨æ•°æ®åº“ä¸­æ£€ç´¢ç¬¦åˆæ¡ä»¶çš„æ•°æ®ã€‚

```
func (engine *Engine) Where(query interface{}, args ...interface{}) *Session {
	session := engine.NewSession()
	session.isAutoClose = true
	return session.Where(query, args...)
}
```

<br/>

- **1ï¸âƒ£ `engine.NewSession()`**
	- **`NewSession()`** åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“ä¼šè¯ã€‚
	- åœ¨ `xorm` ä¸­ï¼Œ`Session` å¯¹è±¡ä»£è¡¨ä¸æ•°æ®åº“çš„è¿æ¥ï¼Œç”¨äºæ‰§è¡Œ SQL æŸ¥è¯¢å’Œäº‹åŠ¡ã€‚

- **2ï¸âƒ£ `session.isAutoClose = true`**
	- è®¾ç½® `isAutoClose` ä¸º `true`ï¼Œè¡¨ç¤ºè¿™ä¸ªä¼šè¯åœ¨ä½¿ç”¨å®Œåä¼šè‡ªåŠ¨å…³é—­ï¼Œä»¥é¿å…æ•°æ®åº“è¿æ¥æ³„æ¼ã€‚

- **3ï¸âƒ£ `session.Where(query, args...)`**
	- **è°ƒç”¨ `session.Where` æ–¹æ³•**ï¼Œç”¨äºæ„å»º **`WHERE` å­å¥**ã€‚
	- **`query`**ï¼šæ˜¯ `WHERE` æ¡ä»¶çš„å­—ç¬¦ä¸²ï¼ˆå¦‚ `"age > ?"`ï¼‰ï¼Œæˆ–è€…å¯ä»¥æ˜¯å¸¦æœ‰æ¡ä»¶å­—æ®µçš„ç»“æ„ä½“ã€‚
	- **`args...`**ï¼šæ˜¯æŸ¥è¯¢æ¡ä»¶çš„å‚æ•°ï¼ˆå¦‚ `"30"`ï¼Œä»£è¡¨æŸ¥è¯¢å¤§äº 30 çš„è®°å½•ï¼‰ã€‚

- **4ï¸âƒ£ è¿”å›å€¼ï¼š** `*Session`
	- è¿”å›ä¸€ä¸ª **`Session` å¯¹è±¡**ï¼Œä½ å¯ä»¥ç»§ç»­è°ƒç”¨ `Find`ã€`Get` ç­‰æ–¹æ³•è¿›è¡ŒæŸ¥è¯¢ã€‚

<br/>

- **ğŸ”¹ ä»£ç ç¤ºä¾‹**
	- **æŸ¥è¯¢å¤§äºæŸä¸ªå¹´é¾„çš„ä¼šå‘˜**

```go
type Member struct {
    ID   int64  `xorm:"id"`
    Name string `xorm:"name"`
    Age  int    `xorm:"age"`
}

var members []Member

// æŸ¥è¯¢å¹´é¾„å¤§äº 30 çš„ä¼šå‘˜
err := engine.Where("age > ?", 30).Find(&members)
if err != nil {
    log.Fatal(err)
}
fmt.Println(members)
```

ğŸ“Œ **ç›¸å½“äºæ‰§è¡Œçš„ SQL**ï¼š

```sql
SELECT * FROM member WHERE age > 30;
```

<br/>

- **ä½¿ç”¨ç»“æ„ä½“è¿›è¡ŒæŸ¥è¯¢**

```go
var member Member

// æ ¹æ® ID æŸ¥è¯¢ä¼šå‘˜
_, err := engine.Where("id = ?", 1).Get(&member)
if err != nil {
    log.Fatal(err)
}
fmt.Println(member)
```

---

- **ğŸ”¹ ä½œç”¨**
	1. **æ„å»º WHERE æŸ¥è¯¢æ¡ä»¶**ï¼Œç”¨äºæ•°æ®åº“æŸ¥è¯¢ã€‚
	2. **è‡ªåŠ¨åˆ›å»ºä¼šè¯**ï¼Œå¹¶ç¡®ä¿åœ¨æŸ¥è¯¢å®Œæˆåå…³é—­ä¼šè¯ï¼Œé¿å…è¿æ¥æ³„æ¼ã€‚
	3. **æ”¯æŒå‚æ•°åŒ–æŸ¥è¯¢**ï¼Œé€šè¿‡ `args...` å¯ä»¥ä¼ é€’æŸ¥è¯¢æ¡ä»¶çš„å€¼ã€‚
	4. **é“¾å¼è°ƒç”¨**ï¼Œå¯ä»¥ç»§ç»­å¯¹ `Session` å¯¹è±¡è¿›è¡Œè¿›ä¸€æ­¥çš„æŸ¥è¯¢æˆ–ä¿®æ”¹ã€‚

<br/>

- **ğŸ”¹ æ€»ç»“**
	- `Where` æ–¹æ³•ç”¨äº **æ„å»º SQL æŸ¥è¯¢ä¸­çš„ WHERE æ¡ä»¶**ã€‚
	- é€šè¿‡ **`NewSession()` åˆ›å»ºä¼šè¯**ï¼Œå¹¶é€šè¿‡ `session.Where` è¿›è¡ŒæŸ¥è¯¢ã€‚
	- **è‡ªåŠ¨å…³é—­ä¼šè¯**ï¼Œé¿å…æ•°æ®åº“è¿æ¥æ³„æ¼ã€‚
	- **æ”¯æŒç»“æ„ä½“å’Œå‚æ•°åŒ–æŸ¥è¯¢**ï¼Œç®€åŒ– SQL çš„æ„é€ è¿‡ç¨‹ã€‚




<br/><br/>
> <h3 id="XORMæ›´æ–°æ•°æ®">XORMæ›´æ–°æ•°æ®</h3>

```go
user.Age = 30
_, err := engine.ID(user.ID).Update(&user)
```


<br/><br/>
> <h3 id="XORMåˆ é™¤æ•°æ®">XORMåˆ é™¤æ•°æ®</h3>

```go
_, err := engine.ID(user.ID).Delete(&user)
```


<br/><br/><br/>
> <h2 id="ä¸»è¦åŒºåˆ«">ä¸»è¦åŒºåˆ«</h2>

- **1.GORM æ›´åŠ é¢å‘å¯¹è±¡**
	- GORM å…è®¸åŸºäº **æ¨¡å‹ç»“æ„ä½“** è‡ªåŠ¨è¿ç§»ï¼Œä½¿ç”¨ **é“¾å¼è°ƒç”¨**ï¼ˆå¦‚ `db.Model().Where().Update()`ï¼‰ã€‚
	- é€‚åˆ DDDï¼ˆé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰å’Œå¤æ‚æŸ¥è¯¢ã€‚

- **2.XORM æ›´è½»é‡**
	- XORM ä½¿ç”¨ **å‡½æ•°å¼ API**ï¼Œç±»ä¼¼ SQLï¼Œå†™æ³•ç›´è§‚ï¼Œæ”¯æŒ **æ•°æ®åº“åå‘ç”Ÿæˆç»“æ„ä½“**ã€‚
	- é€‚åˆ **ç®€å• CRUD**ï¼Œé€‚åˆ **é«˜æ€§èƒ½åº”ç”¨**ã€‚

- **3.æ€§èƒ½**
	- **XORM** çš„æ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºå®ƒå‡å°‘äº† **åå°„** å’Œ **è‡ªåŠ¨è¿ç§»** å¸¦æ¥çš„å¼€é”€ã€‚
	- **GORM** æä¾›äº†æ›´å¤šç‰¹æ€§ï¼Œä½†ç‰ºç‰²äº†ä¸€å®šçš„æ€§èƒ½ï¼ˆå¦‚ `AutoMigrate` ä¼šå½±å“æ•°æ®åº“æŸ¥è¯¢é€Ÿåº¦ï¼‰ã€‚

<br/><br/><br/>
> <h2 id="ä»€ä¹ˆæ—¶å€™é€‰ç”¨ï¼Ÿ">ä»€ä¹ˆæ—¶å€™é€‰ç”¨ï¼Ÿ</h2>

| ä½¿ç”¨åœºæ™¯ | é€‰æ‹© GORM | é€‰æ‹© XORM |
|----------|-----------|-----------|
| éœ€è¦å¤æ‚æŸ¥è¯¢ | âœ… | ğŸš« |
| éœ€è¦è‡ªåŠ¨è¿ç§» | âœ… | ğŸš« |
| è¿½æ±‚æè‡´æ€§èƒ½ | ğŸš« | âœ… |
| å¿«é€Ÿå¼€å‘ MVP | âœ… | âœ… |
| é€‚åˆæ–°æ‰‹ | ğŸš«ï¼ˆè¾ƒå¤šæ¦‚å¿µï¼‰ | âœ…ï¼ˆAPI ç›´è§‚ï¼‰ |
| éœ€è¦ JSON æ•°æ®å­˜å‚¨ | âœ… | âœ… |

---

### **. æ€»ç»“**
- **GORM** é€‚åˆ **åŠŸèƒ½ä¸°å¯Œ** çš„åœºæ™¯ï¼Œæ¯”å¦‚ Web æ¡†æ¶ï¼ˆGinã€Fiberï¼‰ï¼Œå°¤å…¶æ˜¯éœ€è¦ **è‡ªåŠ¨è¿ç§»ã€äº‹åŠ¡ç®¡ç†ã€å…³è”æŸ¥è¯¢**ã€‚
- **XORM** é€‚åˆ **é«˜æ€§èƒ½ã€è½»é‡çº§** çš„åœºæ™¯ï¼Œæ¯”å¦‚éœ€è¦ç›´æ¥æ˜ å°„æ•°æ®åº“æŸ¥è¯¢ï¼Œæˆ–è€… Golang å¾®æœåŠ¡ã€‚

å¦‚æœä½ æ˜¯ **æ–°æ‰‹**ï¼ŒXORM çš„ä¸Šæ‰‹éš¾åº¦ä½ï¼Œä½†å¦‚æœä½ éœ€è¦ **å¤æ‚ä¸šåŠ¡é€»è¾‘**ï¼ŒGORM æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ğŸš€


<br/><br/><br/>
> <h2 id="modelåºåˆ—åŒ–å’Œç»§æ‰¿">modelåºåˆ—åŒ–å’Œç»§æ‰¿</h2>

**base_model.goæ–‡ä»¶å¦‚ä¸‹ï¼š**

```type base struct {
	ID        uint      `xorm:"pk autoincr notnull 'id'" json:"id"`
	CreatedAt time.Time `xorm:"created" json:"created_at"`
	UpdatedAt time.Time `xorm:"updated" json:"updated_at"`
	DeletedAt time.Time `xorm:"deleted" json:"deleted_at"`
}
```

<br/>

**account_model.goæ–‡ä»¶ä¸­æœ‰å¦‚ä¸‹ä»£ç ï¼š**

```
type Account struct {
	base     `xorm:"extends"`
	Phone    string    `xorm:"varchar(11) notnull unique 'phone'" json:"phone"`
	Password string    `xorm:"varchar(128)" json:"password"`
	Token    string    `xorm:"varchar(128) 'token'" json:"token"`
	Avatar   string    `xorm:"varchar(128) 'avatar'" json:"avatar"`
	Gender   string    `xorm:"varchar(1) 'gender'" json:"gender"`
	Birthday time.Time `json:"birthday"`

	Points      int       `json:"points"`
	VipMemberID uint      `xorm:"index"`
	VipMember   VipMember `xorm:"-"`
	VipTime     time.Time `json:"vip_time"`
}

type VipMember struct {
	base      `xorm:"extends"`
	LevelName string `xorm:"varchar(2) notnull unique 'level_name'" json:"level_name"`
	Start     int    `json:"start"`
	End       int    `json:"end"`
	Points    float64
	Comment   string `xorm:"varchar(128) notnull" json:"comment"`
	Period    int    `json:"period"`
	ToValue   int    `json:"to_value"`
}

type AccountGroupVip struct {
	Account   `xorm:"extends"`
	VipMember `xorm:"extends"`
}



func (AccountGroupVip) TableName() string {
	return "beeQuick_account"
}

func (a AccountGroupVip) SerializerForGroup() 

AccountSerializer {
	result := a.Account.Serializer()
	result.VipMember = a.VipMember.Serializer()
	return result
}
```

ä¸Šè¿°ä»£ç ä½¿ç”¨ **Go è¯­è¨€** ç»“åˆ **XORM** ORM åº“å®šä¹‰äº†æ•°æ®åº“æ¨¡å‹ï¼Œå…¶ä¸­ `base_model.go` å®šä¹‰äº†åŸºç¡€æ¨¡å‹ï¼Œ`account_model.go` ä¸»è¦å®šä¹‰äº†è´¦æˆ·ç›¸å…³çš„ç»“æ„ä½“ã€‚  

<br/>

- **1.`base_model.go` (åŸºç¡€æ¨¡å‹)**

```go
type base struct {
	ID        uint      `xorm:"pk autoincr notnull 'id'" json:"id"`
	CreatedAt time.Time `xorm:"created" json:"created_at"`
	UpdatedAt time.Time `xorm:"updated" json:"updated_at"`
	DeletedAt time.Time `xorm:"deleted" json:"deleted_at"`
}
```
- **è§£æï¼š**
	- `ID`ï¼šä¸»é”®ï¼Œè‡ªåŠ¨é€’å¢ï¼Œä¸å…è®¸ä¸ºç©º (`pk autoincr notnull`)ï¼ŒXORM ä¼šå°†å…¶æ˜ å°„åˆ° `id` åˆ—ã€‚
	- `CreatedAt`ï¼šè®°å½•åˆ›å»ºæ—¶é—´ (`xorm:"created"`ï¼ŒXORM ä¼šè‡ªåŠ¨å¡«å……)ã€‚
	- `UpdatedAt`ï¼šè®°å½•æ›´æ–°æ—¶é—´ (`xorm:"updated"`ï¼ŒXORM ä¼šåœ¨æ›´æ–°æ—¶è‡ªåŠ¨å¡«å……)ã€‚
	- `DeletedAt`ï¼šè®°å½•åˆ é™¤æ—¶é—´ (`xorm:"deleted"`ï¼Œç”¨äºè½¯åˆ é™¤ï¼Œå³ä¸ä¼šçœŸæ­£åˆ é™¤è®°å½•)ã€‚

<br/>

- **2.`account_model.go` è´¦æˆ·æ¨¡å‹**
	- **2.1`Account` (ç”¨æˆ·è´¦æˆ·)**

```go
type Account struct {
	base     `xorm:"extends"`
	Phone    string    `xorm:"varchar(11) notnull unique 'phone'" json:"phone"`
	Password string    `xorm:"varchar(128)" json:"password"`
	Token    string    `xorm:"varchar(128) 'token'" json:"token"`
	Avatar   string    `xorm:"varchar(128) 'avatar'" json:"avatar"`
	Gender   string    `xorm:"varchar(1) 'gender'" json:"gender"`
	Birthday time.Time `json:"birthday"`

	Points      int       `json:"points"`
	VipMemberID uint      `xorm:"index"`
	VipMember   VipMember `xorm:"-"`  // ä»…åœ¨ Go ä»£ç ä¸­å­˜åœ¨ï¼Œä¸æ˜ å°„åˆ°æ•°æ®åº“
	VipTime     time.Time `json:"vip_time"`
}
```
- **è§£æï¼š**
	- **ç»§æ‰¿ `base`**ï¼š
		  - é€šè¿‡ `xorm:"extends"`ï¼Œ`Account` ç»“æ„ä½“ç»§æ‰¿äº† `base` ç»“æ„ä½“ä¸­çš„å­—æ®µï¼Œå¦‚ `ID`ã€`CreatedAt`ã€`UpdatedAt`ã€`DeletedAt`ã€‚
	- **è´¦æˆ·ä¿¡æ¯å­—æ®µ**ï¼š
		  - `Phone`ï¼šæ‰‹æœºå·ï¼Œ`varchar(11)`ï¼Œå¿…é¡»å”¯ä¸€ã€‚
		  - `Password`ï¼šå¯†ç ï¼Œ`varchar(128)`ï¼Œå­˜å‚¨åŠ å¯†åçš„å¯†ç ã€‚
		  - `Token`ï¼šè®¤è¯ Tokenã€‚
		  - `Avatar`ï¼šå¤´åƒ URLã€‚
		  - `Gender`ï¼šæ€§åˆ«ï¼Œ`varchar(1)`ï¼Œé€šå¸¸å­˜å‚¨ `M`ï¼ˆç”·ï¼‰æˆ– `F`ï¼ˆå¥³ï¼‰ã€‚
		  - `Birthday`ï¼šç”Ÿæ—¥ï¼Œæ—¶é—´ç±»å‹ã€‚
	- **ä¼šå‘˜ä¿¡æ¯å­—æ®µ**ï¼š
		  - `Points`ï¼šç§¯åˆ†ï¼Œ`int`ã€‚
		  - `VipMemberID`ï¼šå¤–é”®ï¼ŒæŒ‡å‘ `VipMember` çš„ `ID`ï¼Œå¹¶åˆ›å»ºç´¢å¼• (`xorm:"index"`)ã€‚
		  - `VipMember`ï¼šä¼šå‘˜ç­‰çº§ä¿¡æ¯ï¼Œ`xorm:"-"` è¯´æ˜å®ƒä¸åœ¨æ•°æ®åº“ä¸­ï¼Œè€Œæ˜¯é€šè¿‡ `VipMemberID` å…³è”åå¡«å……ã€‚
		  - `VipTime`ï¼šVIP åˆ°æœŸæ—¶é—´ã€‚
	
<br/>

- **2.2`VipMember` (ä¼šå‘˜ç­‰çº§)**

```go
type VipMember struct {
	base      `xorm:"extends"`
	LevelName string  `xorm:"varchar(2) notnull unique 'level_name'" json:"level_name"`
	Start     int     `json:"start"`
	End       int     `json:"end"`
	Points    float64
	Comment   string  `xorm:"varchar(128) notnull" json:"comment"`
	Period    int     `json:"period"`
	ToValue   int     `json:"to_value"`
}
```
- **è§£æï¼š**
	- **ç»§æ‰¿ `base`**ï¼šåŒæ ·ç»§æ‰¿äº† `ID`ã€`CreatedAt`ã€`UpdatedAt`ã€`DeletedAt`ã€‚
	- **ä¼šå‘˜ç­‰çº§å­—æ®µ**ï¼š
		  - `LevelName`ï¼šç­‰çº§åç§°ï¼ˆå¦‚ `V1`ã€`V2`ï¼‰ã€‚
		  - `Start`ã€`End`ï¼šè¯¥ä¼šå‘˜ç­‰çº§çš„ç§¯åˆ†åŒºé—´ï¼Œä¾‹å¦‚ `V1` å¯èƒ½æ˜¯ `[0, 100]`ï¼Œ`V2` æ˜¯ `[101, 500]`ã€‚
		  - `Points`ï¼šè¯¥ç­‰çº§é»˜è®¤ç§¯åˆ†åŠ æˆï¼ˆå¦‚æ¶ˆè´¹ 1 å…ƒå¢åŠ çš„ç§¯åˆ†ï¼‰ã€‚
		  - `Comment`ï¼šæè¿°ä¿¡æ¯ï¼Œå¦‚ "é»„é‡‘ä¼šå‘˜"ã€"ç™½é‡‘ä¼šå‘˜"ã€‚
		  - `Period`ï¼šä¼šå‘˜æœ‰æ•ˆæœŸï¼ˆå•ä½ï¼šå¤©ï¼‰ã€‚
		  - `ToValue`ï¼šè¾¾åˆ°æ­¤å€¼åè‡ªåŠ¨å‡çº§ä¸‹ä¸€çº§ã€‚

<br/>
- **2.3 `AccountGroupVip` (è´¦æˆ·å’Œä¼šå‘˜çš„ç»„åˆ)**

```go
type AccountGroupVip struct {
	Account   `xorm:"extends"`
	VipMember `xorm:"extends"`
}
```

- **è§£æï¼š**
	- è¿™ä¸ªç»“æ„ä½“**ç»§æ‰¿**äº† `Account` å’Œ `VipMember`ï¼Œå®ƒæ˜¯ä¸€ä¸ªè™šæ‹Ÿç»“æ„ä½“ï¼Œæ–¹ä¾¿æŸ¥è¯¢æ—¶ç›´æ¥è·å– `Account` å’Œ `VipMember` çš„æ‰€æœ‰å­—æ®µã€‚
	- é€‚ç”¨äºè”åˆæŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼š

```go
var results []AccountGroupVip
err := engine.Table("beeQuick_account").Find(&results)
```
  
è¿™æ ·ï¼ŒæŸ¥è¯¢å‡ºçš„ `results` æ—¢åŒ…å« `Account` ä¹ŸåŒ…å« `VipMember` ç›¸å…³ä¿¡æ¯ã€‚

<br/>

- **2.4`TableName()` æ–¹æ³•**

```go
func (AccountGroupVip) TableName() string {
	return "beeQuick_account"
}
```

- è¿™ä¸ªæ–¹æ³•å‘Šè¯‰ XORM **è¡¨åä¸æ˜¯ `account_group_vip`ï¼Œè€Œæ˜¯ `beeQuick_account`**ï¼Œé¿å…è‡ªåŠ¨ç”Ÿæˆä¸åˆé€‚çš„è¡¨åã€‚

<br/>

- **2.5`SerializerForGroup()` æ–¹æ³•**

```go
func (a AccountGroupVip) SerializerForGroup() AccountSerializer {
	result := a.Account.Serializer()
	result.VipMember = a.VipMember.Serializer()
	return result
}
```

- `SerializerForGroup()` ç”¨äºåºåˆ—åŒ– `AccountGroupVip`ï¼Œå…¶ä¸­ï¼š
	  - `a.Account.Serializer()` å¤„ç† `Account` ç»“æ„çš„åºåˆ—åŒ–ã€‚
	  - `a.VipMember.Serializer()` å¤„ç† `VipMember` ç»“æ„çš„åºåˆ—åŒ–ã€‚
	  - è¿”å› `AccountSerializer`ï¼ˆå‡è®¾ `AccountSerializer` æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œä¸“é—¨ç”¨äº API å“åº”ï¼‰ã€‚

<br/>

- **æ€»ç»“**
	- **`base` ç»“æ„ä½“** æä¾›é€šç”¨çš„ ID å’Œæ—¶é—´æˆ³å­—æ®µï¼Œå¤šä¸ªæ¨¡å‹éƒ½å¯ä»¥ç»§æ‰¿å®ƒã€‚
	- **`Account` ç»“æ„ä½“** ä»£è¡¨ç”¨æˆ·è´¦æˆ·ï¼ŒåŒ…æ‹¬æ‰‹æœºå·ã€å¯†ç ã€Tokenã€ä¼šå‘˜ä¿¡æ¯ç­‰ã€‚
	- **`VipMember` ç»“æ„ä½“** ä»£è¡¨ä¼šå‘˜ç­‰çº§ï¼ŒåŒ…æ‹¬ç­‰çº§åç§°ã€ç§¯åˆ†èŒƒå›´ã€ç‰¹æƒç­‰ã€‚
	- **`AccountGroupVip` ç»“æ„ä½“** æ˜¯ `Account` å’Œ `VipMember` çš„ç»„åˆï¼Œé€‚ç”¨äºæŸ¥è¯¢è”åˆä¿¡æ¯ã€‚
	- **`SerializerForGroup()`** ç”¨äºæ ¼å¼åŒ–æŸ¥è¯¢ç»“æœï¼Œé€‚ç”¨äº API è¿”å› JSON æ•°æ®ã€‚

<br/>

- **è¿™ä¸ªè®¾è®¡æ–¹å¼ï¼š**
	1. **æé«˜äº†ä»£ç å¤ç”¨æ€§**ï¼ˆé€šè¿‡ `xorm:"extends"` ç»§æ‰¿ `base`ï¼‰ã€‚
	2. **é¿å…æ‰‹åŠ¨ç»´æŠ¤æ—¶é—´å­—æ®µ**ï¼ˆ`xorm:"created"`ã€`xorm:"updated"` è‡ªåŠ¨å¡«å……ï¼‰ã€‚
	3. **æ”¯æŒè½¯åˆ é™¤**ï¼ˆ`xorm:"deleted"`ï¼Œä¸ä¼šçœŸæ­£åˆ é™¤æ•°æ®ï¼‰ã€‚
	4. **ä½¿ç”¨ `xorm:"-"` è®© `VipMember` ä»…ç”¨äº Go ä»£ç ï¼Œä¸å½±å“æ•°æ®åº“ç»“æ„**ã€‚
	5. **ä¾¿äº JSON åºåˆ—åŒ–**ï¼ŒAPI å¯ä»¥ç›´æ¥è¿”å›æ ¼å¼åŒ–çš„æ•°æ®ã€‚

è¿™æ ·ï¼Œä½ å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œ CRUD æ“ä½œï¼Œä¾‹å¦‚ï¼š

```go
var account Account
engine.Where("phone = ?", "12345678901").Get(&account)
```


<br/>

***
<br/><br/><br/>
> <h1 id="cryptoåº“"> cryptoåº“ </h1>

<br/><br/><br/>
> <h2 id="cryptoå“ˆå¸Œ">cryptoå“ˆå¸Œ</h2>

- **ğŸ“Œ `GenerateFromPassword` æ–¹æ³•è¯¦è§£**

è¿™æ˜¯ Go è¯­è¨€ä¸­ `crypto` åº“ä¸­çš„ä¸€ä¸ªå¸¸ç”¨æ–¹æ³•ï¼Œé€šå¸¸ç”¨äº **å¯†ç çš„å“ˆå¸ŒåŠ å¯†**ã€‚åœ¨ Go æ ‡å‡†åº“ä¸­ï¼Œå®ƒå±äº `bcrypt` å¯†ç åŠ å¯†ç®—æ³•çš„ä¸€éƒ¨åˆ†ã€‚æ­¤æ–¹æ³•çš„ç›®çš„æ˜¯é€šè¿‡ä¸€ä¸ªå¯†ç å’Œå·¥ä½œå› å­ï¼ˆ`cost`ï¼‰ç”Ÿæˆå¯†ç å“ˆå¸Œã€‚

<br/>
- **`GenerateFromPassword` æ–¹æ³•æºç ï¼š**

```go
func GenerateFromPassword(password []byte, cost int) ([]byte, error) {
    p, err := newFromPassword(password, cost)
    if err != nil {
        return nil, err
    }
    return p.Hash(), nil
}
```

- **ğŸ”¹ ä»£ç è§£æ**

	- **1ï¸âƒ£ `newFromPassword(password, cost)`**

		- **`newFromPassword`** æ˜¯ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œå®ƒå°†å¯†ç å’Œå·¥ä½œå› å­ï¼ˆ`cost`ï¼‰ä½œä¸ºè¾“å…¥ï¼Œç”Ÿæˆä¸€ä¸ªåŠ å¯†çš„å“ˆå¸Œç»“æ„ã€‚
		- **`password []byte`**ï¼šå¾…åŠ å¯†çš„å¯†ç ã€‚
		- **`cost int`**ï¼šå·¥ä½œå› å­ï¼Œå®ƒå†³å®šäº†åŠ å¯†è¿‡ç¨‹çš„å¤æ‚åº¦ï¼ˆå³è®¡ç®—æˆæœ¬ï¼‰ã€‚è¾ƒå¤§çš„ `cost` å€¼ä¼šå¯¼è‡´æ›´é«˜çš„è®¡ç®—è´Ÿæ‹…ï¼Œä»è€Œæé«˜å®‰å…¨æ€§ã€‚é€šå¸¸ï¼Œ`cost` çš„æ¨èå€¼æ˜¯ `10`ï¼Œä½†å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ã€‚
		  - **`cost`** å†³å®šäº† bcrypt å“ˆå¸Œè®¡ç®—çš„æ—¶é—´å¤æ‚åº¦ã€‚è¾ƒé«˜çš„ `cost` ä¼šè®©åŠ å¯†æ›´åŠ è€—æ—¶ï¼Œä»è€Œåœ¨æš´åŠ›ç ´è§£æ—¶å¢åŠ å›°éš¾ã€‚

	- **2ï¸âƒ£ `if err != nil { return nil, err }`**
		- **é”™è¯¯æ£€æŸ¥**ï¼šå¦‚æœ `newFromPassword` åœ¨ç”Ÿæˆå“ˆå¸Œæ—¶å‘ç”Ÿäº†é”™è¯¯ï¼ˆä¾‹å¦‚ï¼Œä¼ é€’äº†æ— æ•ˆçš„ `cost` å€¼ï¼‰ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚æ­¤æ—¶æ–¹æ³•ä¼š **è¿”å› `nil` å’Œé”™è¯¯**ã€‚

- **3ï¸âƒ£ `return p.Hash(), nil`**
	- **`p.Hash()`**ï¼š`p` æ˜¯é€šè¿‡ `newFromPassword` åˆ›å»ºçš„å“ˆå¸Œç»“æ„ï¼Œ`Hash()` æ–¹æ³•ä¼šè¿”å›æœ€ç»ˆç”Ÿæˆçš„å¯†ç å“ˆå¸Œã€‚è¿™ä¸ªå“ˆå¸Œå°†ä½œä¸ºè¿”å›å€¼ä¼ é€’å‡ºå»ã€‚
	- **è¿”å›å€¼**ï¼šç”Ÿæˆçš„å“ˆå¸Œå’Œ `nil` é”™è¯¯è¡¨ç¤ºæˆåŠŸã€‚

<br/>

- **ğŸ”¹ ä¸»è¦åŠŸèƒ½**
	- **å¯†ç å“ˆå¸Œç”Ÿæˆ**ï¼šè¯¥æ–¹æ³•ç”¨äº **ç”ŸæˆåŠ å¯†åçš„å¯†ç å“ˆå¸Œ**ã€‚ç”Ÿæˆçš„å“ˆå¸Œé€šå¸¸ç”¨äºå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œä»¥ä¾¿åœ¨ç”¨æˆ·ç™»å½•æ—¶å¯¹æ¯”ã€‚
	- **`cost` æ§åˆ¶å¤æ‚åº¦**ï¼š`cost` æ˜¯ä¸€ä¸ªé‡è¦çš„å‚æ•°ï¼Œå®ƒæ§åˆ¶äº† bcrypt åŠ å¯†ç®—æ³•çš„ **è®¡ç®—å¼€é”€**ï¼Œä»è€Œå½±å“åŠ å¯†çš„é€Ÿåº¦å’Œå®‰å…¨æ€§ã€‚è¾ƒé«˜çš„ `cost` å€¼å¢åŠ äº†æ”»å‡»è€…åœ¨è¿›è¡Œæš´åŠ›ç ´è§£æ—¶æ‰€éœ€çš„æ—¶é—´ã€‚

<br/>
- **ğŸ”¹ ä»£ç ç¤ºä¾‹**

å‡è®¾æˆ‘ä»¬åœ¨ Go ä¸­ä½¿ç”¨æ­¤å‡½æ•°æ¥åŠ å¯†ç”¨æˆ·å¯†ç å¹¶å­˜å‚¨å®ƒï¼š

```go
package main

import (
    "fmt"
    "golang.org/x/crypto/bcrypt"
    "log"
)

func GenerateFromPassword(password []byte, cost int) ([]byte, error) {
    p, err := newFromPassword(password, cost)
    if err != nil {
        return nil, err
    }
    return p.Hash(), nil
}

func main() {
    password := []byte("mySecretPassword")
    cost := 10 // å·¥ä½œå› å­
    
    // ç”Ÿæˆå“ˆå¸Œ
    hashedPassword, err := GenerateFromPassword(password, cost)
    if err != nil {
        log.Fatal("Error generating hash:", err)
    }
    
    fmt.Printf("Generated Hash: %s\n", hashedPassword)
    
    // ä½¿ç”¨ bcrypt å¯¹æ¯”å¯†ç ï¼ˆå‡è®¾ç”¨æˆ·è¾“å…¥çš„å¯†ç æ˜¯ "mySecretPassword"ï¼‰
    err = bcrypt.CompareHashAndPassword(hashedPassword, password)
    if err != nil {
        fmt.Println("Password mismatch")
    } else {
        fmt.Println("Password matched")
    }
}
```

- **æ‰§è¡Œç»“æœ**ï¼š
	- å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡æ³¨å†Œæ—¶ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡ `GenerateFromPassword` ç”Ÿæˆå“ˆå¸Œå¯†ç ï¼Œå¹¶å°†å…¶å­˜å‚¨ã€‚
	- ç”¨æˆ·ç™»å½•æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ `bcrypt.CompareHashAndPassword` æ¥æ¯”è¾ƒç”¨æˆ·è¾“å…¥çš„å¯†ç ä¸å­˜å‚¨çš„å“ˆå¸Œå¯†ç æ˜¯å¦åŒ¹é…ã€‚













