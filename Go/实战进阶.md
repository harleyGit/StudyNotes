> <h2 id=''></h2>
- [**APIæµ‹è¯•å·¥å…·**](#APIæµ‹è¯•å·¥å…·)
	- [Curlè¿›è¡ŒAPIæµ‹è¯•](#Curlè¿›è¡ŒAPIæµ‹è¯•) 
	- [HTTPieè¿›è¡ŒAPIæµ‹è¯•](#HTTPieè¿›è¡ŒAPIæµ‹è¯•) 
	- [Postmanè¿›è¡ŒAPIæµ‹è¯•](#Postmanè¿›è¡ŒAPIæµ‹è¯•) 
	- [VSCodeæ’ä»¶APIæµ‹è¯•](#VSCodeæ’ä»¶APIæµ‹è¯•)
- [**é¡¹ç›®ç»„ç»‡ç»“æ„**](#é¡¹ç›®ç»„ç»‡ç»“æ„)
	- [é¢†åŸŸé©±åŠ¨çš„æ–¹å¼](#é¢†åŸŸé©±åŠ¨çš„æ–¹å¼)
	- [ä¸šåŠ¡é©±åŠ¨çš„æ–¹å¼](#ä¸šåŠ¡é©±åŠ¨çš„æ–¹å¼)
- [**Makefileæ„å»ºé¡¹ç›®**](#Makefileæ„å»ºé¡¹ç›®)
	- [makefileæ–‡ä»¶](#makefileæ–‡ä»¶)
		- [å˜é‡å®šä¹‰éƒ¨åˆ†](#å˜é‡å®šä¹‰éƒ¨åˆ†)
		- [é“¾æ¥å‚æ•°ï¼ˆLDFLAGSï¼‰](#é“¾æ¥å‚æ•°ï¼ˆLDFLAGSï¼‰) 
		- [æ„å»ºç›®æ ‡](#æ„å»ºç›®æ ‡) 
		- [è¿è¡Œ](#è¿è¡Œ)
- [**åŒºåˆ†ç”Ÿäº§ã€å¼€å‘ã€æµ‹è¯•ç¯å¢ƒ**](#åŒºåˆ†ç”Ÿäº§ã€å¼€å‘ã€æµ‹è¯•ç¯å¢ƒ)
	- [ä½¿ç”¨é…ç½®æ–‡ä»¶ymal](#ä½¿ç”¨é…ç½®æ–‡ä»¶ymal) 
	- [ä½¿ç”¨`.env`æ–‡ä»¶](#ä½¿ç”¨`.env`æ–‡ä»¶) 
	- [buildtagsç¼–è¯‘æ—¶åŒºåˆ†ç¯å¢ƒ](#buildtagsç¼–è¯‘æ—¶åŒºåˆ†ç¯å¢ƒ) 
	- [ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°](#ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°) 
	- [æ€»ç»“](#æ€»ç»“)
- [**å®¹å™¨åŒ–å¹³å°**](#å®¹å™¨åŒ–å¹³å°)
	- [Docker](#Docker)
		- [ä»‹ç»](#ä»‹ç»)
		- [Dockerå¯åŠ¨mysql](#Dockerå¯åŠ¨mysql)
- [**é¡¹ç›®è¯­æ³•**](#é¡¹ç›®è¯­æ³•)
	- [BeekQuickProjecté™Œç”Ÿè¯­æ³•](#BeekQuickProjecté™Œç”Ÿè¯­æ³•)
		- [å‚æ•°éªŒè¯](#å‚æ•°éªŒè¯)
		- [è‡ªå®šä¹‰ç»“æ„ä½“è®¤è¯](#è‡ªå®šä¹‰ç»“æ„ä½“è®¤è¯)
		- [è®°å½•è¯·æ±‚æ—¥å¿—](#è®°å½•è¯·æ±‚æ—¥å¿—)
		- [modelä½¿ç”¨XORMåº“åºåˆ—åŒ–](modelä½¿ç”¨XORMåº“åºåˆ—åŒ–)




<br/>

***
<br/><br/><br/>
> <h1 id="APIæµ‹è¯•å·¥å…·">APIæµ‹è¯•å·¥å…·</h1>

åœ¨ Go è¯­è¨€å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ API æµ‹è¯•å·¥å…·ï¼ˆå¦‚ Curlã€HTTPieã€Postman å’Œ VSCode æ’ä»¶ï¼‰å¯ä»¥å¸®åŠ©è°ƒè¯•å’ŒéªŒè¯ API æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚

<br/>
- **3è€…æ€»ç»“å¯¹æ¯”**

| å·¥å…· | é€‚ç”¨åœºæ™¯ |  ä¼˜åŠ¿  |  ç¼ºç‚¹ |
|------|---------|-------|-------|
| Curl | å‘½ä»¤è¡Œæµ‹è¯• API | è½»é‡çº§ã€é€šç”¨ | è¯­æ³•è¾ƒå¤æ‚ |
| HTTPie | å‘½ä»¤è¡Œæµ‹è¯• API | è¯­æ³•æ›´ç®€æ´ã€å¯è¯»æ€§æ›´å¥½ | éœ€é¢å¤–å®‰è£… |
| Postman | GUI æµ‹è¯• API | é€‚åˆå›¢é˜Ÿåä½œã€æ”¯æŒç¯å¢ƒå˜é‡ã€è‡ªåŠ¨åŒ– | éœ€è¦ GUIã€è¾ƒå èµ„æº |
| VSCode REST Client | ä»£ç ç¼–è¾‘å™¨å†…æµ‹è¯• API | æ— éœ€ç¦»å¼€ VSCodeï¼Œä¾¿äºè®°å½•è¯·æ±‚ | éœ€è¦æ’ä»¶ï¼ŒåŠŸèƒ½æ¯” Postman å°‘ |

<br/>

- å¦‚æœä½ æ˜¯**å‘½ä»¤è¡Œçˆ±å¥½è€…**ï¼Œæ¨èä½¿ç”¨ `Curl` æˆ– `HTTPie`ã€‚  
- å¦‚æœä½ å–œæ¬¢**å¯è§†åŒ–æ“ä½œ**ï¼Œ`Postman` æ˜¯æœ€ä½³é€‰æ‹©ã€‚  
- å¦‚æœä½ å¸Œæœ›**åœ¨ VSCode ç›´æ¥æµ‹è¯• API**ï¼Œ`REST Client` æ’ä»¶æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚

<br/><br/><br/>
> <h2 id="Curlè¿›è¡ŒAPIæµ‹è¯•">Curlè¿›è¡ŒAPIæµ‹è¯•</h2>

`Curl` æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ç”¨äºå‘é€ HTTP è¯·æ±‚ï¼Œé€‚ç”¨äºå¿«é€Ÿæµ‹è¯• API è¯·æ±‚å’Œå“åº”ã€‚

**ç¤ºä¾‹ 1ï¼šå‘é€ GET è¯·æ±‚**

```sh
curl -X GET http://localhost:8080/api/users
```

<br/>

**ç¤ºä¾‹ 2ï¼šå‘é€ POST è¯·æ±‚ï¼ˆJSON æ•°æ®ï¼‰**

```sh
curl -X POST http://localhost:8080/api/users \
     -H "Content-Type: application/json" \
     -d '{"name": "Alice", "email": "alice@example.com"}'
```

<br/>

**ç¤ºä¾‹ 3ï¼šå‘é€å¸¦ Token çš„è¯·æ±‚**

```sh
curl -X GET http://localhost:8080/api/protected \
     -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

<br/><br/><br/>
> <h2 id="HTTPieè¿›è¡ŒAPIæµ‹è¯•">HTTPieè¿›è¡ŒAPIæµ‹è¯•</h2>

`HTTPie` æ˜¯ `Curl` çš„æ›¿ä»£å“ï¼Œè¯­æ³•æ›´ç›´è§‚ï¼Œé€‚ç”¨äº API è°ƒè¯•ã€‚

- **å®‰è£… HTTPie**

```sh
pip install httpie  # éœ€è¦ Python
```

<br/>

**ç¤ºä¾‹ 1ï¼šå‘é€ GET è¯·æ±‚**

```sh
http GET http://localhost:8080/api/users
```

<br/>

**ç¤ºä¾‹ 2ï¼šå‘é€ POST è¯·æ±‚ï¼ˆJSON æ•°æ®ï¼‰**

```sh
http POST http://localhost:8080/api/users name="Alice" email="alice@example.com"
```

<br/>

**ç¤ºä¾‹ 3ï¼šå‘é€å¸¦ Token çš„è¯·æ±‚**

```sh
http GET http://localhost:8080/api/protected "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

<br/><br/><br/>
> <h2 id="Postmanè¿›è¡ŒAPIæµ‹è¯•">Postmanè¿›è¡ŒAPIæµ‹è¯•</h2>

Postman æ˜¯ä¸€ä¸ªå›¾å½¢åŒ– API æµ‹è¯•å·¥å…·ï¼Œé€‚ç”¨äºå¤æ‚çš„ API äº¤äº’ã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€Mock API ç­‰ã€‚

- **ä½¿ç”¨æ­¥éª¤**
	1. **å®‰è£… Postman**ï¼šä» [Postman å®˜ç½‘](https://www.postman.com/) ä¸‹è½½å¹¶å®‰è£…ã€‚
	2. **åˆ›å»ºè¯·æ±‚**ï¼š
	   - é€‰æ‹© **GETã€POSTã€PUTã€DELETE** ç­‰æ–¹æ³•ã€‚
	   - å¡«å†™ **URL**ï¼ˆå¦‚ `http://localhost:8080/api/users`ï¼‰ã€‚
	   - æ·»åŠ  **Headers**ï¼ˆå¦‚ `Content-Type: application/json`ï¼‰ã€‚
	   - è‹¥ä¸º `POST` æˆ– `PUT`ï¼Œåœ¨ **Body** é€‰é¡¹å¡å¡«å…¥ JSON æ•°æ®ã€‚
	3. **ç‚¹å‡»â€œSendâ€** å‘é€è¯·æ±‚å¹¶æŸ¥çœ‹å“åº”ã€‚

<br/><br/><br/>
> <h2 id="VSCodeæ’ä»¶APIæµ‹è¯•">VSCodeæ’ä»¶APIæµ‹è¯•</h2>

VSCode æä¾›å¤šç§ API æµ‹è¯•æ’ä»¶ï¼Œå¸¸ç”¨çš„æ˜¯ `REST Client` æ’ä»¶ã€‚

- **å®‰è£… REST Client æ’ä»¶**
	- æ‰“å¼€ VSCodeï¼ŒæŒ‰ `Cmd + Shift + X`ï¼ˆMacï¼‰æˆ– `Ctrl + Shift + X`ï¼ˆWindowsï¼‰ã€‚
	- æœç´¢ `REST Client` å¹¶å®‰è£…ã€‚

<br/>

- **åˆ›å»º API è¯·æ±‚**

åœ¨ `.http` æˆ– `.rest` æ–‡ä»¶ä¸­å†™å…¥è¯·æ±‚ï¼Œä¾‹å¦‚ï¼š

```http
### å‘é€ GET è¯·æ±‚
GET http://localhost:8080/api/users

### å‘é€ POST è¯·æ±‚
POST http://localhost:8080/api/users
Content-Type: application/json

{
    "name": "Alice",
    "email": "alice@example.com"
}
```

<br/>

- **æ‰§è¡Œè¯·æ±‚**
	1. åœ¨ VSCode æ‰“å¼€ `.http` æ–‡ä»¶ã€‚
	2. åœ¨è¯·æ±‚ä¸Šæ–¹ä¼šå‡ºç° `Send Request` æŒ‰é’®ï¼Œç‚¹å‡»å³å¯è¿è¡Œå¹¶æŸ¥çœ‹å“åº”ã€‚



<br/>

***
<br/><br/><br/>
- <h1 id="é¡¹ç›®ç»„ç»‡ç»“æ„">é¡¹ç›®ç»„ç»‡ç»“æ„</h1>

<br/><br/><br/>
> <h2 id="é¢†åŸŸé©±åŠ¨çš„æ–¹å¼">é¢†åŸŸé©±åŠ¨çš„æ–¹å¼</h2>

é¢†åŸŸé©±åŠ¨è®²ç©¶çš„æ˜¯å°†é¡¹ç›®æ•´ä½“æŒ‰ç…§é¢†åŸŸé©±åŠ¨çš„æ–¹å¼è¿›è¡Œç»„ç»‡ã€‚

- **é¢†åŸŸé©±åŠ¨è®¾è®¡ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹4éƒ¨åˆ†ï¼š**
	- åº”ç”¨å±‚(Application)ã€‚
	- åŸºç¡€è®¾æ–½å±‚(Infrastructure)ã€‚
	- é¢†åŸŸå±‚(Domain)ã€‚
	- ç”¨æˆ·ç•Œé¢å±‚(UserInterface)ã€‚

<br/>

- (1)åº”ç”¨å±‚ä¸»è¦å®Œæˆçš„ä»»åŠ¡æ˜¯ä¸ºç¨‹åºæä¾›ä»»åŠ¡å¤„ç†ï¼Œå³è°ƒç”¨æŠ½è±¡ä¹‹åçš„åº”ç”¨ã€‚
- (2)åŸºç¡€è®¾æ–½å±‚ä¸»è¦æ˜¯ä¸ä¸šåŠ¡ä¸ç›¸å…³çš„ä»£ç å—çš„é›†åˆï¼Œæ¯”å¦‚å­—ç¬¦ä¸²æ“ä½œã€æ•°å€¼è¿ç®—ã€æ–‡ä»¶æ“ä½œç­‰ã€‚
- (3)é¢†åŸŸå±‚é¢†åŸŸå±‚æ˜¯é¢†åŸŸé©±åŠ¨è®¾è®¡çš„æ ¸å¿ƒï¼Œé¦–å…ˆéœ€è¦æ ¹æ®é¡¹ç›®æŠ½è±¡å‡ºé¢†åŸŸå†…çš„ç›¸å…³æ¦‚å¿µï¼Œå†åœ¨é¢†åŸŸå†…ç›¸å…³æ¦‚å¿µçš„åŸºç¡€ä¸Šå®Œæˆèµ„æºçš„æ“ä½œã€‚
- (4)ç”¨æˆ·ç•Œé¢å±‚è´Ÿè´£å‘ç”¨æˆ·å±•ç°ä¿¡æ¯ï¼Œå¹¶ä¸”ä¼šè§£æç”¨æˆ·è¡Œä¸ºï¼Œå³å¸¸è¯´çš„å±•ç°å±‚ã€‚ä»¥è®¾è®¡ä¸€ä¸ªRESTful APIé£æ ¼çš„é¡¹ç›®ä¸ºä¾‹ï¼Œé¢†åŸŸé©±åŠ¨è®¾è®¡çš„é¡¹ç›®ç»„ç»‡çš„ç»“æ„å¤§æ¦‚å¦‚ä¸‹ï¼š

![go.0.0.59.png](./../Pictures/go.0.0.59.png)

<br/><br/><br/>
> <h2 id="ä¸šåŠ¡é©±åŠ¨çš„æ–¹å¼">ä¸šåŠ¡é©±åŠ¨çš„æ–¹å¼</h2>

åœ¨æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç¼–å†™APIçš„ä¸šåŠ¡éœ€æ±‚åº”è¯¥å¾ˆå¤šï¼Œç‰¹åˆ«æ˜¯é€‰æ‹©Webæ–¹é¢çš„å·¥ä½œã€‚Webæ¡†æ¶ä¸€èˆ¬é‡‡ç”¨æ ‡å‡†çš„MVCæ¶æ„ï¼Œå³Modelï¼ˆæ¨¡å‹å±‚ï¼‰â€‹ã€Viewï¼ˆè§†å›¾å±‚ï¼‰â€‹ã€Controllerï¼ˆæ§åˆ¶å±‚ï¼‰â€‹ã€‚
![go.0.0.63.png](./../Pictures/go.0.0.63.png)

<br/>

![go.0.0.64.png](./../Pictures/go.0.0.64.png)


ä¸‹é¢è¿™ç§é£æ ¼çš„é¡¹ç›®ç»„ç»‡é€‚åˆç»å¤§å¤šæ•°Webå±‚é¢çš„é¡¹ç›®å¼€å‘ã€‚

- cmdï¼šå‘½ä»¤è¡ŒåŠŸèƒ½é›†åˆ(å‘½ä»¤è¡Œå·¥å…·ï¼ŒåŒ…æ‹¬æ•°æ®åº“ä¸­æ•°æ®è¡¨çš„åˆ›å»ºã€è¿ç§»ã€æ•°æ®å¯¼å…¥ç­‰)ã€‚
- configsï¼šé¡¹ç›®çš„é…ç½®æ–‡ä»¶é›†åˆ(é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬æ•°æ®åº“çš„é…ç½®æ–‡ä»¶ç­‰)ã€‚
- deploymentsï¼šæ„å»ºDockeré•œåƒç­‰æ–‡ä»¶é›†åˆ(å®¹å™¨ç›¸å…³çš„æ–‡ä»¶)ã€‚ 
- docsï¼šæ–‡æ¡£é›†åˆã€‚
- initializersï¼šåˆå§‹åŒ–æ–‡ä»¶é›†åˆã€‚
- logsï¼šå­˜å‚¨é¡¹ç›®æ—¥å¿—æ–‡ä»¶é›†åˆã€‚
- pkgï¼šé¡¹ç›®è¾…åŠ©åŠŸèƒ½ï¼Œæ¯”å¦‚ä¸­é—´ä»¶ã€æ’ä»¶ç­‰(é¡¹ç›®çš„ä½¿ç”¨åº“)ã€‚
- scriptsï¼šè„šæœ¬æ–‡ä»¶é›†åˆã€‚
- srcï¼šé¡¹ç›®çš„æ ¸å¿ƒæ–‡ä»¶ï¼Œæ ¸å¿ƒçš„å¤„ç†ç¯èŠ‚(é¡¹ç›®çš„æ ¸å¿ƒé€»è¾‘)ã€‚
- toolsï¼šé¡¹ç›®è¾…åŠ©å·¥å…·ã€‚
- vendorï¼šç¬¬ä¸‰æ–¹åº“æ–‡ä»¶é›†åˆã€‚
- main.goï¼šé¡¹ç›®å‡½æ•°å…¥å£(é¡¹ç›®ä¸»å…¥å£)ã€‚
- Makefileï¼šé¡¹ç›®æ„å»ºå‘½ä»¤é›†åˆ(é¡¹ç›®æ„å»ºï¼Œæä¾›ç®€æ˜“çš„å‘½ä»¤ï¼ˆç±»UNIXæ“ä½œç³»ç»Ÿçš„æ”¯æŒï¼‰â€‹)ã€‚
- modelï¼šæ¨¡å‹æ–‡ä»¶;
- accountï¼šäº§å“å®ä½“çš„æŠ½è±¡;
- assistance.goï¼šè¾…åŠ©å‡½æ•°;
- controller.goï¼šæ§åˆ¶å™¨çš„æ ¸å¿ƒå¤„ç†;
- param.goï¼šè¯·æ±‚å‚æ•°;
- router.goï¼šè·¯ç”±;

<br/><br/>

<br/><br/><br/>
> <h2 id="æ¨¡å‹è®¾è®¡">æ¨¡å‹è®¾è®¡</h2>

æ¨¡å‹è®¾è®¡çš„é‡ç‚¹åœ¨äºæ•°æ®è¡¨çš„è®¾è®¡ï¼Œæ•°æ®è¡¨çš„è®¾è®¡åŒ…æ‹¬ä¸¤ä¸ªæ–¹é¢ï¼šè¡¨åçš„è®¾è®¡ã€è¡¨ä¸­å­—æ®µåŠå­—æ®µç±»å‹çš„è®¾è®¡ã€‚æ¨¡å‹æ˜¯å¯¹å®ä½“çš„æŠ½è±¡ï¼Œæ„å‘³ç€è®¾è®¡æ•°æ®è¡¨çš„ç»“æ„é¦–å…ˆéœ€è¦æ˜ç¡®å®ä½“æ˜¯ä»€ä¹ˆã€‚å¦‚ä½•çŸ¥é“è¿™äº›å®ä½“ï¼Ÿä»è®¾è®¡å›¾ã€éœ€æ±‚æ–‡æ¡£ä¸­äº†è§£ã€‚

è¡¨åçš„è®¾è®¡è¦ç»Ÿä¸€è§„èŒƒï¼š**`æ•°æ®åº“+å®ä½“çš„å½¢å¼ï¼Œæ¯”å¦‚beeQuick_accountã€‚`**


<br/>

***
<br/><br/><br/>
> <h1 id="Makefileæ„å»ºé¡¹ç›®">Makefileæ„å»ºé¡¹ç›®</h1>

<br/><br/><br/>
> <h2 id="">makefileæ–‡ä»¶</h2>

**Makefileæ–‡ä»¶**

```
BINARY=BeeQuick

VERSION=1.0.0

BUILD=`date +%FT%T%z`

LDFLAGS=-ldflags "-X main.Env=production -s -w"

DEV_LDFLAGS=-ldflags "-X main.Env=dev"

TEST_LDFLAGS=-ldflags "-X main.Env=test"

default:
	go build -o ${BINARY} -v ${DEV_LDFLAGS} -tags=jsoniter

production:
	go build -o ${BINARY} -v ${LDFLAGS} -tags=jsoniter

dev:
	go build -o ${BINARY} -v ${DEV_LDFLAGS} -tags=jsoniter

test:
	go build -o ${BINARY} -v ${TEST_LDFLAGS} -tags=jsoniter

run:
	go run -v ${DEV_LDFLAGS} -tags=jsoniter main.go

.PHONY: default production dev test run
```


è¿™æ®µ `Makefile` ç”¨äºç¼–è¯‘å’Œè¿è¡Œ Go ä»£ç ï¼Œå¹¶æ ¹æ®ä¸åŒçš„ç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰ä½¿ç”¨ä¸åŒçš„ç¼–è¯‘å‚æ•°ã€‚ä¸‹é¢æ˜¯å¯¹ä»£ç çš„è¯¦ç»†è§£æï¼š

<br/><br/>
> <h2 id="å˜é‡å®šä¹‰éƒ¨åˆ†">å˜é‡å®šä¹‰éƒ¨åˆ†</h2>

æŒ‡å®šç¼–è¯‘åç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶åç§°ä¸º `BeeQuick`ã€‚

```makefile
BINARY=BeeQuick
```

<br/>

è®¾å®šåº”ç”¨ç¨‹åºçš„ç‰ˆæœ¬å·ä¸º `1.0.0`ã€‚

```makefile
VERSION=1.0.0
```

<br/>

- è·å–å½“å‰æ—¶é—´ä½œä¸º `BUILD` å˜é‡çš„å€¼ï¼Œæ ¼å¼ä¸º `YYYY-MM-DDTHH:MM:SS+æ—¶åŒº`ï¼ˆç¬¦åˆ ISO 8601 æ ¼å¼ï¼‰ã€‚
- ä½†è¿™é‡Œ `BUILD` å˜é‡æ²¡æœ‰è¢«ä½¿ç”¨ã€‚

```makefile
BUILD=`date +%FT%T%z`
```


<br/><br/>
> <h2 id="é“¾æ¥å‚æ•°ï¼ˆLDFLAGSï¼‰">é“¾æ¥å‚æ•°ï¼ˆLDFLAGSï¼‰</h2>

- `-ldflags` ä¼ é€’é“¾æ¥å‚æ•°ï¼š
  - `-X main.Env=production`ï¼šå°† `main.Env` å˜é‡çš„å€¼è®¾ç½®ä¸º `"production"`ã€‚
  - `-s -w`ï¼š
    - `-s`ï¼šå»æ‰ç¬¦å·è¡¨ï¼Œå‡å°‘äºŒè¿›åˆ¶æ–‡ä»¶ä½“ç§¯ã€‚
    - `-w`ï¼šå»æ‰è°ƒè¯•ä¿¡æ¯ï¼Œè¿›ä¸€æ­¥å‹ç¼©ä½“ç§¯ã€‚

```makefile
LDFLAGS=-ldflags "-X main.Env=production -s -w"
```


<br/>

- `-X main.Env=dev`ï¼šåœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œ`main.Env` å˜é‡çš„å€¼ä¸º `"dev"`ã€‚

```makefile
DEV_LDFLAGS=-ldflags "-X main.Env=dev"
```

<br/>

- `-X main.Env=test`ï¼šåœ¨æµ‹è¯•ç¯å¢ƒä¸‹ï¼Œ`main.Env` å˜é‡çš„å€¼ä¸º `"test"`ã€‚

```makefile
TEST_LDFLAGS=-ldflags "-X main.Env=test"
```

<br/><br/>
> <h2 id="æ„å»ºç›®æ ‡">æ„å»ºç›®æ ‡</h2>

1.**é»˜è®¤æ„å»º (`default`)**

```makefile
default:
	go build -o ${BINARY} -v ${DEV_LDFLAGS} -tags=jsoniter
```

- `go build`ï¼šç¼–è¯‘ Go ä»£ç ã€‚
- `-o ${BINARY}`ï¼šè¾“å‡ºäºŒè¿›åˆ¶æ–‡ä»¶åˆ° `BeeQuick`ã€‚
- `-v`ï¼šæ˜¾ç¤ºç¼–è¯‘è¿‡ç¨‹ä¸­å¯¼å…¥çš„åŒ…ã€‚
- `${DEV_LDFLAGS}`ï¼šä½¿ç”¨ `dev` ç¯å¢ƒçš„ `ldflags`ï¼Œå³ `-X main.Env=dev`ã€‚
- `-tags=jsoniter`ï¼šä½¿ç”¨ `jsoniter` ä½œä¸º JSON è§£æåº“ï¼ˆéœ€è¦åœ¨ä»£ç ä¸­ `// +build jsoniter` æˆ– `//go:build jsoniter`ï¼‰ã€‚

<br/>

- 2.**ç”Ÿäº§ç¯å¢ƒæ„å»º (`production`)**

```makefile
production:
	go build -o ${BINARY} -v ${LDFLAGS} -tags=jsoniter
```
- å’Œ `default` ç±»ä¼¼ï¼Œä½†ä½¿ç”¨ `LDFLAGS`ï¼ˆå³ `main.Env=production`ï¼‰ã€‚

<br/>

- 3.**å¼€å‘ç¯å¢ƒæ„å»º (`dev`)**

```makefile
dev:
	go build -o ${BINARY} -v ${DEV_LDFLAGS} -tags=jsoniter
```

- ä¸ `default` ç›®æ ‡ä¸€è‡´ï¼Œä¹Ÿæ˜¯å¼€å‘ç¯å¢ƒæ„å»ºã€‚

<br/>

- 4.**æµ‹è¯•ç¯å¢ƒæ„å»º (`test`)**

```makefile
test:
	go build -o ${BINARY} -v ${TEST_LDFLAGS} -tags=jsoniter
```
- ä½¿ç”¨ `TEST_LDFLAGS`ï¼Œå³ `main.Env=test`ã€‚

<br/><br/>
> <h2 id="">è¿è¡Œ</h2>

- **è¿è¡Œç›®æ ‡**

```makefile
run:
	go run -v ${DEV_LDFLAGS} -tags=jsoniter main.go
```
- `go run`ï¼šç¼–è¯‘å¹¶è¿è¡Œ `main.go`ã€‚
- `-v`ï¼šæ˜¾ç¤ºç¼–è¯‘è¿‡ç¨‹ã€‚
- `${DEV_LDFLAGS}`ï¼šä½¿ç”¨å¼€å‘ç¯å¢ƒï¼ˆ`main.Env=dev`ï¼‰ã€‚
- `-tags=jsoniter`ï¼šä½¿ç”¨ `jsoniter` ä½œä¸º JSON è§£æåº“ã€‚

<br/>

- **ä¼ªç›®æ ‡ (`.PHONY`)**

```makefile
.PHONY: default production dev test run
```

- `.PHONY` å£°æ˜è¿™äº›ç›®æ ‡æ˜¯ä¼ªç›®æ ‡ï¼Œå³ä½¿ç›®å½•ä¸­å­˜åœ¨åŒåæ–‡ä»¶ï¼Œä¹Ÿä¸ä¼šæŠŠå®ƒä»¬å½“ä½œæ–‡ä»¶æ¥æ‰§è¡Œï¼Œè€Œæ˜¯å§‹ç»ˆæ‰§è¡Œ Makefile ä¸­çš„è§„åˆ™ã€‚

<br/><br/>


### **æ€»ç»“**
1. **æ”¯æŒä¸åŒç¯å¢ƒçš„ç¼–è¯‘**ï¼š
   - `production`ï¼šç”Ÿäº§ç¯å¢ƒï¼ˆä¼˜åŒ–äºŒè¿›åˆ¶å¤§å°ï¼‰ã€‚
   - `dev`ï¼šå¼€å‘ç¯å¢ƒã€‚
   - `test`ï¼šæµ‹è¯•ç¯å¢ƒã€‚

2. **æ”¯æŒ JSON åº“åˆ‡æ¢**
   - é€šè¿‡ `-tags=jsoniter` è®©ä»£ç å¯ä»¥é€‰æ‹© `jsoniter` ä½œä¸º JSON è§£æåº“ã€‚

3. **æä¾› `run` ç›´æ¥è¿è¡Œ Go ä»£ç **
   - `run` ç›®æ ‡é€‚ç”¨äºå¼€å‘é˜¶æ®µï¼Œé¿å…æ¯æ¬¡æ‰‹åŠ¨æ‰§è¡Œ `go build` + `./BeeQuick`ã€‚

---

è¿™ä¸ª `Makefile` è®© Go ä»£ç çš„æ„å»ºå’Œè¿è¡Œæ›´åŠ é«˜æ•ˆï¼Œæ–¹ä¾¿åœ¨ä¸åŒç¯å¢ƒä¸­å¿«é€Ÿåˆ‡æ¢ã€‚ğŸš€




<br/>

***
<br/><br/><br/>
> <h1 id="åŒºåˆ†ç”Ÿäº§ã€å¼€å‘ã€æµ‹è¯•ç¯å¢ƒ">åŒºåˆ†ç”Ÿäº§ã€å¼€å‘ã€æµ‹è¯•ç¯å¢ƒ</h1>

åœ¨ Go è¯­è¨€ä¸­ï¼Œå¸¸è§çš„åšæ³•æ˜¯æ ¹æ®ä¸åŒçš„ **ç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰** è¿æ¥ä¸åŒçš„æ•°æ®åº“ã€‚ä½ å¯ä»¥ä½¿ç”¨ **é…ç½®æ–‡ä»¶ã€ç¯å¢ƒå˜é‡ã€å‘½ä»¤è¡Œå‚æ•°** æˆ– **Go å†…ç½®çš„ `build tags`** æ–¹å¼æ¥ç®¡ç†ä¸åŒçš„æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€‚


<br/><br/><br/>
> <h2 id="ä½¿ç”¨é…ç½®æ–‡ä»¶ymal">ä½¿ç”¨é…ç½®æ–‡ä»¶ymal</h2>
æˆ‘åœ¨é¡¹ç›®ä¸­é‡åˆ°äº†config.ymalå¦‚ä¸‹é…ç½®ï¼š

```
production:
   mysql:
     db: beequick_production
     user: root
     password: admin123
   postgres:
     db: beequick_production
     user: root
     password: admin123
dev:
   mysql:
     db: beequick_dev
     user: root
     password: admin123
   postgres:
     db: beequick_production
     user: root
     password: admin123
test:
   mysql:
     db: beequick_test
     user: root
     password: admin123
   postgres:
     db: beequick_production
     user: root
     password: admin123
```

<br/><br/>

**ymalé€‚ç”¨äºï¼š** é¡¹ç›®ä¸­ç¯å¢ƒè¾ƒå¤šï¼Œæ–¹ä¾¿ç®¡ç†ã€‚

- **1ï¸âƒ£ åˆ›å»º `config.yaml`**

```yaml
database:
  development:
    driver: "mysql"
    dsn: "dev_user:dev_pass@tcp(localhost:3306)/dev_db?charset=utf8mb4&parseTime=True&loc=Local"

  testing:
    driver: "sqlite3"
    dsn: "file::memory:?cache=shared"

  production:
    driver: "mysql"
    dsn: "prod_user:prod_pass@tcp(192.168.1.1:3306)/prod_db?charset=utf8mb4&parseTime=True&loc=Local"
```

<br/>

- **2ï¸âƒ£ è¯»å–é…ç½®æ–‡ä»¶**

ä½¿ç”¨ `go-yaml` è§£æé…ç½®ï¼š

```go
package main

import (
	"fmt"
	"log"
	"os"

	"gopkg.in/yaml.v3"
	"gorm.io/driver/mysql"
	"gorm.io/driver/sqlite"
	"gorm.io/gorm"
)

type Config struct {
	Database map[string]struct {
		Driver string `yaml:"driver"`
		DSN    string `yaml:"dsn"`
	} `yaml:"database"`
}

func loadConfig() (*Config, error) {
	file, err := os.ReadFile("config.yaml")
	if err != nil {
		return nil, err
	}
	var config Config
	err = yaml.Unmarshal(file, &config)
	return &config, err
}

func main() {
	config, err := loadConfig()
	if err != nil {
		log.Fatal("è¯»å–é…ç½®æ–‡ä»¶å¤±è´¥:", err)
	}

	env := os.Getenv("GO_ENV") // è¯»å–ç¯å¢ƒå˜é‡
	if env == "" {
		env = "development" // é»˜è®¤å¼€å‘ç¯å¢ƒ
	}

	dbConfig, exists := config.Database[env]
	if !exists {
		log.Fatal("æœªæ‰¾åˆ°å¯¹åº”çš„æ•°æ®åº“é…ç½®:", env)
	}

	var db *gorm.DB
	switch dbConfig.Driver {
	case "mysql":
		db, err = gorm.Open(mysql.Open(dbConfig.DSN), &gorm.Config{})
	case "sqlite3":
		db, err = gorm.Open(sqlite.Open(dbConfig.DSN), &gorm.Config{})
	default:
		log.Fatal("ä¸æ”¯æŒçš„æ•°æ®åº“é©±åŠ¨:", dbConfig.Driver)
	}

	if err != nil {
		log.Fatal("æ•°æ®åº“è¿æ¥å¤±è´¥:", err)
	}

	fmt.Println("æ•°æ®åº“è¿æ¥æˆåŠŸï¼")
}
```

<br/>

- **3ï¸âƒ£ è¿è¡Œ**
- **å¼€å‘ç¯å¢ƒ**

```sh
GO_ENV=development go run main.go
```

<br/>
- **æµ‹è¯•ç¯å¢ƒ**

```sh
GO_ENV=testing go run main.go
```

<br/>

- **ç”Ÿäº§ç¯å¢ƒ**

```sh
GO_ENV=production go run main.go
```

<br/><br/><br/>

> <h2 id="ä½¿ç”¨`.env`æ–‡ä»¶">ä½¿ç”¨ `.env` æ–‡ä»¶</h2>

**é€‚ç”¨äºï¼š** éœ€è¦ç®€å•åœ°ç®¡ç†ç¯å¢ƒå˜é‡ã€‚

- **1ï¸âƒ£ åˆ›å»º `.env`**

```
GO_ENV=development
DB_DRIVER=mysql
DB_DSN=dev_user:dev_pass@tcp(localhost:3306)/dev_db?charset=utf8mb4&parseTime=True&loc=Local
```

<br/>

- **2ï¸âƒ£ è¯»å– `.env` æ–‡ä»¶**

ä½¿ç”¨ `github.com/joho/godotenv`ï¼š

```go
package main

import (
	"fmt"
	"log"
	"os"

	"github.com/joho/godotenv"
	"gorm.io/driver/mysql"
	"gorm.io/gorm"
)

func main() {
	err := godotenv.Load()
	if err != nil {
		log.Fatal("åŠ è½½ .env æ–‡ä»¶å¤±è´¥")
	}

	dbDriver := os.Getenv("DB_DRIVER")
	dbDSN := os.Getenv("DB_DSN")

	var db *gorm.DB
	switch dbDriver {
	case "mysql":
		db, err = gorm.Open(mysql.Open(dbDSN), &gorm.Config{})
	default:
		log.Fatal("ä¸æ”¯æŒçš„æ•°æ®åº“é©±åŠ¨:", dbDriver)
	}

	if err != nil {
		log.Fatal("æ•°æ®åº“è¿æ¥å¤±è´¥:", err)
	}

	fmt.Println("æ•°æ®åº“è¿æ¥æˆåŠŸï¼")
}
```

<br/>

- **3ï¸âƒ£ è¿è¡Œ**

```sh
GO_ENV=production go run main.go
```

<br/><br/><br/>
> <h2 id="buildtagsç¼–è¯‘æ—¶åŒºåˆ†ç¯å¢ƒ">build tags`ï¼ˆç¼–è¯‘æ—¶åŒºåˆ†ç¯å¢ƒï¼‰</h2>

**é€‚ç”¨äºï¼š** ä¸æƒ³åœ¨è¿è¡Œæ—¶åˆ‡æ¢ï¼Œè€Œæ˜¯åœ¨ç¼–è¯‘æ—¶å†³å®šã€‚

- **1ï¸âƒ£ åˆ›å»º `db_dev.go`**

```go
//go:build dev
package config

import (
	"fmt"
	"gorm.io/driver/mysql"
	"gorm.io/gorm"
)

func ConnectDB() (*gorm.DB, error) {
	dsn := "dev_user:dev_pass@tcp(localhost:3306)/dev_db?charset=utf8mb4&parseTime=True&loc=Local"
	db, err := gorm.Open(mysql.Open(dsn), &gorm.Config{})
	if err != nil {
		return nil, err
	}
	fmt.Println("è¿æ¥å¼€å‘ç¯å¢ƒæ•°æ®åº“")
	return db, nil
}
```

<br/>

- **2ï¸âƒ£ åˆ›å»º `db_prod.go`**

```go
//go:build prod
package config

import (
	"fmt"
	"gorm.io/driver/mysql"
	"gorm.io/gorm"
)

func ConnectDB() (*gorm.DB, error) {
	dsn := "prod_user:prod_pass@tcp(192.168.1.1:3306)/prod_db?charset=utf8mb4&parseTime=True&loc=Local"
	db, err := gorm.Open(mysql.Open(dsn), &gorm.Config{})
	if err != nil {
		return nil, err
	}
	fmt.Println("è¿æ¥ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“")
	return db, nil
}
```

<br/>

- **3ï¸âƒ£ è¿è¡Œ**

- **å¼€å‘ç¯å¢ƒ**

```sh
go run -tags=dev main.go
```

<br/>

- **ç”Ÿäº§ç¯å¢ƒ**

```sh
go run -tags=prod main.go
```

<br/><br/><br/>
> <h2 id="ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°">ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°</h2>

**é€‚ç”¨äºï¼š** éœ€è¦åœ¨è¿è¡Œæ—¶æ‰‹åŠ¨æŒ‡å®šç¯å¢ƒã€‚

```go
package main

import (
	"flag"
	"fmt"
	"log"

	"gorm.io/driver/mysql"
	"gorm.io/gorm"
)

var env string

func init() {
	flag.StringVar(&env, "env", "development", "é€‰æ‹©è¿è¡Œç¯å¢ƒ")
}

func main() {
	flag.Parse() // è§£æå‘½ä»¤è¡Œå‚æ•°

	var dsn string
	switch env {
	case "development":
		dsn = "dev_user:dev_pass@tcp(localhost:3306)/dev_db?charset=utf8mb4&parseTime=True&loc=Local"
	case "production":
		dsn = "prod_user:prod_pass@tcp(192.168.1.1:3306)/prod_db?charset=utf8mb4&parseTime=True&loc=Local"
	default:
		log.Fatal("æœªçŸ¥ç¯å¢ƒ:", env)
	}

	db, err := gorm.Open(mysql.Open(dsn), &gorm.Config{})
	if err != nil {
		log.Fatal("æ•°æ®åº“è¿æ¥å¤±è´¥:", err)
	}

	fmt.Println("è¿æ¥æˆåŠŸï¼Œç¯å¢ƒ:", env)
}
```

<br/>

- **è¿è¡Œ**

- **å¼€å‘ç¯å¢ƒ**

```sh
go run main.go -env=development
```

<br/>

**ç”Ÿäº§ç¯å¢ƒ**

```sh
go run main.go -env=production
```


<br/><br/>> <h2 id="æ€»ç»“">æ€»ç»“</h2>

| æ–¹å¼ | é€‚ç”¨åœºæ™¯ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|--------|------|------|
| **é…ç½®æ–‡ä»¶ï¼ˆYAMLï¼‰** | å¤æ‚é¡¹ç›®ã€å›¢é˜Ÿå¼€å‘ | æ˜“ç»´æŠ¤ã€å¯æ‰©å±• | éœ€è¦è§£æ YAML |
| **`.env` æ–‡ä»¶** | è½»é‡çº§ç¯å¢ƒç®¡ç† | é€‚åˆå°é¡¹ç›® | å¯èƒ½æš´éœ²ç¯å¢ƒå˜é‡ |
| **`build tags`** | ç¼–è¯‘æ—¶ç¡®å®šç¯å¢ƒ | è¿è¡Œæ—¶æ— é¢å¤–æ¶ˆè€— | éœ€è¦ç¼–è¯‘ä¸åŒç‰ˆæœ¬ |
| **å‘½ä»¤è¡Œå‚æ•°** | éœ€è¦çµæ´»é€‰æ‹©ç¯å¢ƒ | æ–¹ä¾¿è°ƒè¯• | éœ€è¦æ‰‹åŠ¨è¾“å…¥å‚æ•° |

å¦‚æœæ˜¯ **ä¸­å¤§å‹é¡¹ç›®**ï¼Œæ¨è **é…ç½®æ–‡ä»¶ï¼ˆYAMLï¼‰+ ç¯å¢ƒå˜é‡** æ–¹å¼ï¼Œçµæ´»ä¸”æ˜“äºç»´æŠ¤ã€‚ğŸš€



<br/>

***
<br/><br/><br/>
> <h1 id="å®¹å™¨åŒ–å¹³å°">å®¹å™¨åŒ–å¹³å°</h1>

<br/><br/><br/>
> <h2 id="Docker">Docker</h2>

<br/><br/>
> <h2 id="ä»‹ç»">ä»‹ç»</h2>

Docker æ˜¯ä¸€ä¸ª**å®¹å™¨åŒ–**å¹³å°ï¼Œä¸»è¦ç”¨äº**æ„å»ºã€æ‰“åŒ…ã€åˆ†å‘å’Œè¿è¡Œ**åº”ç”¨ç¨‹åºã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯è®©åº”ç”¨ç¨‹åºåŠå…¶ä¾èµ–é¡¹ä¸€èµ·å°è£…åœ¨ä¸€ä¸ª**è½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨**ä¸­ï¼Œä»è€Œç¡®ä¿åº”ç”¨èƒ½å¤Ÿåœ¨ä¸åŒçš„ç¯å¢ƒï¼ˆå¦‚å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰ä¸­ä¸€è‡´è¿è¡Œã€‚

<br/>

- **Docker çš„ä¸»è¦ç”¨é€”**

<br/>

- **1.ç¯å¢ƒä¸€è‡´æ€§**  
	- è§£å†³â€œ**åœ¨æˆ‘ç”µè„‘ä¸Šå¯ä»¥è·‘**ï¼Œä½†åœ¨æœåŠ¡å™¨ä¸Šæœ‰é—®é¢˜â€çš„é—®é¢˜ã€‚  
	- é€šè¿‡å®¹å™¨è®©åº”ç”¨åŠå…¶ä¾èµ–ç¯å¢ƒå§‹ç»ˆä¸€è‡´ã€‚

<br/>

- **2.å¿«é€Ÿéƒ¨ç½²ä¸æ‰©å±•**  
	- è½»é‡çº§å®¹å™¨å¯åŠ¨é€Ÿåº¦å¿«ï¼Œé€‚åˆå¾®æœåŠ¡æ¶æ„ã€‚  
	- å¯åœ¨æœ¬åœ°å¼€å‘ï¼Œç›´æ¥æ‰“åŒ…éƒ¨ç½²åˆ°äº‘ç«¯æˆ–æœåŠ¡å™¨ã€‚

<br/>

- **3.ä¾èµ–ç®¡ç†**  
	- è§£å†³ä¸åŒé¡¹ç›®éœ€è¦ä¸åŒä¾èµ–çš„é—®é¢˜ï¼Œæ¯”å¦‚ Python2 å’Œ Python3 å…±å­˜ã€‚  
	- å®¹å™¨å†…çš„ç¯å¢ƒå½¼æ­¤éš”ç¦»ï¼Œä¸ä¼šäº’ç›¸å½±å“ã€‚

<br/>

-  **4.è·¨å¹³å°è¿è¡Œ**  
	- å®¹å™¨èƒ½åœ¨**Windowsã€macOSã€Linux**ä¸Šè¿è¡Œï¼Œè§£å†³ä¸åŒå¹³å°çš„å…¼å®¹æ€§é—®é¢˜ã€‚  
	- åªéœ€å®‰è£… Dockerï¼Œå°±èƒ½è¿è¡Œç›¸åŒçš„å®¹å™¨ï¼Œæ— éœ€é¢å¤–é…ç½®ç¯å¢ƒã€‚

<br/>

-  **5.ç‰ˆæœ¬ç®¡ç†**  
	- é€šè¿‡ Docker **é•œåƒ**ï¼ˆImageï¼‰ç®¡ç†åº”ç”¨çš„ä¸åŒç‰ˆæœ¬ï¼Œå¯ä»¥å›æ»šã€æ›´æ–°ã€‚  
	- ç±»ä¼¼äº Gitï¼ŒDocker Hub ä¹Ÿå¯ä»¥å­˜å‚¨å’Œåˆ†å‘é•œåƒã€‚

<br/>

-  **6.å¾®æœåŠ¡æ¶æ„**  
	- é€‚åˆæ‹†åˆ†å¤§å‹åº”ç”¨ï¼Œæ¯ä¸ªæœåŠ¡åœ¨ç‹¬ç«‹å®¹å™¨ä¸­è¿è¡Œï¼Œäº’ä¸å½±å“ã€‚  
	- é€šè¿‡ `docker-compose` æ–¹ä¾¿ç®¡ç†å¤šä¸ªå®¹å™¨ã€‚

<br/><br/>
- **æ ¸å¿ƒæ¦‚å¿µ**

<br/>

- **é•œåƒï¼ˆImageï¼‰**ï¼š  
	- ç±»ä¼¼äºâ€œæ¨¡æ¿â€ï¼ŒåŒ…å«åº”ç”¨åŠå…¶ç¯å¢ƒçš„æ‰€æœ‰å†…å®¹ã€‚  
	- ä¾‹å¦‚ï¼š`nginx:latest` æ˜¯å®˜æ–¹æä¾›çš„ Nginx æœåŠ¡å™¨é•œåƒã€‚

<br/>

- **å®¹å™¨ï¼ˆContainerï¼‰**ï¼š  
	- ç”±é•œåƒè¿è¡Œè€Œæ¥çš„å®ä¾‹ï¼Œæ˜¯çœŸæ­£è¿è¡Œçš„åº”ç”¨ã€‚  
	- ä¾‹å¦‚ï¼šç”¨ `docker run -d nginx` å¯åŠ¨ä¸€ä¸ª Nginx å®¹å™¨ã€‚

<br/>

- **Docker Hub**ï¼š  
	- å®˜æ–¹æä¾›çš„é•œåƒä»“åº“ï¼Œå¯ä»¥ä¸‹è½½å’Œä¸Šä¼ é•œåƒã€‚

<br/>

- **Docker Compose**ï¼š  
	- ç”¨ `docker-compose.yml` å®šä¹‰å¤šä¸ªå®¹å™¨çš„è¿è¡Œæ–¹å¼ï¼Œä¸€é”®å¯åŠ¨æ•´ä¸ªåº”ç”¨ã€‚

<br/><br/>

- **ç®€å•ç¤ºä¾‹**

è¿è¡Œä¸€ä¸ª Nginx æœåŠ¡å™¨ï¼š

```bash
docker run -d -p 8080:80 nginx
```
è®¿é—® `http://localhost:8080` å°±èƒ½çœ‹åˆ° Nginx é¡µé¢ã€‚

<br/><br/>
> <h2 id="Dockerå¯åŠ¨mysql">Dockerå¯åŠ¨mysql</h2>

ä½¿ç”¨ **Docker Compose** æ¥ç¼–æ’å¯åŠ¨ **MySQL**ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª `docker-compose.yml` æ–‡ä»¶ï¼Œå®šä¹‰ MySQL å®¹å™¨åŠç›¸å…³å‚æ•°ã€‚

<br/>

- **1. åˆ›å»º `docker-compose.yml` æ–‡ä»¶**

åœ¨ä½ çš„é¡¹ç›®ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ª `docker-compose.yml` æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š

```yaml
version: '3.8'

services:
  mysql:
    image: mysql:8.0  # æŒ‡å®š MySQL ç‰ˆæœ¬
    container_name: my_mysql  # å®¹å™¨åç§°
    restart: always  # è‡ªåŠ¨é‡å¯
    environment:
      MYSQL_ROOT_PASSWORD: root123  # è®¾ç½® root ç”¨æˆ·å¯†ç 
      MYSQL_DATABASE: test_db  # åˆ›å»ºçš„é»˜è®¤æ•°æ®åº“
      MYSQL_USER: test_user  # åˆ›å»ºçš„é»˜è®¤ç”¨æˆ·
      MYSQL_PASSWORD: test_pass  # ç”¨æˆ·çš„å¯†ç 
    ports:
      - "3306:3306"  # æ˜ å°„ç«¯å£ï¼Œå®¿ä¸»æœºçš„ 3306 ç«¯å£ -> å®¹å™¨çš„ 3306 ç«¯å£
    volumes:
      - mysql_data:/var/lib/mysql  # æ•°æ®æŒä¹…åŒ–
    networks:
      - my_network  # è¿æ¥åˆ°è‡ªå®šä¹‰ç½‘ç»œ

volumes:
  mysql_data:

networks:
  my_network:
```

<br/>

- **2. å¯åŠ¨ MySQL å®¹å™¨**

åœ¨ `docker-compose.yml` æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•è¿è¡Œï¼š

```sh
docker-compose up -d
```
`-d` é€‰é¡¹è®© MySQL åœ¨åå°è¿è¡Œã€‚

<br/>

- **3. æ£€æŸ¥ MySQL å®¹å™¨çŠ¶æ€**

```sh
docker ps
```

å¦‚æœçœ‹åˆ° `my_mysql` å®¹å™¨åœ¨è¿è¡Œï¼Œè¯´æ˜ MySQL å¯åŠ¨æˆåŠŸã€‚

<br/>

- **4. è¿æ¥åˆ° MySQL**

**æ–¹æ³• 1ï¼šä½¿ç”¨ `mysql` å‘½ä»¤è¡Œå®¢æˆ·ç«¯**

```sh
mysql -h 127.0.0.1 -P 3306 -u test_user -p
```

è¾“å…¥ `test_pass` è¿›è¡Œç™»å½•ã€‚

<br/>

**æ–¹æ³• 2ï¼šè¿›å…¥ MySQL å®¹å™¨å†…éƒ¨**

```sh
docker exec -it my_mysql mysql -u root -p
```
è¾“å…¥ `root123` è¿›è¡Œç™»å½•ã€‚

<br/>

- **5. åœæ­¢ MySQL å®¹å™¨**

```sh
docker-compose down
```

å¦‚æœæƒ³ä¿ç•™æ•°æ®ï¼ŒåŠ  `-v` é€‰é¡¹ä¼šæ¸…é™¤æ•°æ®å·ï¼š

```sh
docker-compose down -v
```

<br/>

- **6. ä¿®æ”¹é…ç½®ï¼ˆå¯é€‰ï¼‰**

å¦‚æœéœ€è¦ä¿®æ”¹ MySQL çš„é…ç½®ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª `my.cnf` æ–‡ä»¶ï¼š

```ini
[mysqld]
max_connections = 500
sql_mode = "STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION"
```
ç„¶ååœ¨ `docker-compose.yml` ä¸­æŒ‚è½½ï¼š

```yaml
    volumes:
      - mysql_data:/var/lib/mysql
      - ./my.cnf:/etc/mysql/conf.d/my.cnf  # æŒ‚è½½è‡ªå®šä¹‰é…ç½®
```

**é‡å¯ MySQL å®¹å™¨åç”Ÿæ•ˆ**ï¼š

```sh
docker-compose restart
```

<br/>

- **æ€»ç»“**
	- é€šè¿‡ `docker-compose.yml` ä¸€é”®å¯åŠ¨ MySQLã€‚
	- æ•°æ®æŒä¹…åŒ–ï¼Œé‡å¯ä¸ä¼šä¸¢å¤±ã€‚
	- ç«¯å£æ˜ å°„ï¼Œå¯ç”¨ `mysql` è¿æ¥ç®¡ç†æ•°æ®åº“ã€‚
	- ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ MySQL é…ç½®ï¼Œæé«˜æ€§èƒ½ã€‚

ğŸš€ è¿™æ ·ï¼Œä½ çš„ **MySQL å®¹å™¨** å°±å¯ä»¥è¿è¡Œåœ¨ Docker ç¯å¢ƒä¸­äº†ï¼


<br/>

***
<br/><br/><br/>
> <h1 id="é¡¹ç›®è¯­æ³•">é¡¹ç›®è¯­æ³•</h1>

<br/><br/><br/>
> <h1 id="BeekQuickProjecté™Œç”Ÿè¯­æ³•">BeekQuickProjecté™Œç”Ÿè¯­æ³•</h1>


<br/><br/><br/>
> <h2 id="å‚æ•°éªŒè¯">å‚æ•°éªŒè¯</h2>
    
```
param.Valid().Struct(param) è¯¦è§£
```

**è§£æå¦‚ä¸‹ï¼š**

è¿™æ®µä»£ç é€šå¸¸å‡ºç°åœ¨ Go è¯­è¨€çš„ **å‚æ•°éªŒè¯** åœºæ™¯ä¸­ï¼Œå¯èƒ½æ¶‰åŠ `github.com/go-playground/validator/v10` è¿™ä¸ªæµè¡Œçš„ Go ç»“æ„ä½“éªŒè¯åº“ã€‚

<br/>

- **1ï¸âƒ£ `param.Valid()`**
	- `Valid()` å¯èƒ½æ˜¯ `param` ç»“æ„ä½“çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ª **éªŒè¯å™¨å®ä¾‹**ã€‚
	- å…·ä½“çš„ `Valid()` å®ç°å–å†³äº `param` çš„ç±»å‹ã€‚
	- **å¸¸è§æƒ…å†µ**ï¼šå¦‚æœ `param` æ˜¯è‡ªå®šä¹‰çš„ç»“æ„ä½“ï¼Œé‚£ä¹ˆ `Valid()` å¯èƒ½æ˜¯å®ƒçš„æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ª **validator å®ä¾‹**ï¼Œä¾‹å¦‚ï¼š

```go
func (p *Param) Valid() *validator.Validate {
  return validator.New()  // åˆ›å»ºæ–°çš„éªŒè¯å™¨
}
```

è¿™æ ·ï¼Œåœ¨ `param.Valid()` ä¹‹åï¼Œå°±å¾—åˆ°äº†ä¸€ä¸ª`validator.Validate` å¯¹è±¡ã€‚

<br/>

- **2ï¸âƒ£ `.Struct(param)`**
	- `Struct(param)` æ˜¯ `go-playground/validator` æä¾›çš„æ–¹æ³•ï¼Œç”¨äº **éªŒè¯ç»“æ„ä½“å‚æ•°** æ˜¯å¦ç¬¦åˆå®šä¹‰çš„æ ‡ç­¾ï¼ˆtagsï¼‰ã€‚
	- å®ƒçš„ä½œç”¨æ˜¯æ£€æŸ¥ `param` è¿™ä¸ªç»“æ„ä½“çš„å­—æ®µï¼Œç¡®ä¿ç¬¦åˆå®šä¹‰çš„è§„åˆ™ã€‚

- **ç¤ºä¾‹**ï¼š

```go
type User struct {
  Name  string `validate:"required"`   // Name å­—æ®µä¸èƒ½ä¸ºç©º
  Age   int    `validate:"gte=18"`     // Age å¿…é¡» >= 18
  Email string `validate:"required,email"`  // å¿…é¡»æ˜¯åˆæ³•çš„ email
}

func main() {
  validate := validator.New()
  user := User{Name: "Tom", Age: 17, Email: "invalid-email"}

  err := validate.Struct(user)
  if err != nil {
      fmt.Println("Validation failed:", err)
  }
}
```

- `validate.Struct(user)` ä¼šæ£€æŸ¥ `user` ç»“æ„ä½“ï¼š
	- `Name` ä¸èƒ½ä¸ºç©ºï¼ˆâœ… ç¬¦åˆï¼‰
	- `Age` å¿…é¡» â‰¥18ï¼ˆâŒ ä¸ç¬¦åˆï¼‰
	- `Email` å¿…é¡»æ˜¯åˆæ³•çš„ emailï¼ˆâŒ ä¸ç¬¦åˆï¼‰

<br/>

- æ‰€ä»¥è¿™æ®µä»£ç ä¼šè¾“å‡ºï¼š

```
Validation failed: Key: 'User.Age' Error:Field validation for 'Age' failed on the 'gte' tag
Key: 'User.Email' Error:Field validation for 'Email' failed on the 'email' tag
```

<br/>

- **ç»¼åˆç¤ºä¾‹**

ç»“åˆ `param.Valid().Struct(param)` å¯èƒ½çš„ç”¨æ³•ï¼Œæˆ‘ä»¬å‡è®¾ `Valid()` æ˜¯ `Param` ç»“æ„ä½“çš„ä¸€ä¸ªæ–¹æ³•ï¼š

```go
package main

import (
    "fmt"
    "github.com/go-playground/validator/v10"
)

// å®šä¹‰ç»“æ„ä½“
type Param struct {
    Name  string `validate:"required"`
    Age   int    `validate:"gte=18"`
}

// åœ¨ Param ç»“æ„ä½“ä¸­å®ç° Valid æ–¹æ³•
func (p *Param) Valid() *validator.Validate {
    return validator.New()
}

func main() {
    param := Param{Name: "", Age: 16} // Name ä¸ºç©ºï¼ŒAge å°äº 18
    validate := param.Valid()

    err := validate.Struct(param)
    if err != nil {
        fmt.Println("å‚æ•°éªŒè¯å¤±è´¥:", err)
    }
}
```
- **`param.Valid()`** è¿”å› `validator.New()`
- **`validate.Struct(param)`** æ‰§è¡Œç»“æ„ä½“å­—æ®µéªŒè¯
- **è¾“å‡ºç»“æœ**ï¼š

```
å‚æ•°éªŒè¯å¤±è´¥: Key: 'Param.Name' Error:Field validation for 'Name' failed on the 'required' tag
Key: 'Param.Age' Error:Field validation for 'Age' failed on the 'gte' tag
```

<br/>

- **æ€»ç»“`param.Valid().Struct(param)` çš„ä½œç”¨ï¼š**
	1. **`Valid()` è¿”å›ä¸€ä¸ª `validator` å®ä¾‹**ã€‚
	2. **`Struct(param)` æ‰§è¡Œç»“æ„ä½“å­—æ®µæ ¡éªŒ**ï¼Œæ£€æŸ¥æ˜¯å¦ç¬¦åˆ `validate` æ ‡ç­¾è§„åˆ™ã€‚
	3. **é€‚ç”¨äº API å‚æ•°éªŒè¯ã€è¡¨å•æ ¡éªŒç­‰**ï¼Œé˜²æ­¢éæ³•è¾“å…¥ã€‚

<br/>

- **å¯èƒ½çš„å˜ä½“**

å¦‚æœ `Valid()` ä¸æ˜¯è¿”å› `validator.New()`ï¼Œè€Œæ˜¯å°è£…äº†é€šç”¨éªŒè¯é€»è¾‘ï¼Œæ¯”å¦‚ï¼š

```go
func (p *Param) Valid() error {
    return validator.New().Struct(p)
}
```
é‚£ä¹ˆä»£ç å°±å¯ä»¥ç®€åŒ–ä¸ºï¼š

```go
if err := param.Valid(); err != nil {
    fmt.Println("å‚æ•°éªŒè¯å¤±è´¥:", err)
}
```
è¿™æ ·æ›´åŠ ç®€æ´ï¼Œé¿å…æ¯æ¬¡éƒ½è°ƒç”¨ `.Struct(param)`ã€‚

<br/><br/><br/>
> <h2 id="è‡ªå®šä¹‰ç»“æ„ä½“è®¤è¯">è‡ªå®šä¹‰ç»“æ„ä½“éªŒè¯</h2>

**`validate.RegisterStructValidation(registerValidation, RegisterParam{})` è¯¦è§£**

è¿™è¡Œä»£ç é€šå¸¸ç”¨äº**è‡ªå®šä¹‰ç»“æ„ä½“éªŒè¯ä»£ç æ‹†è§£**

```go
validate.RegisterStructValidation(registerValidation, RegisterParam{})
```

<br/>

- **1ï¸âƒ£ `validate.RegisterStructValidation(fn, structType{})`**
	- ä½œç”¨ï¼š**æ³¨å†Œ** è‡ªå®šä¹‰ç»“æ„ä½“éªŒè¯å‡½æ•° `fn`ï¼Œç”¨äºæ£€æŸ¥ `structType{}` ç»“æ„ä½“çš„é¢å¤–è§„åˆ™ã€‚
	- `fn` å¿…é¡»æ˜¯ä¸€ä¸ª **ç¬¦åˆç‰¹å®šç­¾å** çš„å‡½æ•°ï¼Œä¾‹å¦‚ï¼š

```go
func(registerValidationStruct validator.StructLevel)
```

- **`structType{}`** æ˜¯è¦éªŒè¯çš„ç»“æ„ä½“çš„ç¤ºä¾‹ï¼Œè¡¨æ˜ `fn` é€‚ç”¨äºè¿™ç§ç±»å‹çš„ç»“æ„ä½“ã€‚

<br/>

- **2ï¸âƒ£ `registerValidation`ï¼ˆè‡ªå®šä¹‰éªŒè¯å‡½æ•°ï¼‰**

åœ¨ `registerValidation` é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ **é¢å¤–çš„ç»“æ„ä½“çº§åˆ«éªŒè¯é€»è¾‘**ï¼Œè¶…å‡ºæ™®é€š `validate` æ ‡ç­¾çš„èŒƒå›´ã€‚

**ç¤ºä¾‹**

```go
package main

import (
    "fmt"
    "github.com/go-playground/validator/v10"
)

// å®šä¹‰è¦éªŒè¯çš„ç»“æ„ä½“
type RegisterParam struct {
    Password        string `validate:"required"`
    ConfirmPassword string `validate:"required"`
}

// è‡ªå®šä¹‰ç»“æ„ä½“éªŒè¯ï¼šæ£€æŸ¥å¯†ç å’Œç¡®è®¤å¯†ç æ˜¯å¦ä¸€è‡´
func registerValidation(sl validator.StructLevel) {
    param := sl.Current().Interface().(RegisterParam) // è·å–å½“å‰ç»“æ„ä½“å®ä¾‹

    if param.Password != param.ConfirmPassword {
        sl.ReportError(param.ConfirmPassword, "ConfirmPassword", "ConfirmPassword", "match", "Password")
    }
}

func main() {
    validate := validator.New()
    
    // æ³¨å†Œç»“æ„ä½“çº§åˆ«çš„éªŒè¯
    validate.RegisterStructValidation(registerValidation, RegisterParam{})

    // æµ‹è¯•æ•°æ®
    param := RegisterParam{
        Password:        "123456",
        ConfirmPassword: "654321", // ä¸åŒ¹é…
    }

    err := validate.Struct(param)
    if err != nil {
        fmt.Println("éªŒè¯å¤±è´¥:", err)
    } else {
        fmt.Println("éªŒè¯é€šè¿‡")
    }
}
```

 **è¿è¡Œç»“æœ**

```
éªŒè¯å¤±è´¥: Key: 'RegisterParam.ConfirmPassword' Error:Field validation for 'ConfirmPassword' failed on the 'match' tag
```

> **è§£é‡Š**ï¼š
> - `registerValidation` å…ˆè·å– `RegisterParam` ç»“æ„ä½“å®ä¾‹ã€‚
> - æ£€æŸ¥ `Password` å’Œ `ConfirmPassword` æ˜¯å¦ç›¸ç­‰ã€‚
> - å¦‚æœä¸åŒ¹é…ï¼Œè°ƒç”¨ `sl.ReportError()` æŠ¥å‘Šé”™è¯¯ï¼Œæœ€ç»ˆ `validate.Struct(param)` å¤±è´¥ã€‚

<br/>

- **ğŸ“Œ `validate.RegisterStructValidation(fn, structType{})` é€‚ç”¨åœºæ™¯**
	1. **æ— æ³•ä½¿ç”¨ `validate` æ ‡ç­¾è¡¨è¾¾çš„å¤æ‚éªŒè¯**
	   - ä¾‹å¦‚ï¼š**å¯†ç åŒ¹é…**ã€**æ—¥æœŸå‰åå…³ç³»æ£€æŸ¥**ã€**å¤šå­—æ®µä¾èµ–** ç­‰ã€‚
	   
	2. **éœ€è¦è®¿é—®æ•´ä¸ªç»“æ„ä½“æ•°æ®è¿›è¡Œé€»è¾‘åˆ¤æ–­**
   - æ¯”å¦‚ **`startDate` å¿…é¡»æ—©äº `endDate`**ï¼š
 
 ```go
 type Event struct {
     StartDate time.Time `validate:"required"`
     EndDate   time.Time `validate:"required"`
 }

 func eventValidation(sl validator.StructLevel) {
     event := sl.Current().Interface().(Event)
     if event.StartDate.After(event.EndDate) {
         sl.ReportError(event.EndDate, "EndDate", "EndDate", "after", "StartDate")
     }
 }
 ```

<br/>

3. **è·¨å­—æ®µæ¯”è¾ƒ**
   - ä¾‹å¦‚ï¼Œ**æŸä¸ªå­—æ®µä¸èƒ½å’Œå¦ä¸€ä¸ªå­—æ®µç›¸ç­‰**ï¼š
 
 ```go
 type User struct {
     Username string `validate:"required"`
     Email    string `validate:"required,email"`
 }

 func userValidation(sl validator.StructLevel) {
     user := sl.Current().Interface().(User)
     if user.Username == user.Email {
         sl.ReportError(user.Email, "Email", "Email", "notEqual", "Username")
     }
 }
 ```

<br/>

- **æ€»ç»“**
	- `validate.RegisterStructValidation(fn, structType{})` **æ³¨å†Œç»“æ„ä½“çº§åˆ«éªŒè¯**ï¼Œç”¨äº **å¤æ‚é€»è¾‘**ï¼ˆè·¨å­—æ®µæ£€æŸ¥ï¼‰ã€‚
	- `fn` å¿…é¡»æ˜¯ `func(sl validator.StructLevel)`ï¼Œå¯ä»¥ç”¨ `sl.ReportError()` æ ‡è®°é”™è¯¯ã€‚
	- é€‚ç”¨äº **å¯†ç åŒ¹é…ã€æ—¶é—´èŒƒå›´ã€ä¾èµ–å­—æ®µéªŒè¯ç­‰** é«˜çº§åœºæ™¯ã€‚

ğŸš€ **è¿™æ ·å¯ä»¥å¢å¼º `go-playground/validator` çš„èƒ½åŠ›ï¼Œä½¿å‚æ•°éªŒè¯æ›´çµæ´»ã€æ›´å¼ºå¤§ï¼**

<br/><br/><br/>
> <h2 id="è®°å½•è¯·æ±‚æ—¥å¿—"> ğŸ“Œè®°å½•è¯·æ±‚æ—¥å¿—</h2>

```
func LoggerForProject(c iris.Context) {
	c.Application().Logger().Debugf("Path: %s | IP: %s | Time: %s",
		c.Path(), c.RemoteAddr(), time.Now().Format("2006-01-02 15:04:05"))
	c.Next()
}
```

- **`LoggerForProject(c iris.Context)` è¯¦è§£**
è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ª **Iris ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰**ï¼Œç”¨äº **è®°å½•è¯·æ±‚æ—¥å¿—**ï¼ŒåŒ…æ‹¬ï¼š
	- **è¯·æ±‚è·¯å¾„ï¼ˆPathï¼‰**
	- **å®¢æˆ·ç«¯ IP åœ°å€ï¼ˆIPï¼‰**
	- **å½“å‰æ—¶é—´ï¼ˆTimeï¼‰**

<br/>

- **ğŸ”¹ 1ï¸âƒ£ `c.Application().Logger().Debugf(...)`**
> **è·å– Iris Logger å¹¶æ‰“å°æ—¥å¿—**

- `c.Application()`  
  è·å–å½“å‰ **Iris åº”ç”¨å®ä¾‹**ï¼ˆ`*iris.Application`ï¼‰ã€‚

- `.Logger()`  
  è·å– **æ—¥å¿—ç®¡ç†å™¨**ï¼ˆIris å†…ç½® `Logger`ï¼‰ã€‚

- `.Debugf(format, args...)`  
  **æ ¼å¼åŒ–** å¹¶ **ä»¥ Debug çº§åˆ«è¾“å‡º** æ—¥å¿—ï¼Œæ—¥å¿—æ ¼å¼ï¼š

```
Path: /ping | IP: 192.168.1.1 | Time: 2025-02-02 12:34:56
```

- **ğŸ“Œ å…·ä½“å‚æ•°**
	- `c.Path()`  
	  **è·å–è¯·æ±‚è·¯å¾„**ï¼Œä¾‹å¦‚ï¼š`/ping`
	- `c.RemoteAddr()`  
	  **è·å–å®¢æˆ·ç«¯ IP åœ°å€**ï¼Œä¾‹å¦‚ï¼š`192.168.1.1`
	- `time.Now().Format("2006-01-02 15:04:05")`  
	  **è·å–å½“å‰æ—¶é—´**ï¼Œæ ¼å¼åŒ–ä¸º `YYYY-MM-DD HH:MM:SS`

<br/>

- **ğŸ”¹ 2ï¸âƒ£ `c.Next()`**
> **ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ–æœ€ç»ˆçš„å¤„ç†å‡½æ•°**

	- åœ¨ Iris **ä¸­é—´ä»¶æ‰§è¡Œé“¾** ä¸­ï¼Œ`c.Next()` å…è®¸ **ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ–ä¸šåŠ¡é€»è¾‘ç»§ç»­æ‰§è¡Œ**ã€‚
	- å¦‚æœä¸è°ƒç”¨ `c.Next()`ï¼Œè¯·æ±‚å¯èƒ½ä¼šè¢«æ‹¦æˆªï¼Œä¸ä¼šè¿›å…¥ **åç»­çš„è·¯ç”±å¤„ç†é€»è¾‘**ã€‚

<br/>

- **ğŸ“Œ ä½¿ç”¨ç¤ºä¾‹**

**ğŸ”¹ 1ï¸âƒ£ åœ¨ Iris æœåŠ¡å™¨ä¸­ä½¿ç”¨ `LoggerForProject`**

```go
package main

import (
	"time"
	"github.com/kataras/iris/v12"
)

func LoggerForProject(c iris.Context) {
	c.Application().Logger().Debugf("Path: %s | IP: %s | Time: %s",
		c.Path(), c.RemoteAddr(), time.Now().Format("2006-01-02 15:04:05"))
	c.Next() // ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªå¤„ç†å™¨
}

func main() {
	app := iris.New()

	// ç»‘å®šå…¨å±€æ—¥å¿—ä¸­é—´ä»¶
	app.Use(LoggerForProject)

	app.Get("/ping", func(ctx iris.Context) {
		ctx.JSON(iris.Map{"message": "pong"})
	})

	app.Listen(":8080")
}
```

<br/>

- **ğŸ“Œ è¿è¡Œæ•ˆæœ**

**å¯åŠ¨æœåŠ¡å™¨**

```shell
[DBUG] 2025/02/02 12:34 Log level set to "debug"
```

<br/>

- **å®¢æˆ·ç«¯è¯·æ±‚**

```shell
curl http://localhost:8080/ping
```

<br/>

- **ç»ˆç«¯æ—¥å¿—è¾“å‡º**

```shell
[DBUG] 2025/02/02 12:34 Path: /ping | IP: 127.0.0.1 | Time: 2025-02-02 12:34:56
```

<br/>

- **ğŸ“Œ é€‚ç”¨åœºæ™¯**
	1. **è®°å½• API è®¿é—®æ—¥å¿—**  
	   - è®°å½• **è®¿é—®è·¯å¾„ã€IPã€æ—¶é—´**ï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜ã€‚
	   
	2. **è¯·æ±‚ç›‘æ§ & è°ƒè¯•**  
	   - åœ¨ Debug æ¨¡å¼ä¸‹ï¼Œæ£€æŸ¥ **å“ªäº› API è¢«è°ƒç”¨**ï¼Œæ˜¯å¦æœ‰å¼‚å¸¸è®¿é—®ã€‚
	
	3. **å¯ä»¥æ‰©å±•åŠŸèƒ½**ï¼ˆæ·»åŠ åˆ°æ•°æ®åº“ / è®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ï¼‰  

```go
func LoggerForProject(c iris.Context) {
logEntry := fmt.Sprintf("Path: %s | IP: %s | Time: %s",
   c.Path(), c.RemoteAddr(), time.Now().Format("2006-01-02 15:04:05"))

// å†™å…¥æ–‡ä»¶
_ = os.WriteFile("request.log", []byte(logEntry+"\n"), 0644)

c.Next()
}
```

<br/>

## **ğŸ“Œ æ€»ç»“**
- `LoggerForProject` æ˜¯ **Iris ä¸­é—´ä»¶**ï¼Œç”¨äº **æ—¥å¿—è®°å½•**ã€‚
- è®°å½• **è¯·æ±‚è·¯å¾„ã€IPã€æ—¶é—´**ï¼Œå¹¶ä½¿ç”¨ **Debug çº§åˆ«æ—¥å¿—è¾“å‡º**ã€‚
- `c.Next()` **ç¡®ä¿ä¸‹ä¸€ä¸ªå¤„ç†å™¨å¯ä»¥ç»§ç»­æ‰§è¡Œ**ï¼Œå¦åˆ™å¯èƒ½ä¼šä¸­æ–­è¯·æ±‚ã€‚
- **é€‚ç”¨äº API æ—¥å¿—è®°å½•ã€è°ƒè¯• & è¯·æ±‚ç›‘æ§**ï¼Œä¹Ÿå¯ä»¥æ‰©å±•åˆ°æ—¥å¿—æ–‡ä»¶æˆ–æ•°æ®åº“ã€‚

ğŸš€ **è¿™æ ·å¯ä»¥å¸®åŠ©ä½ è·Ÿè¸ª API è®¿é—®æƒ…å†µï¼Œæé«˜è°ƒè¯•å’Œç›‘æ§èƒ½åŠ›ï¼**


<br/><br/><br/>
> <h2 id="modelä½¿ç”¨XORMåº“åºåˆ—åŒ–">[modelä½¿ç”¨XORMåº“åºåˆ—åŒ–](./GoLangå¸¸ç”¨æ¡†æ¶.md#modelåºåˆ—åŒ–å’Œç»§æ‰¿)</h2>












