> # æ—¥å¿—
- [è®°å½•æ—¥å¿—åˆ°æœ¬åœ°](#è®°å½•æ—¥å¿—åˆ°æœ¬åœ°)
	- [æŸ¥çœ‹æ—¥å¿—æ–¹å¼](#æŸ¥çœ‹æ—¥å¿—æ–¹å¼)



<br/><br/><br/>

***
<br/>

> <h1 id="è®°å½•æ—¥å¿—åˆ°æœ¬åœ°">è®°å½•æ—¥å¿—åˆ°æœ¬åœ°</h1>


```go
import (
	"log"
	"os"
	"path/filepath"
)


func Init() {
	// ç¡®ä¿ logs ç›®å½•å­˜åœ¨, è¿™ä¸ªè·¯å¾„æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œå®ƒç›¸å¯¹äºã€ğŸä½ å¯åŠ¨ç¨‹åºæ—¶çš„å·¥ä½œç›®å½•ã€‘
	// æ¯”å¦‚ï¼š cd MLC_GO
	// go run cmd/server/main.go
	// é‚£ä¹ˆ MLC_GO/logs/server.go
	logDir := "logs"
	root, _ := os.Getwd() // ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œä»ç„¶å’Œå¯åŠ¨ç›®å½•æœ‰å…³ï¼Œåªæ˜¯æ›´æ˜¾ç¤º
	logPath := filepath.Join(root, logDir)
	_ = os.Mkdir(logPath, 0755)

	logFile := filepath.Join(logPath, "server.log")
	file, err := os.OpenFile(
		logFile,
		os.O_CREATE|os.O_APPEND|os.O_WRONLY,
		0644,
	)
	if err != nil {
		log.Fatalf("âŒERROR open log failed: %v", err)
	}

	log.SetOutput(file)//ä»£ç è¾“å‡ºåˆ°æ–‡ä»¶ä¸­
	log.SetFlags(log.LstdFlags | log.Lmicroseconds | log.Lshortfile)
}
```

åœ¨ `main.go`ä¸­çš„`main`å‡½æ•°åŠ å…¥ï¼š

```go
	
func main() {
	HGLoggerPackage.Init()
}
```

***
<br/><br/><br/>
> <h2 id="æŸ¥çœ‹æ—¥å¿—æ–¹å¼">æŸ¥çœ‹æ—¥å¿—æ–¹å¼</h2>

- **æ–¹å¼1ï¸âƒ£ï¼šæŸ¥çœ‹æ—¥å¿—é€šè¿‡tidï¼šgrep tidå€¼ logs/server.log**
	- æ¯”å¦‚ï¼š

```sh
grep "e9504165c7068391e535b08403ac2df2" logs/server.log 
```

<br/>

- **æ–¹å¼2ï¸âƒ£è‹¥æ˜¯è¿è¡Œåœ¨æœåŠ¡å™¨ï¼š**

```sh
journalctl -u your-serviceã€Linuxç³»ç»ŸæœåŠ¡å™¨åã€‘ | grep tidå€¼
```
**æ¯”å¦‚ï¼š**

```sh
journalctl -u your-service | grep TID=050a9089e268470e2d324f4070424e84
```
-	Linux
-	systemd ç®¡ç†çš„æœåŠ¡
-	ä¾‹å¦‚ä½ éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šï¼š	

<br/>

- **æ–¹å¼3ï¸âƒ£ï¼šâœ… æ–¹å¼ 3ï¼šå®æ—¶ grepï¼ˆéå¸¸å®ç”¨ï¼‰ï¼š**

```go
tail -f server.log | grep 1769383162123456000-193812
```
- 	ä¸€è¾¹è¯·æ±‚æ¥å£
-	ä¸€è¾¹å®æ—¶çœ‹æŸä¸ª tid çš„è¡Œä¸º

<br/>

- **ğŸ”¥æ›´ä¸“ä¸šï¼šé€šè¿‡ç¯å¢ƒå˜é‡æ§åˆ¶-ä¸Šçº¿ / Docker / K8s éƒ½ç”¨è¿™ä¸€å¥—,æ ¹æ®ç¯å¢ƒå˜é‡è®¾å€¼æ—¥å¿—æ”¾ç½®çš„æ–‡ä»¶ç›®å½•ï¼š**

```go
logDir := os.Getenv("LOG_DIR")
if logDir == "" {
	logDir = "logs"
}
```

å¯åŠ¨æ—¶ï¼š

```sh
LOG_DIR=/var/log/mlc-go go run cmd/server/main.go
```






























