<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReactiveSwift(ä¸Š)</title>
    <style type="text/css" media="all">
      body {
        margin: 0;
        font-family: "Helvetica Neue", Helvetica, Arial, "Hiragino Sans GB", sans-serif;
        font-size: 14px;
        line-height: 20px;
        color: #777;
        background-color: white;
      }
      .container {
        width: 700px;
        margin-right: auto;
        margin-left: auto;
      }

      .post {
        font-family: Georgia, "Times New Roman", Times, "SimSun", serif;
        position: relative;
        padding: 70px;
        bottom: 0;
        overflow-y: auto;
        font-size: 16px;
        font-weight: normal;
        line-height: 25px;
        color: #515151;
      }

      .post h1{
        font-size: 50px;
        font-weight: 500;
        line-height: 60px;
        margin-bottom: 40px;
        color: inherit;
      }

      .post p {
        margin: 0 0 35px 0;
      }

      .post img {
        border: 1px solid #D9D9D9;
      }

      .post a {
        color: #28A1C5;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="post">
        <h1 class="title">ReactiveSwift(ä¸Š)</h1>
        <div class="show-content">
          <h1><b>Observer</b></h1><p><b>Observerä¿¡æ¯çš„å¤„ç†é€»è¾‘å°è£…, Observerçš„ä¸»è¦ä»£ç å¦‚ä¸‹:<br></b></p><blockquote>
<p><b>//Observer.swift<br></b></p>
<p>publicÂ finalÂ classÂ ObserverÂ {Â Â Â </p>
<p>Â publicÂ typealiasÂ ActionÂ =Â (Event)Â -&gt;Â VoidÂ Â </p>
<p>privateÂ letÂ _send:Â ActionÂ Â Â Â Â Â Â Â Â Â Â Â </p>
<p>Â publicÂ init(_Â action:Â @escapingÂ Action)Â {Â Â Â Â Â Â Â Â self._sendÂ =Â actionÂ Â Â Â Â Â Â Â ...Â Â Â Â }Â Â Â Â Â </p>
<p>publicÂ funcÂ send(_Â event:Â Event)Â {Â Â Â Â Â Â Â Â _send(event)Â Â Â Â }Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </p>
<p> publicÂ funcÂ send(value:Â Value)Â {Â Â Â Â Â Â Â Â _send(.value(value))Â Â Â Â }Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  Â </p>
<p>publicÂ funcÂ sendXXX()Â //å…¶å®éƒ½æ˜¯send(_Â event:Â Event)}</p>
</blockquote><p><b>Observerå†…éƒ¨ä¿æŒäº†ä¸€ä¸ªå¤„ç†Eventçš„é—­åŒ…, åˆå§‹åŒ–Observerå°±æ˜¯åœ¨è®¾ç½®è¿™ä¸ªé—­åŒ…, è€Œè°ƒç”¨Observer.sendåˆ™æ˜¯åœ¨æ‰§è¡Œè¿™ä¸ªé—­åŒ….<br></b></p><p><b><b>éœ€è¦æ³¨æ„çš„ç‚¹: Observerå°è£…äº†Eventçš„å¤„ç†é€»è¾‘.</b><br></b></p><hr><h1><b><b>Signal</b><br></b></h1><p><b>æœ‰äº†ä¿¡æ¯çš„è½½ä½“å’Œä¿¡æ¯çš„å¤„ç†é€»è¾‘, æ¥ä¸‹æ¥éœ€è¦çš„æ˜¯: å°†ä¿¡æ¯å‘é€å‡ºå».<br></b></p><p>åœ¨ReactiveSwiftä¸­, æƒ³è¦å‘é€ä¿¡æ¯å…±æœ‰å››ç§é€”å¾„, è¿™é‡Œæˆ‘ä»¬å…ˆä»‹ç»ç¬¬ä¸€ç§: Signal.(äº‹å®ä¸Š, å››ç§é€”å¾„æœ€ç»ˆéƒ½æ˜¯é€šè¿‡Signalæ¥å®Œæˆçš„, æ‰€ä»¥, å…¶å®åªæœ‰ä¸€ç§.)</p><p>Signalæ˜¯ReactiveSwiftä¸­çƒ­ä¿¡å·çš„å®ç°, "çƒ­"çš„æ„æ€æ˜¯å®ƒæ˜¯ä¸€ç›´æ´»åŠ¨ç€çš„, ä¼šä¸»åŠ¨å°†äº§å‡ºçš„äº‹ä»¶Eventå‘å¤–å‘é€, è€Œä¸ä¼šç­‰åˆ°æœ‰äººè®¢é˜…åæ‰å¼€å§‹å‘é€. è¿™æ„å‘³ç€å¦‚æœè®¢é˜…çš„æ—¶æœºæ™šäºå‘é€çš„æ—¶æœº, é‚£ä¹ˆè®¢é˜…è€…æ˜¯ä¸ä¼šæ”¶åˆ°è®¢é˜…æ—¶æœºä¹‹å‰çš„äº‹ä»¶çš„.</p><p>ä¸¾ä¸ªæ —å­: æ˜¥æ™šç°åœºç›´æ’­ä»æ™š8ç‚¹ä¸€ç›´æ’­åˆ°12ç‚¹, è¿™æ®µæ—¶é—´äº§å‡ºçš„èŠ‚ç›®å°±æ˜¯Valueäº‹ä»¶, 12ç‚¹ä¸€åˆ°äº§å‡ºçš„å°±æ˜¯Completedäº‹ä»¶. å¾ˆæ˜æ˜¾, ä¸ç®¡æœ‰æ²¡æœ‰äººçœ‹æ˜¥æ™š, Â æ˜¥æ™šç°åœºéƒ½ä¸å…³å¿ƒ, èŠ‚ç›®æ¥äº†å°±ä¸Š, æ—¶é—´ä¸€åˆ°å°±æ•£. ä½†å¦‚æœä½ æƒ³çœ‹ç›´æ’­, æœ€å¥½çš„æ—¶æœºå½“ç„¶æ˜¯8ç‚¹, è‹¥æ˜¯9ç‚¹æ‰æ‰“å¼€ç”µè§†, é‚£9ç‚¹ä¹‹å‰çš„èŠ‚ç›®ä½ è‚¯å®šå°±é”™è¿‡äº†.</p><p><b>Signalçš„ä½¿ç”¨:</b></p><p>note:Â è¿™é‡Œçš„Valueå’ŒErroréƒ½æ˜¯æ³›å‹,Â ä½ éœ€è¦åœ¨åˆ›å»ºçš„æ—¶å€™è¿›è¡ŒæŒ‡å®š</p><blockquote>
<p>//publicÂ staticÂ funcÂ pipe(disposable:Â Disposable?Â =Â nil)Â -&gt;Â (output:Â Signal,Â input:Â Observer)</p>
<p>letÂ signalTupleÂ =Â Signal.pipe()</p>
<p>letÂ (signal,Â observer)Â =Â Signal.pipe()</p>
</blockquote><p><b>é€šå¸¸, ä½ åº”è¯¥åªé€šè¿‡Signal.pipe()å‡½æ•°æ¥åˆå§‹åŒ–ä¸€ä¸ªçƒ­ä¿¡å·. è¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå…ƒç»„, å…ƒç»„çš„ç¬¬ä¸€ä¸ªå€¼æ˜¯output(ç±»å‹ä¸ºSignal), ç¬¬äºŒä¸ªå€¼æ˜¯input(ç±»å‹ä¸ºObserver). æˆ‘ä»¬é€šè¿‡outputæ¥è®¢é˜…ä¿¡å·, é€šè¿‡inputæ¥å‘ä¿¡å·å‘ç”Ÿä¿¡æ¯.<br></b></p><p><b>éœ€è¦æ³¨æ„çš„ç‚¹: outputçš„ä½œç”¨æ˜¯ç®¡ç†ä¿¡å·çŠ¶æ€å¹¶ä¿å­˜ç”±è®¢é˜…è€…æä¾›çš„Observerå¯¹è±¡(Observer._sendå°è£…äº†Eventçš„å¤„ç†é€»è¾‘), è€Œinputçš„ä½œç”¨åˆ™æ˜¯åœ¨æ¥æ”¶åˆ°Eventåä¾æ¬¡æ‰§è¡Œè¿™äº›è¢«ä¿å­˜çš„Observer._send.</b></p><p><b><br></b></p><p><b>æ¥çœ‹ä¸€æ®µè®¢é˜…Signalçš„åŸºç¡€ä»£ç :<br></b></p><blockquote>
<p><b>func bindSignal2_1(){<br></b></p>
<p>
        //1.åˆ›å»ºsignal(output)å’ŒinnerObserver(input)</p>
<p>
        let (signal, innerObserver) = Signal.pipe()</p>
<p>        
        //2.åˆ›å»ºObserver</p>
<p>        let outerObserver1 = Signal.Observer(value: { (value) in</p>
<p>            print("did received value: (value)")</p>
<p>
        })</p>
<p>        //2.è¿˜æ˜¯åˆ›å»ºObserver</p>
<p>let outerObserver2 = Signal.Observer { (event) in</p>
<p>
            switch event {</p>
<p>
            case let .value(value):</p>
<p>                print("did received value: (value)")</p>
<p>            default: break
            }</p>
<p>        }</p>
<p>
        
        signal.observe(outerObserver1)//3.å‘signalä¸­æ·»åŠ Observer
        signal.observe(outerObserver2)//3.è¿˜æ˜¯å‘signalä¸­æ·»åŠ Observer</p>
<p>
        
        innerObserver.send(value: 1)//4.å‘signalå‘ç”Ÿä¿¡æ¯(æ‰§è¡Œsignalä¿å­˜çš„æ‰€æœ‰Observerå¯¹è±¡çš„Eventå¤„ç†é€»è¾‘)</p>
<p>        innerObserver.sendCompleted()//4.è¿˜æ˜¯æ‰§å‘signalå‘ç”Ÿä¿¡æ¯</p>
<p>
    }</p>
</blockquote><p>Â Â Â Â Â Â Â Â å®é™…å¼€å‘ä¸­æˆ‘ä»¬è‚¯å®šä¸ä¼šè¿™æ ·å†™, å¤ªç¹çäº†. å®ƒçš„æ„ä¹‰åœ¨äºå‘Šè¯‰å„ä½: 1)æ¯è®¢é˜…ä¸€æ¬¡Signalå®é™…ä¸Šå°±æ˜¯åœ¨å‘Signalä¸­æ·»åŠ ä¸€ä¸ªObserverå¯¹è±¡. 2)å³ä½¿æ¯æ¬¡è®¢é˜…ä¿¡å·çš„å¤„ç†é€»è¾‘éƒ½æ˜¯ä¸€æ ·çš„, ä½†å®ƒä»¬ä»ç„¶æ˜¯å®Œå…¨ä¸åŒçš„çš„ä¸¤ä¸ªObserverå¯¹è±¡.Â  Â Â Â Â Â Â </p><p><b><br></b></p><p><b>æŠŠä¸Šé¢çš„ä»£ç æ”¹çš„ç®€æ´ä¸€ç‚¹:</b></p><blockquote>
<p>typealiasÂ NSignalÂ =Â ReactiveSwift.SignaloverrideÂ </p>
<p>funcÂ viewDidLoad()Â {</p>
<p>Â Â Â Â Â Â Â Â super.viewDidLoad()Â </p>
<p>Â Â Â Â Â Â Â //1.åˆ›å»ºsignal(output)å’ŒinnerObserver(input)</p>
<p>Â Â Â Â Â Â Â Â letÂ (signal,Â innerObserver)Â =Â NSignal.pipe()</p>
<p> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â signal.observeValuesÂ {Â (value)Â inÂ Â Â //2&amp;3.åˆ›å»ºObserverå¹¶æ·»åŠ åˆ°Signalä¸­Â Â Â Â Â Â Â Â Â Â Â Â print("didÂ receivedÂ value:Â (value)")Â Â Â Â Â Â Â Â }Â Â Â Â Â Â Â Â signal.observeValuesÂ {Â (value)Â inÂ Â Â //2&amp;3.è¿˜æ˜¯åˆ›å»ºObserverå¹¶æ·»åŠ åˆ°Signalä¸­Â Â Â Â Â Â Â Â Â Â Â Â print("didÂ receivedÂ value:Â (value)")Â Â Â Â Â Â Â Â }Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â innerObserver.send(value:Â 1)Â //4.Â ...Â Â Â Â Â Â Â Â innerObserver.sendCompleted()Â //4.Â ...}</p>
</blockquote><p>Â  Â Â Â Â Â Â <b>ä»‹ç»ä¸‹Signal.observeValues, è¿™æ˜¯Signal.observeçš„ä¸€ä¸ªä¾¿åˆ©å‡½æ•°, ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ª<b>åªå¤„ç†Valueäº‹ä»¶</b>çš„Observerå¹¶æ·»åŠ åˆ°Signalä¸­, ç±»ä¼¼çš„è¿˜æœ‰<b>åªå¤„ç†Failedäº‹ä»¶çš„</b>Signal.observeFailedå’Œ<b>æ‰€æœ‰äº‹ä»¶éƒ½èƒ½å¤„ç†çš„**</b>Signal.observeResult.<br></b></p><p><b>çƒ­ä¿¡å·ç›¸å…³ä»£ç ï¼š</b></p><blockquote>
<p><b>typealiasÂ NSignalÂ =Â ReactiveSwift.Signal<br></b></p>
<p>//ViewModel.swift</p>
<p>classÂ ViewModelÂ {</p>
<p>Â  Â  letÂ signal:Â NSignal Â  Â </p>
<p>Â Â Â Â letÂ innerObserver:Â NSignal.ObserverÂ Â Â Â Â Â Â </p>
<p>Â  Â  init()Â {Â (signal,Â innerObserver)Â =Â NSignal.pipe()Â }</p>
<p>}Â </p>
<p>//View1.swift</p>
<p>classÂ View1Â {</p>
<p> Â  Â funcÂ bind(viewModel:Â ViewModel)Â {</p>
<p> Â  Â  Â  Â viewModel.signal.observeValuesÂ {Â (value)Â inÂ </p>
<p>Â Â Â Â Â Â Â Â Â Â Â print("View1Â receivedÂ value:Â (value)")</p>
<p>Â Â Â Â Â Â Â Â }</p>
<p>Â Â Â Â }</p>
<p>}Â </p>
<p>//View2.swift</p>
<p>classÂ View2Â {</p>
<p>Â Â Â Â funcÂ bind(viewModel:Â ViewModel)Â {</p>
<p>Â Â Â Â Â Â Â Â viewModel.signal.observeValuesÂ {Â (value)Â in</p>
<p>Â Â Â Â Â Â Â Â Â Â Â Â print("View2Â receivedÂ value:Â (value)")</p>
<p>Â Â Â Â Â Â Â Â }</p>
<p>Â Â Â Â }</p>
<p>}Â </p>
<p>//View3.swift</p>
<p>classÂ View3Â {</p>
<p>Â Â Â Â funcÂ bind(viewModel:Â ViewModel)Â {</p>
<p>Â  Â  Â  Â  Â  viewModel.signal.observeValuesÂ {Â (value)Â in</p>
<p>Â Â Â Â Â Â Â Â Â Â Â Â print("View3Â receivedÂ value:Â (value)")</p>
<p>Â Â Â Â Â Â Â Â }</p>
<p>Â Â Â Â Â Â Â Â viewModel.signal.observeInterruptedÂ {Â </p>
<p>Â Â Â Â Â Â Â Â Â Â Â print("View3Â receivedÂ interrupted")</p>
<p>Â Â Â Â Â Â Â Â }</p>
<p>Â Â Â Â }}</p>
<p>Â overrideÂ funcÂ viewDidLoad()Â {</p>
<p>Â Â Â Â Â Â Â super.viewDidLoad()</p>
<p>Â  Â  Â  Â  letÂ view1Â =Â View1()Â </p>
<p>Â Â Â Â Â Â Â letÂ view2Â =Â View2()</p>
<p>Â Â Â Â Â Â Â Â letÂ view3Â =Â View3()Â </p>
<p>Â Â Â Â Â Â Â letÂ viewModelÂ =Â ViewModel()</p>
<p>Â  Â  Â  Â view1.bind(viewModel:Â viewModel)//è®¢é˜…æ—¶æœºè¾ƒæ—©Â Â Â Â Â Â Â Â </p>
<p>Â  Â  Â  Â viewModel.innerObserver.send(value:Â 1)Â </p>
<p>Â  Â  Â  Â  view2.bind(viewModel:Â viewModel)//è®¢é˜…æ—¶æœºè¾ƒæ™š Â  Â  Â  Â  Â </p>
<p>Â Â Â Â Â Â Â Â viewModel.innerObserver.send(value:Â 2)Â Â Â Â Â Â Â Â </p>
<p>Â Â Â Â Â Â Â Â viewModel.innerObserver.sendCompleted()//å‘é€ä¸€ä¸ªéValueäº‹ä»¶Â ä¿¡å·æ— æ•ˆ</p>
<p>Â  Â  Â  Â  Â view3.bind(viewModel:Â viewModel)//ä¿¡å·æ— æ•ˆåæ‰è®¢é˜…Â Â Â Â Â Â Â Â </p>
<p>Â Â Â Â Â Â Â Â viewModel.innerObserver.send(value:Â 3)//ä¿¡å·æ— æ•ˆåå‘é€äº‹ä»¶Â Â Â Â }</p>
</blockquote><p>Â  Â Â Â Â Â Â <b>view2çš„è®¢é˜…æ—¶é—´æ™šäºvalue1çš„å‘é€æ—¶é—´, æ‰€ä»¥view2æ”¶ä¸åˆ°value1å¯¹åº”çš„äº‹ä»¶, è¿™éƒ¨åˆ†å¯¹åº”ä¸Šé¢æˆ‘è¯´çš„çƒ­ä¿¡å·å¹¶ä¸å…³å¿ƒè®¢é˜…è€…çš„æƒ…å†µ, ä¸€æ—¦æœ‰äº‹ä»¶å³ä¼šå‘é€.<br></b></p><p>Â Â Â Â Â Â Â Â ç¬¬äºŒéƒ¨åˆ†åˆ™æ˜¯Signalè‡ªèº«çš„ç‰¹æ€§: æ”¶åˆ°ä»»ä½•éValueçš„äº‹ä»¶åä¿¡å·ä¾¿æ— æ•ˆäº†. æ‰€ä»¥ä½ ä¼šçœ‹åˆ°è™½ç„¶view1å’Œview2çš„è®¢é˜…éƒ½æ—©äºvalue3çš„å‘é€æ—¶é—´, ä½†å› ä¸ºvalue3åœ¨ä¿¡å·å‘é€å‰å…ˆå‘é€äº†completedäº‹ä»¶, æ‰€ä»¥view1å’Œview2éƒ½ä¸ä¼šæ”¶åˆ°value3äº‹ä»¶, åŒç†, view3ä¹Ÿä¸ä¼šæ”¶åˆ°value3äº‹ä»¶(å®ƒåªä¼šæ”¶åˆ°ä¸€ä¸ªinterrupted, å¦‚æœå®ƒå…³å¿ƒçš„è¯).</p><hr><h1><b>KVO</b></h1><blockquote>
<p><b>publicÂ funcÂ signal(forKeyPathÂ keyPath:Â String)Â -&gt;Â Signal<br></b></p>
<p>tableView:Â UITableView</p>
<p>dynamicÂ varÂ someValueÂ =Â 0</p>
<p>Â reactive.signal(forKeyPath:Â "someValue").observeValuesÂ {Â [weakÂ self]Â (value)Â inÂ Â Â Â Â Â //code}</p>
<p>Â tableView.reactive.signal(forKeyPath:Â "contentSize").observeValuesÂ {[weakÂ self]Â (contentSize)Â in</p>
<p>Â Â Â Â if Â letÂ contentSizeÂ =Â contentSizeÂ as?Â CGSize,Â Â Â Â Â Â Â Â letÂ strongSelfÂ =Â selfÂ {</p>
<p>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â letÂ isHiddenÂ =Â contentSize.heightÂ &lt;Â strongSelf.tableView.heightÂ </p>
<p>Â  Â  Â  Â  Â  Â  Â  Â  DispatchQueue.main.asyncAfter(deadline:Â DispatchTime.now(),</p>
<p>Â  Â  Â  Â  Â  Â  Â  Â  execute:Â {Â Â Â Â Â Â Â Â Â Â Â Â strongSelf.tableView.mj_footer.isHiddenÂ =Â isHidden</p>
<p>Â Â Â Â Â Â Â Â })Â Â Â Â }}</p>
</blockquote><p>Â  Â Â Â Â Â Â <b>KVOçš„Reactiveç‰ˆæœ¬, å¯¹äºNSObjectçš„å­ç±»å¯ä»¥ç›´æ¥ä½¿ç”¨, å¯¹äºSwiftçš„åŸç”Ÿç±»éœ€è¦åŠ ä¸Šdynamicä¿®é¥°.<br></b></p><hr><h1><b>Map</b></h1><blockquote>
<p><b>letÂ (signal,Â innerObserver)Â =Â NSignal.pipe()<br></b></p>
<p>signal.mapÂ {Â returnÂ "xxx"Â +Â String($0)Â }Â </p>
<p>//mapå°±ä¸è§£é‡Šäº†</p>
<p>.observeValuesÂ {Â (value)Â in</p>
<p>Â Â Â Â Â Â Â Â Â Â Â Â print(value)</p>
<p>Â Â Â Â Â Â Â Â }Â </p>
<p>Â Â Â Â Â Â Â Â innerObserver.send(value:Â 1)innerObserver.sendCompleted()</p>
<p>æ‰“å°ï¼š</p>
<p>xxx1</p>
</blockquote><p><b><br></b></p><hr><h1><b>Onï¼š</b></h1><blockquote>
<p><b>publicÂ funcÂ on(<br></b></p>
<p>Â Â Â Â Â Â Â Â event:Â ((Event)Â -&gt;Â Void)?Â =Â nil,</p>
<p>Â Â Â Â Â Â Â Â failed:Â ((Error)Â -&gt;Â Void)?Â =Â nil,Â </p>
<p>Â  Â  Â  Â  completed:Â (()Â -&gt;Â Void)?Â =Â nil,</p>
<p>Â Â Â Â Â Â Â Â interrupted:Â (()Â -&gt;Â Void)?Â =Â nil,</p>
<p>Â Â Â Â Â Â Â Â terminated:Â (()Â -&gt;Â Void)?Â =Â nil,Â Â </p>
<p>Â  Â  Â  Â disposed:Â (()Â -&gt;Â Void)?Â =Â nil,</p>
<p>Â Â Â Â Â Â Â Â value:Â ((Value)Â -&gt;Â Void)?Â =Â nil)Â -&gt;Â Signal</p>
</blockquote><p><b>DğŸ˜ˆemoï¼š</b></p><blockquote>
<p><b>letÂ (signal,Â innerObserver)Â =Â NSignal.pipe()<br></b></p>
<p>signal.on(Â value:Â {Â (value)Â in</p>
<p>Â Â Â Â print("onÂ value:Â (value)")</p>
<p>}).observeValuesÂ {Â (value)Â in</p>
<p>Â Â Â Â print("didÂ receivedÂ value:Â (value)"</p>
<p>)}</p>
<p>Â innerObserver.send(value:Â 1)</p>
<p>innerObserver.sendCompleted()</p>
<p>Â æ‰“å°:</p>
<p>Â onÂ value:Â 1</p>
<p>Â  didÂ receivedÂ value:Â 1</p>
</blockquote><p>Â  Â Â Â Â Â Â <b>on: åœ¨ä¿¡å·å‘é€äº‹ä»¶å’Œè®¢é˜…è€…æ”¶åˆ°äº‹ä»¶ä¹‹é—´æ’å…¥ä¸€æ®µäº‹ä»¶å¤„ç†é€»è¾‘, ä½ å¯ä»¥æŠŠå®ƒçœ‹åšmapçš„ç®€æ´ç‰ˆ. (è¿™ä¸ªå‡½æ•°çš„å‚æ•°å¾ˆå¤š, ä½†é»˜è®¤éƒ½æœ‰ç»™nil, æ‰€ä»¥ä½ åªéœ€è¦å…³å¿ƒè‡ªå·±éœ€è¦çš„éƒ¨åˆ†å³å¯, æ¯”å¦‚è¿™é‡Œæˆ‘åªæƒ³åœ¨Valueäº‹ä»¶é—´æ’å…¥é€»è¾‘)<br></b></p><p><b><br></b></p><hr><p><b>take(until:)<br></b></p><blockquote>
<p><b>publicÂ funcÂ take(untilÂ trigger:Â Signal)Â -&gt;Â Signal<br></b></p>
<p>letÂ (signal,Â innerObserver)Â =Â NSignal.pipe()</p>
<p>letÂ (takeSignal,Â takeObserver)Â =Â NSignal.pipe()signal.take(until:Â takeSignal).observeValuesÂ {Â (value)Â in</p>
<p>Â Â Â Â print("receivedÂ value:Â (value)")</p>
<p>}</p>
<p>Â innerObserver.send(value:Â 1)</p>
<p>innerObserver.send(value:Â 2)</p>
<p>Â takeObserver.send(value:Â ())</p>
<p>innerObserver.send(value:Â 3)Â </p>
<p>takeObserver.sendCompleted()</p>
<p>innerObserver.sendCompleted()</p>
<p>Â æ‰“å°:Â receivedÂ value:Â 1Â Â Â Â Â Â receivedÂ value:Â 2</p>
</blockquote><p>Â  Â Â Â Â Â Â <b>take(until:): åœ¨takeSignalå‘é€Eventä¹‹å‰, signalå¯ä»¥æ­£å¸¸å‘é€Event, ä¸€æ—¦takeSignalå¼€å§‹å‘é€Event, signalå°±åœæ­¢å‘é€, takeSignalç›¸å½“äºä¸€ä¸ªåœæ­¢æ ‡å¿—ä½.<br></b></p><hr><h1><b>take(first:)<br></b></h1><blockquote>
<p>publicfuncÂ take(firstÂ count:Â Int)Â -&gt;Â Signal</p>
<p>letÂ (signal,Â innerObserver)Â =Â NSignal.pipe()</p>
<p>signal.take(first:Â 2).observeValuesÂ {Â (value)Â in</p>
<p>Â Â Â Â print("receivedÂ value:Â (value)")</p>
<p>}</p>
<p>innerObserver.send(value:Â 1)</p>
<p>innerObserver.send(value:Â 2)</p>
<p>innerObserver.send(value:Â 3)</p>
<p>innerObserver.send(value:Â 4)</p>
<p>innerObserver.sendCompleted()</p>
<p>æ‰“å°:Â receivedÂ value:Â 1 Â Â receivedÂ value:Â 2</p>
</blockquote><p>take(first:): åªå–æœ€åˆNæ¬¡çš„Event.</p><p>ç±»ä¼¼çš„è¿˜æœ‰signal.take(last: ): åªå–æœ€åNæ¬¡çš„Event.</p><hr><p><b><br></b></p><p><b><br></b></p><p><b><br></b></p><p><b><br></b></p><p><b><br></b></p><p><b><br></b></p><p><b><br></b></p><p><b><br></b></p><p><b><br></b></p><p><b><br></b></p><p><b><br></b></p><p><b><br></b></p><p><b><br></b></p><p><b><br></b></p><p><b><br></b></p><p><b><br></b></p><p><b><br></b></p><p><b><br></b></p><p>å‚è€ƒèµ„æ–™ï¼š <a href="http://www.cocoachina.com/special/20171204/21412.html" target="_blank">ReactiveSwift(ä¸Š)</a></p>
        </div>
      </div>
    </div>
  </body>
</html>
