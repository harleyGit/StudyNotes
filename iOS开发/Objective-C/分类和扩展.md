
- **分类**
- **扩展**
- **NSProxy(伪多继承)**



<br/>

***
<br/>



># 分类



```
objc_setAssociatedObject(id _Nonnull object, const void * _Nonnull key, id _Nullable value, objc_AssociationPolicy policy)

```

- id object ：关联的源对象
- const void *key：关联的key
- id value：关联对象，通过将此个值置成nil来清除关联。
- objc_AssociationPolicy policy：关联的策略
	关键策略是一个enum值
	- 	OBJC_ASSOCIATION_ASSIGN = 0,      <指定一个弱引用关联的对象>
	- 	OBJC_ASSOCIATION_RETAIN_NONATOMIC = 1,<指定一个强引用关联的对象>
	- 	OBJC_ASSOCIATION_COPY_NONATOMIC = 3,  <指定相关的对象复制>
	- 	OBJC_ASSOCIATION_RETAIN = 01401,      <指定强参考>
	- 	OBJC_ASSOCIATION_COPY = 01403    <指定相关的对象复制>


<br/>

**Demo**

```
- (void) personTest {
    
    
    static char overviewKey;
    NSArray *array = [[NSArray alloc] initWithObjects:@"one", @"two", nil];
    NSString * overview = [[NSString alloc] initWithFormat:@"%@",@"First three numbers"];
    objc_setAssociatedObject(array, &overviewKey, overview, OBJC_ASSOCIATION_RETAIN);
    NSString *associatedObject = (NSString *)objc_getAssociatedObject(array, &overviewKey);
    NSLog(@"🍎 associatedObject:%@", associatedObject);
    
    objc_setAssociatedObject(array, &overviewKey, nil, OBJC_ASSOCIATION_ASSIGN);
    NSString *associatedObject2 = (NSString *)objc_getAssociatedObject(array, &overviewKey);

    NSLog(@"🍊 associatedObject:%@", associatedObject2);
}
```

打印：

```
 🍎 associatedObject:First three numbers
 🍊 associatedObject:(null)

```




<br/>

***
<br/>


># 扩展




<br/>

***
<br/>


># NSProxy(伪多继承)

[NSProxy](https://www.jianshu.com/p/923f119333d8)


<br/>

***
<br/>

参考资料：

[iOS分类不能添加属性原因的探索](https://blog.csdn.net/u012409247/article/details/80206229)
