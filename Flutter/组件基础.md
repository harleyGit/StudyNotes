># <h2 id=''>[Dartè¯­æ³•:2ç‰ˆ](https://book.flutterchina.club/chapter1/dart.html)</h2>
- [**Appç”Ÿå‘½å‘¨æœŸ**](#Appç”Ÿå‘½å‘¨æœŸ)
	- [](#)
	- []()
		- []()
- [**`StatelessWidget`**](#StatelessWidget)
	- [contextå±æ€§](#contextå±æ€§)
	- [StatelessWidgetç”Ÿå‘½å‘¨æœŸ](#StatelessWidgetç”Ÿå‘½å‘¨æœŸ)
- [**`StatefulWidget`**](#StatefulWidget)
	- [StatefulWidgetç”Ÿå‘½å‘¨æœŸ](#StatefulWidgetç”Ÿå‘½å‘¨æœŸ)
		- [createState ](#createState)
		- [initState](#initState)
		- [didChangeDependencies](#didChangeDependencies)
		- [build](#build)
		- [addPostFrameCallback](#addPostFrameCallback)
		- [didUpdateWidget](#didUpdateWidget)
		- [deactivate](#deactivate)
		- [dispose](#dispose)
- [**`Flutter SDKè‡ªå¸¦ç»„ä»¶åº“`**](#FlutterSDKè‡ªå¸¦ç»„ä»¶åº“)
- [**`çŠ¶æ€ç®¡ç†`**](#çŠ¶æ€ç®¡ç†)
	- [Provider](#Provider)
	- [Widgetç®¡ç†è‡ªèº«çŠ¶æ€](#Widgetç®¡ç†è‡ªèº«çŠ¶æ€)
	- [çˆ¶Widgetç®¡ç†å­Widgetçš„çŠ¶æ€](#çˆ¶Widgetç®¡ç†å­Widgetçš„çŠ¶æ€)
	- [è·¨ç»„ä»¶çŠ¶æ€å…±äº«](#è·¨ç»„ä»¶çŠ¶æ€å…±äº«)
		- [Builder](#builder)
	- [InheritedWidgetå…±äº«è‡ªå¢æ•°æ®](#InheritedWidgetå…±äº«è‡ªå¢æ•°æ®)
	- [findAncestorWidgetOfExactTypeæ–¹æ³•](#findAncestorWidgetOfExactTypeæ–¹æ³•)
	- [dependOnInheritedWidgetOfExactTypeæ–¹æ³•](#dependOnInheritedWidgetOfExactTypeæ–¹æ³•)
	- [åŒºåˆ«](#åŒºåˆ«)
	- [widgetä¹‹é—´çš„äº¤äº’](#widgetä¹‹é—´çš„äº¤äº’)
- [ç³»ç»Ÿæ–¹æ³•è°ƒç”¨é¡ºåº](#ç³»ç»Ÿæ–¹æ³•è°ƒç”¨é¡ºåº)
	- [çŠ¶æ€ setStateæ–¹æ³•è°ƒç”¨](#çŠ¶æ€setStateæ–¹æ³•è°ƒç”¨)
	- [å¯¼èˆª Navigation](#å¯¼èˆªNavigation)
- [**`è·¯ç”±ç®¡ç†`**](#è·¯ç”±ç®¡ç†)
	- [è·¯ç”±å¯¼èˆª](#è·¯ç”±å¯¼èˆª)
- [**Stream**](#Stream)
	- [åˆ†ç±»](#åˆ†ç±»)
		- [StreamController](#StreamController)
		- [listen](#listen)
	- [å•è®¢é˜…](#å•è®¢é˜…)
	- [å¤šè®¢é˜…æµ](#å¤šè®¢é˜…æµ)
- [å¼‚å¸¸æŠ›å‡º](#å¼‚å¸¸æŠ›å‡º)
	- [Throw](#Throw)
	- [Catch](#Catch)
		- [å…³é”®å­—On](#å…³é”®å­—On)
	- [å†æ¬¡æŠ›å‡ºå¼‚å¸¸rethrow](#å†æ¬¡æŠ›å‡ºå¼‚å¸¸rethrow)
	- [Finally](#Finally)
- [**è¡Œã€åˆ—å¸ƒå±€**](#è¡Œã€åˆ—å¸ƒå±€)
- **èµ„æ–™**
	- [Flutterå®æˆ˜æ•™ç¨‹pdf](https://book.flutterchina.club/)
	- [æ ¸å¿ƒæ¦‚å¿µè¯¦è§£ï¼šWidgetã€Stateã€ContextåŠInheritedWidget(æ³ªå·²æ— ç—•-æ˜é‡‘)](https://juejin.cn/post/6844903784187953165#heading-24)
	- [å¼‚æ­¥ç¼–ç¨‹ï¼šFutureã€Isolate å’Œäº‹ä»¶å¾ªç¯(æ³ªå·²æ— ç—•-æ˜é‡‘)](https://juejin.cn/post/6844903796334673933#heading-7)
	- [Flutterå¯¼èˆªå’Œè·¯ç”±æ•™ç¨‹ç¤ºä¾‹](https://yiibai.com/flutter/flutter-navigation-and-routing.html)
	- [è·¯ç”±ç®¡ç†ã€èµ„æºç®¡ç†](https://www.jianshu.com/p/257bc7e72709)
	- [åˆ›å»ºè‡ªå®šä¹‰è·¯ç”±è¿‡æ¸¡åŠ¨ç”»](https://coldstone.fun/post/2019/12/10/flutter-route-transition/)
	- [è¿›é˜¶ï¼šè·¯ç”±ã€è·¯ç”±æ ˆè¯¦è§£åŠæ¡ˆä¾‹åˆ†æ](https://juejin.cn/post/6844903789816709128)
	- [ç»„ä»¶å¯é€‰å‚æ•°Keyçš„è§è§£](https://juejin.im/post/5ca2152f6fb9a05e1a7a9a26)
	- [æ·±å…¥æµ…å‡ºKey(Vadaski-æ˜é‡‘)](https://juejin.cn/post/6844903811870359559)
	- [Widgetç®¡ç†è‡ªèº«çŠ¶æ€](https://juejin.cn/entry/6844903864852807694)







<br/>

***
<br/>
<br/>


> <h1 id='Appç”Ÿå‘½å‘¨æœŸ'>Appç”Ÿå‘½å‘¨æœŸ</h1>


&emsp; æƒ³è¦çŸ¥é“ Flutter App çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¾‹å¦‚ Flutter æ˜¯åœ¨å‰å°è¿˜æ˜¯åœ¨åå°ï¼Œå°±éœ€è¦ä½¿ç”¨åˆ° WidgetsBindingObserver äº†ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š



State çš„ç±» mix WidgetsBindingObserverï¼š

```
class _MyHomePageState extends State<MyHomePage> with WidgetsBindingObserver {
    ...
}
```

<br/>

åœ¨ State çš„ initState é‡Œæ·»åŠ ç›‘å¬ï¼š

```
@override
  void initState(){
    super.initState();
    WidgetsBinding.instance.addObserver(this);
  }
  ```


<br/>

åœ¨ State çš„ dispose é‡Œç§»é™¤ç›‘å¬ï¼š

```
  @override
  void dispose() {
    // TODO: implement dispose
    super.dispose();
    WidgetsBinding.instance.removeObserver(this);
  }
```


<br/>

åœ¨ State é‡Œ override didChangeAppLifecycleState

```
@override
void didChangeAppLifecycleState(AppLifecycleState state) {
  super.didChangeAppLifecycleState(state);
  if (state == AppLifecycleState.paused) {
    // went to Background
  }
  if (state == AppLifecycleState.resumed) {
    // came back to Foreground
  }
}
```



<br/>

AppLifecycleState å°±æ˜¯ App çš„ç”Ÿå‘½å‘¨æœŸï¼Œæœ‰ï¼š

- **resumed**
- **inactive**
- **paused**
- **suspending**













<br/>
<br/>


> <h2 id=''></h2>


 
 
 
 <br/>
<br/>


> <h3 id=''></h3>



<br/>
<br/>


> <h3 id=''></h3>












<br/>

***
<br/>

># <h1 id='StatelessWidget'>StatelessWidget</h1>

&emsp;  `StatelessWidget`ç”¨äºä¸éœ€è¦ç»´æŠ¤çŠ¶æ€çš„åœºæ™¯ï¼Œå®ƒé€šå¸¸åœ¨buildæ–¹æ³•ä¸­é€šè¿‡åµŒå¥—å…¶å®ƒWidgetæ¥æ„å»ºUIï¼Œåœ¨æ„å»ºè¿‡ç¨‹ä¸­ä¼šé€’å½’çš„æ„å»ºå…¶åµŒå¥—çš„Widgetã€‚

```
class Echo extends StatelessWidget {

  final String text;
  final Color backgroundColor;

  const Echo({
    Key key,
    @required this.text,
    this.backgroundColor: Colors.grey,
  }): super(key: key);  
//Key: è¿™ä¸ªkeyå±æ€§ç±»ä¼¼äºReact/Vueä¸­çš„key;
//ä¸»è¦çš„ä½œç”¨æ˜¯å†³å®šæ˜¯å¦åœ¨ä¸‹ä¸€æ¬¡buildæ—¶å¤ç”¨æ—§çš„widgetï¼Œå†³å®šçš„æ¡ä»¶åœ¨canUpdate()æ–¹æ³•ä¸­

  @override
  Widget build(BuildContext context) {
    return Center(
      child: Container(
        color: backgroundColor,
        child: Text(text),
      ),
    );
  }
}


//è°ƒç”¨
Widget build(BuildContext context) {
  return MaterialApp(
    color: Colors.white,
    home: Echo(text: "welcome to æˆ‘çš„å®¶", backgroundColor: Colors.white),
  );
}
```

&emsp;  widgetçš„æ„é€ å‡½æ•°å‚æ•°åº”ä½¿ç”¨å‘½åå‚æ•°ï¼Œ`å‘½åå‚æ•°ä¸­çš„å¿…è¦å‚æ•°è¦æ·»åŠ @requiredæ ‡æ³¨`ï¼Œè¿™æ ·æœ‰åˆ©äºé™æ€ä»£ç åˆ†æå™¨è¿›è¡Œæ£€æŸ¥ã€‚

&emsp;  å¦å¤–ï¼Œ`åœ¨ç»§æ‰¿widgetæ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°é€šå¸¸åº”è¯¥æ˜¯Key`.å¦å¤–ï¼Œå¦‚æœWidgetéœ€è¦æ¥æ”¶å­Widgetï¼Œé‚£ä¹ˆchildæˆ–childrenå‚æ•°é€šå¸¸åº”è¢«æ”¾åœ¨å‚æ•°åˆ—è¡¨çš„æœ€åã€‚åŒæ ·æ˜¯æŒ‰ç…§æƒ¯ä¾‹ï¼Œ`Widgetçš„å±æ€§åº”å°½å¯èƒ½çš„è¢«å£°æ˜ä¸ºfinalï¼Œé˜²æ­¢è¢«æ„å¤–æ”¹å˜`ã€‚

![flutter1_61.png](./../Pictures/flutter1_61.png)


<br/>

> <h2 id='contextå±æ€§'>contextå±æ€§</h2>


&emsp;  `build`æ–¹æ³•æœ‰ä¸€ä¸ª`context`å‚æ•°ï¼Œå®ƒæ˜¯`BuildContext`ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œè¡¨ç¤ºå½“å‰widgetåœ¨widgetæ ‘ä¸­çš„ä¸Šä¸‹æ–‡ï¼Œæ¯ä¸€ä¸ªwidgetéƒ½ä¼šå¯¹åº”ä¸€ä¸ªcontextå¯¹è±¡ï¼ˆå› ä¸ºæ¯ä¸€ä¸ªwidgetéƒ½æ˜¯widgetæ ‘ä¸Šçš„ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ã€‚

&emsp;  å®é™…ä¸Šï¼Œcontextæ˜¯å½“å‰widgetåœ¨widgetæ ‘ä¸­ä½ç½®ä¸­æ‰§è¡Œâ€ç›¸å…³æ“ä½œâ€œçš„ä¸€ä¸ªå¥æŸ„ï¼Œæ¯”å¦‚å®ƒæä¾›äº†ä»å½“å‰widgetå¼€å§‹å‘ä¸Šéå†widgetæ ‘ä»¥åŠæŒ‰ç…§widgetç±»å‹æŸ¥æ‰¾çˆ¶çº§widgetçš„æ–¹æ³•ã€‚

```

@override
Widget build(BuildContext context) {
  return Scaffold(
    appBar: AppBar(
      title: Text("Context æµ‹0000000è¯•"),
    ),
    body: Container(
      child: Builder(builder: (context) {
	    //å¯»æ‰¾InheritedWidgetçš„å­ç±»ï¼Œå¯ä»¥ä»¥O(1)çš„å¤æ‚åº¦æŸ¥æ‰¾ä¸Šçº§Widget
        Scaffold scaffold = context.findAncestorWidgetOfExactType();
        return (scaffold.appBar as AppBar).title;
      }),
    ),
  );
}
```

![flutter1_62.png](./../Pictures/flutter1_62.png)




<br/>
<br/>


> <h2 id='StatelessWidgetç”Ÿå‘½å‘¨æœŸ'>StatelessWidgetç”Ÿå‘½å‘¨æœŸ</h2>



StatelessWidget çš„ç”Ÿå‘½å‘¨æœŸåªæœ‰ä¸€ä¸ªï¼Œå°±æ˜¯ï¼š`build`

<br/>


&emsp; build æ˜¯ç”¨æ¥åˆ›å»º Widget çš„ï¼Œä½†å› ä¸º build åœ¨æ¯æ¬¡ç•Œé¢åˆ·æ–°çš„æ—¶å€™éƒ½ä¼šè°ƒç”¨ï¼Œæ‰€ä»¥ä¸è¦åœ¨ build é‡Œå†™ä¸šåŠ¡é€»è¾‘ï¼Œå¯ä»¥æŠŠä¸šåŠ¡é€»è¾‘å†™åˆ°ä½ çš„ StatelessWidget çš„æ„é€ å‡½æ•°é‡Œã€‚

```
class TestWidget extends StatelessWidget{
  @override
  Widget build(BuildContext context) {
    // TODO: implement build
    print('StatelessWidget build');
    return Text('Test');
  }
}
```






<br/>

***
<br/>

># <h1 id='StatefulWidget '>StatefulWidget </h1>


**æ–¹æ³•:**
- `createState()` ç”¨äºåˆ›å»ºå’ŒStateful widgetç›¸å…³çš„çŠ¶æ€ï¼Œå®ƒåœ¨Stateful widgetçš„ç”Ÿå‘½å‘¨æœŸä¸­å¯èƒ½ä¼šè¢«å¤šæ¬¡è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªStateful widgetåŒæ—¶æ’å…¥åˆ°widgetæ ‘çš„å¤šä¸ªä½ç½®æ—¶ï¼ŒFlutter frameworkå°±ä¼šè°ƒç”¨è¯¥æ–¹æ³•ä¸ºæ¯ä¸€ä¸ªä½ç½®ç”Ÿæˆä¸€ä¸ªç‹¬ç«‹çš„Stateå®ä¾‹ï¼Œå…¶å®ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªStatefulElementå¯¹åº”ä¸€ä¸ªStateå®ä¾‹ã€‚
> &emsp;  åœ¨è¯´`â€œwidgetæ ‘â€`æ—¶å®ƒå¯ä»¥æŒ‡`widgetç»“æ„æ ‘`ï¼Œä½†ç”±äº`widgetä¸Elementæœ‰å¯¹åº”å…³ç³»ï¼ˆä¸€å¯èƒ½å¯¹å¤šï¼‰`ï¼Œåœ¨æœ‰äº›åœºæ™¯ï¼ˆFlutterçš„SDKæ–‡æ¡£ä¸­ï¼‰ä¹Ÿä»£æŒ‡â€œUIæ ‘â€çš„æ„æ€ã€‚è€Œåœ¨`stateful widget`ä¸­ï¼Œ`Stateå¯¹è±¡ä¹Ÿå’ŒStatefulElementå…·æœ‰å¯¹åº”å…³ç³»ï¼ˆä¸€å¯¹ä¸€ï¼‰`ï¼Œæ‰€ä»¥åœ¨Flutterçš„SDKæ–‡æ¡£ä¸­ï¼Œå¯ä»¥ç»å¸¸çœ‹åˆ°â€œä»æ ‘ä¸­ç§»é™¤Stateå¯¹è±¡â€æˆ–â€œæ’å…¥Stateå¯¹è±¡åˆ°æ ‘ä¸­â€è¿™æ ·çš„æè¿°ã€‚å…¶å®ï¼Œæ— è®ºå“ªç§æè¿°ï¼Œå…¶æ„æ€éƒ½æ˜¯åœ¨æè¿°â€œä¸€æ£µæ„æˆç”¨æˆ·ç•Œé¢çš„èŠ‚ç‚¹å…ƒç´ çš„æ ‘â€ã€‚



<br/>

- **`State `**

&emsp;  ä¸€ä¸ª`StatefulWidget`ç±»ä¼šå¯¹åº”ä¸€ä¸ª`Stateç±»`ï¼ŒStateè¡¨ç¤ºä¸å…¶å¯¹åº”çš„`StatefulWidget`è¦ç»´æŠ¤çš„çŠ¶æ€ï¼ŒStateä¸­çš„ä¿å­˜çš„çŠ¶æ€ä¿¡æ¯æœ‰ï¼š

- åœ¨widget æ„å»ºæ—¶å¯ä»¥è¢«åŒæ­¥è¯»å–ã€‚

- åœ¨widgetç”Ÿå‘½å‘¨æœŸä¸­å¯ä»¥è¢«æ”¹å˜ï¼Œå½“Stateè¢«æ”¹å˜æ—¶ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒç”¨å…¶ `setState()`æ–¹æ³•é€šçŸ¥Flutter frameworkçŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼ŒFlutter frameworkåœ¨æ”¶åˆ°æ¶ˆæ¯åï¼Œä¼šé‡æ–°è°ƒç”¨å…¶buildæ–¹æ³•`é‡æ–°æ„å»ºwidgetæ ‘`ï¼Œä»è€Œè¾¾åˆ°æ›´æ–°UIçš„ç›®çš„ã€‚


<br/>

- Stateä¸­æœ‰ä¸¤ä¸ªå¸¸ç”¨å±æ€§ï¼š
	- `widget`ï¼Œå®ƒè¡¨ç¤ºä¸è¯¥`Stateå®ä¾‹å…³è”çš„widgetå®ä¾‹`ï¼Œç”±Flutter frameworkåŠ¨æ€è®¾ç½®ã€‚`æ³¨æ„`ï¼Œè¿™ç§å…³è”å¹¶éæ°¸ä¹…çš„ï¼Œå› ä¸ºåœ¨åº”ç”¨ç”Ÿå‘½å‘¨æœŸä¸­ï¼ŒUIæ ‘ä¸Šçš„æŸä¸€ä¸ªèŠ‚ç‚¹çš„widgetå®ä¾‹åœ¨é‡æ–°æ„å»ºæ—¶å¯èƒ½ä¼šå˜åŒ–ï¼Œä½†Stateå®ä¾‹åªä¼šåœ¨ç¬¬ä¸€æ¬¡æ’å…¥åˆ°æ ‘ä¸­æ—¶è¢«åˆ›å»ºï¼Œå½“åœ¨é‡æ–°æ„å»ºæ—¶ï¼Œ`å¦‚æœwidgetè¢«ä¿®æ”¹äº†ï¼ŒFlutter frameworkä¼šåŠ¨æ€è®¾ç½®State.widgetä¸ºæ–°çš„widgetå®ä¾‹`ã€‚
	- `context`, `StatefulWidget`å¯¹åº”çš„`BuildContext`ï¼Œä½œç”¨åŒ`StatelessWidgetçš„BuildContext`ã€‚






<br/>
<br/>


> <h2 id='StatefulWidgetç”Ÿå‘½å‘¨æœŸ'>StatefulWidgetç”Ÿå‘½å‘¨æœŸ</h2>


- ç”Ÿå‘½å‘¨æœŸæ¯”è¾ƒå¤æ‚ï¼Œä¾æ¬¡ä¸ºï¼š
	- **createState**
	- **initState**
	- **didChangeDependencies**
	- **build**
	- **addPostFrameCallback**
	- **didUpdateWidget**
	- **deactivate**
	- **dispose**

![z16](./../Pictures/z16.png)





<br/>
<br/>


> <h3 id='createState'>createState</h3>

createState æ˜¯ StatefulWidget é‡Œåˆ›å»º State çš„æ–¹æ³•ï¼Œå½“è¦åˆ›å»ºæ–°çš„ StatefulWidget çš„æ—¶å€™ï¼Œä¼šç«‹å³æ‰§è¡Œ createStateï¼Œè€Œä¸”åªæ‰§è¡Œä¸€æ¬¡ï¼ŒcreateState å¿…é¡»è¦å®ç°ï¼š

```
class MyScreen extends StatefulWidget {
@override
_MyScreenState createState() => _MyScreenState();
}
```



<br/>
<br/>


> <h3 id='initState'>initState</h3>


å‰é¢çš„ createState æ˜¯åœ¨åˆ›å»º StatefulWidget çš„æ—¶å€™ä¼šè°ƒç”¨ï¼ŒinitState æ˜¯ StatefulWidget åˆ›å»ºå®Œåè°ƒç”¨çš„ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼Œè€Œä¸”åªæ‰§è¡Œä¸€æ¬¡ï¼Œç±»ä¼¼äº Android çš„ onCreateã€iOS çš„ viewDidLoad()ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œ View å¹¶æ²¡æœ‰æ¸²æŸ“ï¼Œä½†æ˜¯è¿™æ—¶ StatefulWidget å·²ç»è¢«åŠ è½½åˆ°æ¸²æŸ“æ ‘é‡Œäº†ã€‚

è¿™æ—¶ StatefulWidget çš„ mount çš„å€¼ä¼šå˜ä¸º trueï¼Œç›´åˆ° dispose è°ƒç”¨çš„æ—¶å€™æ‰ä¼šå˜ä¸º falseã€‚å¯ä»¥åœ¨ initState é‡Œåšä¸€äº›åˆå§‹åŒ–çš„æ“ä½œ

åœ¨ override initState çš„æ—¶å€™å¿…é¡»è¦è°ƒç”¨ super.initState()ï¼š

```
@override
void initState() {
  super.initState();
  ...
}
```




<br/>
<br/>


> <h3 id='didChangeDependencies'>didChangeDependencies</h3>



&emsp; å½“ StatefulWidget ç¬¬ä¸€æ¬¡åˆ›å»ºçš„æ—¶å€™ï¼ŒdidChangeDependencies æ–¹æ³•ä¼šåœ¨ initState æ–¹æ³•ä¹‹åç«‹å³è°ƒç”¨ï¼Œä¹‹åå½“ StatefulWidget åˆ·æ–°çš„æ—¶å€™ï¼Œå°±ä¸ä¼šè°ƒç”¨äº†.

&emsp; é™¤éä½ çš„ StatefulWidget ä¾èµ–çš„ InheritedWidget å‘ç”Ÿå˜åŒ–ä¹‹åï¼ŒdidChangeDependencies æ‰ä¼šè°ƒç”¨ï¼Œæ‰€ä»¥ didChangeDependencies æœ‰å¯èƒ½ä¼šè¢«è°ƒç”¨å¤šæ¬¡





<br/>
<br/>


> <h3 id='build'>build</h3>

&emsp; åœ¨ StatefulWidget ç¬¬ä¸€æ¬¡åˆ›å»ºçš„æ—¶å€™ï¼Œbuild æ–¹æ³•ä¼šåœ¨ didChangeDependencies æ–¹æ³•ä¹‹åç«‹å³è°ƒç”¨.

&emsp; å¦å¤–ä¸€ç§ä¼šè°ƒç”¨ build æ–¹æ³•çš„åœºæ™¯æ˜¯ï¼Œæ¯å½“ UI éœ€è¦é‡æ–°æ¸²æŸ“çš„æ—¶å€™ï¼Œbuild éƒ½ä¼šè¢«è°ƒç”¨ï¼Œæ‰€ä»¥ build ä¼šè¢«å¤šæ¬¡è°ƒç”¨ï¼Œç„¶å è¿”å›è¦æ¸²æŸ“çš„ Widgetã€‚åƒä¸‡ä¸è¦åœ¨ build é‡Œåšé™¤äº†åˆ›å»º Widget ä¹‹å¤–çš„æ“ä½œï¼Œå› ä¸ºè¿™ä¸ªä¼šå½±å“ UI çš„æ¸²æŸ“æ•ˆç‡ã€‚


<br/>
<br/>


> <h3 id='addPostFrameCallback'>addPostFrameCallback</h3>



&emspï¼› addPostFrameCallback æ˜¯ StatefulWidge æ¸²æŸ“ç»“æŸçš„å›è°ƒï¼Œåªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œä¹‹å StatefulWidget éœ€è¦åˆ·æ–° UI ä¹Ÿä¸ä¼šè¢«è°ƒç”¨ï¼ŒaddPostFrameCallback çš„ä½¿ç”¨æ–¹æ³•æ˜¯åœ¨ initState é‡Œæ·»åŠ å›è°ƒï¼š

```
import 'package:flutter/scheduler.dart';
@override
void initState() {
	super.initState();
	SchedulerBinding.instance.addPostFrameCallback((_) => {
	
	});
}

```


&emspï¼› æ¸²æŸ“å®Œæˆåï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œæˆ‘ä»¬å¯ä»¥åœ¨[è·å–é¡µé¢ä¸­Widgetå¤§å°å’Œä½ç½®](https://juejin.cn/post/6844903950257242119)ï¼Œè€Œä¸”è¿˜å¯ä»¥è¿›è¡Œç½‘ç»œæ¥å£è¯·æ±‚


<br/>
<br/>


> <h3 id='didUpdateWidget'>didUpdateWidget</h3>


&emsp; didUpdateWidget è¿™ä¸ªç”Ÿå‘½å‘¨æœŸæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šç”¨åˆ°ï¼Œåªæœ‰åœ¨ä½¿ç”¨[keyå¯¹ Widgetè¿›è¡Œå¤ç”¨](https://juejin.cn/post/6844904085007630349)çš„æ—¶å€™æ‰ä¼šè°ƒç”¨ã€‚

&emsp; è¦æ³¨æ„çš„æ˜¯Keyæ˜¯Widgetã€Elementå’ŒSemanticsNodeçš„æ ‡è¯†ç¬¦ã€‚ åªæœ‰å½“æ–°çš„Widgetçš„Keyä¸å½“å‰Elementä¸­Widgetçš„Keyç›¸åŒæ—¶ï¼Œå®ƒæ‰ä¼šè¢«ç”¨æ¥æ›´æ–°ç°æœ‰çš„Elementã€‚ Keyåœ¨å…·æœ‰ç›¸åŒçˆ¶çº§çš„Elementä¹‹é—´å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚






<br/>
<br/>


> <h3 id='deactivate'>deactivate</h3>

&emsp; å½“è¦å°† State å¯¹è±¡ä»æ¸²æŸ“æ ‘ä¸­ç§»é™¤çš„æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨ deactivate ç”Ÿå‘½å‘¨æœŸï¼Œè¿™æ ‡å¿—ç€ StatefulWidget å°†è¦é”€æ¯ï¼Œä½†æ˜¯æœ‰æ—¶å€™ State ä¸ä¼šè¢«é”€æ¯ï¼Œè€Œæ˜¯é‡æ–°æ’å…¥åˆ°æ¸²æŸ“æ ‘ç§ã€‚



<br/>
<br/>


> <h3 id='dispose'>dispose</h3>



&emsp; å½“ View ä¸éœ€è¦å†æ˜¾ç¤ºï¼Œä»æ¸²æŸ“æ ‘ä¸­ç§»é™¤çš„æ—¶å€™ï¼ŒState å°±ä¼šæ°¸ä¹…çš„ä»æ¸²æŸ“æ ‘ä¸­ç§»é™¤ï¼Œå°±ä¼šè°ƒç”¨ dispose ç”Ÿå‘½å‘¨æœŸï¼Œè¿™æ—¶å€™å°±å¯ä»¥åœ¨ dispose é‡Œåšä¸€äº›å–æ¶ˆç›‘å¬ã€åŠ¨ç”»çš„æ“ä½œï¼Œå’Œ initState æ˜¯ç›¸åçš„





<br/>

># <h1 id='FlutterSDKè‡ªå¸¦ç»„ä»¶åº“'>Flutter SDKè‡ªå¸¦ç»„ä»¶åº“</h1>

**åŸºç¡€ç»„ä»¶**

- `import 'package:flutter/widgets.dart';`

&emsp;  `Flutter` æä¾›äº†ä¸€å¥—ä¸°å¯Œã€å¼ºå¤§çš„åŸºç¡€ç»„ä»¶ï¼Œåœ¨åŸºç¡€ç»„ä»¶åº“ä¹‹ä¸Š`Flutter`åˆæä¾›äº†ä¸€å¥—`Materialé£æ ¼ï¼ˆAndroidé»˜è®¤çš„è§†è§‰é£æ ¼ï¼‰`å’Œä¸€å¥—`Cupertinoé£æ ¼ï¼ˆiOSè§†è§‰é£æ ¼ï¼‰çš„ç»„ä»¶åº“`ã€‚

<br/>

- **Materialç»„ä»¶**
	- `import 'package:flutter/material.dart';`

&emsp;  `Material`ç»„ä»¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ„å»ºéµå¾ªMaterial Designè®¾è®¡è§„èŒƒçš„åº”ç”¨ç¨‹åºã€‚Materialåº”ç”¨ç¨‹åºä»¥[`MaterialApp`](https://docs.flutter.io/flutter/material/MaterialApp-class.html)Â ç»„ä»¶å¼€å§‹ï¼Œ è¯¥ç»„ä»¶åœ¨åº”ç”¨ç¨‹åºçš„æ ¹éƒ¨åˆ›å»ºäº†ä¸€äº›å¿…è¦çš„ç»„ä»¶ï¼Œæ¯”å¦‚`Theme`ç»„ä»¶ï¼Œå®ƒç”¨äºé…ç½®åº”ç”¨çš„ä¸»é¢˜ã€‚


<br/>

- **Cupertinoç»„ä»¶**
	- `import 'package:flutter/cupertino.dart';`

&emsp;  `Cupertinoé£æ ¼çš„ç»„ä»¶`ï¼Œå°½ç®¡ç›®å‰è¿˜æ²¡æœ‰Material ç»„ä»¶é‚£ä¹ˆä¸°å¯Œï¼Œä½†æ˜¯å®ƒä»åœ¨ä¸æ–­çš„å®Œå–„ä¸­ã€‚å€¼å¾—ä¸€æçš„æ˜¯åœ¨Material ç»„ä»¶åº“ä¸­æœ‰ä¸€äº›ç»„ä»¶å¯ä»¥æ ¹æ®å®é™…è¿è¡Œå¹³å°æ¥åˆ‡æ¢è¡¨ç°é£æ ¼ï¼Œæ¯”å¦‚MaterialPageRouteï¼Œåœ¨è·¯ç”±åˆ‡æ¢æ—¶ï¼Œå¦‚æœæ˜¯Androidç³»ç»Ÿï¼Œå®ƒå°†ä¼šä½¿ç”¨Androidç³»ç»Ÿé»˜è®¤çš„é¡µé¢åˆ‡æ¢åŠ¨ç”»(ä»åº•å‘ä¸Š)ï¼›å¦‚æœæ˜¯iOSç³»ç»Ÿï¼Œå®ƒä¼šä½¿ç”¨iOSç³»ç»Ÿé»˜è®¤çš„é¡µé¢åˆ‡æ¢åŠ¨ç”»ï¼ˆä»å³å‘å·¦ï¼‰ã€‚


<br/>

`cupertinoTestRoute.dart æ–‡ä»¶`

```
import 'package:flutter/cupertino.dart';

class cupertinoTestRoute extends StatelessWidget {

  @override
  Widget build(BuildContext context) {
    // TODO: implement build
    return CupertinoPageScaffold(
      navigationBar: CupertinoNavigationBar(
        middle: Text("Cupertino ç»„ä»¶åº“æµ‹è¯•"),
      ),
      child: Center(
        child: CupertinoButton(
            color: CupertinoColors.activeOrange,
            child: Text("ç‚¹å‡»"),
            onPressed: () {}),
      ),
    );
  }
}

```


<br/>

**main.dart æ–‡ä»¶**

```
//è‡ªå®šä¹‰ç±»æ–‡ä»¶
import 'package:flutter_demo/customWidget/cupertinoWidget.dart';

//è°ƒç”¨
Widget build(BuildContext context) {

  return MaterialApp(
    title: 'Flutter Demo',
    theme: ThemeData(
      primarySwatch: Colors.cyan,
    ),
    home: cupertinoTestRoute(),//åˆå§‹åŒ–
  );
}

```

æ•ˆæœï¼š

![flutter1_63.png](./../Pictures/flutter1_63.png)


<br/>

***
<br/><br/>

># <h1 id='çŠ¶æ€ç®¡ç†'>çŠ¶æ€ç®¡ç†</h1>

>## <h2 id='Provider'>[Provider](https://juejin.cn/post/7067356022272163847)</h2>


![z21](./../Pictures/z21.png)

&emsp; Flutter å®é™…ä¸Šåœ¨ä¸€å¼€å§‹å°±ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§çŠ¶æ€ç®¡ç†æ–¹å¼ï¼Œé‚£å°±æ˜¯ StatefulWidgetã€‚ä½†æ˜¯æˆ‘ä»¬å¾ˆå¿«å‘ç°ï¼Œå®ƒæ­£æ˜¯é€ æˆä¸Šè¿°åŸå› çš„ç½ªé­ç¥¸é¦–ã€‚

&emsp; åœ¨ State å±äºæŸä¸€ä¸ªç‰¹å®šçš„ Widgetï¼Œåœ¨å¤šä¸ª Widget ä¹‹é—´è¿›è¡Œäº¤æµçš„æ—¶å€™ï¼Œè™½ç„¶ä½ å¯ä»¥ä½¿ç”¨ callback è§£å†³ï¼Œä½†æ˜¯å½“åµŒå¥—è¶³å¤Ÿæ·±çš„è¯ï¼Œæˆ‘ä»¬ä¼šå¢åŠ éå¸¸å¤šçš„åƒåœ¾ä»£ç ã€‚

&emsp; è¿™æ—¶å€™ï¼Œæˆ‘ä»¬ä¾¿è¿«åˆ‡çš„éœ€è¦ä¸€ä¸ªæ¶æ„æ¥å¸®åŠ©æˆ‘ä»¬ç†æ¸…è¿™äº›å…³ç³»ï¼ŒçŠ¶æ€ç®¡ç†æ¡†æ¶åº”è¿è€Œç”Ÿã€‚


ä¸‹è½½[Provider](https://pub.flutter-io.cn/packages/provider/install)æ’ä»¶.

```
dependencies:
  provider: ^4.3.2+2
```


<br/>
<br/>

> <h2 id='MultiProvider'>MultiProvider</h2>


ä½¿ç”¨åµŒå¥—çš„æ–¹å¼æ¥ç»„åˆå¤šä¸ª Provider,è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸€ä¸ªéå¸¸ sweet çš„ç»„ä»¶`MultiProvider`:

```
void main() {
  final counter = CounterModel();
  final textSize = 48;

  runApp(
    MultiProvider(
      providers: [
        Provider.value(value: textSize),
        ChangeNotifierProvider.value(value: counter)
      ],
      child: MyApp(),
    ),
  );
}

```


<br/>

***
<br/>


> <h1 id='Widgetç®¡ç†è‡ªèº«çŠ¶æ€'>Widgetç®¡ç†è‡ªèº«çŠ¶æ€</h1>




```
import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';

///TapboxA ç±»
class TapboxA extends StatefulWidget {
  TapboxA({Key key}) : super(key: key);

  @override
  _TapboxAState createState() => new _TapboxAState();
  
}

class _TapboxAState extends State<TapboxA> {

  bool _active = false;
  void _handleTap() {
    setState(() {
      _active = !_active;
    });
  }

  @override
  Widget build(BuildContext context) {

    return new GestureDetector(
      onTap: _handleTap,
      child: new Container(
        child: new Center(
          child: new Text(
            _active ? 'Active' : 'No Active',
            style: new TextStyle(fontSize: 32.0, color: Colors.white),
          ),
        ),
        width: 200.0,
        height: 200.0,
        decoration: new BoxDecoration(
          color:_active ? Colors.lightGreen[700] : Colors.grey[600],
        ),
      ),
    );
  }
  
}
```

<br/>

**è°ƒç”¨**

```

void main() {
  runApp(MyApp());
  // runApp(Text("hellosjglajgl"));
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home:Scaffold(
        appBar: AppBar(
          title: Text('Hello Flutter'),
        ),
        body: TapboxA(),
      )
    );
  }
  
}
```

æ•ˆæœå›¾ï¼š

![flutter1_54.png](./../Pictures/flutter1_54.png)

ç‚¹å‡»ç°è‰²è‰²å—ï¼Œè¿›è¡Œå˜è‰²ã€‚




<br/>
<br/>

> <h2 id='çˆ¶Widgetç®¡ç†å­Widgetçš„çŠ¶æ€'>çˆ¶Widgetç®¡ç†å­Widgetçš„çŠ¶æ€</h2>


```


///------------------------- ParentWidgetState ç±» ----------------------------------
///çˆ¶ç»„ä»¶
class ParentWidgetState extends StatefulWidget {
  @override
  _ParentWidgetState createState()  => new _ParentWidgetState();
  
}

class _ParentWidgetState extends State<ParentWidgetState> {

  bool _active = false;

  ///å›æ‰å‡½æ•°
  void _handleTapboxChaned(bool newValue){
    setState(() {
      //ä¿®æ”¹çŠ¶æ€
      _active = newValue;
    });
  }

  @override
  Widget build(BuildContext context) {
    // TODO: implement build
    return new Container(
      child: new TapboxB (
        active: _active,
        //å°†_handleTapboxChanedå‡½æ•°èµ‹å€¼ç»™TapboxBçš„onChanged
        onChanged: _handleTapboxChaned,
      ),
    );
  }
  
}

///------------------------- TapboxB ----------------------------------
///å­ç»„ä»¶
class TapboxB extends StatelessWidget {

  final bool active;
  ///å®šä¹‰æ¥æ”¶çˆ¶ç±»å›è°ƒå‡½æ•°çš„æŒ‡é’ˆ
  final ValueChanged<bool> onChanged;

  TapboxB({Key key, this.active: false, @required this.onChanged}) : super(key: key);

  void _handleTap() {
    onChanged(!active);
  }



  @override
  Widget build(BuildContext context) {

    return new GestureDetector(
      //è°ƒç”¨å›è°ƒå‡½æ•°ä¼ å€¼
      onTap: _handleTap,
      child: new Container(
        child: new Center(
          child: new Text(
            active ? "Activeã€æ¿€æ´»ã€‘" : "No Activeã€æ²¡æ¿€æ´»ã€‘",
            style: new TextStyle(
              fontSize: 18.0,
              color: Colors.white,
            ),
          ),
        ),
        width: 200,
        height: 200,
        decoration: new BoxDecoration(
          color: active ? Colors.lightGreen[700] : Colors.grey[600],
        ),
      ),
    );
  }
  
}

```

<br/>

**è°ƒç”¨**

```
void main() {
  runApp(MyApp());
  // runApp(Text("hellosjglajgl"));
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home:Scaffold(
        appBar: AppBar(
          title: Text('Hello Flutter'),
        ),
        body: ParentWidgetState(),
      )
    );
  }
  
}
```

æ•ˆæœå›¾ï¼š

![flutter1_55.png](./../Pictures/flutter1_55.png)




<br/>
<br/>



> <h2 id='è·¨ç»„ä»¶çŠ¶æ€å…±äº«'>è·¨ç»„ä»¶çŠ¶æ€å…±äº«</h2>


```
import 'dart:collection';
import 'dart:typed_data';

import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';

// ä¸€ä¸ªé€šç”¨çš„InheritedWidgetï¼Œä¿å­˜ä»»éœ€è¦è·¨ç»„ä»¶å…±äº«çš„çŠ¶æ€
class InheritedProvider<T> extends InheritedWidget {
  //å…±äº«çŠ¶æ€ä½¿ç”¨æ³›å‹
  final T data;  


  InheritedProvider({@required this.data, Widget child}) : super(child: child);
  
  @override
  //åœ¨æ­¤ç®€å•è¿”å›trueï¼Œåˆ™æ¯æ¬¡æ›´æ–°éƒ½ä¼šè°ƒç”¨å…¶ä¾èµ–çš„å­å­™èŠ‚ç‚¹didChangeDependencies
  bool updateShouldNotify(InheritedProvider<T> oldWidget) {
    return true;
  }
  
}



Type _typeOf<T>() => T;
class ChangeNotifierProvider<T extends ChangeNotifier> extends StatefulWidget {
  final Widget child;
  final T data;
    

  ChangeNotifierProvider({
    Key key,
    this.data,
    this.child,
  });

  //å®šä¹‰ä¸€ä¸ªä¾¿æ·æ–¹æ³•ï¼Œæ–¹ä¾¿å­æ ‘ä¸­çš„widgetè·å–å…±äº«æ•°æ®
  static T of<T> (BuildContext context) {
    final type = _typeOf<InheritedProvider<T>>();
    //final provider = context.inheritFromWidgetOfExactType(type) as InheritedProvider<T>;
    //final provider = context.dependOnInheritedWidgetOfExactType(aspect: type) as InheritedProvider<T>;
    final provider = context.dependOnInheritedWidgetOfExactType<InheritedProvider<T>>();
    print("å•†å“çš„Modelæ˜¯ï¼š${(provider.data as CartModel).totalPrice}");
    return provider.data;
  }

  @override
  _ChangeNotifierProviderState<T> createState() {
    return _ChangeNotifierProviderState<T>();
  }
  
}

/*
* _ChangeNotifierProviderState ä¸»è¦ä½œç”¨å°±æ˜¯ç›‘å¬åˆ°å…±äº«çŠ¶æ€ï¼ˆmodelï¼‰æ”¹å˜æ—¶é‡æ–°æ„å»ºWidgetæ ‘
* 
*/
class _ChangeNotifierProviderState<T extends ChangeNotifier> extends State<ChangeNotifierProvider<T>> {
  
  ///å¦‚æœæ•°æ®å‘ç”Ÿå˜åŒ–ï¼ˆmodelç±»è°ƒç”¨äº†notifyListenersï¼‰ï¼Œé‡æ–°æ„å»ºInheritedProvider
  //void update() => setState(() => {});
  void update() {
    //buildæ–¹æ³•ä¼šè¢«æ‰§è¡Œ
    setState(() => {});
  }
  

  @override
  void didUpdateWidget(ChangeNotifierProvider<T> oldWidget) {
    // å½“Provideræ›´æ–°æ—¶ï¼Œå¦‚æœæ–°æ—§æ•°æ®ä¸"=="ï¼Œåˆ™è§£ç»‘æ—§æ•°æ®ç›‘å¬ï¼ŒåŒæ—¶æ·»åŠ æ–°æ•°æ®ç›‘å¬
    if (widget.data != oldWidget.data) {
      oldWidget.data.removeListener(update);
      widget.data.addListener(update);
    }
    super.didUpdateWidget(oldWidget);
  }

  @override
  void initState() {
    // ç»™modelæ·»åŠ ç›‘å¬å™¨
    widget.data.addListener(update);
    super.initState();
  }

  @override
  void dispose() {
    // ç§»é™¤modelçš„ç›‘å¬å™¨
    widget.data.removeListener(update);
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return InheritedProvider<T>(
      data: widget.data,
      child: widget.child,
    );
  }
  
}


/*
* å®šä¹‰ä¸€ä¸ªItemç±»ï¼Œç”¨äºè¡¨ç¤ºå•†å“ä¿¡æ¯ 
*
*/
class Item {
  //å•†å“å•ä»·
  double price;
  // å•†å“ä»½æ•°
  int count;

  Item(this.price, this.count);
}


/*
* å®šä¹‰ä¸€ä¸ªä¿å­˜è´­ç‰©è½¦å†…å•†å“æ•°æ®çš„CartModelç±»
* CartModelå³è¦è·¨ç»„ä»¶å…±äº«çš„modelç±»
*/
class CartModel extends ChangeNotifier {
  //ç”¨äºä¿å­˜è´­ç‰©è½¦ä¸­å•†å“åˆ—è¡¨
  final List<Item> _items = [];
  ///ç¦æ­¢æ”¹å˜è´­ç‰©è½¦é‡Œçš„å•†å“ä¿¡æ¯
  UnmodifiableListView<Item> get items => UnmodifiableListView(_items);
  ///è´­ç‰©è½¦ä¸­å•†å“çš„æ€»ä»·
  double get totalPrice => _items.fold(0, (value, item) => value + item.count * item.price);


  //å°† [item] æ·»åŠ åˆ°è´­ç‰©è½¦ã€‚è¿™æ˜¯å”¯ä¸€ä¸€ç§èƒ½ä»å¤–éƒ¨æ”¹å˜è´­ç‰©è½¦çš„æ–¹æ³•
  void add(Item item) {
    _items.add(item);
    //é€šçŸ¥ç›‘å¬å™¨ï¼ˆè®¢é˜…è€…ï¼‰ï¼Œé‡æ–°æ„å»ºInheritedProviderï¼Œ æ›´æ–°çŠ¶æ€
    notifyListeners();
  }
}

/*
* æ„å»ºç¤ºä¾‹é¡µé¢ç±»ï¼šProviderRoute
*
*/
class ProviderRoute extends StatefulWidget {
  @override
  _ProviderRouteState createState() => _ProviderRouteState();
  
}

class _ProviderRouteState extends State<ProviderRoute> {
  
  
  @override
  Widget build(BuildContext context) {

    return Center(
      child:ChangeNotifierProvider<CartModel>(
        data: CartModel(),
        child: Builder(builder: (context) {
          return Column(
            children:<Widget>[
              Text(""),
              Text(""),
              Text(""),
              Text(""),
              Builder(builder: (context) {
                var cart = ChangeNotifierProvider.of<CartModel>(context);
                return Text("æ€»ä»·: ${cart.totalPrice}");
              }),
              Builder(builder: (context) {
                //åœ¨åé¢ä¼˜åŒ–éƒ¨åˆ†ä¼šç”¨åˆ°
                print("RaisedButton build");
                return RaisedButton(
                  child: Text("æ·»åŠ å•†å“"),
                  onPressed: (){
                    ChangeNotifierProvider.of<CartModel>(context).add(Item(20.0, 1));
                  },
                );
              }),
            ],
          );
        }),
      ),
    );
  }
  
}
```

æ•ˆæœå›¾ï¼š

![flutter1_56.png](./../Pictures/flutter1_56.png)



<br/><br/>


> <h3 id='#builder'> Builder </h3>

ä»‹ç»:è°ƒç”¨é—­åŒ…ä»¥è·å–å…¶å­å°éƒ¨ä»¶çš„å°éƒ¨ä»¶

åŸºç¡€ç”¨æ³•ï¼š

```
Builder(
  builder: (BuildContext context){
    return Container();
  },
)
````
 
<br/>
<br/>
    
Builderä¸­æœ‰ä¸€ä¸ªbuilderï¼Œè¿”å›ä¸€ä¸ªWidgetå³å¯ï¼Œé‚£å’Œç›´æ¥ä½¿ç”¨Containeræœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ

ç­”æ¡ˆè‚¯å®šæ˜¯æœ‰çš„ï¼Œç”¨å¤„ä¸»è¦ä½“ç°åœ¨contextä¸Šã€‚

- **1.ä½¿ç”¨åœºæ™¯ä¸€**

&emsp; çœ‹ä¸‹è¿™ä¸ªå¼‚å¸¸ä¿¡æ¯ï¼šScaffold.of() called with a context that does not contain a Scaffoldï¼Œè¿™ä¸ªå¼‚å¸¸å­¦ä¹ Flutterçš„è¿‡ç¨‹ä¸­ä¼šç»å¸¸é‡åˆ°ï¼ŒåŸå› å°±æ˜¯å½“å‰çš„contextæ²¡æœ‰åŒ…å«åœ¨Scaffoldæ§ä»¶ä¸­ï¼Œæ¯”å¦‚ä¸‹é¢çš„å†™æ³•å°±ä¼šå‡ºç°æ­¤å¼‚å¸¸ï¼š

```
class HomePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('è€å­Ÿ'),
      ),
      body: Center(
        child: RaisedButton(
          color: Colors.pink,
          textColor: Colors.white,
          onPressed: _displaySnackBar(context),
          child: Text('show SnackBar'),
        ),
      ),
    );
  }
}

_displaySnackBar(BuildContext context) {
  final snackBar = SnackBar(content: Text('è€å­Ÿ'));
  Scaffold.of(context).showSnackBar(snackBar);
}
```


<br/>
   
ä½¿ç”¨Buildè§£å†³æ­¤é—®é¢˜ï¼š

```
Scaffold(
    appBar: AppBar(
        title: Text('è€å­Ÿ'),
    ),
    body: Builder(
        builder: (context) => 
            Center(
            child: RaisedButton(
            color: Colors.pink,
            textColor: Colors.white,
            onPressed: () => _displaySnackBar(context),
            child: Text('è€å­Ÿ'),
            ),
        ),
    ),
);
```
    
    
<br/>
<br/>


- **2.ä½¿ç”¨åœºæ™¯äºŒ**

è‡ªå®šä¹‰äº‹ä»¶åˆ†å‘ï¼Œä»£ç å¦‚ä¸‹ï¼š

```
NotificationListener<CustomNotification>(
  onNotification: (CustomNotification notification) {
    print('ä»‹ç»äº‹ä»¶â€”â€”2ï¼š${notification.value}');
    return false;
  },
  child: Center(
    child: RaisedButton(
      child: Text('å‘é€'),
      onPressed: () {
        CustomNotification('è‡ªå®šä¹‰äº‹ä»¶').dispatch(context);
      },
    ),
  ),
)
```
    
    
<br/>
<br/>


æ­¤æ—¶ç‚¹å‡»æŒ‰é’®å¹¶ä¸ä¼šåˆ†å‘äº‹ä»¶ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š

```
NotificationListener<CustomNotification>(
  onNotification: (CustomNotification notification) {
    print('ä»‹ç»äº‹ä»¶â€”â€”2ï¼š${notification.value}');
    return false;
  },
  child: Center(
    child: Builder(
      builder: (context) {
        return RaisedButton(
          child: Text('å‘é€'),
          onPressed: () {
            CustomNotification('è‡ªå®šä¹‰äº‹ä»¶').dispatch(context);
          },
        );
      },
    ),
  ),
)
```
    
åªéœ€åœ¨RaisedButtonå¤–é¢åŒ…è£¹Builderå³å¯ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°æ­¤é—®é¢˜ï¼Ÿ

&emsp; å› ä¸ºæ²¡æœ‰Builderçš„contextè¡¨ç¤ºå½“å‰æ•´ä¸ªæ§ä»¶çš„contextï¼Œå…¶ä¸Šå¹¶æ²¡æœ‰NotificationListenerç›‘å¬ï¼Œè€ŒåŠ ä¸ŠBuilderåï¼Œcontextè¡¨ç¤ºBuilderæ§ä»¶ï¼Œå…¶ä¸Šæœ‰NotificationListenerç›‘å¬


<br/>
<br/>

`stateWidgets.dart æ–‡ä»¶`

```
import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';

class TapboxA extends StatefulWidget {
  TapboxA({Key key}): super(key: key);

  @override
  _TapboxAState createState() => new _TapboxAState();
}

class _TapboxAState extends State<TapboxA> {
  bool _active = false;

  void _handleTap() {
    setState(() {
      _active = !_active;
    });
  }

  @override
  Widget build(BuildContext context) {
    // TODO: implement build
    return new GestureDetector(
      onTap: _handleTap,
      child: new Container(
        child: new Center(
          child: new Text(
            _active ? "æ¿€æ´»äº†" : "æœªæ¿€æ´»",
            style: new TextStyle(
              fontSize: 32.0,
              color: Colors.white
            ),
          ),
        ),
        width: 200.0,
        height: 200.0,
        decoration: new BoxDecoration(
          color: _active ? Colors.lightGreen[700] : Colors.grey[600],
        ),
      ),
    );
  }

}
```

`main.dart æ–‡ä»¶`

```
Widget build(BuildContext context) {

  return MaterialApp(
    title: 'Flutter Demo',
    theme: ThemeData(
      primarySwatch: Colors.cyan,
    ),
    home: TapboxA(),
  );
}
}
```

æ•ˆæœï¼š

![flutter1_64.png](./../Pictures/flutter1_64.png)




<br/>
<br/>


> <h2 id='InheritedWidgetå…±äº«è‡ªå¢æ•°æ®'>InheritedWidgetå…±äº«è‡ªå¢æ•°æ®</h2>


&emsp; InheritedWidget å…è®¸åœ¨ widget æ ‘ä¸­æœ‰æ•ˆåœ°å‘ä¸‹ä¼ æ’­ï¼ˆå’Œå…±äº«ï¼‰ä¿¡æ¯ã€‚

&emsp; InheritedWidget æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ Widgetï¼Œå®ƒå°†ä½œä¸ºå¦ä¸€ä¸ªå­æ ‘çš„çˆ¶èŠ‚ç‚¹æ”¾ç½®åœ¨ Widget æ ‘ä¸­ã€‚è¯¥å­æ ‘çš„æ‰€æœ‰ widget éƒ½å¿…é¡»èƒ½å¤Ÿä¸è¯¥ InheritedWidget æš´éœ²çš„æ•°æ®è¿›è¡Œäº¤äº’ã€‚

&emsp; å¼€å‘åšå¤šäº†ï¼Œå®Œå…¨è·Ÿ`iOSçš„è®¾è®¡æ¨¡å¼å•ä¾‹`å·®ä¸å¤šåœ¨å­˜å‚¨æ•°æ®æ–¹é¢ã€‚ä½†æ˜¯åœ¨`å•ä¾‹ä¸Š`åˆåŠ äº†`é€šçŸ¥`å’Œ`å…¨å±€åˆ·æ–°æ•´ä¸ªappç»„ä»¶`ï¼Œç›¸å½“ç®€å•æš´åŠ›ã€‚

å¥½äº†ï¼Œå…ˆçœ‹ç¬¬ä¸€ä¸ªä»£ç Demoï¼š

**ShareDataWidgetç»„ä»¶**

```
import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';

class ShareDataWidget extends InheritedWidget {

  ///éœ€è¦åœ¨å­æ ‘ä¸­å…±äº«çš„æ•°æ®ï¼Œä¿å­˜ç‚¹å‡»æ¬¡æ•°
  final int data;

  ShareDataWidget({
    @required this.data,
    Widget child
  }) : super(child: child);

  /// å®šä¹‰ä¸€ä¸ªä¾¿æ·æ–¹æ³•ï¼Œæ–¹ä¾¿å­æ ‘ä¸­çš„widgetè·å–å…±äº«æ•°æ® 
  /// å…è®¸æ‰€æœ‰å­ widget é€šè¿‡åŒ…å«çš„ context è·å¾—æœ€è¿‘çš„ MyInheritedWidget å®ä¾‹ï¼ˆ
  static ShareDataWidget of(BuildContext context) {
    
    //return context.inheritFromWidgetOfExactType(ShareDataWidget);// åºŸå¼ƒäº†
    
    return context.dependOnInheritedWidgetOfExactType(aspect: ShareDataWidget);
  }

  ///é‡å†™ updateShouldNotify æ–¹æ³•ç”¨æ¥å‘Šè¯‰ InheritedWidget å¦‚æœå¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œæ˜¯å¦å¿…é¡»å°†é€šçŸ¥ä¼ é€’ç»™æ‰€æœ‰å­ widget
  @override
  bool updateShouldNotify(ShareDataWidget oldWidget) {
    // TODO: implement updateShouldNotify
    // å¦‚æœè¿”å›trueï¼Œåˆ™å­æ ‘ä¸­ä¾èµ–(buildå‡½æ•°ä¸­æœ‰è°ƒç”¨)æœ¬widget
    // çš„å­widgetçš„`state.didChangeDependencies`ä¼šè¢«è°ƒç”¨
    return oldWidget.data != data;
  }
  
}
```


<br/>

**_TestWidgetç»„ä»¶**

```
/*
  * å®ç°ä¸€ä¸ªå­ç»„ä»¶_TestWidgetï¼Œåœ¨å…¶buildæ–¹æ³•ä¸­å¼•ç”¨ShareDataWidgetä¸­çš„æ•°æ®ã€‚
  * åŒæ—¶ï¼Œåœ¨å…¶didChangeDependencies() å›è°ƒä¸­æ‰“å°æ—¥å¿—
*/
class  _TestWidget extends StatefulWidget {
  @override
  _TestWidgetState createState() => new _TestWidgetState();
  
}

class  _TestWidgetState extends State<_TestWidget> {
  
  @override
  Widget build(BuildContext context) {
    print("å…±äº«æ•°æ®ï¼š ${ShareDataWidget.of(context).data.toString()}");
    //ä½¿ç”¨InheritedWidgetä¸­çš„å…±äº«æ•°æ®ï¼Œä¹Ÿå°±äº§ç”Ÿäº†ä¾èµ–
    return Text(
      "ä¾èµ–äº§ç”Ÿï¼š" + ShareDataWidget.of(context)
                      .data
                      .toString()
                      
    );
  }


@override
  void didChangeDependencies() {
    // TODO: implement didChangeDependencies
    super.didChangeDependencies();
    //çˆ¶æˆ–ç¥–å…ˆwidgetä¸­çš„InheritedWidgetæ”¹å˜(updateShouldNotifyè¿”å›true)æ—¶ä¼šè¢«è°ƒç”¨ã€‚
    //å¦‚æœbuildä¸­æ²¡æœ‰ä¾èµ–InheritedWidgetï¼Œåˆ™æ­¤å›è°ƒä¸ä¼šè¢«è°ƒç”¨ã€‚
    print("Dependencies changeã€ä¾èµ–å‘ç”Ÿäº†æ”¹å˜ã€‘");
  }
  
}
```




<br/>

**InheritedWidgetTestRouteç»„ä»¶**

```
class  InheritedWidgetTestRoute extends StatefulWidget {

  @override
  _InheritedWidgetTestRouteState createState() => new _InheritedWidgetTestRouteState();
  
}

class  _InheritedWidgetTestRouteState extends State<InheritedWidgetTestRoute> {

  int count = 0;

  @override
  Widget build(BuildContext context) {

    return Center(
      //ä¸ºäº†èƒ½å¤Ÿä¼ æ’­/å…±äº«æŸäº›æ•°æ®ï¼Œéœ€è¦å°† InheritedWidgetå­ç±»ShareDataWidgetæ”¾ç½®åœ¨ widget æ ‘çš„é¡¶éƒ¨
      //è¿™è§£é‡Šäº†ä¼ é€’ç»™ InheritedWidget åŸºç¡€æ„é€ å‡½æ•°çš„ @required Widget child å‚æ•°
      child: ShareDataWidget(
        data: count,
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children:<Widget>[
            Padding(padding: const EdgeInsets.only(bottom: 20.0),
            child: _TestWidget(),// å­widgetä¸­ä¾èµ–ShareDataWidget
            ),
            RaisedButton(
              ////æ¯ç‚¹å‡»ä¸€æ¬¡ï¼Œå°†countè‡ªå¢ï¼Œç„¶åé‡æ–°build,ShareDataWidgetçš„dataå°†è¢«æ›´æ–°
              onPressed: () => setState(() => ++count),
              child: Text("Increment"),
              )
          ]
        ),
        ),
    );
  }
}

```

<br/>

**è°ƒç”¨**

```
void main() {
  runApp(MyApp());
  // runApp(Text("hellosjglajgl"));
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home:Scaffold(
        appBar: AppBar(
          title: Text('Hello Flutter'),
        ),
        body: InheritedWidgetTestRoute(),
      )
    );
  }
  
}
```

è¿è¡Œæ•ˆæœï¼š

![flutter1_58.png](./../Pictures/flutter1_58.png)


&emsp;  æ„Ÿè§‰è¿™ä¸ªå¯ä»¥åšappçš„ç”¨æˆ·ä¿¡æ¯å±•ç¤ºï¼Œæ„Ÿè§‰å¾ˆæ£’ã€‚

&emsp;  ä¸€èˆ¬æ¥è¯´ï¼Œå­widgetå¾ˆå°‘ä¼šé‡å†™`didChangeDependencies()`æ–¹æ³•ï¼Œå› ä¸ºåœ¨ä¾èµ–æ”¹å˜åframeworkä¹Ÿéƒ½ä¼šè°ƒç”¨build()æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ éœ€è¦åœ¨ä¾èµ–æ”¹å˜åæ‰§è¡Œä¸€äº›æ˜‚è´µçš„æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ï¼Œè¿™æ—¶æœ€å¥½çš„æ–¹å¼å°±æ˜¯åœ¨`didChangeDependencies()`æ–¹æ³•ä¸­æ‰§è¡Œï¼Œè¿™æ ·å¯ä»¥é¿å…æ¯æ¬¡build()éƒ½æ‰§è¡Œè¿™äº›æ˜‚è´µæ“ä½œã€‚


å¦‚æœå±‚çº§åµŒå¥—çš„widgetæƒ³å…±äº«åŒä¸€ä»½æ•°æ®çš„è¯ï¼Œä¾¿å¯é€šè¿‡è°ƒç”¨ShareDataWidget.of(context).data æ¥å®ç°è·å–å…±äº«æ•°æ®ï¼Œä¸ç”¨ä¸€å±‚ä¸€å±‚çš„ä¼ é€’æ•°æ®äº†ã€‚





<br/>
<br/>



> <h3 id='dependOnInheritedWidgetOfExactTypeæ–¹æ³•'>dependOnInheritedWidgetOfExactTypeæ–¹æ³•</h3>

&emsp; inheritFromWidgetOfExactTypeæ–¹æ³•å·²ç»ä¸å†ä½¿ç”¨äº†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯dependOnInheritedWidgetOfExactTypeã€‚

- **dependOnInheritedWidgetOfExactType:**
	- è·å–æœ€è¿‘ç»™å®šç±»å‹çš„Widgetï¼Œè¯¥widgetå¿…é¡»æ˜¯InheritedWidgetçš„å­ç±»(æ¯”å¦‚ä¸Šæ–‡çš„ShareDataWidgetç±»)ï¼Œå¹¶å‘è¯¥widgetæ³¨å†Œä¼ å…¥çš„context;
	- å½“è¯¥widgetæ”¹å˜æ—¶ï¼Œè¿™ä¸ªcontextä¼šé‡æ–°æ„å»ºä»¥ä¾¿ä»è¯¥widgetè·å¾—æ–°çš„å€¼;
	- è¿™å°±æ˜¯childå‘InheritedWidgetæ³¨å†Œçš„æ–¹æ³•ã€‚


<br/>
<br/>


> <h3 id='findAncestorWidgetOfExactTypeæ–¹æ³•'>findAncestorWidgetOfExactTypeæ–¹æ³•</h3>


- **findAncestorWidgetOfExactType:**
	- åŠŸèƒ½ä¸dependOnInheritedWidgetOfExactTypeä¸€æ ·ï¼Œä½†æ˜¯åªä¼šå¯»æ‰¾InheritedWidgetçš„å­ç±»ï¼Œå¯ä»¥ä»¥O(1)çš„å¤æ‚åº¦æŸ¥æ‰¾ä¸Šçº§Widget;



<br/>
<br/>



>### <h3 id='åŒºåˆ«'>[åŒºåˆ«](https://blog.csdn.net/hjjdehao/article/details/114985547)</h3>

å½“è°ƒç”¨`findAncestorWidgetOfExactType`è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œç›¸åº”çš„å­widgetä¸ä¼šè°ƒç”¨didChangeDependenciesè¿™ä¸ªæ–¹æ³•ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿ

&emsp; åŸå› åœ¨äºdependOnInheritedWidgetOfExactTypeè¿™ä¸ªæ–¹æ³•é‡Œé¢æ³¨å†Œäº†InheritedWidgetå’Œå…¶å­widgetæ³¨å†Œäº†ä¾èµ–å…³ç³»ã€‚è€ŒfindAncestorWidgetOfExactTypeæ²¡æœ‰ã€‚æƒ³çœ‹å…·ä½“çš„è¯å¯ä»¥ç‚¹è¿›è¿™ä¸¤ä¸ªæ–¹æ³•çš„æºç çœ‹çœ‹å°±çŸ¥é“äº†ã€‚




<br/>
<br/>


> <h3 id='widgetä¹‹é—´çš„äº¤äº’'>widgetä¹‹é—´çš„äº¤äº’</h3>



![flutter1_67.png](./../Pictures/flutter1_67.png)

ä¸ºäº†è¯´æ˜äº¤äº’æ–¹å¼ï¼Œæˆ‘ä»¬åšä»¥ä¸‹å‡è®¾ï¼š

â€˜Widget Aâ€™ æ˜¯ä¸€ä¸ªå°†é¡¹ç›®æ·»åŠ åˆ°è´­ç‰©è½¦é‡Œçš„æŒ‰é’®ï¼›
â€˜Widget Bâ€™ æ˜¯ä¸€ä¸ªæ˜¾ç¤ºè´­ç‰©è½¦ä¸­å•†å“æ•°é‡çš„æ–‡æœ¬ï¼›
â€˜Widget Câ€™ ä½äº Widget B æ—è¾¹ï¼Œæ˜¯ä¸€ä¸ªå†…ç½®ä»»æ„æ–‡æœ¬çš„æ–‡æœ¬ï¼›
æˆ‘ä»¬å¸Œæœ› â€˜Widget Aâ€™ åœ¨æŒ‰ä¸‹æ—¶ â€˜Widget Bâ€™ èƒ½å¤Ÿè‡ªåŠ¨åœ¨è´­ç‰©è½¦ä¸­æ˜¾ç¤ºæ­£ç¡®æ•°é‡çš„é¡¹ç›®ï¼Œä½†æˆ‘ä»¬ä¸å¸Œæœ›é‡å»º â€˜Widget Câ€™

é’ˆå¯¹è¯¥åœºæ™¯ï¼ŒInheritedWidget æ˜¯å”¯ä¸€ä¸€ä¸ªåˆé€‚çš„ Widget é€‰é¡¹ï¼


**ä»£ç **

```
class Item {
   String reference;

   Item(this.reference);
}

class _MyInherited extends InheritedWidget {
  _MyInherited({
    Key key,
    @required Widget child,
    @required this.data,
  }) : super(key: key, child: child);

  final MyInheritedWidgetState data;

  @override
  bool updateShouldNotify(_MyInherited oldWidget) {
    return true;
  }
}

class MyInheritedWidget extends StatefulWidget {
  MyInheritedWidget({
    Key key,
    this.child,
  }): super(key: key);

  final Widget child;

  @override
  MyInheritedWidgetState createState() => new MyInheritedWidgetState();

  static MyInheritedWidgetState of(BuildContext context){
    return (context.inheritFromWidgetOfExactType(_MyInherited) as _MyInherited).data;
  }
}

class MyInheritedWidgetState extends State<MyInheritedWidget>{
  /// List of Items
  List<Item> _items = <Item>[];

  /// Getter (number of items)
  int get itemsCount => _items.length;

  /// Helper method to add an Item
  void addItem(String reference){
    setState((){
      _items.add(new Item(reference));
    });
  }

  @override
  Widget build(BuildContext context){
    return new _MyInherited(
      data: this,
      child: widget.child,
    );
  }
}

class MyTree extends StatefulWidget {
  @override
  _MyTreeState createState() => new _MyTreeState();
}

class _MyTreeState extends State<MyTree> {
  @override
  Widget build(BuildContext context) {
    return new MyInheritedWidget(
      child: new Scaffold(
        appBar: new AppBar(
          title: new Text('Title'),
        ),
        body: new Column(
          children: <Widget>[
            new WidgetA(),
            new Container(
              child: new Row(
                children: <Widget>[
                  new Icon(Icons.shopping_cart),
                  new WidgetB(),
                  new WidgetC(),
                ],
              ),
            ),
          ],
        ),
      ),
    );
  }
}

class WidgetA extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final MyInheritedWidgetState state = MyInheritedWidget.of(context);
    return new Container(
      child: new RaisedButton(
        child: new Text('Add Item'),
        onPressed: () {
          state.addItem('new item');
        },
      ),
    );
  }
}

class WidgetB extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final MyInheritedWidgetState state = MyInheritedWidget.of(context);
    return new Text('${state.itemsCount}');
  }
}

class WidgetC extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return new Text('I am Widget C');
  }
}
```


**è¯´æ˜**

- åœ¨è¿™ä¸ªéå¸¸åŸºæœ¬çš„ä¾‹å­ä¸­ï¼š

	- _MyInherited æ˜¯ä¸€ä¸ª **InheritedWidget**ï¼Œæ¯æ¬¡æˆ‘ä»¬é€šè¿‡ **â€˜Widget Aâ€™** æŒ‰é’®æ·»åŠ ä¸€ä¸ªé¡¹ç›®æ—¶å®ƒéƒ½ä¼šé‡æ–°åˆ›å»º
	
	- **MyInheritedWidget** æ˜¯ä¸€ä¸ª State åŒ…å«äº†é¡¹ç›®åˆ—è¡¨çš„ Widgetã€‚å¯ä»¥é€šè¿‡ **static MyInheritedWidgetState of(BuildContext context)** è®¿é—®è¯¥ `State`
	
	- `MyInheritedWidgetState` æš´éœ²äº†ä¸€ä¸ªè·å– `itemsCount` çš„ `getter` æ–¹æ³• å’Œä¸€ä¸ª `addItem` æ–¹æ³•ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥è¢« widget ä½¿ç”¨ï¼Œè¿™æ˜¯å­ widget æ ‘çš„ä¸€éƒ¨åˆ†
	
	- æ¯æ¬¡æˆ‘ä»¬å°†é¡¹ç›®æ·»åŠ åˆ° State æ—¶ï¼Œ`MyInheritedWidgetState` éƒ½ä¼šé‡å»º
	
	- MyTree ç±»ä»…æ„å»ºäº†ä¸€ä¸ª widget æ ‘ï¼Œå¹¶å°† `MyInheritedWidget` ä½œä¸ºæ ‘çš„æ ¹èŠ‚ç‚¹
	
	- WidgetA æ˜¯ä¸€ä¸ªç®€å•çš„ `RaisedButton`ï¼Œå½“æŒ‰ä¸‹å®ƒæ—¶ï¼Œå®ƒå°†ä»æœ€è¿‘çš„ `MyInheritedWidget` å®ä¾‹ä¸­è°ƒç”¨ addItem æ–¹æ³•
	
	- `WidgetB` æ˜¯ä¸€ä¸ªç®€å•çš„ `Text`ï¼Œç”¨æ¥æ˜¾ç¤ºæœ€è¿‘ çº§åˆ« `MyInheritedWidget` çš„é¡¹ç›®æ•°


<br/>
<br/>


**è¿™ä¸€åˆ‡æ˜¯å¦‚ä½•è¿ä½œçš„å‘¢ï¼Ÿ**

**ä¸ºåç»­çš„é€šçŸ¥æ³¨å†Œ Widget**

&emsp; å½“ä¸€ä¸ªå­ Widget è°ƒç”¨ MyInheritedWidget.of(context) æ—¶ï¼Œå®ƒä¼ é€’è‡ªèº«çš„ context å¹¶è°ƒç”¨ MyInheritedWidget çš„ä»¥ä¸‹æ–¹æ³•ã€‚

```
static MyInheritedWidgetState of(BuildContext context) {
    return (context.inheritFromWidgetOfExactType(_MyInherited) as _MyInherited).data;
}
```

&emsp; åœ¨å†…éƒ¨ï¼Œé™¤äº†ç®€å•åœ°è¿”å› MyInheritedWidgetState å®ä¾‹å¤–ï¼Œå®ƒè¿˜è®¢é˜…æ¶ˆè´¹è€… widget ä»¥ä¾¿ç”¨äºé€šçŸ¥æ›´æ”¹ã€‚

<br/>

&emsp; åœ¨å¹•åï¼Œå¯¹è¿™ä¸ªé™æ€æ–¹æ³•çš„ç®€å•è°ƒç”¨å®é™…ä¸Šåšäº† 2 ä»¶äº‹ï¼š

- æ¶ˆè´¹è€… widget è¢«è‡ªåŠ¨æ·»åŠ åˆ°è®¢é˜…è€…åˆ—è¡¨ä¸­ï¼Œä»è€Œå½“å¯¹ InheritedWidgetï¼ˆè¿™é‡Œæ˜¯ _MyInheritedï¼‰åº”ç”¨ä¿®æ”¹æ—¶ï¼Œè¯¥ widget èƒ½å¤Ÿé‡å»º

- _MyInherited widgetï¼ˆåˆå MyInheritedWidgetStateï¼‰ä¸­å¼•ç”¨çš„æ•°æ®å°†è¿”å›ç»™æ¶ˆè´¹è€…


<br/>
<br/>

**æµç¨‹**

ç”±äº â€˜Widget Aâ€™ å’Œ â€˜Widget Bâ€™ éƒ½ä½¿ç”¨ InheritedWidget è¿›è¡Œäº†è®¢é˜…ï¼Œå› æ­¤å¦‚æœå¯¹ _MyInherited åº”ç”¨äº†ä¿®æ”¹ï¼Œé‚£ä¹ˆå½“ç‚¹å‡» Widget A çš„ RaisedButton æ—¶ï¼Œæ“ä½œæµç¨‹å¦‚ä¸‹ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰ï¼š

- è°ƒç”¨ MyInheritedWidgetState çš„ addItem æ–¹æ³•

- _MyInheritedWidgetState.addItem æ–¹æ³•å°†æ–°é¡¹ç›®æ·»åŠ åˆ°åˆ—è¡¨ä¸­

- è°ƒç”¨ setState() ä»¥é‡å»º MyInheritedWidget

- é€šè¿‡åˆ—è¡¨ä¸­çš„æ–°å†…å®¹åˆ›å»º _MyInherited æ–°çš„å®ä¾‹

- _MyInherited è®°å½•é€šè¿‡å‚æ•°ï¼ˆdataï¼‰ä¼ é€’çš„æ–° State

- ä½œä¸º InheritedWidgetï¼Œå®ƒä¼šæ£€æŸ¥æ˜¯å¦éœ€è¦é€šçŸ¥æ¶ˆè´¹è€…ï¼ˆç­”æ¡ˆæ˜¯ trueï¼‰

- éå†æ•´ä¸ªæ¶ˆè´¹è€…åˆ—è¡¨ï¼ˆè¿™é‡Œæ˜¯ Widget A å’Œ Widget Bï¼‰å¹¶è¯·æ±‚å®ƒä»¬é‡å»º

- ç”±äº Wiget C ä¸æ˜¯æ¶ˆè´¹è€…ï¼Œå› æ­¤ä¸ä¼šé‡å»ºã€‚

è‡³æ­¤å®ƒèƒ½å¤Ÿæœ‰æ•ˆå·¥ä½œï¼


<br/>

ç„¶è€Œï¼ŒWidget A å’Œ Widget B éƒ½è¢«é‡å»ºäº†ï¼Œä½†ç”±äº Wiget A æ²¡æœ‰ä»»ä½•æ”¹å˜ï¼Œå› æ­¤å®ƒæ²¡æœ‰é‡å»ºçš„å¿…è¦ã€‚é‚£ä¹ˆåº”è¯¥å¦‚ä½•é˜²æ­¢æ­¤ç§æƒ…å†µå‘ç”Ÿå‘¢ï¼Ÿ


åœ¨ç»§ç»­è®¿é—® Inherited Widget çš„åŒæ—¶é˜»æ­¢æŸäº› Widget é‡å»º
Widget A åŒæ—¶è¢«é‡å»ºçš„åŸå› æ˜¯ç”±äºå®ƒè®¿é—® MyInheritedWidgetState çš„æ–¹å¼ã€‚

å¦‚å‰æ‰€è¿°ï¼Œè°ƒç”¨ context.inheritFromWidgetOfExactType() æ–¹æ³•å®é™…ä¸Šä¼šè‡ªåŠ¨å°† Widget è®¢é˜…åˆ°æ¶ˆè´¹è€…åˆ—è¡¨ä¸­ã€‚

é¿å…è‡ªåŠ¨è®¢é˜…ï¼ŒåŒæ—¶ä»ç„¶å…è®¸ Widget A è®¿é—® MyInheritedWidgetState çš„è§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡ä»¥ä¸‹æ–¹å¼æ”¹é€  MyInheritedWidget çš„é™æ€æ–¹æ³•ï¼š

```
static MyInheritedWidgetState of([BuildContext context, bool rebuild = true]){
    return (rebuild ? context.inheritFromWidgetOfExactType(_MyInherited) as _MyInherited
                    : context.ancestorWidgetOfExactType(_MyInherited) as _MyInherited).data;
}
```

é€šè¿‡æ·»åŠ ä¸€ä¸ª boolean ç±»å‹çš„é¢å¤–å‚æ•°â€¦â€¦

å¦‚æœ rebuild å‚æ•°ä¸º trueï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œæˆ‘ä»¬ä½¿ç”¨æ™®é€šæ–¹æ³•ï¼ˆå¹¶ä¸”å°† Widget æ·»åŠ åˆ°è®¢é˜…è€…åˆ—è¡¨ä¸­ï¼‰

å¦‚æœ rebuild å‚æ•°ä¸º falseï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥è®¿é—®æ•°æ®ï¼Œä½†ä¸ä½¿ç”¨ InheritedWidget çš„å†…éƒ¨å®ç°

å› æ­¤ï¼Œè¦å®Œæˆæ­¤æ–¹æ¡ˆï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç¨å¾®ä¿®æ”¹ä¸€ä¸‹ Widget A çš„ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ˆæˆ‘ä»¬æ·»åŠ å€¼ä¸º false çš„é¢å¤–å‚æ•°ï¼‰ï¼š

```
class WidgetA extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final MyInheritedWidgetState state = MyInheritedWidget.of(context, false);
    return new Container(
      child: new RaisedButton(
        child: new Text('Add Item'),
        onPressed: () {
          state.addItem('new item');
        },
      ),
    );
  }
}
```

å°±æ˜¯è¿™æ ·ï¼Œå½“æˆ‘ä»¬æŒ‰ä¸‹ Widget A æ—¶ï¼Œå®ƒä¸ä¼šå†é‡å»ºäº†ã€‚



<br/>

***
<br/>
<br/>


> <h1 id='ç³»ç»Ÿæ–¹æ³•è°ƒç”¨é¡ºåº'>ç³»ç»Ÿæ–¹æ³•è°ƒç”¨é¡ºåº</h1>



<br/>




> <h2 id='çŠ¶æ€setStateæ–¹æ³•è°ƒç”¨'>çŠ¶æ€ setStateæ–¹æ³•è°ƒç”¨</h2>


- **è§¦å‘ç»„ä»¶çš„ build æ–¹æ³•**
	- å¯¹å­ã€çˆ¶å°éƒ¨ä»¶çš„å½±å“ï¼š
	- å­æ§ä»¶çš„buildæ–¹æ³•ä¼šè¢«æ‰§è¡Œï¼Œå¦‚æœkeyä¸åŒï¼Œåˆ™initStateæ–¹æ³•ä¹Ÿä¼šè¢«æ‰§è¡Œï¼›
	- çˆ¶æ§ä»¶ä¸æ‰§è¡Œbuildå’ŒinitStateï¼›


<br/>
<br/>

> <h2 id='å¯¼èˆªNavigation'>å¯¼èˆª Navigation</h2>

- å¼¹æ¡†popï¼š
	- initStateå’Œbuildéƒ½ä¸ä¼šè¢«æ‰§è¡Œï¼›

- é¡µé¢popï¼š
	- popå›æ¥ä¹‹å,build æ–¹æ³•ä¼šè¢«æ‰§è¡Œï¼›

- é¡µé¢pushï¼š
	- pushçš„æ—¶å€™,build æ–¹æ³•ä¼šè¢«æ‰§è¡Œï¼›

- åˆ—è¡¨æ»šåŠ¨ï¼š
	- åˆ—è¡¨æ–°itemçš„buildå’ŒinitStateæ–¹æ³•éƒ½ä¼šè¢«æ‰§è¡Œï¼›
	- å½“åˆ—è¡¨æ‰€åœ¨é¡µé¢setStateçš„æ—¶å€™ï¼Œå¦‚æœitemçš„keyæ²¡å˜åŒ–ï¼Œåˆ™itemåªæ‰§è¡Œbuildæ–¹æ³•ï¼Œå¦‚æœitemçš„keyæœ‰å˜åŒ–åˆ™æ‰§è¡Œbuildå’ŒinitStateï¼›




<br/>

***
<br/>


># <h1 id='è·¯ç”±ç®¡ç†'>è·¯ç”±ç®¡ç†</h1>


æ‰“å¼€ä¸€ä¸ªç®€å•çš„è·¯ç”±Controller

```
//åˆ›å»ºä¸€ä¸ªç‚¹å‡»æŒ‰é’®
FlatButton(
  child: Text("æ‰“å¼€æ–°è·¯ç”±"),
  textColor: Colors.blue,
  onPressed: (){
    //å¯¼èˆªåˆ°æ–°è·¯ç”±
    Navigator.push(context, MaterialPageRoute(builder: (context) {
      return NewRoute();
    }));
  },
)



//è·¯ç”±controller
class NewRoute extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    //Scaffold æ˜¯ Material åº“ä¸­æä¾›çš„é¡µé¢è„šæ‰‹æ¶ï¼Œ
    //å®ƒæä¾›äº†é»˜è®¤çš„å¯¼èˆªæ ã€æ ‡é¢˜å’ŒåŒ…å«ä¸»å±å¹•widgetæ ‘ï¼ˆååŒâ€œç»„ä»¶æ ‘â€æˆ–â€œéƒ¨ä»¶æ ‘â€ï¼‰çš„bodyå±æ€§ï¼Œç»„ä»¶æ ‘å¯ä»¥å¾ˆå¤æ‚ã€‚
    return Scaffold(
      appBar: AppBar(
        title: Text("ğŸ‘‹é¦–é¡µ"),
      ),
      body: Center(
        child: Text("è¿™æ˜¯æ–°çš„è·¯ç”±"),
      ),
    );
    
  }
}
```

æ•ˆæœå›¾ï¼š

<br/>


![flutter1_65.png](./../Pictures/flutter1_65.png)



&emsp; `MaterialPageRoute`ç»§æ‰¿è‡ª`PageRoute`ç±»ï¼Œ`PageRoute`ç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè¡¨ç¤ºå æœ‰æ•´ä¸ªå±å¹•ç©ºé—´çš„ä¸€ä¸ªæ¨¡æ€è·¯ç”±é¡µé¢ï¼Œå®ƒè¿˜å®šä¹‰äº†è·¯ç”±æ„å»ºåŠåˆ‡æ¢æ—¶è¿‡æ¸¡åŠ¨ç”»çš„ç›¸å…³æ¥å£åŠå±æ€§ã€‚
&emsp; `MaterialPageRoute` æ˜¯`Materialç»„ä»¶åº“æä¾›çš„ç»„ä»¶`ï¼Œå®ƒå¯ä»¥é’ˆå¯¹ä¸åŒå¹³å°ï¼Œå®ç°ä¸å¹³å°é¡µé¢åˆ‡æ¢åŠ¨ç”»é£æ ¼ä¸€è‡´çš„è·¯ç”±åˆ‡æ¢åŠ¨ç”»ã€‚

<br/>

&emsp; `MaterialPageRoute` æ„é€ å‡½æ•°çš„å„ä¸ªå‚æ•°çš„æ„ä¹‰ï¼š

```
  MaterialPageRoute({
    WidgetBuilder builder,
    RouteSettings settings,
    bool maintainState = true,
    bool fullscreenDialog = false,
  })
```

- `builder` æ˜¯ä¸€ä¸ªWidgetBuilderç±»å‹çš„å›è°ƒå‡½æ•°ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ„å»ºè·¯ç”±é¡µé¢çš„å…·ä½“å†…å®¹ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªwidgetã€‚æˆ‘ä»¬é€šå¸¸è¦å®ç°æ­¤å›è°ƒï¼Œè¿”å›æ–°è·¯ç”±çš„å®ä¾‹ã€‚
- `settings` åŒ…å«è·¯ç”±çš„é…ç½®ä¿¡æ¯ï¼Œå¦‚è·¯ç”±åç§°ã€æ˜¯å¦åˆå§‹è·¯ç”±ï¼ˆé¦–é¡µï¼‰ã€‚
- `maintainState`ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œå½“å…¥æ ˆä¸€ä¸ªæ–°è·¯ç”±æ—¶ï¼ŒåŸæ¥çš„è·¯ç”±ä»ç„¶ä¼šè¢«ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœæƒ³åœ¨è·¯ç”±æ²¡ç”¨çš„æ—¶å€™é‡Šæ”¾å…¶æ‰€å ç”¨çš„æ‰€æœ‰èµ„æºï¼Œå¯ä»¥è®¾ç½®maintainStateä¸ºfalseã€‚
- `fullscreenDialog` è¡¨ç¤ºæ–°çš„è·¯ç”±é¡µé¢æ˜¯å¦æ˜¯ä¸€ä¸ªå…¨å±çš„æ¨¡æ€å¯¹è¯æ¡†ï¼Œåœ¨iOSä¸­ï¼Œå¦‚æœfullscreenDialogä¸ºtrueï¼Œæ–°é¡µé¢å°†ä¼šä»å±å¹•åº•éƒ¨æ»‘å…¥ï¼ˆè€Œä¸æ˜¯æ°´å¹³æ–¹å‘ï¼‰ã€‚



<br/>
<br/>
<br/>


> <h2 id='è·¯ç”±å¯¼èˆª'>è·¯ç”±å¯¼èˆª</h2>

&emsp; [**MaterialApp**](https://docs.flutter.io/flutter/material/MaterialApp-class.html) æ˜¯æˆ‘ä»¬appå¼€å‘ä¸­å¸¸ç”¨çš„ç¬¦åˆMaterialApp Designè®¾è®¡ç†å¿µçš„å…¥å£Widgetï¼Œä»æºç å¯ä»¥çœ‹å‡ºè¯¥widgetçš„æ„é€ æ–¹æ³•ä¸­æœ‰å¤šä¸ªå‚æ•°ï¼Œä½†æ˜¯åŸºæœ¬ä¸Šå¤§å¤šæ•°å‚æ•°æ˜¯å¯ä»¥çœç•¥çš„ã€‚


```
MaterialApp({
  Key key,
  this.title = '', // è®¾å¤‡ç”¨äºä¸ºç”¨æˆ·è¯†åˆ«åº”ç”¨ç¨‹åºçš„å•è¡Œæè¿°
  this.home, // åº”ç”¨ç¨‹åºé»˜è®¤è·¯ç”±çš„å°éƒ¨ä»¶,ç”¨æ¥å®šä¹‰å½“å‰åº”ç”¨æ‰“å¼€çš„æ—¶å€™ï¼Œæ‰€æ˜¾ç¤ºçš„ç•Œé¢
  this.color, // åœ¨æ“ä½œç³»ç»Ÿç•Œé¢ä¸­åº”ç”¨ç¨‹åºä½¿ç”¨çš„ä¸»è‰²ã€‚
  this.theme, // åº”ç”¨ç¨‹åºå°éƒ¨ä»¶ä½¿ç”¨çš„é¢œè‰²ã€‚
  this.routes = const <String, WidgetBuilder>{}, // åº”ç”¨ç¨‹åºçš„é¡¶çº§è·¯ç”±è¡¨
  this.navigatorKey, // åœ¨æ„å»ºå¯¼èˆªå™¨æ—¶ä½¿ç”¨çš„é”®ã€‚
  this.initialRoute, // å¦‚æœæ„å»ºäº†å¯¼èˆªå™¨ï¼Œåˆ™æ˜¾ç¤ºçš„ç¬¬ä¸€ä¸ªè·¯ç”±çš„åç§°
  this.onGenerateRoute, // åº”ç”¨ç¨‹åºå¯¼èˆªåˆ°æŒ‡å®šè·¯ç”±æ—¶ä½¿ç”¨çš„è·¯ç”±ç”Ÿæˆå™¨å›è°ƒ
  this.onUnknownRoute, // å½“ onGenerateRoute æ— æ³•ç”Ÿæˆè·¯ç”±(initialRouteé™¤å¤–)æ—¶è°ƒç”¨
  this.navigatorObservers = const <NavigatorObserver>[], // ä¸ºè¯¥åº”ç”¨ç¨‹åºåˆ›å»ºçš„å¯¼èˆªå™¨çš„è§‚å¯Ÿè€…åˆ—è¡¨
  this.builder, // ç”¨äºåœ¨å¯¼èˆªå™¨ä¸Šé¢æ’å…¥å°éƒ¨ä»¶ï¼Œä½†åœ¨ç”±WidgetsAppå°éƒ¨ä»¶åˆ›å»ºçš„å…¶ä»–å°éƒ¨ä»¶ä¸‹é¢æ’å…¥å°éƒ¨ä»¶ï¼Œæˆ–ç”¨äºå®Œå…¨æ›¿æ¢å¯¼èˆªå™¨
  this.onGenerateTitle, // å¦‚æœéç©ºï¼Œåˆ™è°ƒç”¨æ­¤å›è°ƒå‡½æ•°æ¥ç”Ÿæˆåº”ç”¨ç¨‹åºçš„æ ‡é¢˜å­—ç¬¦ä¸²ï¼Œå¦åˆ™ä½¿ç”¨æ ‡é¢˜ã€‚
  this.locale, // æ­¤åº”ç”¨ç¨‹åºæœ¬åœ°åŒ–å°éƒ¨ä»¶çš„åˆå§‹åŒºåŸŸè®¾ç½®åŸºäºæ­¤å€¼ã€‚
  this.localizationsDelegates, // è¿™ä¸ªåº”ç”¨ç¨‹åºæœ¬åœ°åŒ–å°éƒ¨ä»¶çš„å§”æ‰˜ã€‚
  this.localeListResolutionCallback, // è¿™ä¸ªå›è°ƒè´Ÿè´£åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ä»¥åŠç”¨æˆ·æ›´æ”¹è®¾å¤‡çš„åŒºåŸŸè®¾ç½®æ—¶é€‰æ‹©åº”ç”¨ç¨‹åºçš„åŒºåŸŸè®¾ç½®ã€‚
  this.localeResolutionCallback, // 
  this.supportedLocales = const <Locale>[Locale('en', 'US')], // æ­¤åº”ç”¨ç¨‹åºå·²æœ¬åœ°åŒ–çš„åœ°åŒºåˆ—è¡¨ 
  this.debugShowMaterialGrid = false, // æ‰“å¼€ç»˜åˆ¶åŸºçº¿ç½‘æ ¼æè´¨åº”ç”¨ç¨‹åºçš„ç½‘æ ¼çº¸è¦†ç›–
  this.showPerformanceOverlay = false, // æ‰“å¼€æ€§èƒ½å åŠ 
  this.checkerboardRasterCacheImages = false, // æ‰“å¼€æ …æ ¼ç¼“å­˜å›¾åƒçš„æ£‹ç›˜æ ¼
  this.checkerboardOffscreenLayers = false, // æ‰“å¼€æ¸²æŸ“åˆ°å±å¹•å¤–ä½å›¾çš„å›¾å±‚çš„æ£‹ç›˜æ ¼
  this.showSemanticsDebugger = false, // æ‰“å¼€æ˜¾ç¤ºæ¡†æ¶æŠ¥å‘Šçš„å¯è®¿é—®æ€§ä¿¡æ¯çš„è¦†ç›–
  this.debugShowCheckedModeBanner = true, // åœ¨é€‰ä¸­æ¨¡å¼ä¸‹æ‰“å¼€ä¸€ä¸ªå°çš„â€œDEBUGâ€æ¨ªå¹…ï¼Œè¡¨ç¤ºåº”ç”¨ç¨‹åºå¤„äºé€‰ä¸­æ¨¡å¼
}) 
```


<br/>

**`main.dart `** Code

```
import 'package:flutter/material.dart';
import 'package:flutter_navigaiton/tool/tool.dart';

void main() => runApp(MyApp());

class MyApp extends StatelessWidget {

  @override
  Widget build(BuildContext context) {
    //MaterialApp æ˜¯æˆ‘ä»¬appå¼€å‘ä¸­å¸¸ç”¨çš„ç¬¦åˆMaterialApp Designè®¾è®¡ç†å¿µçš„å…¥å£Widget
    return MaterialApp(
      title: 'Flutter è·¯ç”±å¯¼èˆª', //è®¾å¤‡ç”¨äºä¸ºç”¨æˆ·è¯†åˆ«åº”ç”¨ç¨‹åºçš„å•è¡Œæè¿°
      theme: ThemeData( //// åº”ç”¨ç¨‹åºå°éƒ¨ä»¶ä½¿ç”¨çš„é¢œè‰²
        primarySwatch: Colors.blue,
      ),
      home: NamedRouter.initApp(),  // åº”ç”¨ç¨‹åºé»˜è®¤è·¯ç”±çš„å°éƒ¨ä»¶,ç”¨æ¥å®šä¹‰å½“å‰åº”ç”¨æ‰“å¼€çš„æ—¶å€™ï¼Œæ‰€æ˜¾ç¤ºçš„ç•Œé¢
    );
  }
}





class NamedRouter {
  static Map<String, WidgetBuilder> routes;
//åˆå§‹åŒ–App
  static Widget initApp() {
    return MaterialApp(
      initialRoute: '/',
      routes: NamedRouter.initRoutes(),// åº”ç”¨ç¨‹åºçš„é¡¶çº§è·¯ç”±è¡¨
    );
  }

//åˆå§‹åŒ–è·¯ç”±
  static initRoutes() {
    routes = {
      '/': (context) => FirstScreen(),
      '/second': (context) => SecondScreen(),
      '/toolWidget': (context) => toolWidget()
    };
    return routes;
  }


}

class FirstScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('First Screen'),
      ),
      body: Center(
        child: RaisedButton(
          child: Text('Launch screen'),
          onPressed: () {
            // Navigate to the second screen using a named route
            Navigator.pushNamed(context, '/second');
          },
        ),
      ),
    );
  }
}

class SecondScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("Second Screen"),
      ),
      body: Center(
        child: RaisedButton(
          onPressed: () {
            // Navigate back to the first screen by popping the current route
            // off the stack
            // Navigator.pop(context);
            Navigator.pushNamed(context, "/toolWidget");
          },
          child: Text('push to toolWidget ç»„ä»¶'),
        ),
      ),
    );
  }
}

```

<br/>

**tool.dart** Code

```
import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';

class toolWidget extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("toolWidget"),
      ),
      body: Center(
        child: RaisedButton(
          onPressed: () {
            // Navigate back to the first screen by popping the current route
            // off the stack
            Navigator.pop(context);
          },
          child: Text('Go back!'),
        ),
      ),
    );
  }
}

```

<br/>

æ•ˆæœï¼š

![flutter1_45.png](./../Pictures/flutter1_45.png)




<br/>

***
<br/>
<br/>


> <h1 id='Stream'>Stream</h1>

<br/>

> <h2 id=' åˆ†ç±»'> åˆ†ç±»</h2>

-  **`Single-subscriptio`** :  å•è®¢é˜…æµ;
- **`broadcast`**:   å¹¿æ’­å¼çš„æµï¼ˆå¯å¤šè®¢é˜…ï¼‰;
- å¦‚æœä¸€ä¸ªæµæ˜¯å•è®¢é˜…æ¨¡å¼ å´æƒ³å¤šæ¬¡è®¢é˜…ï¼Œå¯ä»¥é€šè¿‡`asBroadcastStrea()`æ–¹æ³•æ¥ä¿®æ”¹ã€‚

&emsp;  å•è®¢é˜…æµåªèƒ½è¢«è®¢é˜…ä¸€æ¬¡ï¼Œé‡å¤è®¢é˜…ä¼šæŠ¥é”™ï¼Œ ç›´åˆ°è®¾ç½®listen åæ‰ä¼šå‘é€ã€‚å•è®¢é˜…æµé€šå¸¸ç”¨äºæµå¼æ•°æ®å—è¾ƒå¤§çš„è¿ç»­æ•°æ®ï¼Œå¦‚æ–‡ä»¶I/O;

&emsp;  å¹¿æ’­å¼çš„æµå¯ä»¥è®¢é˜…å¤šæ¬¡ï¼Œåœ¨listenä¹‹å‰çš„æ•°æ®ä¼šä¸¢å¤±ã€‚

<br/>

&emsp;  ä¸ºäº†æ–¹æ“ä½œ Stream ï¼Œå®˜æ–¹æä¾›äº†StreamController.

&emsp; å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒStreamSinkæ¥æ·»åŠ æµ(å…¥å£ï¼‰ï¼ŒåŒæ—¶æä¾› stream å±æ€§ç”¨äºå¯¹å¤–çš„ç›‘å¬å’Œå˜æ¢ã€‚ 

&emsp;  stream.listençš„è¿”å›ä¸€ä¸ªStreamSubscriptionï¼Œå¯ä»¥é€šè¿‡å®ƒçš„`pause(), resume(), cancel()`ç­‰æ–¹æ³•æ¥æ“ä½œæµçš„è®¢é˜…ã€‚


![flutter1_46.png](./../Pictures/flutter1_46.png)


<br/>
<br/>

> <h3 id='StreamController'>StreamController</h3>


```
// åˆ›å»ºä¸€ä¸ªå•è®¢é˜…æµ
StreamController controller = StreamController<String>(); 
// åˆ›å»ºä¸€ä¸ªå¹¿æ’­å¼çš„è®¢é˜…æµ
StreamController controller = StreamController.broadcast(); 
```


<br/>
<br/>

> <h3 id='listen'>listen</h3>

 **listen ï¼š** ç”¨æ¥è®¾ç½®ç›‘å¬ï¼Œ å®ƒçš„è¿”å›å€¼æ˜¯ StreamSubscribeã€‚

-  **`StreamSubscribe`**
	- ` pause()` ï¼š æš‚åœç›‘å¬ï¼ˆæ˜¯ç«‹å³æš‚åœï¼‰ï¼Œæš‚åœåçš„äº‹ä»¶æµä¸ä¼šä¸¢å¤±ï¼Œä¼šåœ¨resumeåä¸€èµ·å›è°ƒ;
	- `resume()`ï¼š å”¤é†’pauseçš„æµ
	- `cancel()`ï¼š å–æ¶ˆ



<br/>
<br/>


> <h2 id='å•è®¢é˜…'>å•è®¢é˜…</h2>


```
 ///å®šä¹‰ä¸€ä¸ªController
  StreamController<List<String>> _dataController = StreamController<List<String>>();
  ///è·å– StreamSink åš add å…¥å£
  StreamSink<List<String>> _dataSink = _dataController.sink;
  ///è·å– Stream ç”¨äºç›‘å¬
  Stream<List<String>> _dataStream =  _dataController.stream;
  ///äº‹ä»¶è®¢é˜…å¯¹è±¡
  StreamSubscription _dataSubscription = _dataStream.listen((value){
    ///do change
    print('ç›‘å¬å€¼ä¸ºï¼š${value}');
  });
  ///æ”¹å˜äº‹ä»¶
  _dataSink.add(["first", "second", "three", "more"]);
```

æ‰“å°ï¼š

![flutter1_47.png](./../Pictures/flutter1_47.png)

`å…¶ä»–çš„`

<br/>

```
StreamController controller = StreamController<String>();
StreamSink sink = controller.sink;
Stream stream = controller.stream;

stream.transform(StreamTransformer<String, String>.fromHandlers(handleData: (String data, EventSink<String> sink) {
if (!data.contains('æ•°æ®2')) {
  sink.add(data);
}
})).listen((event) {
print('æ¥å—åˆ°çš„æ•°æ®æ˜¯ï¼š ${event}');
});
sink.add('3ç§’åæ‰è®¾ç½®ç›‘å¬ã€‚');
```

æ‰“å°ï¼š

```
flutter: æ¥å—åˆ°çš„æ•°æ®æ˜¯ï¼š 3ç§’åæ‰è®¾ç½®ç›‘å¬ã€‚
```

<br/>

```
StreamController controller = StreamController<String>();
StreamSink sink = controller.sink;
Stream stream = controller.stream;


StreamSubscription subscription = controller.stream.transform(StreamTransformer<String, String>.fromHandlers(handleData: (String data, EventSink<String> sink){
print('transform');
if (!data.contains('æ•°æ®3')) {
  sink.add(data);
}
})).listen((event) {
print('æ¥å—åˆ°çš„æ•°æ®æ˜¯ï¼š ${event}');
}); 
sink.add('æˆ‘æ˜¯ä¸€æ¡æ–°çš„æ¶ˆæ¯');

```

æ‰“å°ï¼š

```
flutter: æ¥å—åˆ°çš„æ•°æ®æ˜¯ï¼š æˆ‘æ˜¯ä¸€æ¡æ–°çš„æ¶ˆæ¯
```




<br/>
<br/>


> <h2 id='å¤šè®¢é˜…æµ'>å¤šè®¢é˜…æµ</h2>


```
// åˆå§‹åŒ–ä¸€ä¸ªintç±»å‹çš„å¹¿æ’­Stream controller
final StreamController<int> ctrl = StreamController<int>.broadcast();

// åˆå§‹åŒ–ä¸€ä¸ªç›‘å¬ï¼ŒåŒæ—¶é€šè¿‡transformå¯¹æ•°æ®è¿›è¡Œç®€å•å¤„ç†
final StreamSubscription subscription = ctrl.stream
                      .where((value) => (value % 2 == 0))
                      .listen((value) => print('ç›‘å¬ï¼š$value'));

// å¾€Streamä¸­æ·»åŠ æ•°æ®
for(int i=1; i<11; i++){
ctrl.sink.add(i);
}

// StreamControllerç”¨å®Œåéœ€è¦é‡Šæ”¾
ctrl.close();
```

æ‰“å°ï¼š

![flutter1_48.png](./../Pictures/flutter1_48.png)




<br/>

***
<br/>
<br/>

> <h1 id='å¼‚å¸¸æŠ›å‡º'>å¼‚å¸¸æŠ›å‡º</h1>



<br/>
<br/>



> <h2 id='Throw'>Throw</h2>

- æŠ›å‡ºä¸€ä¸ªå·²çŸ¥å¼‚å¸¸

```
//æ‰§è¡Œ
print('<<<<<<<<<<<<<æŠ›å‡ºå¼‚å¸¸å‰');
//æ‰§è¡Œ
throw new FormatException('æŠ›å‡ºå¼‚å¸¸ï¼ï¼ï¼');
//æˆ–è€…ï¼š  throw 'æŠ›å‡ºå¼‚å¸¸ï¼ï¼ï¼';
//ä¸æ‰§è¡Œ
print('æŠ›å‡ºå¼‚å¸¸å‰>>>>>>>>>>>>');
```

æ‰“å°æ•ˆæœï¼š

![flutter1_49.png](./../Pictures/flutter1_49.png)



ä»æ‰“å°ç»“æœæ¥çœ‹ï¼Œä¸€æ—¦å‘ç”Ÿå¼‚å¸¸åé¢çš„é€»è¾‘å°±ä¸ä¼šæ‰§è¡Œäº†ã€‚


<br/>
<br/>




> <h2 id='Catch'>Catch</h2>

- æ™®é€šæ•è·

```
print('<<<<<<<<<<<<<æŠ›å‡ºå¼‚å¸¸å‰');
var initArray = [10, 20, 30, 40, 50];
try {
  
  print('========= ${initArray[5]}');
  
} catch (e) {
  print('try å¼‚å¸¸é”™è¯¯ !' + e.toString());
}
print('>>>>>>>>>>>> try å¼‚å¸¸æ•è·ç»“æŸ !');
           
```


![flutter1_50.png](./../Pictures/flutter1_50.png)


&emsp;  ç”¨try åŒ…å«å¼‚å¸¸çš„ä»£ç ï¼Œç„¶åè¿›è¡Œæ•è·ã€‚æ•è·åè¿›è¡Œè¾“å‡ºé”™è¯¯çš„ä»£ç æç¤ºï¼Œä½†æ˜¯åé¢çš„ä»£ç ä¾ç„¶æ‰§è¡Œã€‚



<br/>
<br/>

> <h3 id='å…³é”®å­—On'>å…³é”®å­—On</h3>


<br/>
<br/>



```
print('<<<<<<<<<<<<<æŠ›å‡ºå¼‚å¸¸å‰');
var initArray = [10, 20, 30, 40, 50];

try {
print('========= ${initArray[5]}');

} on RangeError {
print('====== on ${initArray[4]}');
} on FormatException {
print('FormatException');
} catch (e) {
print('try å¼‚å¸¸é”™è¯¯æç¤º !' + e.toString());
}
print('>>>>>>>>>>>> try å¼‚å¸¸æ•è·ç»“æŸ !');
```

![flutter1_51.png](./../Pictures/flutter1_51.png)



&emsp;  æˆ‘ä»¬çœ‹åˆ°è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯æ²¡æœ‰æ‰“å°ï¼Œå› ä¸ºä»£ç é€»è¾‘èµ°åˆ° on RangeError åˆ†æ”¯ï¼Œè€Œè¾“å‡ºçš„è¯¦ç»†é”™è¯¯ä¿¡æ¯æ˜¯ä½œä¸ºé»˜è®¤å¼‚å¸¸å¤„ç†æ‰è¢«æ‰§è¡Œçš„ã€‚


<br/>
<br/>



> <h3 id='å†æ¬¡æŠ›å‡ºå¼‚å¸¸rethrow'>å†æ¬¡æŠ›å‡ºå¼‚å¸¸rethrow</h3>



```
print('<<<<<<<<<<<<<æŠ›å‡ºå¼‚å¸¸å‰');
var initArray = [10, 20, 30, 40, 50];

try {
  print('========= ${initArray[5]}');
  
} on RangeError {
  print('====== on ${initArray[4]}');
  rethrow;
} on FormatException {
  print('FormatException');
} catch (e) {
  print('try å¼‚å¸¸é”™è¯¯æç¤º !' + e.toString());
}
print('>>>>>>>>>>>> try å¼‚å¸¸æ•è·ç»“æŸ !');

```

æ•ˆæœï¼š

![flutter1_52.png](./../Pictures/flutter1_52.png)


&emsp; æˆ‘ä»¬çœ‹åˆ°å½“æˆ‘ä»¬ä½¿ç”¨äº† rethrow åï¼Œæˆ‘ä»¬çš„ä»£ç å¹¶æ²¡æœ‰å¯¹åé¢çš„é€»è¾‘è¿›è¡Œæ‰§è¡Œï¼Œå°¤å…¶æ˜¯ catch ä¸­çš„æ•è·ï¼Œä»…ä»…æ˜¯ç»™å‡ºäº†é”™è¯¯çš„åŸå› ã€‚




<br/>
<br/>



> <h2 id='Finally'>Finally</h2>



```
print('<<<<<<<<<<<<<æŠ›å‡ºå¼‚å¸¸å‰');

var initArray = [10, 20, 30, 40, 50];

try {
  print('========= ${initArray[5]}');
  
} on RangeError {
  print('====== on ${initArray[4]}');
  rethrow;
} on FormatException {
  print('FormatException');
} catch (e) {
  print('try å¼‚å¸¸é”™è¯¯æç¤º !' + e.toString());
} finally {
  print('ç¨‹åºè¿è¡Œç»“æŸ');
}
print('>>>>>>>>>>>> try å¼‚å¸¸æ•è·ç»“æŸ !');
```

![flutter1_53.png](./../Pictures/flutter1_53.png)







<br/>

***
<br/>
<br/>


> <h1 id=''></h1>



<br/>
<br/>



> <h2 id=''></h2>

























<br/>
<br/>


***
<br/>

># <h1 id='è¡Œã€åˆ—å¸ƒå±€'>è¡Œã€åˆ—å¸ƒå±€</h1>

>**`MainAxisAlignmentï¼ˆä¸»è½´ï¼‰`**:  å°±æ˜¯ä¸å½“å‰æ§ä»¶æ–¹å‘ä¸€è‡´çš„è½´;
**`CrossAxisAlignmentï¼ˆäº¤å‰è½´ï¼‰`**:  å°±æ˜¯ä¸å½“å‰æ§ä»¶æ–¹å‘å‚ç›´çš„è½´;


**`MyApp ç±»`**

```
import 'package:flutter/material.dart';

void main() => runApp(MyApp());

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      theme: ThemeData(
        primarySwatch: Colors.purple,
      ),
      home: MyHomePage(title: 'Flutter å¸ƒå±€ç»„ä»¶ç»ƒä¹ '),
    );
  }
}

class MyHomePage extends StatefulWidget {
  MyHomePage({Key key, this.title}) : super(key: key);
  final String title;

  @override
  _MyHomePageState createState() => _MyHomePageState();
}

class _MyHomePageState extends State<MyHomePage> {
  int _counter = 0;

  void _incrementCounter() {
    setState(() {
      _counter++;
    });
  }


  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(widget.title),
      ),
      body:
          Center(
            //è¡Œå¸ƒå±€è°ƒç”¨
            child: ShadeSquare.testLayoutOfROw(),
            //Â·Â·Â·
           // Â·Â·Â·
           //Â·Â·Â·
          ),
    );
  }
}
```


<br/>

**`æ¸å˜æ­£æ–¹å½¢ ShadeSquare ç±»`**

```
//æ¸å˜é¢œè‰²æ­£æ–¹å½¢
class ShadeSquare extends StatelessWidget {
  String index;
  double squareSize = 100;

  ShadeSquare(String index) {
    this.index = index;
  }
    
  //è¡Œå¸ƒå±€
  static Container testLayoutOfROw() {
    /*Container:
    * . æ˜¯ä¸€ä¸ªç»“åˆäº†ç»˜åˆ¶ï¼ˆpaintingï¼‰ã€å®šä½ï¼ˆpositioningï¼‰ä»¥åŠå°ºå¯¸ï¼ˆsizingï¼‰widgetçš„widget
    * . å‚è€ƒèµ„æ–™ï¼šhttps://www.jianshu.com/p/366b2446eaab
    * */
    return Container(
      width: double.infinity,//å¼ºåˆ¶åœ¨å®½åº¦ä¸Šæ’‘æ»¡ï¼Œä¸è®¾ç½®ï¼Œåˆ™æ ¹æ®childå’Œçˆ¶èŠ‚ç‚¹ä¸¤è€…ä¸€èµ·å¸ƒå±€
      height: 800,
      margin: EdgeInsets.all(20),
      /*decoration:
      * . ç»˜åˆ¶åœ¨childåé¢çš„è£…é¥°
      * . è®¾ç½®äº†decorationçš„è¯ï¼Œå°±ä¸èƒ½è®¾ç½®colorå±æ€§ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œæ­¤æ—¶åº”è¯¥åœ¨decorationä¸­è¿›è¡Œé¢œè‰²çš„è®¾ç½®
      * */
      decoration: BoxDecoration(
        border: Border.all(
          color: Colors.red,
          width: 6,
        ),
        color: Colors.white,//è®¾ç½®containerèƒŒæ™¯è‰²
        borderRadius: new BorderRadius.all(new Radius.circular(20.0)),
      ),
      child: Row(  //containerä¸­çš„å†…å®¹widget
        /*MainAxisAlignment:  (ä¸»è½´)å°±æ˜¯ä¸å½“å‰æ§ä»¶æ–¹å‘ä¸€è‡´çš„è½´
        * .start:  å°†å­æ§ä»¶æ”¾åœ¨ä¸»è½´çš„å¼€å§‹ä½ç½®
        * .end:    å°†å­æ§ä»¶æ”¾åœ¨ä¸»è½´çš„å¼€å§‹ä½ç½®
        * .center: å°†å­æ§ä»¶æ”¾åœ¨ä¸»è½´çš„ä¸­é—´ä½ç½®
        * .spaceBetween:  å°†ä¸»è½´ç©ºç™½ä½ç½®è¿›è¡Œå‡åˆ†ï¼Œæ’åˆ—å­å…ƒç´ ï¼Œæ‰‹å°¾æ²¡æœ‰ç©ºéš™
        * .spaceAround:   å°†ä¸»è½´ç©ºç™½åŒºåŸŸå‡åˆ†ï¼Œä½¿ä¸­é—´å„ä¸ªå­æ§ä»¶é—´è·ç›¸ç­‰ï¼Œé¦–å°¾å­æ§ä»¶é—´è·ä¸ºä¸­é—´å­æ§ä»¶é—´è·çš„ä¸€åŠ
        * .spaceEvenly:   å°†ä¸»è½´ç©ºç™½åŒºåŸŸå‡åˆ†ï¼Œä½¿å„ä¸ªå­æ§ä»¶é—´è·ç›¸ç­‰
        */
        mainAxisAlignment: MainAxisAlignment.center,
        //crossAxisAlignment: å­ç»„ä»¶åœ¨çºµè½´æ–¹å‘çš„å¯¹é½æ–¹å¼
        /*CrossAxisAlignment
          * Rowï¼ˆæ°´å¹³æ’åˆ—ï¼‰æ§ä»¶ä¸­ï¼ŒCrossAxisAlignmentçš„æ–¹å‘å°±æ˜¯å‚ç›´çš„;
          * Columnï¼ˆå‚ç›´æ’åˆ—ï¼‰æ§ä»¶ä¸­ï¼ŒCrossAxisAlignmentçš„æ–¹å‘å°±æ˜¯æ°´å¹³çš„;
          * .start:     å°†å­æ§ä»¶æ”¾åœ¨äº¤å‰è½´çš„èµ·å§‹ä½ç½®
          * .end:       å°†å­æ§ä»¶æ”¾åœ¨äº¤å‰è½´çš„ç»“æŸä½ç½®
          * .center:    å°†å­æ§ä»¶æ”¾åœ¨äº¤å‰è½´çš„ä¸­é—´ä½ç½®
          * .stretch:   ä½¿å­æ§ä»¶å¡«æ»¡äº¤å‰è½´
          * .baseline:  å°†å­æ§ä»¶æ”¾åœ¨äº¤å‰è½´çš„ä¸Šï¼Œå¹¶ä¸”ä¸åŸºçº¿ç›¸åŒ¹é…ï¼ˆä¸å¸¸ç”¨ï¼‰
          * */
        crossAxisAlignment: CrossAxisAlignment.start,
        children: <Widget>[
          ShadeSquare("1"),
          ShadeSquare("2"),
          ShadeSquare("3"),
        ],
      ),
    );
  }

  @override
  Widget build(BuildContext context) {

    return Container(
      width: squareSize,
      height: squareSize,
      alignment: Alignment.center,
      decoration: BoxDecoration(
        gradient: LinearGradient(
            colors: [Colors.cyanAccent, Colors.cyan, Colors.deepPurpleAccent]
        ),
      ),

      child: Text(
        index,
        style: TextStyle(
          color: Colors.red,
          fontSize: 20,
          fontWeight: FontWeight.bold,
        ),

      ),
    );
  }
}
```  
æ•ˆæœå›¾ï¼š

![è¡Œå¸ƒå±€æ•ˆæœå›¾](./../Pictures/flutter1_0.png)

<br/>
<br/>

- **`textDirection`**:  å°±æ˜¯ç”¨æ¥æ§åˆ¶æ°´å¹³æ–¹å‘çš„èµ·å§‹ä½ç½®å’Œæ’åˆ—æ–¹å‘;
- **`verticalDirection`**:  å°±æ˜¯ç”¨æ¥æ§åˆ¶å‚ç›´æ–¹å‘çš„èµ·å§‹ä½ç½®å’Œæ’åˆ—æ–¹å‘;


**`ShadeSquare æ·»åŠ ä¸‹è¿°æ–¹æ³•ï¼Œå¹¶åœ¨ MyApp ç±»è°ƒç”¨`**

```
  //åˆ—å¸ƒå±€
  static Column testLayoutOfColumn() {
    return Column(
      /*CrossAxisAlignment: å­ç»„ä»¶åœ¨çºµè½´æ–¹å‘çš„å¯¹é½æ–¹å¼
      * Rowï¼ˆæ°´å¹³æ’åˆ—ï¼‰æ§ä»¶ä¸­ï¼ŒCrossAxisAlignmentçš„æ–¹å‘å°±æ˜¯å‚ç›´çš„;
      * Columnï¼ˆå‚ç›´æ’åˆ—ï¼‰æ§ä»¶ä¸­ï¼ŒCrossAxisAlignmentçš„æ–¹å‘å°±æ˜¯æ°´å¹³çš„;
      * .start:     å°†å­æ§ä»¶æ”¾åœ¨äº¤å‰è½´çš„èµ·å§‹ä½ç½®
      * .end:       å°†å­æ§ä»¶æ”¾åœ¨äº¤å‰è½´çš„ç»“æŸä½ç½®
      * .center:    å°†å­æ§ä»¶æ”¾åœ¨äº¤å‰è½´çš„ä¸­é—´ä½ç½®
      * .stretch:   ä½¿å­æ§ä»¶å¡«æ»¡äº¤å‰è½´
      * .baseline:  å°†å­æ§ä»¶æ”¾åœ¨äº¤å‰è½´çš„ä¸Šï¼Œå¹¶ä¸”ä¸åŸºçº¿ç›¸åŒ¹é…ï¼ˆä¸å¸¸ç”¨ï¼‰
      * */
      crossAxisAlignment: CrossAxisAlignment.stretch,
      /*MainAxisAlignment:  (ä¸»è½´)å°±æ˜¯ä¸å½“å‰æ§ä»¶æ–¹å‘ä¸€è‡´çš„è½´
      * .start:  å°†å­æ§ä»¶æ”¾åœ¨ä¸»è½´çš„å¼€å§‹ä½ç½®
      * .end:    å°†å­æ§ä»¶æ”¾åœ¨ä¸»è½´çš„å¼€å§‹ä½ç½®
      * .center: å°†å­æ§ä»¶æ”¾åœ¨ä¸»è½´çš„ä¸­é—´ä½ç½®
      * .spaceBetween:  å°†ä¸»è½´ç©ºç™½ä½ç½®è¿›è¡Œå‡åˆ†ï¼Œæ’åˆ—å­å…ƒç´ ï¼Œæ‰‹å°¾æ²¡æœ‰ç©ºéš™
      * .spaceAround:   å°†ä¸»è½´ç©ºç™½åŒºåŸŸå‡åˆ†ï¼Œä½¿ä¸­é—´å„ä¸ªå­æ§ä»¶é—´è·ç›¸ç­‰ï¼Œé¦–å°¾å­æ§ä»¶é—´è·ä¸ºä¸­é—´å­æ§ä»¶é—´è·çš„ä¸€åŠ
      * .spaceEvenly:   å°†ä¸»è½´ç©ºç™½åŒºåŸŸå‡åˆ†ï¼Œä½¿å„ä¸ªå­æ§ä»¶é—´è·ç›¸ç­‰
      * */
      mainAxisAlignment: MainAxisAlignment.spaceEvenly,
      children: <Widget>[
        ShadeSquare("1"),
        ShadeSquare("2"),
        ShadeSquare("3"),
      ],
    );
  }
```

<br/>

æ•ˆæœå›¾ï¼š

![flutter1_66.png](./../Pictures/flutter1_66.png)



