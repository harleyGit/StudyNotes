> <h2 id=''></h2>
- [å†…è”å‡½æ•°static inline](#å†…è”å‡½æ•°staticinline)
- [æšä¸¾](#æšä¸¾)
	- [æšä¸¾å®](#æšä¸¾å®)
		- [NS_ENUMå’ŒNS_OPTIONS](#NS_ENUMå’ŒNS_OPTIONS)
		- [NS_STRING_ENUM](#NS_STRING_ENUM)
	- [ä½è¿ç®—**&**å’Œ**|**](#ä½è¿ç®—&å’Œ|)
- [**â€Œpropertyå±æ€§**](#propertyå±æ€§)
	- [ç‚¹è¯­æ³•](#ç‚¹è¯­æ³•)
	- [readWrite](#readWrite)
	- [**nonatomicå’Œatomic**](#nonatomicå’Œatomic)
	- [**retain**](#retain)
	- [**copy**](#copy)
	- [**assign**](#assign)
	- [retainå’ŒassignåŒºåˆ«](#retainå’ŒassignåŒºåˆ«)
	- [**weak**](#weak)
		- [å¤§ç™½è¯è®²è§£weakåŸç†](#å¤§ç™½è¯è®²è§£weakåŸç†)
		- **èµ„æ–™**
			- [weakå¼•ç”¨çš„åº•å±‚å®ç°åŸç†(1)](https://blog.csdn.net/u013378438/article/details/82767947)
			- [weakå¼•ç”¨çš„åº•å±‚å®ç°åŸç†(2)](https://blog.csdn.net/u013378438/article/details/82790332)
	- [NSStringçš„copyä½¿ç”¨]()
	- [**NSMutableStringçš„propertyå±æ€§**](#NSMutableStringçš„propertyå±æ€§)
		- [æ·»åŠ ä¸€ä¸ªå…ƒç´ ](#æ·»åŠ ä¸€ä¸ªå…ƒç´ )
		- [ä¿®æ”¹æ•°ç»„å…ƒç´ ](#ä¿®æ”¹æ•°ç»„å…ƒç´ )
		- [copyå’Œstrongç½®ä¸ºç©º](#copyå’Œstrongç½®ä¸ºç©º)
		- [copyï¼Œstrongï¼Œweakï¼Œassignçš„åŒºåˆ«](#copyï¼Œstrongï¼Œweakï¼Œassignçš„åŒºåˆ«)
		- [delegateä¸ºä»€ä¹ˆè¦ç”¨weakæˆ–è€…assignè€Œä¸ç”¨strong](#delegateä¸ºä»€ä¹ˆè¦ç”¨weakæˆ–è€…assignè€Œä¸ç”¨strong)
	- [protocolä¸­æ·»åŠ å±æ€§](#protocolä¸­æ·»åŠ å±æ€§)
	- [@synthesize](#@synthesize)
		- [synthesizeä½¿ç”¨æƒ…å†µ](#synthesizeä½¿ç”¨æƒ…å†µ)
			- [åŒæ—¶é‡å†™setterå’Œgetter](#åŒæ—¶é‡å†™setterå’Œgetter)
			- 	[é‡å†™åªè¯»å±æ€§çš„getteræ—¶](#é‡å†™åªè¯»å±æ€§çš„getteræ—¶)
			- 	[ä½¿ç”¨äº†@dynamicæ—¶](#ä½¿ç”¨äº†@dynamicæ—¶)
			- 	[åœ¨@protocolä¸­å®šä¹‰çš„æ‰€æœ‰å±æ€§](#ä½¿ç”¨äº†@dynamicæ—¶)
			- [åœ¨categoryä¸­å®šä¹‰çš„æ‰€æœ‰å±æ€§](#ä½¿ç”¨äº†@dynamicæ—¶)
			- [é‡å†™(overridden)çš„å±æ€§](#ä½¿ç”¨äº†@dynamicæ—¶)
	- [@dynamic](#@dynamic)
- [**å®å®šä¹‰**](#å®å®šä¹‰)
	- [__bridge](#__bridge)
	- [Const](#Const)
	- [SD_UIKIT](#SD_UIKIT)
	- [weakifyå’Œstrongify](https://xie.infoq.cn/article/903068956d7c2a5952059b16c)
	- [DEPRECATED_MSG_ATTRIBUTE](#DEPRECATED_MSG_ATTRIBUTE)
	- [FOUNDATION_EXTERN](#FOUNDATION_EXTERN)
	- [__VA_ARGS__](#__VA_ARGS__)
- [**ARCå…³é—­**](#ARCå…³é—­)
- **å‚è€ƒèµ„æ–™**
	- [^æ–­è¨€NSAssert][æ–­è¨€NSAssert](https://www.jianshu.com/p/d7498657d550)
	- [^æ–­è¨€(NSAssert)çš„ä½¿ç”¨][æ–­è¨€(NSAssert)çš„ä½¿ç”¨](https://www.jianshu.com/p/6e444981ab45)
	- [CADisplayLinkåšé€å¸§åŠ¨ç”»](https://www.jianshu.com/p/0eeb21244caa)
	- **[pragma å¤„ç†è­¦å‘Š](https://www.jianshu.com/p/4720fc9e991a)**
	- [**å¸¸è§çš„å®**](https://www.jianshu.com/p/9f7a37989b79)

	


<br/>

***
<br/>
<br/>

> <h1 id='å†…è”å‡½æ•°staticinline'>å†…è”å‡½æ•°static inline</h1>

```
static inline NSArray<NSNumber *> * _Nonnull SDImageScaleFactors() {
    return @[@2, @3];
}

//åŒä¸€ä¸ªæ–‡ä»¶,åœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸­è°ƒç”¨
-(void)test {
	NSArray *scales = SDImageScaleFactors();
}
```

å†…è”ç”¨åˆ°çš„å…³é”®å­—æ˜¯: **static inline** 

<br/>

- **1.inlineæ ‡ç¤ºç¬¦**

&emsp; å¼•ç”¨inlineæ ‡ç¤ºç¬¦ï¼Œèƒ½å¤Ÿä½¿å‡½æ•°ä¸€ä½œä¸ºä¸€ä¸ªæ ‡å‡†çš„å†…è”å‡½æ•°ï¼Œå‡½æ•°çš„ä»£ç è¢«æ”¾å…¥ç¬¦å·è¡¨ä¸­ï¼Œåœ¨ä½¿ç”¨æ—¶ç›´æ¥è¿›è¡Œæ›¿æ¢ï¼Œï¼ˆåƒå®ä¸€æ ·å±•å¼€ï¼‰ã€‚

&emsp; ä¸€èˆ¬æƒ…å†µä¸‹å¼•å…¥å†…è”å‡½æ•°æ˜¯ä¸ºäº†è§£å†³å‡½æ•°è°ƒç”¨æ•ˆç‡çš„é—®é¢˜ï¼Œå‡½æ•°ä¹‹é—´è°ƒç”¨ï¼Œæ˜¯å†…å­˜åœ°å€ä¹‹é—´çš„è°ƒç”¨ï¼Œå½“å‡½æ•°è°ƒç”¨å®Œæ¯•ä¹‹åè¿˜ä¼šè¿”å›åŸæ¥å‡½æ•°æ‰§è¡Œçš„åœ°å€ï¼Œä¼šæœ‰ä¸€å®šçš„æ—¶é—´å¼€é”€ï¼Œå†…è”å‡½æ•°å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ã€‚

&emsp; ä¸ç”¨inlineä¿®é¥°çš„å‡½æ•°ï¼Œæ±‡ç¼–æ—¶ä¼šè°ƒç”¨ call æŒ‡ä»¤ï¼Œè°ƒç”¨callæŒ‡ä»¤å°±æ˜¯å°±éœ€è¦ï¼š

```
1)å°†ä¸‹ä¸€æ¡æŒ‡ä»¤çš„æ‰€åœ¨åœ°å€å…¥æ ˆ
2)å¹¶å°†å­ç¨‹åºçš„èµ·å§‹åœ°å€é€å…¥PCï¼ˆäºæ˜¯CPUçš„ä¸‹ä¸€æ¡æŒ‡ä»¤å°±ä¼šè½¬å»æ‰§è¡Œå­ç¨‹åºï¼‰
```

&emsp; GCCä¸­çš„inlineå‡½æ•°å¯ä»¥ç›¸å½“äºåœ¨ä¸€ä¸ªæ™®é€šçš„å…¨å±€å‡½æ•°åŠ ä¸Šinlineå±æ€§ã€‚inlineå…³é”®å­—ä»…ä»…æ˜¯å»ºè®®ç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™åšå†…è”å±•å¼€å¤„ç†ï¼Œè€Œä¸æ˜¯å¼ºåˆ¶åœ¨gccç¼–è¯‘å™¨ä¸­ï¼Œç¼–è¯‘å™¨å¯ä»¥å¿½ç•¥è¿™ä¸ªå»ºè®®çš„ï¼ŒæŸä¸€äº›æƒ…å†µä¸‹ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¿½ç•¥è¿™ä¸ªinlineï¼Œå°†è¿™ä¸ªå‡½æ•°è¿˜åŸæˆæ™®é€šå‡½æ•°ã€‚å¦‚æœç¼–è¯‘é€‰é¡¹è®¾ç½®ä¸ºè´Ÿæ— ç©·ï¼Œå³ä½¿æ˜¯inlineå‡½æ•°ä¹Ÿä¸ä¼šè¢«å†…è”å±•å¼€ï¼Œé™¤éè®¾ç½®äº†å¼ºåˆ¶å†…è”å±•å¼€çš„å±æ€§(attribute((always_inline)))ï¼Œå³NS_INLINEè¿™ä¸ªå®å®šä¹‰ã€‚


<br/>
<br/>

- **2.staticæ ‡ç¤ºç¬¦**

é€šå¸¸æƒ…å†µä¸‹ä½¿ç”¨æ˜¯ç”¨ä½œå£°æ˜é™æ€å˜é‡ã€‚

```
1ï¼‰ä¿®é¥°å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œè®©å±€éƒ¨å˜é‡åªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œå±€éƒ¨å˜é‡åœ¨ç¨‹åºä¸­åªæœ‰ä¸€ä»½å†…å­˜ï¼Œä½†æ˜¯å¹¶ä¸ä¼šæ”¹å˜å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸï¼Œä»…ä»…æ˜¯æ”¹å˜äº†å±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸï¼ˆåªåˆ°ç¨‹åºç»“æŸï¼Œè¿™ä¸ªå±€éƒ¨å˜é‡æ‰ä¼šé”€æ¯ï¼‰ã€‚
2ï¼‰ä¿®é¥°å…¨å±€å˜é‡çš„æ—¶å€™ï¼Œå…¨å±€å˜é‡çš„ä½œç”¨åŸŸä»…é™äºå½“å‰æ–‡ä»¶ã€‚
```


&emsp; å½“ä¿®é¥°å‡½æ•°çš„æ—¶å€™ï¼Œå¯¹å‡½æ•°çš„è¿æ¥æ–¹å¼äº§ç”Ÿå½±å“ï¼Œä½¿å¾—å‡½æ•°åªåœ¨æœ¬æ–‡ä»¶å†…éƒ¨æœ‰æ•ˆï¼Œå¯¹å…¶ä»–æ–‡ä»¶æ˜¯ä¸å¯è§çš„ã€‚è¿™æ ·çš„å‡½æ•°åˆå«ä½œé™æ€å‡½æ•°ã€‚ä½¿ç”¨é™æ€å‡½æ•°çš„å¥½å¤„æ˜¯ï¼Œä¸éœ€è¦æ‹…å¿ƒåœ¨å…¶ä»–æ–‡ä»¶å­˜åœ¨åŒåçš„å‡½æ•°ä»è€Œäº§ç”Ÿå¹²æ‰°ã€‚
å¦‚æœæƒ³è¦å…¶ä»–æ–‡ä»¶å¯ä»¥å¼•ç”¨æœ¬åœ°å‡½æ•°ï¼Œåˆ™è¦åœ¨å‡½æ•°å®šä¹‰æ—¶ä½¿ç”¨å…³é”®å­—externï¼Œè¡¨ç¤ºè¯¥å‡½æ•°æ˜¯å¤–éƒ¨å‡½æ•°ï¼Œå¯ä¾›å…¶ä»–æ–‡ä»¶è°ƒç”¨ã€‚

&emsp; å¦å¤–åœ¨è¦å¼•ç”¨åˆ«çš„æ–‡ä»¶ä¸­å®šä¹‰çš„å¤–éƒ¨å‡½æ•°çš„æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨externå£°æ˜è¦ç”¨çš„å¤–éƒ¨å‡½æ•°å³å¯ã€‚

&emsp; å¦å¤–ä¹Ÿå› ä¸ºä½¿ç”¨äº†staticä¿®é¥°ï¼Œä»è€Œä¿è¯äº†ä¸ä¼šä¸æ–­åœ°è°ƒç”¨copyï¼Œä¿è¯äº†å‡½æ•°åœ°å€çš„ä¸€è‡´æ€§ï¼Œå‡å°äº†å†…å­˜å‹åŠ›ã€‚


<br/>

- **3.inlineçš„ä¼˜åŠ¿**

	- 3.1inlineå‡½æ•°å–ä»£å®

```
1ï¼‰#defineå®šä¹‰çš„å‡½æ•°è¦æœ‰ç‰¹åˆ«çš„æ ¼å¼è¦æ±‚ï¼Œå¹¶ä¸æ˜¯æ¯ä¸ªäººéƒ½èƒ½ç†Ÿç»ƒä½¿ç”¨ï¼Œè€Œä½¿ç”¨`inline`åˆ™å°±è¡Œå¹³å¸¸å†™å‡½æ•°é‚£æ ·ã€‚
2ï¼‰å’Œå…¶ä»–çš„å®å®šä¹‰ä¸€æ ·ï¼Œä½¿ç”¨defineå®å®šä¹‰çš„ä»£ç ï¼Œç¼–è¯‘å™¨ä¸ä¼šå¯¹å…¶è¿›è¡Œå‚æ•°æœ‰æ•ˆæ€§æ£€æŸ¥ï¼Œå¾ˆå®¹æ˜“å‡ºç°æ— æ³•å¯Ÿè§‰çš„é”™è¯¯ï¼Œè°ƒè¯•è¿‡ç¨‹ä¸­ä¼šå‡ºç°å¾ˆå¤šéº»çƒ¦ã€‚
3ï¼‰ä¸ä»…æ˜¯è¾“å…¥ç±»å‹ï¼Œ#defineå®å®šä¹‰çš„ä»£ç ï¼Œè¿”å›å€¼ä¸èƒ½è¢«å¼ºåˆ¶è½¬æ¢æˆå¯è½¬æ¢çš„é€‚åˆçš„è½¬æ¢ç±» ã€‚
4ï¼‰#defineæ˜¯æ–‡æœ¬æ›¿æ¢ï¼Œéœ€è¦åœ¨é¢„ç¼–è¯‘æ—¶å±•å¼€ï¼Œå†…è”å‡½æ•°æ˜¯ç¼–è¯‘æ—¶å€™å±•å¼€

```

<br/>

- 3.2inlineå‡½æ•°ç›¸æ¯”äºæ™®é€šå‡½æ•°çš„ä¼˜åŠ¿

```
1)inlineå‡½æ•°é¿å…äº†æ™®é€šå‡½æ•°çš„,åœ¨æ±‡ç¼–æ—¶å¿…é¡»è°ƒç”¨callçš„ç¼ºç‚¹ï¼šå–æ¶ˆäº†å‡½æ•°çš„å‚æ•°å‹æ ˆï¼Œå‡å°‘äº†è°ƒç”¨çš„å¼€é”€,æé«˜æ•ˆç‡.æ‰€ä»¥æ‰§è¡Œé€Ÿåº¦ç¡®æ¯”ä¸€èˆ¬å‡½æ•°çš„æ‰§è¡Œé€Ÿåº¦è¦å¿«.
2)é›†æˆäº†å®çš„ä¼˜ç‚¹,ä½¿ç”¨æ—¶ç›´æ¥ç”¨ä»£ç æ›¿æ¢(åƒå®ä¸€æ ·);

```


<br/>


- 3.3inlineå†…è”å‡½æ•°çš„è¯´æ˜

```
1ï¼‰å†…è”å‡½æ•°åªæ˜¯æˆ‘ä»¬å‘ç¼–è¯‘å™¨æä¾›çš„ç”³è¯·ï¼Œç¼–è¯‘å™¨ä¸ä¸€å®šé‡‡å–inlineå½¢å¼è°ƒç”¨å‡½æ•°ã€‚
2ï¼‰å†…è”å‡½æ•°ä¸èƒ½æ‰¿è½½å¤§é‡çš„ä»£ç ï¼Œå¦‚æœå†…è”å‡½æ•°çš„å‡½æ•°ä½“è¿‡å¤§ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ”¾å¼ƒå†…è”ã€‚
3ï¼‰å†…è”å‡½æ•°å†…ä¸å…è®¸ä½¿ç”¨å¾ªç¯è¯­å¥æˆ–å¼€å…³è¯­å¥ã€‚
4ï¼‰å†…è”å‡½æ•°çš„å®šä¹‰é¡»åœ¨è°ƒç”¨ä¹‹å‰ã€‚
5ï¼‰å½“ä½¿ç”¨å†…è”å‡½æ•°æ—¶ï¼Œå¦‚æœåœ¨å¤šå¤„è°ƒç”¨äº†æ­¤å†…è”å‡½æ•°ï¼Œåˆ™æ­¤å‡½æ•°å°±ä¼šæœ‰Næ¬¡ä»£ç æ®µçš„æ‹·è´ï¼Œæ‰€ä»¥å¤šé…åˆ`static`æ ‡ç¤ºç¬¦ä½¿ç”¨ã€‚
```





<br/>

***
<br/>
<br/>

> <h1 id='æšä¸¾'>æšä¸¾</h1>


<br/>


># <h1 id='æšä¸¾å®'>[æšä¸¾å®](https://juejin.cn/post/6999460035508043807)</h1>

- **NS_ENUM**ï¼šç”¨äºç®€å•çš„æšä¸¾
- **NS_CLOSED_ENUM**ï¼šç”¨äºä¸ä¼šå˜æ›´æšä¸¾æˆå‘˜çš„ç®€å•çš„æšä¸¾ï¼ˆç®€ç§° â€œå†»ç»“æšä¸¾â€ ï¼‰
- **NS_OPTIONS**ï¼šç”¨äºé€‰é¡¹æšä¸¾
- **NS_TYPED_ENUM**ï¼šç”¨äºç±»å‹å¸¸é‡æšä¸¾
- **NS_TYPED_EXTENSIBLE_ENUM**ï¼šç”¨äºå¯æ‰©å±•çš„ç±»å‹å¸¸é‡æšä¸¾


<br/>


> <h3 id='NS_ENUMå’ŒNS_OPTIONS'>NS_ENUMå’ŒNS_OPTIONS</h3>

- **NS_ENUMå’ŒNS_OPTIONSå®æä¾›äº†ä¸€ä¸ªç®€æ´ã€å®šä¹‰æšä¸¾å’ŒCè¯­è¨€é€‰é¡¹çš„ç®€å•æ–¹æ³•ã€‚**

	- NS_ENUM:æ˜¯ç”¨æ¥å£°æ˜ä¸€èˆ¬çš„NSInteger(ä¸‹é¢ä»£ç ä½¿ç”¨NSInteger)ç±»å‹çš„æšä¸¾
	- NS_OPTIONS:æ˜¯ç”¨æ¥å£°æ˜ä½æ©ç (bitmasked)




```

//æ•´å‹æšä¸¾ :åªèƒ½å•ä¸ªä½¿ç”¨ï¼Œåœ¨C++ ä¸å¯ä»¥è½¬æ¢
typedef NS_ENUM(NSInteger, UIViewAnimationTransition) {
    UIViewAnimationTransitionNone,
    UIViewAnimationTransitionFlipFromLeft,
    UIViewAnimationTransitionFlipFromRight,
    UIViewAnimationTransitionCurlUp,
    UIViewAnimationTransitionCurlDown,
};


// ä½ç§»æšä¸¾ï¼šä½¿ç”¨è¿™ç§å¯ä»¥å¤šä¸ªè¿æ¥ä½¿ç”¨ | è¿›è¡ŒæŒ‰ä½åè¿æ¥ã€‚c++å¯ä»¥è½¬æ¢ä½ NSUInteger
//[self.view setAutoresizingMask: UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleTopMargin];
typedef NS_OPTIONS(NSUInteger, UIViewAutoresizing) {
    UIViewAutoresizingNone                 = 0,
    UIViewAutoresizingFlexibleLeftMargin   = 1 << 0,
    UIViewAutoresizingFlexibleWidth        = 1 << 1,
    UIViewAutoresizingFlexibleRightMargin  = 1 << 2,
    UIViewAutoresizingFlexibleTopMargin    = 1 << 3,
    UIViewAutoresizingFlexibleHeight       = 1 << 4,
    UIViewAutoresizingFlexibleBottomMargin = 1 << 5
};

```



<br/>
<br/>



> <h3 id='NS_STRING_ENUM'>NS_STRING_ENUM</h3>


&emsp; ä½¿ç”¨ **typedef** å¯¹ç±»å‹å¸¸é‡è¿›è¡Œåˆ†ç»„ï¼Œå¹¶æŒ‡å®šä¸€ä¸ªç±»å‹ï¼ˆå¦‚ DCDictionaryKeyï¼‰ï¼Œæ¶‰åŠåˆ°ä½¿ç”¨è¯¥ç±»å‹å¸¸é‡çš„åœ°æ–¹éƒ½æ”¹ä¸ºä½¿ç”¨ DCDictionaryKeyï¼Œè€Œä¸æ˜¯ Stringã€‚ç„¶åï¼Œåœ¨åé¢æ·»åŠ ä¸Šå® NS_STRING_ENUM.

OCä¸­å®šä¹‰æšä¸¾å’Œä½¿ç”¨:

```
///åœ¨.hæ–‡ä»¶ğŸ€„ï¸å®šä¹‰
typedef NSString *DCDictionaryKey NS_STRING_ENUM;

FOUNDATION_EXTERN DCDictionaryKey const DCDictionaryKeyTitle;
FOUNDATION_EXTERN DCDictionaryKey const DCDictionaryKeySubtitle;
FOUNDATION_EXTERN DCDictionaryKey const DCDictionaryKeyCount;

///åœ¨.mæ–‡ä»¶ä¸­å®šä¹‰å­—ç¬¦ä¸²
DCDictionaryKey const DCDictionaryKeyTitle = @"11111";
DCDictionaryKey const DCDictionaryKeySubtitle = @"222";
DCDictionaryKey const DCDictionaryKeyCount = @"3333"


// ä½¿ç”¨
NSDictionary<DCDictionaryKey, id> *dict = @{......};

NSString *title    = dict[DCDictionaryKeyTitle]; 
NSString *subtitle = dict[DCDictionaryKeySubtitle]; 
NSInteger count    = [dict[DCDictionaryKeyCount] integerValue];

```


åœ¨OCä¸­ä½¿ç”¨èµ·æ¥æ²¡å¤šå¤§å˜åŒ–ï¼Œä½†åœ¨ Swift ä¸­å°±æœ‰Swifçš„å‘³é“äº†,å“ˆå“ˆ!!

```
// Objective-C çš„å¸¸é‡è¢«è‡ªåŠ¨è½¬æ¢æˆ Swift Struct
struct DCDictionaryKey : Hashable, Equatable, RawRepresentable {
    init(rawValue: String)
}
extension DCDictionaryKey {
    static let title    : DCDictionaryKey
    static let subtitle : DCDictionaryKey
    static let count    : DCDictionaryKey
}

// ä½¿ç”¨
let dict:[DCDictionaryKey : Any] = [.title    : "a title",
                                    .subtitle : "a subTitle",
                                    .count    : 66]

let title    = dict[.title]    as? String
let subtitle = dict[.subtitle] as? String
let count    = dict[.count]    as? Int

// è¿™æ—¶å€™å¦‚æœæˆ‘ä»¬ä¹‹é—´ä½¿ç”¨å­—ç¬¦ä¸² "title" å½“ä½œ key çš„è¯ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™
let title    = dict["title"]   as? String // Error: Cannot convert value of type '
```

<br/>
<br/>

> <h3 id='NS_EXTENSIBLE_STRING_ENUM'>NS_EXTENSIBLE_STRING_ENUM</h3>

&emsp; åœ¨SDWebImageä¸­ä¸ºäº†å…¼å®¹Swiftå¦‚ä¸‹å¤„ç†:

```
///åœ¨.hæ–‡ä»¶ä¸­å®šä¹‰
typedef NSString * NSExceptionName NS_EXTENSIBLE_STRING_ENUM;

FOUNDATION_EXPORT NSExceptionName const NSGenericException;
FOUNDATION_EXPORT NSExceptionName const NSRangeException;
FOUNDATION_EXPORT NSExceptionName const NSInvalidArgumentException;
FOUNDATION_EXPORT NSExceptionName const NSInternalInconsistencyException;



///åœ¨.mæ–‡ä»¶èµ‹å€¼
NSExceptionName const NSGenericException = @"555";
NSExceptionName const NSRangeException = @"666";
NSExceptionName const NSInvalidArgumentException = @"888";
NSExceptionName const NSInternalInconsistencyException = @"999";

```

ä¸Šé¢çš„å¤„ç†,ç±»ä¼¼[NS_STRING_ENUM](#NS_STRING_ENUMs)ä½¿ç”¨.


<br/>

&emsp; **NS_TYPED_EXTENSIBLE_ENUM**ç”¨äºå£°æ˜å¯æ‰©å±•çš„ç±»å‹å¸¸é‡æšä¸¾ã€‚ä¸ NS_TYPED_ENUM çš„åŒºåˆ«æ˜¯ç”Ÿæˆçš„ struct å¤šäº†ä¸€ä¸ªå¿½ç•¥å‚æ•°æ ‡ç­¾çš„æ„é€ å™¨ã€‚

```
// declared
typedef long FavoriteColor NS_TYPED_EXTENSIBLE_ENUM;
FOUNDATION_EXTERN FavoriteColor const FavoriteColorBlue;

// imported
struct FavoriteColor : Hashable, Equatable, RawRepresentable {
    init(_ rawValue: Int)
    init(rawValue: Int)
}
extension FavoriteColor {
    static let blue: FavoriteColor
}

// extended
extension FavoriteColor {
    static var green: FavoriteColor {
        return FavoriteColor(1) // blue is 0, green is 1, and new favorite colors could follow
    }
}
```



<br/>
<br/>
<br/>


> <h2 id='ä½è¿ç®—&å’Œ|'>ä½è¿ç®—&å’Œ|</h2>

- **è¿ç®—ç¬¦**
	- <<(å·¦ç§»):a << bå°±è¡¨ç¤ºæŠŠaè½¬ä¸ºäºŒè¿›åˆ¶åå·¦ç§»bä½ï¼ˆåœ¨åé¢æ·»bä¸ª0ï¼‰
	- |(æˆ–):åªè¦æœ‰ä¸€ä¸ªä¸º1, ç»“æœå°±æ˜¯1
	- &(ä¸):åªè¦æœ‰äºŒä¸ªä¸º1, ç»“æœæ‰æ˜¯1

```
typedef enum {
    nameA = 1 << 0, //å€¼ä¸º1(2çš„0æ¬¡æ–¹)
    nameB = 1 << 1, //å€¼ä¸º2(2çš„1æ¬¡æ–¹)
    nameC = 1 << 2, //å€¼ä¸º4(2çš„2æ¬¡æ–¹)
    nameD = 1 << 3, //å€¼ä¸º8(2çš„3æ¬¡æ–¹)
    
}myEnumTests;


+ (void) testEnumBitOperator {
    /// |(æˆ–):åªè¦æœ‰ä¸€ä¸ªä¸º1, ç»“æœå°±æ˜¯1
    /// &(ä¸):åªè¦æœ‰äºŒä¸ªä¸º1, ç»“æœæ‰æ˜¯1
    NSInteger events = nameA | nameB;
    
    LogInfo(@"nameB:%d", nameB);//2
    LogInfo(@"nameA | nameB:%zd", events);//3
    LogInfo(@"events & nameA:%zd", events & nameA);//1
    LogInfo(@"events & nameB:%zd", events & nameB);//2
    LogInfo(@"events & nameC:%zd", events & nameC);//0
    LogInfo(@"events & nameD:%zd", events & nameD);//0
    ///ç»“è®º: å¦‚æœevents & nameCä¸º0è¯´æ˜valueä¸åŒ…å«nameC ç›¸ååˆ™åŒ…å«
    ///è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯events & nameAå°±æ˜¯nameAçš„å€¼ä¸º1, value & nameBå°±æ˜¯nameBçš„å€¼ä¸º2
    
}

```


<br/>

- NSInteger value = nameA | nameB;çš„ç»„åˆçš„å€¼, åˆ¤æ–­ç»“æœæ˜¯:
	- 1æ˜¯nameAçš„å€¼;
	- 2æ˜¯nameBçš„å€¼;
	- nameCä¸nameDæ²¡æœ‰ç»„åˆä½¿ç”¨æ‰€ä»¥å€¼ä¸º0;
	- value & nameCä¸º0è¯´æ˜valueä¸åŒ…å«nameC ç›¸ååˆ™åŒ…å«!


<br/>

&emsp; è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯value & nameAå°±æ˜¯nameAçš„å€¼ä¸º1, value & nameBå°±æ˜¯nameBçš„å€¼ä¸º2



<br/>

nameA = 1, nameB = 2, nameC = 4, nameD = 8,å¦‚ä¸‹:

```
 NSInteger value = nameA | nameB | nameC | nameD;
 è½¬æˆäºŒè¿›åˆ¶:
 nameA: 0 0 0 1
   |
 nameB: 0 0 1 0
   |
 nameC: 0 1 0 0
   |
 nameD: 1 0 0 0
----------------
 value: 1 1 1 1
 ä¸Šé¢æ˜¯ä½¿ç”¨ | å¾—å‡ºvalueçš„å€¼ä¸º1111(|çš„æ„æ€æ˜¯æœ‰ä¸€ä¸ªä¸º1ç»“æœå°±ä¸º1)
 
 
 ä¸‹é¢æ˜¯ä½¿ç”¨ & åˆ¤æ–­è¾“å‡ºçš„å€¼(&çš„æ„æ€å°±æ˜¯æœ‰äºŒä¸ªä¸º1ç»“æœæ‰ä¸º1)
 
  value: 1 1 1 1         value: 1 1 1 1
    &                      &
  nameA: 0 0 0 1         nameB: 0 0 1 0
 ----------------       ----------------
  ç»“æœå€¼: 0 0 0 1         ç»“æœå€¼: 0 0 1 0
 
  æˆ‘å°±å†™2ä¸ªä¾‹å­:0001å°±æ˜¯nameAçš„å€¼, 0010å°±æ˜¯nameBçš„å€¼
```




<br/>

***
<br/>
<br/>


> <h1 id='propertyå±æ€§'>propertyå±æ€§</h1>


> <h2 id='ç‚¹è¯­æ³•'>ç‚¹è¯­æ³•</h2>


&emsp; **ç‚¹è¯­æ³•:** self. è°ƒç”¨propertyè‡ªåŠ¨ç”Ÿæˆgetter å’Œ setter æ–¹æ³•ï¼Œè€Œ `_` åˆ™æ˜¯ç›´æ¥è°ƒç”¨å®ä¾‹ä¾‹å˜é‡ã€‚



<br/>
<br/>


> <h2 id='readWrite'>readWrite</h2>


&emsp; **readwrite:** å¯ä»¥ä½¿ç”¨`setValue:  forKey:`æ–¹æ³•å¯¹å…¶å€¼è¿›è¡Œä¿®æ”¹ï¼›

```
//è®¿é—®å™¨å¯»æ‰¾åç§°çš„æˆå‘˜å˜é‡
+ (Bool)  accessInstanceVariablesDierctly {
                return NO;
}

``` 



<br/>
<br/>


> <h2 id='nonatomicå’Œatomic'>nonatomicå’Œatomic</h2>


- nonatomicï¼šä¸ä½¿ç”¨åŒæ­¥é”ï¼ŒéåŸå­æ€§
- atomicï¼šä½¿ç”¨åŒæ­¥é”ï¼ŒåŸå­æ€§

>å±æ€§å£°æ˜ä¸ºatomicæ—¶ï¼Œåœ¨è¯¥å±æ€§åœ¨è°ƒç”¨getterå’Œsetteræ–¹æ³•æ—¶ï¼Œä¼šåŠ ä¸ŠåŒæ­¥é”(ä¹Ÿå«äº’æ–¥é”@synchronized)ã€‚
å³å±æ€§åœ¨è°ƒç”¨getterå’Œsetteræ–¹æ³•æ—¶ï¼Œä¿è¯åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨å±æ€§çš„è¯»/å†™æ–¹æ³•ã€‚ä¿è¯äº†è¯»å’Œå†™çš„è¿‡ç¨‹æ˜¯å¯é çš„ã€‚
ä½†å¹¶ä¸èƒ½ä¿è¯æ•°æ®ä¸€å®šæ˜¯å¯é çš„ã€‚

ç†ç”±å¦‚ä¸‹å›¾ï¼š
![æ•°æ®ä¸å¯é ](https://upload-images.jianshu.io/upload_images/2959789-1ef27095cf1e0b8c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


å…¶å®å¾ˆç®€å•çš„ä¾‹å­ï¼Œå¦‚æœå®šä¹‰å±æ€§ NSInteger i æ˜¯åŸå­çš„ï¼Œå¯¹iè¿›è¡Œ i = i + 1; æ“ä½œå°±æ˜¯ä¸å®‰å…¨çš„ã€‚å› ä¸ºåŸå­æ€§åªèƒ½ä¿è¯è¯»å†™å®‰å…¨ï¼Œè€Œè¯¥è¡¨è¾¾å¼éœ€è¦ä¸‰æ­¥æ“ä½œï¼š1.è¯»å–içš„å€¼å­˜å…¥å¯„å­˜å™¨ï¼›2.å°†iåŠ 1ï¼›3.ä¿®æ”¹içš„å€¼ï¼›å¦‚æœåœ¨ç¬¬1æ­¥å®Œæˆçš„æ—¶å€™ï¼Œiè¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆè¡¨è¾¾å¼æ‰§è¡Œçš„ç»“æœå°±ä¼šä¸é¢„æœŸçš„ä¸ä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯ä¸å®‰å…¨çš„ã€‚


<br/>
<br/>

> <h2 id='retain'>retain</h2>


&emsp;  retainåˆ°å¦å¤–ä¸€ä¸ªå¯¹è±¡ä¹‹åï¼Œåœ°å€æ˜¯ä¸ä¼šå˜åŒ–çš„ï¼Œåœ°å€ä¹Ÿä¸º0x1111ï¼Œå®è´¨ä¸Šæ˜¯å»ºç«‹ä¸€ä¸ªæŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯æŒ‡é’ˆæ‹·è´ï¼Œå†…å®¹ä¹Ÿæ˜¯ç›¸åŒçš„ï¼Œretainå€¼ä¼šåŠ 1ã€‚

```
- (void)setName:(NSString *)name{
    if (_name != name) {
        [ _name release];
        _name = [name retain];
    }
}
- (NSString *)name{
    return [[ _name retain] autorelease];
}
```




<br/>
<br/>


> <h2 id='copy'>copy</h2>



![å‡ ç§æ‹·è´åŒºåˆ«](./../../Pictures/z35.png)

&emsp;  copyå»ºç«‹ä¸€ä¸ªç›¸åŒçš„å¯¹è±¡ï¼Œå¦‚æœä¸€ä¸ªNSStringå¯¹è±¡ï¼Œå‡å¦‚åœ°å€ä¸º0x1111ï¼Œå†…å®¹ä¸º@"hello"ï¼Œé€šè¿‡Copyåˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¹‹åï¼Œåœ°å€ä¸º0x2322ï¼Œå†…å®¹ä¹Ÿç›¸åŒï¼Œè€Œæ–°çš„å¯¹è±¡retainä¸º1ï¼Œæ—§çš„å¯¹è±¡æ˜¯ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚

å†…éƒ¨å®ç°

```
- (void)setName:(NSString *)name{
    if (_name != name) {
        [ _name release];
        _name = [name copy];
    }
}
- (NSString *)name{
    return [[ _name retain] autorelease];
}
```



<br/>
<br/>


> <h2 id='assign'>assign</h2>


&emsp; **assignï¼š** ä¿®é¥°OCåŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¸ä¼šä½¿å¯¹è±¡çš„å¼•ç”¨ç±»å‹è®¡æ•° +1ã€‚


å†…éƒ¨å®ç°

```
- (void)setName:(NSString *)name{
    _name = name;
}


- (NSString *)name{
    return _name;
}
```




> <h2 id='retainå’ŒassignåŒºåˆ«'>retainå’ŒassignåŒºåˆ«</h2>


**retainåŒstrongï¼Œå°±æ˜¯æŒ‡é’ˆæŒ‡å‘å€¼åœ°å€ï¼ŒåŒæ—¶è¿›è¡Œå¼•ç”¨è®¡æ•°åŠ 1ã€‚**



```
- (void)memoryTest {
    
    NSMutableString*mstrOrigin = [[NSMutableString alloc]initWithString:@"mstrOriginValue*******"];
    
    self.assignMStr = mstrOrigin;
    self.weakMStr   = mstrOrigin;
    
    mstrOrigin = [[NSMutableString alloc]initWithString:@"mstrOriginChange3"];

    NSLog(@"mstrOriginè¾“å‡º:%p,%@\n", mstrOrigin,mstrOrigin);
    NSLog(@"assignMStrè¾“å‡º:%p,%@\n",self.assignMStr,self.assignMStr);
    NSLog(@"weakMStrè¾“å‡º:%p,%@\n",_weakMStr,_weakMStr);
    NSLog(@"1. å¼•ç”¨è®¡æ•°%@\n",[mstrOrigin valueForKey:@"retainCount"]);
```

è¿è¡ŒæŠ¥é”™:

![ios_oc1_58](./../../Pictures/ios_oc1_58.png)


<br/>


&emsp;&emsp;  å¯ä»¥å‘ç°åœ¨è¾“å‡ºassignMStræ—¶ä¼šå‡ºç°å¥”æºƒçš„æƒ…å†µã€‚åŸå› æ˜¯å‘é€äº†é‡æŒ‡é’ˆçš„æƒ…å†µã€‚assignåŒweakï¼ŒæŒ‡å‘Cå¹¶ä¸”è®¡æ•°ä¸+1ï¼Œä½†å½“Cåœ°å€å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œassignä¸ä¼šå¯¹Cåœ°å€è¿›è¡ŒBæ•°æ®çš„æŠ¹é™¤æ“ä½œï¼Œåªæ˜¯è¿›è¡Œå€¼é‡Šæ”¾ã€‚è¿™å°±å¯¼è‡´é‡æŒ‡é’ˆå­˜åœ¨ï¼Œå³å½“è¿™å—åœ°å€è¿˜æ²¡å†™ä¸Šå…¶ä»–å€¼å‰ï¼Œèƒ½è¾“å‡ºæ­£å¸¸å€¼ï¼Œä½†ä¸€æ—¦é‡æ–°å†™ä¸Šæ•°æ®ï¼Œè¯¥æŒ‡é’ˆéšæ—¶å¯èƒ½æ²¡æœ‰å€¼ï¼Œé€ æˆå´©æºƒã€‚

æ³¨é‡Šæ‰é‡æŒ‡é’ˆä»£ç æ®µ:

![ios_oc1_59](./../../Pictures/ios_oc1_59.png)


<br/>


æ‰“å°ç»“æœä¸ºï¼š

![ios_oc1_60](./../../Pictures/ios_oc1_60.png)




<br/>
<br/>


> <h2 id='weak'>weak</h2>


- **ç”¨æ³•ï¼š**

&emsp; weakæ˜¯å¼±å¼•ç”¨ï¼Œç”¨weakæ¥ä¿®é¥°ã€æè¿°æ‰€å¼•ç”¨å¯¹è±¡çš„è®¡æ•°å™¨å¹¶ä¸ä¼šåŠ 1ï¼Œè€Œä¸”weakä¼šåœ¨å¼•ç”¨å¯¹è±¡è¢«é‡Šæ”¾çš„æ—¶å€™è‡ªåŠ¨ç½®ä¸ºnilï¼Œè¿™ä¹Ÿå°±é¿å…äº†é‡æŒ‡é’ˆè®¿é—®åå†…å­˜è€Œå¼•èµ·å¥”æºƒçš„æƒ…å†µï¼Œå¦å¤–weakä¹Ÿå¯ä»¥è§£å†³å¾ªç¯å¼•ç”¨ã€‚

>é—®é¢˜ï¼š
`ä¸ºä»€ä¹ˆä¿®é¥°ä»£ç†ä½¿ç”¨weakè€Œä¸æ˜¯ç”¨assignï¼Ÿ`

>&emsp; assignå¯ç”¨æ¥ä¿®é¥°åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä¿®é¥°OCçš„å¯¹è±¡ï¼Œä½†å¦‚æœç”¨assignä¿®é¥°å¯¹è±¡ç±»å‹æŒ‡å‘çš„æ˜¯ä¸€ä¸ªå¼ºæŒ‡é’ˆï¼Œå½“æŒ‡å‘çš„è¿™ä¸ªæŒ‡é’ˆé‡Šæ”¾ä¹‹åï¼Œå®ƒä»æŒ‡å‘è¿™å—å†…å­˜ï¼Œå¿…é¡»è¦æ‰‹åŠ¨ç»™ç½®ä¸ºnilï¼Œå¦åˆ™ä¼šäº§ç”Ÿé‡æŒ‡é’ˆï¼Œå¦‚æœè¿˜é€šè¿‡æ­¤æŒ‡é’ˆæ“ä½œé‚£å—å†…å­˜ï¼Œä¼šå¯¼è‡´EXC_BAD_ACCESSé”™è¯¯ï¼Œè°ƒç”¨äº†å·²ç»è¢«é‡Šæ”¾çš„å†…å­˜ç©ºé—´ï¼›

>&emsp; è€Œweakåªèƒ½ç”¨æ¥ä¿®é¥°OCå¯¹è±¡ï¼Œè€Œä¸”ç›¸æ¯”assignæ¯”è¾ƒå®‰å…¨ï¼Œå¦‚æœæŒ‡å‘çš„å¯¹è±¡æ¶ˆå¤±äº†ï¼Œé‚£ä¹ˆå®ƒä¼šè‡ªåŠ¨ç½®ä¸ºnilï¼Œä¸ä¼šå¯¼è‡´é‡æŒ‡é’ˆã€‚

<br/>

> **åŸç†æ¦‚æ‹¬ï¼š**

> &emsp; weakè¡¨å…¶å®æ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œkeyæ˜¯æ‰€æŒ‡å¯¹è±¡çš„æŒ‡é’ˆï¼Œvalueæ˜¯**`weakæŒ‡é’ˆçš„åœ°å€æ•°ç»„`**(æ³¨æ„ï¼šè¿™ä¸ªæ•°ç»„æ˜¯weakæŒ‡é’ˆçš„åœ°å€ï¼Œä¸æ˜¯å¯¹è±¡çš„æŒ‡é’ˆåœ°å€)ã€‚ï¼ˆvalueæ˜¯æ•°ç»„çš„åŸå› æ˜¯ï¼šå› ä¸ºä¸€ä¸ªå¯¹è±¡å¯èƒ½è¢«å¤šä¸ªå¼±å¼•ç”¨æŒ‡é’ˆæŒ‡å‘ï¼‰
> 
> &emsp; Runtimeç»´æŠ¤äº†ä¸€å¼ weakè¡¨ï¼Œç”¨æ¥å­˜å‚¨æŸä¸ªå¯¹è±¡çš„æ‰€æœ‰çš„weakæŒ‡é’ˆã€‚

<br/>



![ios_oc1_90.png](./../../Pictures/ios_oc1_90.png)

&emsp;[ **çºµè§‚weakå¼•ç”¨çš„åº•å±‚å®ç°**](https://blog.csdn.net/u013378438/article/details/82767947)ï¼Œå…¶å®åŸç†å¾ˆç®€å•ã€‚å°±æ˜¯å°†æ‰€æœ‰å¼±å¼•ç”¨objçš„æŒ‡é’ˆåœ°å€éƒ½ä¿å­˜åœ¨objå¯¹åº”çš„weak_entry_tä¸­ã€‚å½“objè¦ææ„æ—¶ï¼Œä¼šéå†weak_entry_tä¸­ä¿å­˜çš„å¼±å¼•ç”¨æŒ‡é’ˆåœ°å€ï¼Œå¹¶å°†å¼±å¼•ç”¨æŒ‡é’ˆæŒ‡å‘nilï¼ŒåŒæ—¶ï¼Œå°†weak_entry_tç§»é™¤å‡ºweak_tableã€‚

&emsp;è¿™é‡Œæ¶‰åŠåˆ°runtime å››ä¸ªé‡è¦çš„æ•°æ®ç»“æ„ï¼š
[**SideTablesï¼ŒSideTableï¼Œweak_tableï¼Œweak_entry_t:**](https://blog.csdn.net/u013378438/article/details/80733391).

>- SideTablesæ˜¯ä¸€ä¸ª64ä¸ªå…ƒç´ é•¿åº¦8ä¸ªå…ƒç´ é•¿åº¦ çš„hashæ•°ç»„ï¼Œé‡Œé¢å­˜å‚¨äº†SideTable;
- SideTablesçš„hashé”®å€¼å°±æ˜¯ä¸€ä¸ªå¯¹è±¡objçš„addressã€‚
å› æ­¤å¯ä»¥è¯´ï¼Œä¸€ä¸ªobjï¼Œå¯¹åº”äº†ä¸€ä¸ªSideTableã€‚ä½†æ˜¯ä¸€ä¸ªSideTableï¼Œä¼šå¯¹åº”å¤šä¸ªobjã€‚å› ä¸ºSideTableçš„æ•°é‡åªæœ‰64ä¸ªï¼Œæ‰€ä»¥ä¼šæœ‰å¾ˆå¤šobjå…±ç”¨åŒä¸€ä¸ªSideTable
	- è€Œåœ¨ä¸€ä¸ªSideTableä¸­ï¼Œåˆæœ‰ä¸¤ä¸ªæˆå‘˜ï¼Œåˆ†åˆ«æ˜¯:
		- RefcountMap refcnts;        // å¯¹è±¡å¼•ç”¨è®¡æ•°ç›¸å…³ map
			- refcentsæ˜¯ä¸€ä¸ªhash mapï¼Œå…¶keyæ˜¯objçš„åœ°å€ï¼Œè€Œvalueï¼Œåˆ™æ˜¯objå¯¹è±¡çš„å¼•ç”¨è®¡æ•°
		- weak_table_t weak_table;    // å¯¹è±¡å¼±å¼•ç”¨ç›¸å…³ table
			- weak_tableåˆ™å­˜å‚¨äº†å¼±å¼•ç”¨objçš„æŒ‡é’ˆçš„åœ°å€ï¼Œå…¶æœ¬è´¨æ˜¯ä¸€ä¸ªä»¥objåœ°å€ä¸ºkeyï¼Œå¼±å¼•ç”¨objçš„æŒ‡é’ˆçš„åœ°å€ä½œä¸ºvalueçš„hashè¡¨ã€‚hashè¡¨çš„èŠ‚ç‚¹ç±»å‹æ˜¯weak_entry_t

<br/>

**[weak å®ç°åŸç†](https://www.cnblogs.com/guohai-stronger/p/10161870.html)**


<br/>
<br/>

<br/><br/>

> <h2 id='å¤§ç™½è¯è®²è§£weakåŸç†'>å¤§ç™½è¯è®²è§£weakåŸç†</h2>


```
//è¿™é‡Œå°±è¡¨ç¤ºobjcè¢«å¼ºå¼•ç”¨äº†
NSObject *objc = [NSObject alloc];

//åœ¨è¿™ä¸ªæ–¹æ³•é‡Œå…¶å®è°ƒç”¨äº†ä¸€ä¸ªæ–¹æ³•objc_initWeak,å¯ä»¥é€šè¿‡æ±‡ç¼–æŸ¥çœ‹åˆ°è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•
id __weak weakObj = objc; 
```


<br/>

- **å‡ ä¸ªç»“æ„ä½“æ¦‚å¿µ**
	- SideTableæ˜¯ç³»ç»Ÿç®¡ç†çš„
	
	- SideTableså…¶ä¸­ä¸€ä¸ªSideTableé‡Œå­˜æ”¾å¼±å¼•ç”¨è¡¨weak_table
	
	- weak_tableé‡Œæœ‰å®ä½“æ•°ç»„weak_entries(å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªhashè¡¨,è¯´æˆæ•°ç»„ä¾¿äºæˆ‘ä»¬ç†è§£)
	
	- weak_entriesé‡Œå­˜æ”¾å¾ˆå¤šå®ä½“weak_entry_t

 
<br/>
<br/>

**æ­¥éª¤:**

- 1.å½“æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªå…³é”®å­— _weak æ—¶å°±å¼€å§‹ç”¨åˆ°äº†å¼±å¼•ç”¨çš„ä¸€äº›åº•å±‚æ–¹é¢çš„å®ç°äº†,å…¶å®è¿™é‡Œä¹Ÿæ˜¯é€šè¿‡ objc_msgSendæ–¹æ³•è¿›è¡Œæ¶ˆæ¯çš„å‘é€çš„

- 2.è¿™é‡Œé€šè¿‡objcçš„åœ°å€å¾—åˆ°å…¶å¼•ç”¨å¯¹è±¡referent

- 3.æœ‰å¥½å¤šå¼ æ•£åˆ—è¡¨SideTables,è®°å¾—å¥½åƒæ˜¯64ä¸ª.é€šè¿‡è¿™ä¸ªå¯¹è±¡objcæ‰¾åˆ°åœ¨è¿™äº›SideTablesä¸­çš„æŸä¸€ä¸ªSideTable(è¿™ä¸ªè¡¨æœ‰æ–°è¡¨å’Œæ—§è¡¨)

- 4.ç„¶åå†é€šè¿‡SideTableçš„ä¸€ä¸ªç»“æ„ä½“æˆå‘˜weak_tableæ‰¾åˆ°å¼±å¼•ç”¨è¡¨;

```
//æ—§çš„SideTableæ‰¾åˆ°å¼±å¼•ç”¨è¡¨
//æ—§çš„SideTableä¹‹æ‰€ä»¥å­˜åœ¨æ˜¯å› ä¸ºå¼±å¼•ç”¨å·²ç»å­˜åœ¨äº†
oldTable->weak_table;

//æ–°çš„SideTableæ‰¾åˆ°å¼±å¼•ç”¨è¡¨
newTable->weak_table;
```

&emsp; è¿™ä¸ªweakTableä¸­æœ‰å¾ˆå¤šç±»,æ¯”å¦‚:Personç±»ã€Dogç±»ã€Fishç±»,æ€»ä¹‹å¾ˆå¤š.æ‰€ä»¥ç”¨weakTableä¸­çš„ä¸€ä¸ªæˆå‘˜å˜é‡weak_entries(hashè¡¨,æ–¹ä¾¿ç†è§£ç§°ä¹‹ä¸ºæ•°ç»„)æ¥è¿›è¡Œè£…è½½

- 5.å…¶ä¸­è¿™ä¸ªweak_tableä¸­æœ‰ä¸€ä¸ªweak_entriesçš„ç»“æ„ä½“æˆå‘˜,é€šè¿‡éå†è¿™ä¸ªç»“æ„ä½“æˆå‘˜weak_entriesæ•°ç»„(å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªhashè¡¨)å¾—åˆ°objcåœ¨è¿™ä¸ªæ•°ç»„ä¸‹æ ‡index(é€šè¿‡æ¯”è¾ƒweak_entriesæ•°ç»„å­˜å‚¨çš„å¼•ç”¨ä¸objcçš„å¼•ç”¨ç›¸ç­‰è·å–åˆ°çš„ä¸‹æ ‡).

- 6.é€šè¿‡æ‹¿åˆ°è¿™ä¸ªä¸‹æ ‡index,è·å–åˆ°weak_entriesé‡Œçš„ä¸€ä¸ªå®ä½“weak_entry_t.

- 7.å½“ç„¶ä¹Ÿæœ‰å¯èƒ½åœ¨weak_entriesæ²¡æœ‰æ‰¾åˆ°,æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªæ—¶å€™å°±éœ€è¦æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªweak_entry_täº†

- 8.åæ­£å°±æ˜¯è¦ä¹ˆæ‰¾åˆ°ä¸€ä¸ªå·²ç»å­˜åœ¨çš„weak_entry_t,è¦ä¹ˆå°±æ–°åˆ›å»ºä¸€ä¸ªweak_entry_t;

- 9.ç„¶åæŠŠæ–°åˆ›å»ºä¸€ä¸ªobjcå¯¹åº”çš„ä¸€ä¸ªå¼±å¼•ç”¨å¯¹è±¡**new_referrers**å­˜åˆ°è¿™ä¸ªweak_entry_tä¸­,åŒæ—¶è¿™ä¸ªweak_entry_tå†å­˜åˆ°è¿™ä¸ªå®ä½“æ•°ç»„weak_entriesä¸­.è€Œè¿™ä¸ªweak_entriesåˆéš¶å±äºæŸä¸€ä¸ªæ•£åˆ—è¡¨weak_table,è¿™é‡Œé¢æ¶‰åŠåˆ°ä¸€ä¸ªæ·»åŠ å®ä½“çš„æ–¹æ³•:**append_referrer**æ–¹æ³•,å¦‚ä¸‹å›¾:


![ios_oc1_113_27.png](./../../Pictures/ios_oc1_113_27.png)

![ios_oc1_113_28.png](./../../Pictures/ios_oc1_113_28.png)


ä¸Šè¿°å°±æ˜¯å¼±å¼•ç”¨å¯¹è±¡çš„å­˜å‚¨æ­¥éª¤!


<br/>
<br/>

é‚£ä»€ä¹ˆæ—¶å€™å¼±å¼•ç”¨å¯¹è±¡è‡ªåŠ¨ä¸ºnil?

å…¶å®è¿™æ˜¯åœ¨å¯¹è±¡é‡Šæ”¾çš„æ—¶å€™

å¯ä»¥åœ¨å¯¹è±¡çš„deallocæ–¹æ³•çš„æºä»£ç çœ‹åˆ°,æœ€ç»ˆå¯ä»¥çœ‹åˆ°è¿™ä¸ªC++æ–¹æ³•:**sidetable_clearDeallocating()**

![ios_oc1_113_29.png](./../../Pictures/ios_oc1_113_29.png)

![ios_oc1_113_30.png](./../../Pictures/ios_oc1_113_30.png)
![ios_oc1_113_31.png](./../../Pictures/ios_oc1_113_31.png)








<br/>
<br/>


> <h2 id='NSStringçš„copyä½¿ç”¨'>NSStringçš„copyä½¿ç”¨</h2>


**`æ‹“å±•ï¼šæµ…å¤åˆ¶å’Œæ·±å¤åˆ¶`**

```
NSString *string = @"huangJiaJu æ­Œ";
NSLog(@"stringå€¼ï¼š%@,     %p", string, string);
//NSLog(@"stringå€¼ï¼š%@,     %p", string, &string) //&string æ˜¯stringæŒ‡é’ˆçš„åœ°å€å€¼ï¼Œç›¸å½“äºæŒ‡é’ˆçš„æŒ‡é’ˆï¼Œä¼šä¸ç»“æœç›¸èƒŒ

NSString *stringCopy = [string copy];
NSLog(@"stringCopyå€¼ï¼š%@,     %p", stringCopy, stringCopy);

NSMutableString *stringMCopy = [string mutableCopy];
[stringMCopy appendString:@"Hero"];
NSLog(@"stringMCopyå€¼ï¼š%@,    %p", stringMCopy, stringMCopy);
    
```
è¾“å‡ºï¼š

```
2019-06-27 11:23:29.026700+0800 Genealogy[3368:109679] stringå€¼ï¼šhuangJiaJu æ­Œ,     0x10f348930
2019-06-27 11:23:30.802144+0800 Genealogy[3368:109679] stringCopyå€¼ï¼šhuangJiaJu æ­Œ,     0x10f348930
2019-06-27 11:23:33.459110+0800 Genealogy[3368:109679] stringMCopyå€¼ï¼šhuangJiaJu æ­ŒHero,    0x600003864480
```
&emsp;  æ€»ç»“ä¸€ä¸‹ï¼šstring å’Œ stringCopy æŒ‡å‘çš„æ˜¯åŒä¸€å—å†…å­˜åŒºåŸŸï¼Œè€Œç³»ç»Ÿåˆ™ä¸º stringMCopy åˆ†é…äº†ä¸€ä¸ªæ–°çš„å†…å­˜åœ°å€ã€‚ç”±æ­¤å¯è§ï¼Œcopy æ˜¯æŒ‡é’ˆå¤åˆ¶ï¼ˆæµ…æ‹·è´ï¼‰ï¼ŒmutableCopy æ˜¯å¯¹è±¡å¤åˆ¶ï¼ˆæ·±æ‹·è´ï¼‰ã€‚

&emsp;  éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ iOS ä¸­å¹¶ä¸æ˜¯æ‰€æœ‰çš„å¯¹è±¡éƒ½æ”¯æŒcopyï¼ŒmutableCopyï¼Œéµå®ˆNSCopyingåè®®çš„ç±»å¯ä»¥å‘é€copyæ¶ˆæ¯ï¼Œéµå®ˆNSMutableCopyingåè®®çš„ç±»æ‰å¯ä»¥å‘é€mutableCopyæ¶ˆæ¯ã€‚å¦åˆ™ï¼Œä¼šå‘ç”Ÿå¼‚å¸¸ã€‚




<br/>

***
<br/>
<br/>


> <h1 id='NSMutableStringçš„propertyå±æ€§'>NSMutableStringçš„propertyå±æ€§</h1>


&emsp;&emsp; ä¸Šé¢æˆ‘ä»¬è®¨è®ºäº†å…¸å‹çš„ä¾‹å­NSMutableStringï¼Œå³éå®¹å™¨å¯å˜å˜é‡ã€‚ä¹Ÿå°±æ˜¯è¯´è¿˜å­˜åœ¨å…¶ä»–ä¸‰ç§ç±»å‹éœ€è¦è®¨è®ºï¼š

- a.éå®¹å™¨ä¸å¯å˜å˜é‡NSSting
- b.å®¹å™¨å¯å˜å˜é‡NSMutableArray
- c.å®¹å™¨ä¸å¯å˜å˜é‡NSArray

```
@property(copy,nonatomic)NSMutableArray     *aCopyMArr;
@property(strong,nonatomic)NSMutableArray   *strongMArr;
@property(weak,nonatomic)NSMutableArray     *weakMArr;


- (void)memoryTest {
    NSMutableArray  *mArrOrigin = [[NSMutableArray alloc]init];
    NSMutableString *mstr1 = [[NSMutableString alloc]initWithString:@"value1"];
    NSMutableString *mstr2 = [[NSMutableString alloc]initWithString:@"value2"];
    NSMutableString *mstr3 = [[NSMutableString alloc]initWithString:@"value3"];
    
    [mArrOrigin addObject:mstr1];
    [mArrOrigin addObject:mstr2];
    
    //å°†mArrOriginæ‹·è´ç»™aCopyMArrï¼ŒstrongMArrï¼ŒweakMArr
    self.aCopyMArr= mArrOrigin;
    self.strongMArr= mArrOrigin;
    self.weakMArr= mArrOrigin;
    
    NSLog(@"mArrOriginè¾“å‡º:%p,%@\n", mArrOrigin,mArrOrigin);
    NSLog(@"aCopyMArrè¾“å‡º:%p,%@\n",_aCopyMArr,_aCopyMArr);
    NSLog(@"strongMArrè¾“å‡º:%p,%@\n",_strongMArr,_strongMArr);
    NSLog(@"weakMArrè¾“å‡º:%p,%@\n",_weakMArr,_weakMArr);
    NSLog(@"weakMArrè¾“å‡º:%p,%@\n",_weakMArr[0],_weakMArr[0]);
    NSLog(@"mArrOriginä¸­çš„æ•°æ®å¼•ç”¨è®¡æ•°%@", [mArrOrigin valueForKey:@"retainCount"]);
    NSLog(@"%p %p %p %p",&mArrOrigin,mArrOrigin,mArrOrigin[0],mArrOrigin[1]);
}
```

æ‰“å°ç»“æœï¼š

![ios_oc1_71](./../../Pictures/ios_oc1_71.png)

<br/>

<br/>
<br/>

> <h2 id='æ·»åŠ ä¸€ä¸ªå…ƒç´ '>æ·»åŠ ä¸€ä¸ªå…ƒç´ </h2>

```
NSLog(@"\n\n<-------------------ç»™åŸæ•°ç»„æ·»åŠ ä¸€ä¸ªå…ƒç´ ----------------->");
//ç»™åŸæ•°ç»„æ·»åŠ ä¸€ä¸ªå…ƒç´ 
[mArrOrigin addObject:mstr3];

NSLog(@"mArrOriginè¾“å‡º:%p,%@\n", mArrOrigin,mArrOrigin);
NSLog(@"aCopyMArrè¾“å‡º:%p,%@\n",_aCopyMArr,_aCopyMArr);
NSLog(@"strongMArrè¾“å‡º:%p,%@\n",_strongMArr,_strongMArr);
NSLog(@"weakMArrè¾“å‡º:%p,%@\n",_weakMArr,_weakMArr);
NSLog(@"mArrOriginä¸­çš„æ•°æ®å¼•ç”¨è®¡æ•°%@", [mArrOrigin valueForKey:@"retainCount"]);

```

æ‰“å°ç»“æœï¼š

![ios_oc1_61](./../../Pictures/ios_oc1_61.png)

<br/>
<br/>

> <h2 id='ä¿®æ”¹æ•°ç»„å…ƒç´ '>ä¿®æ”¹æ•°ç»„å…ƒç´ </h2>


```
    NSLog(@"\n\n<-------------------ä¿®æ”¹æ•°ç»„ä¸€ä¸ªå…ƒç´ ----------------->");
    //ä¿®æ”¹åŸæ•°ç»„ä¸­çš„å…ƒç´ ï¼Œçœ‹æ˜¯å¦æœ‰éšä¹‹å˜åŒ–
    [mstr1 appendFormat:@"aaa"];
    
    NSLog(@"mArrOriginè¾“å‡º:%p,%@\n", mArrOrigin,mArrOrigin);
    NSLog(@"aCopyMArrè¾“å‡º:%p,%@\n",_aCopyMArr,_aCopyMArr);
    NSLog(@"strongMArrè¾“å‡º:%p,%@\n",_strongMArr,_strongMArr);
    NSLog(@"weakMArrè¾“å‡º:%p,%@\n",_weakMArr,_weakMArr);
    NSLog(@"mArrOriginä¸­çš„æ•°æ®å¼•ç”¨è®¡æ•°%@", [mArrOrigin valueForKey:@"retainCount"]);
}
```

ä¿®æ”¹å copyæ•°ç»„å€¼æ”¹å˜, æ‰“å°ç»“æœï¼š

![ios_oc1_62](./../../Pictures/ios_oc1_62.png)


***`ç»¼åˆä¸Šè¿°ï¼š`***
&emsp;&emsp;  ä¸Šé¢3æ®µä»£ç æ‰€åšçš„æ“ä½œæ˜¯mArrOriginï¼ˆvalue1,value2ï¼‰èµ‹å€¼ç»™copy,strong,weakä¿®é¥°çš„aCopyMArr,strongMArr,weakMArrã€‚é€šè¿‡ç»™åŸæ•°ç»„å¢åŠ å…ƒç´ ï¼Œä¿®æ”¹åŸæ•°ç»„å…ƒç´ å€¼ï¼Œç„¶åè¾“å‡ºmArrOriginçš„å¼•ç”¨è®¡æ•°ï¼Œå’Œæ•°ç»„åœ°å€ï¼ŒæŸ¥çœ‹å˜åŒ–ã€‚

&emsp;&emsp;  å‘ç°å…¶ä¸­æ•°ç»„æœ¬èº«æŒ‡å‘çš„å†…å­˜åœ°å€é™¤äº†aCopyMArré‡æ–°å¼€è¾Ÿäº†ä¸€å—åœ°å€ï¼ŒstrongMArr,weakMArrå’ŒmArrOriginæŒ‡é’ˆæŒ‡å‘çš„åœ°å€æ˜¯ä¸€æ ·çš„ã€‚

&emsp;&emsp;  å¯ä»¥çœ‹å‡ºå®¹å™¨å¯å˜å˜é‡ä¸­å®¹å™¨æœ¬èº«å’Œéå®¹å™¨å¯å˜å˜é‡æ˜¯ä¸€æ ·çš„ï¼Œcopyæ·±æ‹·è´ï¼ŒstrongMArr,weakMArrå’Œassignéƒ½æ˜¯æµ…æ‹·è´(æ•°ç»„å˜é‡å’Œå­—ç¬¦ä¸²å˜é‡å¯¹äºcopyéƒ½æ˜¯æ·±æ‹·è´)ã€‚

&emsp;&emsp;  å¦å¤–æˆ‘ä»¬å‘ç°è¢«æ‹·è´å¯¹è±¡mArrOriginä¸­çš„æ•°æ®å¼•ç”¨è®¡æ•°å±…ç„¶ä¸æ˜¯1è€Œæ˜¯3ã€‚ä¹Ÿå°±æ˜¯è¯´å®¹å™¨å†…çš„æ•°æ®æ‹·è´éƒ½æ˜¯è¿›è¡Œäº†æµ…æ‹·è´ã€‚åŒæ—¶å½“æˆ‘ä»¬ä¿®æ”¹æ•°ç»„ä¸­çš„ä¸€ä¸ªæ•°æ®æ—¶strongMArr,weakMArrï¼ŒaCopyMArrä¸­çš„æ•°æ®éƒ½æ”¹å˜äº†ï¼Œè¯´æ˜å®¹å™¨å¯å˜å˜é‡ä¸­çš„æ•°æ®åœ¨æ‹·è´çš„æ—¶å€™éƒ½æ˜¯æµ…æ‹·è´(æ•°ç»„ä¸­çš„å…ƒç´ æ•°æ®æ˜¯æµ…æ‹·è´ï¼Œåœ¨copyï¼Œstongï¼Œweakä¸­)ã€‚

å®¹å™¨å¯å˜å˜é‡çš„æ‹·è´ç»“æ„å¦‚ä¸‹å›¾, copyï¼Œstrongï¼Œ weak åœ¨å®¹å™¨å¯å˜å˜é‡ä¸­çš„å†…å­˜æƒ…å†µ,å¦‚ä¸‹å›¾:

![ios_oc1_63](./../../Pictures/ios_oc1_63.png)



<br/>
<br/>

> <h2 id='éå®¹å™¨ä¸å˜å˜é‡'>éå®¹å™¨ä¸å˜å˜é‡</h2>

```
@property(copy,nonatomic)NSString   *aCopyStr;
@property(strong,nonatomic)NSString *strongStr;
@property(weak,nonatomic)NSString   *weakStr;
@property(assign,nonatomic)NSString *assignStr;

- (void)memoryTest {
    NSString*strOrigin = [[NSString alloc]initWithUTF8String:"strOrigin0123456"];
    
    self.aCopyStr  = strOrigin;
    self.strongStr = strOrigin;
    self.weakStr= strOrigin;
    
    NSLog(@"strOriginè¾“å‡º:%p,%@\n", strOrigin,strOrigin);
    NSLog(@"aCopyStrè¾“å‡º:%p,%@\n",_aCopyStr,_aCopyStr);
    NSLog(@"strongStrè¾“å‡º:%p,%@\n",_strongStr,_strongStr);
    NSLog(@"weakStrè¾“å‡º:%p,%@\n",_weakStr,_weakStr);
}

```

æ‰“å°ç»“æœï¼š

![ios_oc1_64](./../../Pictures/ios_oc1_64.png)

<br/>

**`ä¿®æ”¹å€¼`**

```
NSLog(@"------------------ä¿®æ”¹åŸå€¼å\n------------------------");

strOrigin =@"aaa";

NSLog(@"strOriginè¾“å‡º:%p,%@ \n", strOrigin,strOrigin);
NSLog(@"aCopyStrè¾“å‡º:%p,%@ \n",_aCopyStr,_aCopyStr);
NSLog(@"strongStrè¾“å‡º:%p,%@ \n",_strongStr,_strongStr);
NSLog(@"weakStrè¾“å‡º:%p,%@ \n",_weakStr,_weakStr);
}
```

ä¿®æ”¹åçš„å±æ€§å˜é‡å€¼, æ‰“å°ç»“æœï¼š


![ios_oc1_65](./../../Pictures/ios_oc1_65.png)





<br/>
<br/>

> <h2 id='copyå’Œstrongç½®ä¸ºç©º'>copyå’Œstrongç½®ä¸ºç©º</h2>


```
self.aCopyStr=nil;
self.strongStr=nil;

NSLog(@"strOriginè¾“å‡º:%p,%@ \n", strOrigin,strOrigin);
NSLog(@"aCopyStrè¾“å‡º:%p,%@ \n",_aCopyStr,_aCopyStr);
NSLog(@"strongStrè¾“å‡º:%p,%@ \n",_strongStr,_strongStr);
NSLog(@"weakStrè¾“å‡º:%p,%@ \n",_weakStr,_weakStr);
}
```

copy å’Œ strong ç½®ä¸º nil, æ‰“å°ç»“æœä¸ºï¼š

![ios_oc1_66](./../../Pictures/ios_oc1_66.png)


<br/>

ç»¼ä¸Šå¯å¾—ï¼š

&emsp;&emsp;  NSStringå’ŒNSMutableStringï¼ˆéå®¹å™¨å¯å˜å˜é‡ï¼‰åŸºæœ¬ç›¸åŒï¼Œé™¤äº†copyã€‚NSStringä¸ºæµ…æ‹·è´ï¼ŒNSMutableStringæ˜¯æ·±æ‹·è´ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆNSStringçš„copyæ˜¯æµ…æ‹·è´å‘¢ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ºä»€ä¹ˆaCopySträ¸è‡ªå·±å¼€è¾Ÿä¸€ä¸ªç‹¬ç«‹çš„å†…å­˜å‡ºæ¥å‘¢ã€‚ç­”æ¡ˆå¾ˆç®€å•ï¼Œå› ä¸ºä¸å¯å˜é‡çš„å€¼ä¸ä¼šæ”¹å˜ï¼Œæ—¢ç„¶éƒ½ä¸ä¼šæ”¹å˜ï¼Œæ‰€ä»¥æ²¡å¿…è¦é‡æ–°å¼€è¾Ÿä¸€ä¸ªå†…å­˜å‡ºæ¥è®©aCopyStræŒ‡å‘ä»–ï¼Œç›´æ¥æŒ‡å‘åŸæ¥å€¼ä½ç½®å°±å¯ä»¥äº†ã€‚ç¤ºæ„å›¾å¦‚ä¸‹:

![ios_oc1_67](./../../Pictures/ios_oc1_67.png)




ç”±æ­¤å¯å¾—ï¼š**`éå®¹å™¨ä¸å¯å˜é‡é™¤äº†copyä»¥å¤–ï¼Œå…¶ä»–ç‰¹æ€§åŒéå®¹å™¨å¯å˜å˜é‡ç›¸åŒï¼Œéå®¹å™¨ä¸å¯å˜é‡copyæ˜¯æµ…æ‹·è´ã€‚`**

ç”±ä¸Šå®éªŒå¯å¾—ï¼šåœ¨ä¸å¯å˜å®¹å™¨å˜é‡(NSArray)ä¸­ï¼Œå®¹å™¨æœ¬èº«éƒ½æ˜¯æµ…æ‹·è´åŒ…æ‹¬copyï¼Œé‡Œé¢(åŒ…æ‹¬NSMutableArray)çš„æ•°æ®ä¹Ÿæ˜¯æµ…æ‹·è´ï¼ŒåŒNSStringä¸€æ ·ã€‚





<br/>
<br/>

> <h2 id='copyï¼Œstrongï¼Œweakï¼Œassignçš„åŒºåˆ«'>copyï¼Œstrongï¼Œweakï¼Œassignçš„åŒºåˆ«</h2>


strongçš„åº•å±‚ä½¿ç”¨çš„æºç :

![ios_oc1_113_23.JPG](./../../Pictures/ios_oc1_113_23.JPG)

<br/>

copyçš„åº•å±‚æºç æ–¹æ³•å¦‚:

```
static inline void reallySetProperty(id self, SEL _cmd, id newValue, ptrdiff_t offset, bool atomic, bool copy, bool mutableCopy)
```
æ–¹æ³•,å¦‚ä¸‹

![ios_oc1_113_22.JPG](./../../Pictures/ios_oc1_113_22.JPG)


<br/>
<br/>

**æ€»ç»“:**

&emsp;&emsp;  `å¯å˜å˜é‡ä¸­`ï¼Œcopyæ˜¯é‡æ–°å¼€è¾Ÿä¸€ä¸ªå†…å­˜ï¼Œstrongï¼Œweakï¼Œassginåä¸‰è€…ä¸å¼€è¾Ÿå†…å­˜ï¼Œåªæ˜¯æŒ‡é’ˆæŒ‡å‘åŸæ¥ä¿å­˜å€¼çš„å†…å­˜çš„ä½ç½®ï¼ŒstorngæŒ‡å‘åä¼šå¯¹è¯¥å†…å­˜å¼•ç”¨è®¡æ•°+1ï¼Œè€Œweakï¼Œassginä¸ä¼šã€‚weakï¼Œassginä¼šåœ¨å¼•ç”¨ä¿å­˜å€¼çš„å†…å­˜å¼•ç”¨è®¡æ•°ä¸º0çš„æ—¶å€™å€¼ä¸ºç©ºï¼Œå¹¶ä¸”weakä¼šå°†å†…å­˜å€¼è®¾ä¸ºnilï¼Œassignä¸ä¼šï¼Œassignåœ¨å†…å­˜æ²¡æœ‰è¢«é‡å†™å‰ä¾æ—§å¯ä»¥è¾“å‡ºï¼Œä½†ä¸€æ—¦è¢«é‡å†™å°†å‡ºç°å¥”æºƒ

&emsp;&emsp;  `ä¸å¯å˜å˜é‡ä¸­`ï¼Œå› ä¸ºå€¼æœ¬èº«ä¸å¯è¢«æ”¹å˜ï¼Œcopyæ²¡å¿…è¦å¼€è¾Ÿå‡ºä¸€å—å†…å­˜å­˜æ”¾å’ŒåŸæ¥å†…å­˜ä¸€æ¨¡ä¸€æ ·çš„å€¼ï¼Œæ‰€ä»¥å†…å­˜ç®¡ç†ç³»ç»Ÿé»˜è®¤éƒ½æ˜¯æµ…æ‹·è´ã€‚å…¶ä»–å’Œå¯å˜å˜é‡ä¸€æ ·ï¼Œå¦‚weakä¿®é¥°çš„å˜é‡åŒæ ·ä¼šåœ¨å†…å­˜å¼•ç”¨è®¡æ•°ä¸º0æ—¶å˜ä¸ºnilã€‚

**`å®¹å™¨æœ¬èº«éµå®ˆä¸Šé¢å‡†åˆ™ï¼Œä½†å®¹å™¨å†…éƒ¨çš„æ¯ä¸ªå€¼éƒ½æ˜¯æµ…æ‹·è´ã€‚`**å†…å­˜å­˜å‚¨å›¾:


![ios_oc1_68](./../../Pictures/ios_oc1_68.png)


<br/>

&emsp;&emsp;  ç»¼ä¸Šæ‰€è¿°ï¼Œå½“åˆ›å»ºpropertyæ„é€ å™¨åˆ›å»ºå˜é‡value1çš„æ—¶å€™ï¼Œä½¿ç”¨copyï¼Œstrongï¼Œweakï¼Œassignæ ¹æ®å…·ä½“ä½¿ç”¨æƒ…å†µæ¥å†³å®šã€‚value1 = value2ï¼Œå¦‚æœä½ å¸Œæœ›value1å’Œvalue2çš„ä¿®æ”¹ä¸ä¼šäº’ç›¸å½±å“çš„å°±ç”¨ç”¨copyï¼Œåä¹‹ç”¨strong,weak,assignã€‚å¦‚æœä½ è¿˜å¸Œæœ›åŸæ¥å€¼C(Cæ˜¯ä»€ä¹ˆè§ã€å†…å­˜å­˜å‚¨å›¾ã€‘)ä¸ºnilçš„æ—¶å€™ï¼Œä½ çš„å˜é‡ä¸ä¸ºnilå°±ç”¨strong,åä¹‹ç”¨weakå’Œassignã€‚weakå’Œassignä¿è¯äº†ä¸å¼ºå¼•ç”¨æŸä¸€å—å†…å­˜ï¼Œå¦‚delegateæˆ‘ä»¬å°±ç”¨weakè¡¨ç¤ºï¼Œå°±æ˜¯ä¸ºäº†é˜²æ­¢å¾ªç¯å¼•ç”¨çš„äº§ç”Ÿã€‚
&emsp;&emsp;  å¦å¤–ï¼Œæˆ‘ä»¬ä¸Šé¢è®¨è®ºçš„æ˜¯ç±»å˜é‡ï¼Œç›´æ¥åˆ›å»ºå±€éƒ¨å˜é‡é»˜è®¤æ˜¯Strongä¿®é¥°ã€‚



<br/>
<br/>

> <h2 id='delegateä¸ºä»€ä¹ˆè¦ç”¨weakæˆ–è€…assignè€Œä¸ç”¨strong'>delegateä¸ºä»€ä¹ˆè¦ç”¨weakæˆ–è€…assignè€Œä¸ç”¨strong</h2>


&emsp;&emsp;   aåˆ›å»ºå¯¹è±¡b,bä¸­æœ‰Cç±»å¯¹è±¡cï¼Œæ‰€ä»¥aå¯¹bæœ‰ä¸€ä¸ªå¼•ç”¨,bå¯¹cæœ‰ä¸€ä¸ªå¼•ç”¨ï¼Œa.bå¼•ç”¨è®¡æ•°åˆ†åˆ«ä¸º1ã€‚å½“c.delegate = bçš„æ—¶å€™ï¼Œå®åˆ™æ˜¯å¯¹bæœ‰äº†ä¸€ä¸ªå¼•ç”¨ï¼Œå¦‚æœæ­¤æ—¶cçš„delegateç”¨strongä¿®é¥°åˆ™ä¼šå¯¹bçš„å€¼å†…å­˜å¼•ç”¨è®¡æ•°+1ï¼Œbå¼•ç”¨è®¡æ•°ä¸º2ã€‚å½“açš„ç”Ÿå‘½å‘¨æœŸç»“æŸï¼Œéšä¹‹é‡Šæ”¾å¯¹bçš„å¼•ç”¨ï¼Œbçš„å¼•ç”¨è®¡æ•°å˜ä¸º1ï¼Œå¯¼è‡´bä¸èƒ½é‡Šæ”¾ï¼Œbä¸èƒ½é‡Šæ”¾åˆå¯¼è‡´bå¯¹cçš„å¼•ç”¨ä¸èƒ½é‡Šæ”¾ï¼Œcå¼•ç”¨è®¡æ•°è¿˜æ˜¯ä¸º1ï¼Œè¿™æ ·å°±é€ æˆäº†bå’Œcä¸€ç›´ç•™åœ¨äº†å†…å­˜ä¸­ã€‚

&emsp;&emsp;   è€Œè¦è§£å†³è¿™ä¸ªé—®é¢˜å°±æ˜¯ä½¿ç”¨weakæˆ–è€…assignä¿®é¥°delegateï¼Œè¿™æ ·è™½ç„¶ä¼šæœ‰cä»ç„¶ä¼šå¯¹bæœ‰ä¸€ä¸ªå¼•ç”¨ï¼Œä½†æ˜¯å¼•ç”¨æ˜¯å¼±å¼•ç”¨ï¼Œå½“aç”Ÿå‘½å‘¨æœŸç»“æŸçš„æ—¶å€™ï¼Œbçš„å¼•ç”¨è®¡æ•°å˜ä¸º0ï¼Œbé‡Šæ”¾åéšä¹‹cçš„å¼•ç”¨æ¶ˆå¤±ï¼Œcå¼•ç”¨è®¡æ•°å˜ä¸º0ï¼Œé‡Šæ”¾ã€‚


<br/>
<br/>

>## <h2 id='protocolä¸­æ·»åŠ å±æ€§'>[protocolä¸­æ·»åŠ å±æ€§](https://blog.csdn.net/u010347934/article/details/108286849)</h2>

![åè®®ä¸­å®šä¹‰å±æ€§](https://youyou0909.github.io/2019/01/23/7iOS%20åè®®ä¸­å®šä¹‰å±æ€§/)




<br/>
<br/>

> <h2 id='@synthesize'>@synthesize</h2>

&emsp; @propertyæœ‰ä¸¤ä¸ªå¯¹åº”çš„è¯ï¼Œä¸€ä¸ªæ˜¯@synthesizeï¼Œä¸€ä¸ªæ˜¯@dynamicã€‚å¦‚æœ@synthesizeå’Œ@dynamicéƒ½æ²¡å†™ï¼Œé‚£ä¹ˆé»˜è®¤çš„å°±æ˜¯@syntheszie var = _var;

<br/>


**ä½¿ç”¨synthesizeçš„2ä¸ªæ­¥éª¤ï¼š**
- é¦–å…ˆä½ è¦æœ‰åœ¨ç±»å£°æ˜ä¸­ä½¿ç”¨propertyå£°æ˜çš„å±æ€§ã€‚
- ç¬¬äºŒåœ¨ç±»å®ç°ä¸­ï¼Œå†™å‡º @synthesize + å˜é‡å

<br/>


```
@interface Test: NSObject
@property (nonatomic, unsafe_unretained) int i;
@end

@implementation Test
@synthesize i = _i;
@end
```


&emsp; å¹³æ—¶åœ¨ä½¿ç”¨ä¸­ï¼Œåœ¨ç±»å£°æ˜ä¸­æ·»åŠ äº†propertyåï¼Œæ ¹æœ¬ä¸éœ€è¦åœ¨å®ç°ä¸­æ·»åŠ @synthesizeã€‚

&emsp; å› ä¸ºOCä¸ºpropertyå±æ€§å£°æ˜æ·»åŠ äº†è‡ªåŠ¨åˆæˆï¼Œä¹Ÿå°±æ˜¯è¯´ç³»ç»Ÿè‡ªåŠ¨å¸®ä½ æ·»åŠ äº†@synthesizeã€‚

&emsp; æ‰€ä»¥ï¼Œsynthesizeæ˜¯propertyå±æ€§çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯ç³»ç»Ÿä¸ºpropertyç”Ÿæˆå˜é‡çš„é‡è¦æ­¥éª¤ã€‚

**synthesizeå…·ä½“åšäº†äº›ä»€ä¹ˆå‘¢ï¼Ÿå®ƒåªåš2ä»¶äº‹ï¼š**
- ç”Ÿæˆæˆå‘˜å˜é‡ï¼Œå¦‚ä¸Šé¢çš„Testç±»å°±ä¼šç”Ÿæˆä¸€ä¸ªåå­—ä¸º _i çš„ intå‹å˜é‡;
- ä¸ºå±æ€§ç”Ÿæˆsetter/getteræ–¹æ³•ï¼Œå¦‚ä¸Šé¢çš„Testç±»ä¼šç”ŸæˆsetI:å’Œiä¸¤ä¸ªæ–¹æ³•ã€‚

<br/>

- **1.Xcode4.4ä¹‹å‰çš„property**

@propertyå…³é”®å­—å¯ä»¥ä½¿ç¼–è¯‘å™¨è‡ªåŠ¨ç”ŸæˆæŸä¸ªæˆå‘˜å˜é‡çš„set/getæ–¹æ³•;

```
@interface HGTestOne : NSObject{
    //***å£°æ˜æˆå‘˜å˜é‡***
    int age;
}

@property int age

@end
```

&emsp; å½“ç¼–è¯‘å™¨æ‰§è¡Œåˆ°`@property int age`è¿™ä¸€å¥æ—¶ï¼Œä¼šè‡ªåŠ¨è§£ææˆï¼š

```
- (void)setAge:(int)age;
- (int)age;
```


<br/>
<br/>

**â€Œ2.Xcode4.4ä¹‹å‰çš„synthesize**

- @synthesize å…³é”®å­—å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ**æŸä¸ªæˆå‘˜å˜é‡**çš„setæ–¹æ³•å’Œgetæ–¹æ³•çš„å®ç°;

```
@interface HGTestOne : NSObject{
    //***å£°æ˜æˆå‘˜å˜é‡***
    int age;
}
@end


@implementation HGTestOne

@synthesize @synthesize age=_age;

@end 
```


&emsp; å½“ä»£ç æ‰§è¡Œåˆ°**@synthesize age=_age**;
å½“ç¼–è¯‘å™¨æ‰§è¡Œåˆ°è¿™ä¸€å¥æ—¶ï¼Œä¼šè‡ªåŠ¨è§£ææˆï¼š

```
- (void)setAge:(int)age
{
  _age=age;
}
- (int)age
{
   return _age;
}
```

@synthesizeè¿˜ä¼šè‡ªåŠ¨ç”Ÿæˆç§æœ‰æˆå‘˜å˜é‡

è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯:
- @synthesize age=_age; ç­‰å·åé¢çš„_ageè¡¨ç¤ºè®¿é—®çš„æ˜¯_ageæˆå‘˜å˜é‡ã€‚å¦‚æœåªæ˜¯å•çº¯çš„å£°æ˜ä¸º@synthesize age;åˆ™é»˜è®¤ä¼šè®¿é—®åŒåçš„ageæˆå‘˜å˜é‡ã€‚å¦‚æœæˆå‘˜å˜é‡ä¸å­˜åœ¨ï¼Œå°±ä¼š**è‡ªåŠ¨ç”Ÿæˆ@privateç±»å‹çš„ageå˜é‡**;
- ç”±äº@synthesizeè‡ªåŠ¨ç”Ÿæˆçš„æˆå‘˜å˜é‡æ˜¯@privateçš„ï¼Œå¦‚æœå­ç±»éœ€è¦è®¿é—®è¯¥æˆå‘˜å˜é‡çš„è¯ï¼Œéœ€æ‰‹åŠ¨å£°æ˜@protectçš„æˆå‘˜å˜é‡;


<br/>
<br/>


ä½†æ˜¯ç°åœ¨æˆ‘ä»¬æ˜¯è¿™ä¹ˆåšçš„,ä¹Ÿå°±æ˜¯åœ¨ Xcode4.4ä»¥å
ä¸ç”¨å†å†™@synthesizeï¼Œç¼–è¯‘å™¨é€šè¿‡@propertyå°±èƒ½ç»™æˆ‘ä»¬ç”Ÿæˆset/getæ–¹æ³•çš„å£°æ˜å’Œå®ç°ï¼Œé»˜è®¤ç”Ÿæˆæˆå‘˜å˜é‡:_propertyName;

&emsp; æ¯”å¦‚ä½¿ç”¨@property int ageå³å¯å®Œæˆä»¥ä¸‹åŠŸèƒ½ï¼š

>1>å¦‚æœæˆå‘˜å˜é‡ä¸å­˜åœ¨ï¼Œé»˜è®¤ç”Ÿæˆç§æœ‰å˜é‡_ageã€‚å¦‚æœè¦ç”Ÿæˆå­ç±»å¯ä»¥è®¿é—®çš„æˆå‘˜å˜é‡ï¼Œéœ€è¦åœ¨ç±»çš„å£°æ˜ä¸­æ‰‹åŠ¨å£°æ˜@protect int _age;

>2>å¯ä»¥è‡ªåŠ¨å®ç°ageå±æ€§çš„getå’Œsetterçš„å£°æ˜ã€‚

>3>å¯ä»¥è‡ªåŠ¨å®ç°ageå±æ€§çš„getå’Œsetterçš„å®ç°ã€‚

<br/>

**æ³¨æ„äº‹é¡¹:**
>1>ä½¿ç”¨@propertyæ—¶ï¼Œå˜é‡åå°½é‡ä¸è¦ä½¿ç”¨ä¸‹åˆ’çº¿å¼€å¤´ã€‚å¦‚@property int age; ä¸è¦å£°æ˜æˆ@property int _age;

>2>å¦‚æœæˆå‘˜å˜é‡ä¸å­˜åœ¨ï¼Œ@propertyé»˜è®¤ä¼šè‡ªåŠ¨ç”Ÿæˆ@privateå¹¶ä»¥ä¸‹åˆ’çº¿å¼€å¤´çš„æˆå‘˜å˜é‡ã€‚

>3>å¦‚æœgetæ–¹æ³•å­˜åœ¨ï¼Œåˆ™@propertyåªä¼šè‡ªåŠ¨ç”Ÿæˆsetæ–¹æ³•ã€‚
    å¦‚æœsetæ–¹æ³•å­˜åœ¨ï¼Œåˆ™@propertyåªä¼šè‡ªåŠ¨ç”Ÿæˆgetæ–¹æ³•ã€‚
    å¹¶ä¸”å¦‚æœæˆå‘˜å˜é‡ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆ@privateçš„æˆå‘˜å˜é‡ã€‚
    å¦‚æœsetæ–¹æ³•å’Œgetæ–¹æ³•éƒ½å­˜åœ¨ï¼Œåˆ™@propertyä¸ä¼šè‡ªåŠ¨ç”Ÿæˆgetæ–¹æ³•å’Œsetæ–¹æ³•ï¼Œå¹¶ä¸”ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆæˆå‘˜å˜é‡
    



<br/>
<br/>


> <h3 id='synthesizeä½¿ç”¨æƒ…å†µ'>synthesizeä½¿ç”¨æƒ…å†µ</h3>

<br/>
<br/>

> <h4 id='åŒæ—¶é‡å†™setterå’Œgetter'>åŒæ—¶é‡å†™setterå’Œgetter</h4>



&emsp; å¦‚æœä½ çš„å±æ€§å¯è¯»å¯å†™ï¼Œä½†æ˜¯ä½ åŒæ—¶é‡å†™äº†setter/getteræ–¹æ³•ï¼Œ**ç³»ç»Ÿä¸ä¼šä¸ºä½ è‡ªåŠ¨ç”Ÿæˆæˆå‘˜å˜é‡**ã€‚ä½ éœ€è¦æ·»åŠ @synthesizeã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¦‚æœåªé‡å†™äº†setter/getterå…¶ä¸­ä¸€ä¸ªï¼Œç³»ç»Ÿä»ç„¶ä¼šæ‰§è¡Œè‡ªåŠ¨åˆæˆã€‚

```
@interface Test: NSObject
@property (nonatomic, unsafe_unretained) int i;
@end

@implementation Test

-(int)i{
    return _i;
}

-(void) setI:(int)i{
    _i = i;
}

@synthesize i = _i;//ä¸åŠ è¿™ä¸ªä¼šæŠ¥é”™

-(void) print{
    NSLog(@" print test i = %d", _i);
}

@end
```


<br/>
<br/>

> <h4 id='é‡å†™åªè¯»å±æ€§çš„getteræ—¶'>é‡å†™åªè¯»å±æ€§çš„getteræ—¶</h4>

å¦‚æœä½ çš„å±æ€§æ˜¯åªè¯»å±æ€§ï¼Œä½†æ˜¯ä½ é‡å†™äº†getteræ–¹æ³•ï¼Œ**ç³»ç»Ÿä¸ä¼šä¸ºä½ è‡ªåŠ¨ç”Ÿæˆæˆå‘˜å˜é‡**ã€‚ä½ éœ€è¦æ·»åŠ @synthesizeã€‚


```
@interface Test: NSObject
@property (nonatomic, readonly, unsafe_unretained) int i;
@end

@implementation Test
-(int)i{
    return _i;
}

@synthesize i = _i;//ä¸åŠ è¿™ä¸ªä¼šæŠ¥é”™

-(void) print{
    NSLog(@" print test i = %d", _i);
}

@end
```




<br/>
<br/>

> <h4 id='ä½¿ç”¨äº†@dynamicæ—¶'>ä½¿ç”¨äº†@dynamicæ—¶</h4>


&emsp; â€Œä½¿ç”¨@dynamic,**ç³»ç»Ÿä¸ä¼šä¸ºå±æ€§è‡ªåŠ¨åˆæˆå˜é‡å’Œsetter/getteræ–¹æ³•**ï¼Œä½†æ˜¯ä½ ä¹Ÿä¸éœ€è¦æ‰‹åŠ¨æ·»åŠ @synthesize.

è¿™ä¸ªæ—¶å€™ä½ å¯ä»¥æ‰‹åŠ¨å®ç°set/getæ–¹æ³•,å’Œ`@synthesize ivar = _ivar`,å°±å¯ä»¥äº†.


<br/>
<br/>

> <h4 id='åœ¨@protocolä¸­å®šä¹‰çš„æ‰€æœ‰å±æ€§'>åœ¨@protocolä¸­å®šä¹‰çš„æ‰€æœ‰å±æ€§</h4>

```
@interface Test: NSObject
@property (nonatomic, unsafe_unretained) int i;
@end

@implementation Test

-(int)i{
    return _i;
}

-(void) setI:(int)i{
    _i = i;
}

@synthesize i = _i;//ä¸åŠ è¿™ä¸ªä¼šæŠ¥é”™

-(void) print{
    NSLog(@" print test i = %d", _i);
}

@end
```

<br/>
<br/>

> <h4 id='åœ¨categoryä¸­å®šä¹‰çš„æ‰€æœ‰å±æ€§'>åœ¨categoryä¸­å®šä¹‰çš„æ‰€æœ‰å±æ€§</h4>

<br/>
<br/>

> <h4 id='é‡å†™(overridden)çš„å±æ€§'>é‡å†™(overridden)çš„å±æ€§</h4>

&emsp; å½“ä½ åœ¨å­ç±»ä¸­é‡å†™ï¼ˆoverriddenï¼‰äº†çˆ¶ç±»ä¸­çš„å±æ€§ï¼Œå­ç±»ä¸ä¼šç”Ÿæˆå±æ€§çš„set/getæ–¹æ³•,ä½ éœ€è¦æ‰‹åŠ¨.ä½†è¿™ä¸ªæ—¶å€™ä½ æƒ³è¦ä½¿ç”¨_ivar, ä½ å¿…é¡»ä½¿ç”¨ @synthesize æ¥æ‰‹åŠ¨åˆæˆivar(æˆå‘˜å˜é‡),å³:

```
@synthesize ivar = _ivar;
```

è¿™ä¸ªæ—¶å€™ä½ å°±å¯ä»¥ä½¿ç”¨ _ivarè¿™ä¸ªæˆå‘˜å˜é‡äº†.








<br/>
<br/>

> <h2 id='@dynamic'>@dynamic</h2>

&emsp; @propertyæœ‰ä¸¤ä¸ªå¯¹åº”çš„è¯ï¼Œä¸€ä¸ªæ˜¯@synthesizeï¼Œä¸€ä¸ªæ˜¯@dynamicã€‚å¦‚æœ@synthesizeå’Œ@dynamicéƒ½æ²¡å†™ï¼Œé‚£ä¹ˆé»˜è®¤çš„å°±æ˜¯@syntheszie var = _var;


&emsp; @dynamicå‘Šè¯‰ç¼–è¯‘å™¨,å±æ€§çš„setterä¸getteræ–¹æ³•ç”±ç”¨æˆ·è‡ªå·±å®ç°ï¼Œä¸è‡ªåŠ¨ç”Ÿæˆã€‚ï¼ˆå½“ç„¶å¯¹äºreadonlyçš„å±æ€§åªéœ€æä¾›getterå³å¯ï¼‰ã€‚å‡å¦‚ä¸€ä¸ªå±æ€§è¢«å£°æ˜ä¸º@dynamic varï¼Œç„¶åä½ æ²¡æœ‰æä¾›@setteræ–¹æ³•å’Œ@getteræ–¹æ³•ï¼Œç¼–è¯‘çš„æ—¶å€™æ²¡é—®é¢˜ï¼Œä½†æ˜¯å½“ç¨‹åºè¿è¡Œåˆ°instance.var =someVarï¼Œç”±äºç¼ºsetteræ–¹æ³•ä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼›æˆ–è€…å½“è¿è¡Œåˆ° someVar = varæ—¶ï¼Œç”±äºç¼ºgetteræ–¹æ³•åŒæ ·ä¼šå¯¼è‡´å´©æºƒã€‚ç¼–è¯‘æ—¶æ²¡é—®é¢˜ï¼Œè¿è¡Œæ—¶æ‰æ‰§è¡Œç›¸åº”çš„æ–¹æ³•ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„åŠ¨æ€ç»‘å®šã€‚





<br/>

***
<br/>


> <h1 id='å®å®šä¹‰'>å®å®šä¹‰</h1>

<br/>


> <h2 id='__bridge'>__bridge</h2>


`(__bridge id) æ˜¯æ¡¥æ¥ï¼ŒæŠŠéOCè½¬åŒ–ä¸ºOCä½¿ç”¨çš„ã€‚`


<br/>
<br/>

> <h2 id='Const'>Const</h2>


const å‰ç¼€å£°æ˜æŒ‡å®šç±»å‹çš„å¸¸é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š  

`const type variable = value;`


**const ä¿®é¥°ä½ç½®çš„å˜åŒ–**

 ``` //å˜é‡aè¢«constä¿®é¥°ï¼Œå°±æˆä¸ºäº†åªè¯»ï¼Œä¸èƒ½è¢«ä¿®æ”¹èµ‹å€¼äº† int const a = 10; //ç­‰ä»·äº const int a = 10; // Wrong a = 20;//é”™è¯¯ä»£ç 

int const *p // *påªè¯» ;på˜é‡

int * const p // *på˜é‡ ; påªè¯»

const int * const p //på’Œ*péƒ½åªè¯»

int const * const p //på’Œ*péƒ½åªè¯»
 ```


**const** å¸¸ç”¨ç”¨æ³• 

``` 
//å®šä¹‰ä¸€ä¸ªå…¨å±€åªè¯»å˜é‡ NSString * const Kname = @"appkey";

//staticä¿®é¥°åæ­¤å…¨å±€å˜é‡åªèƒ½æœ¬æ–‡ä»¶è®¿é—® static NSString *const Key = @"hddjjâ€; 
```

å‚è€ƒèµ„æ–™ï¼š
[^å…³é”®å­—]:[å…³é”®å­—](http://www.cocoachina.com/ios/20171226/21653.html)




<br/>
<br/>


>## <h2 id='SD_UIKIT'>[SD_UIKIT](https://www.jianshu.com/p/1d2e4d822732)</h2>


```
SD_UIKIT
// iOS and tvOS are very similar, UIKit exists on both platforms
// Note: watchOS also has UIKit, but it's very limited
#if TARGET_OS_IOS || TARGET_OS_TV
    #define SD_UIKIT 1
#else
    #define SD_UIKIT 0
#endif

```


&emsp; iOS å’Œ tvOS æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼ŒUIKitåœ¨è¿™ä¸¤ä¸ªå¹³å°ä¸­éƒ½å­˜åœ¨ï¼Œä½†æ˜¯watchOSåœ¨ä½¿ç”¨UIKitæ—¶ï¼Œæ˜¯å—é™çš„ã€‚å› æ­¤æˆ‘ä»¬å®šä¹‰SD_UIKITä¸ºçœŸçš„æ¡ä»¶æ˜¯iOS å’Œ tvOSè¿™ä¸¤ä¸ªå¹³å°ã€‚è‡³äºä¸ºä»€ä¹ˆè¦å®šä¹‰SD_UIKITåè¾¹ä¼šè§£é‡Šçš„ã€‚



<br/>
<br/>

> <h2 id='DEPRECATED_MSG_ATTRIBUTE'>DEPRECATED_MSG_ATTRIBUTE</h2>


æ–¹æ³•ç‰ˆæœ¬è¿­ä»£çš„æ—¶å€™ä½¿ç”¨ï¼ŒæŠ›å¼ƒæ—§çš„æ–¹æ³•ï¼Œæç¤ºä½¿ç”¨æ–°çš„æ–¹æ³•

ä½¿ç”¨ï¼š

```

- (void)storeImage2:(UIImage *_Nullable)image forKey:(NSString *)key DEPRECATED_MSG_ATTRIBUTE("please use storeImage: imageData: forKey: completion:");
```

![z22](./../../Pictures/z22.png)




<br/>
<br/>

> <h2 id='FOUNDATION_EXTERN'>FOUNDATION_EXTERN</h2>




```
#if defined(__cplusplus)
#define FOUNDATION_EXTERN extern "C"
#else
#define FOUNDATION_EXTERN extern
#endif
```

è¡¨ç¤º extern å…¨å±€å˜é‡ï¼Œæ­¤æ—¶å¹¶æ²¡æœ‰åˆ†é…å†…å­˜ï¼Œéœ€è¦åœ¨.mæ–‡ä»¶ä¸­å®ç°ï¼Œæ­¤æ—¶ä¸ºäº†æ”¯æŒCå’ŒC++æ··ç¼–ï¼ˆ__cplusplus æ˜¯C++ç¼–è¯‘å™¨å†…éƒ¨å®šä¹‰çš„å®ï¼Œåœ¨C++ä¸­ï¼Œéœ€è¦åŠ 
extern"C" æˆ–åŒ…å«åœ¨ extern "C" å—ä¸­ï¼‰ï¼Œæ³¨æ„ï¼Œæ­¤æ—¶å¤–ç•Œæ˜¯å¯ä»¥ä¿®æ”¹è¿™ä¸ªå€¼ï¼Œè¯¦ç»† extern ç”¨æ³•å¯è‡ªè¡ŒæŸ¥è¯¢ç›¸å…³èµ„æ–™ï¼Œæœ¬æ–‡ä¸è¯¦è°ˆã€‚
ç”¨æ³•å¦‚ä¸‹ï¼š

```
FOUNDATION_EXTERN NSString *name;// hæ–‡ä»¶
const NSString *name = @"gitKong";// mæ–‡ä»¶
```





<br/>
<br/>

> <h2 id='FOUNDATION_EXTERN_INLINE'>FOUNDATION_EXTERN_INLINE</h2>

è¡¨ç¤ºå…¨å±€çš„å†…è”å‡½æ•°



<br/>
<br/>

> <h2 id='__VA_ARGS__'>__VA_ARGS__</h2>


- **æè¿°**

C99 ç¼–è¯‘å™¨æ ‡å‡†å…è®¸å®šä¹‰å¯å˜å‚æ•°å®(variadic macros)ï¼Œè¿™æ ·å°±ä½¿ç”¨æ‹¥æœ‰å¯ä»¥å˜åŒ–çš„å‚æ•°è¡¨çš„å®ã€‚

```
#define FYFLog(format, ...) NSLog(format, __VA_ARGS__)
```

ç¼ºçœå·ä»£è¡¨ä¸€ä¸ªå¯ä»¥å˜åŒ–çš„å‚æ•°è¡¨ã€‚ä½¿ç”¨ä¿ç•™å '__VA_ARGS__' æŠŠå‚æ•°ä¼ é€’ç»™å®ã€‚å½“å®çš„è°ƒç”¨å±•å¼€æ—¶ï¼Œå®é™…çš„å‚æ•°å°±ä¼ é€’ç»™ NSLog() äº†ã€‚






<br/>
<br/>

> <h2 id=''></h2>



<br/>
<br/>

> <h2 id=''></h2>



<br/>
<br/>

> <h2 id=''></h2>



<br/>
<br/>

> <h2 id=''></h2>



<br/>
<br/>

> <h2 id=''></h2>



<br/>
<br/>

> <h2 id=''></h2>



<br/>
<br/>

> <h2 id=''></h2>



<br/>
<br/>

> <h2 id=''></h2>



<br/>
<br/>

> <h2 id=''></h2>



<br/>
<br/>

> <h2 id=''></h2>




<br/>
<br/>

> <h2 id=''></h2>



<br/>
<br/>

> <h2 id=''></h2>



<br/>

***
<br/>
<br/>

> <h1 id='ARCçš„å…³é—­'>ARCçš„å…³é—­</h1>



å…³é—­æ•´ä¸ªå·¥ç¨‹çš„ARC

>objective-C Automatic Reference Counting è®¾ç½®ä¸ºNO,å…³é—­ARC,YESä¸ºå¼€å¯ARCæ¨¡å¼

![å…³é—­æ•´ä¸ªå·¥ç¨‹çš„ ARC æ¨¡å¼](./../../Pictures/ios_oc1_53.png)



<br/>

**å…³é—­æˆ–å¼€å¯éƒ¨åˆ†æ–‡ä»¶çš„ARC**

>å…³é—­ARCï¼š-fno-objc-arc<br/>
å¼€å¯ARCï¼š-fobjc-arc

![å…³é—­ViewControlleræ–‡ä»¶çš„ARCæ¨¡å¼](./../../Pictures/ios_oc1_54.png)




<br/>

***
<br/>
<br/>

> <h1 id='å¼•ç”¨è®¡æ•°'>å¼•ç”¨è®¡æ•°</h1>


```
NSMutableString *tempMStr = [[NSMutableString alloc]initWithString:@"strValue"];
NSLog(@"tempMStrå€¼åœ°å€:%p,\ntempMStrå€¼%@,\n tempMStrå€¼å¼•ç”¨è®¡æ•°%@\n", tempMStr,tempMStr,[tempMStr valueForKey:@"retainCount"]);
```

æ‰“å°ç»“æœï¼š

```
2018-09-12 07:58:44.033175+0800 Test[935:102832] tempMStrå€¼åœ°å€:0x60400005ba80,
tempMStrå€¼strValue,
tempMStrå€¼å¼•ç”¨è®¡æ•°1
```

<br/>
**`åŸç†ç¤ºæ„å›¾`**

![ios_oc1_55](./../../Pictures/ios_oc1_55.png)


A=Cå…¶å®æ˜¯åœ¨å†…å­˜ä¸­åˆ›å»ºäº†ä¸€ä¸ªAï¼Œç„¶ååˆå¼€è¾Ÿäº†ä¸€ä¸ªå†…å­˜Cï¼ŒCé‡Œé¢å­˜æ”¾çš„ç€å€¼Bã€‚ä¸æ‡‚è¿™å¥è¯ï¼Œå¯ä»¥çœ‹çœ‹Cè¯­è¨€çš„æŒ‡é’ˆè¿™ä¸€ç« ã€‚

**`åŸç†ï¼š`**

æ­¤å¤„tempMStrå°±æ˜¯Aï¼Œå€¼åœ°å€å°±æ˜¯Cï¼Œâ€œstrValueâ€å°±æ˜¯Bï¼Œè€Œå¼•ç”¨è®¡æ•°è¿™ä¸ªæ¦‚å¿µæ˜¯é’ˆå¯¹Cçš„ï¼Œèµ‹å€¼ç»™å…¶ä»–å˜é‡æˆ–è€…æŒ‡é’ˆè®¾ç½®ä¸ºnilï¼Œå¦‚tempStr = nilï¼Œéƒ½ä¼šä½¿å¾—å¼•ç”¨è®¡æ•°æœ‰æ‰€å¢å‡ã€‚å½“å†…å­˜åŒºåŸŸå¼•ç”¨è®¡æ•°ä¸º0æ—¶å°±ä¼šå°†æ•°æ®æŠ¹é™¤ã€‚è€Œæˆ‘ä»¬ä½¿ç”¨copy,strong,retain,weak,assignåŒºåˆ«å°±åœ¨ï¼š


>1.æ˜¯å¦å¼€è¾Ÿæ–°çš„å†…å­˜
<br/>
2.æ˜¯å¦å¯¹åœ°å€Cæœ‰å¼•ç”¨è®¡æ•°å¢åŠ 

**`éœ€è¦æ³¨æ„çš„æ˜¯propertyä¿®é¥°ç¬¦æ˜¯åœ¨è¢«èµ‹å€¼æ—¶èµ·ä½œç”¨`**

<br/>

```

@property(copy,nonatomic)NSMutableString    *aCopyMStr;
@property(strong,nonatomic)NSMutableString  *strongMStr;
@property(weak,nonatomic)NSMutableString    *weakMStr;
@property(assign,nonatomic)NSMutableString  *assignMStr;

- (void)memoryTest {
    
    NSMutableString *mstrOrigin = [[NSMutableString alloc]initWithString:@"mstrOriginValue"];
    NSLog(@"mstrOriginè¾“å‡º:%p,%@\n", mstrOrigin,mstrOrigin);
    NSLog(@"1. å¼•ç”¨è®¡æ•°%@\n",[mstrOrigin valueForKey:@"retainCount"]);
    
    self.aCopyMStr = mstrOrigin;
    NSLog(@"aCopyMStrè¾“å‡º:%p,%@\n",_aCopyMStr,_aCopyMStr);
    NSLog(@"2. å¼•ç”¨è®¡æ•°%@\n",[mstrOrigin valueForKey:@"retainCount"]);
    
    self.strongMStr= mstrOrigin;
    NSLog(@"strongMStrè¾“å‡º:%p,%@\n",_strongMStr,_strongMStr);
    NSLog(@"3. å¼•ç”¨è®¡æ•°%@\n",[mstrOrigin valueForKey:@"retainCount"]);
    
    self.weakMStr  = mstrOrigin;
    NSLog(@"weakMStrè¾“å‡º:%p,%@\n",_weakMStr,_weakMStr);
    NSLog(@"4. å¼•ç”¨è®¡æ•°%@",[mstrOrigin valueForKey:@"retainCount"]);
}
```

æ‰“å°ç»“æœï¼š

```
2018-09-12 08:28:45.733698+0800 Test[1242:386455] mstrOriginè¾“å‡º:0x600000250b00,mstrOriginValue

2018-09-12 08:28:45.734030+0800 Test[1242:386455] 1. å¼•ç”¨è®¡æ•°1

2018-09-12 08:28:45.734529+0800 Test[1242:386455] aCopyMStrè¾“å‡º:0x600000250a40,mstrOriginValue

2018-09-12 08:28:45.734720+0800 Test[1242:386455] 2. å¼•ç”¨è®¡æ•°1

2018-09-12 08:28:45.734877+0800 Test[1242:386455] strongMStrè¾“å‡º:0x600000250b00,mstrOriginValue

2018-09-12 08:28:45.735038+0800 Test[1242:386455] 3. å¼•ç”¨è®¡æ•°2

2018-09-12 08:28:45.735205+0800 Test[1242:386455] weakMStrè¾“å‡º:0x600000250b00,mstrOriginValue

2018-09-12 08:28:45.735486+0800 Test[1242:386455] 4. å¼•ç”¨è®¡æ•°2
```

`åŸç†ï¼š`

&emsp;&emsp;  strongMStrå’ŒweakMStræŒ‡é’ˆæŒ‡å‘çš„å†…å­˜åœ°å€éƒ½å’ŒmstrOriginç›¸åŒ,ä½†mstrOriginå†…å­˜å¼•ç”¨è®¡æ•°ä¸º2ï¼Œä¸ä¸º3ï¼Œå› ä¸ºweakMStrè™½ç„¶æŒ‡å‘äº†æ•°æ®å†…å­˜åœ°å€ï¼ˆä¹‹åç”¨Cç®€ç§°ï¼Œè§ã€åŸç†ã€‘å›¾ï¼‰ï¼Œä½†ä¸ä¼šå¢åŠ Cè®¡æ•°ã€‚copyä¿®é¥°çš„çš„aCopyMStrï¼Œèµ‹å€¼ååˆ™æ˜¯è‡ªå·±å•ç‹¬å¼€è¾Ÿäº†ä¸€å—å†…å­˜ï¼Œå†…å­˜ä¸Šä¿å­˜â€œmstrOriginâ€å­—ç¬¦ä¸²ï¼Œå¹¶æŒ‡å‘ã€‚

æ‹·è´ç¤ºæ„å›¾å¦‚ä¸‹:

![ios_oc1_56](./../../Pictures/ios_oc1_56.png)


&emsp;&emsp;  å¯è§å½“æˆ‘ä¿®æ”¹mstrOriginçš„å€¼çš„æ—¶å€™ï¼Œå¿…ç„¶ä¸ä¼šå½±å“aCopyMStr,åªä¼šå½±å“strongMStrå’ŒweakMStrï¼Œæ˜¯å› ä¸ºæŒ‡å‘çš„å†…å­˜åœ°å€ä¸åŒã€‚

```
NSLog(@"------------------ä¿®æ”¹åŸå€¼å------------------------\n");
 
[mstrOrigin appendString:@"*******"];
NSLog(@"mstrOriginè¾“å‡º:%p,%@\n", mstrOrigin,mstrOrigin);
NSLog(@"aCopyMStrè¾“å‡º:%p,%@\n",_aCopyMStr,_aCopyMStr);
NSLog(@"strongMStrè¾“å‡º:%p,%@\n",_strongMStr,_strongMStr);
NSLog(@"weakMStrè¾“å‡º:%p,%@\n",_weakMStr,_weakMStr);
```

æ‰“å°ç»“æœï¼š

```
2018-09-12 08:58:58.924352+0800 Test[1510:668804] ------------------ä¿®æ”¹åŸå€¼å------------------------

2018-09-12 08:58:58.924492+0800 Test[1510:668804] mstrOriginè¾“å‡º:0x60000005a340,mstrOriginValue*******

2018-09-12 08:58:58.924752+0800 Test[1510:668804] aCopyMStrè¾“å‡º:0x604000255300,mstrOriginValue

2018-09-12 08:58:58.924925+0800 Test[1510:668804] strongMStrè¾“å‡º:0x60000005a340,mstrOriginValue*******

2018-09-12 08:58:58.925122+0800 Test[1510:668804] weakMStrè¾“å‡º:0x60000005a340,mstrOriginValue*******
```

&emsp;emsp;  copyä¼šé‡æ–°å¼€è¾Ÿæ–°çš„å†…å­˜æ¥ä¿å­˜ä¸€ä»½ç›¸åŒçš„æ•°æ®ã€‚è¢«èµ‹å€¼å¯¹è±¡å’ŒåŸå€¼ä¿®æ”¹äº’ä¸å½±å“ã€‚strongå’Œweakèµ‹å€¼éƒ½æŒ‡å‘åŸæ¥æ•°æ®åœ°å€ï¼ŒåŒºåˆ«æ˜¯å‰è€…ä¼šå¯¹æ•°æ®åœ°å€è¿›è¡Œå¼•ç”¨è®¡æ•°+1ï¼Œåè€…ä¸ä¼šã€‚


&emsp;&emsp;  å¼•ç”¨è®¡æ•°æ˜¯å¦+1æœ‰ä»€ä¹ˆå®è´¨åŒºåˆ«å‘¢ï¼Ÿ

![ios_oc1_57](./../../Pictures/ios_oc1_57.png)

&emsp;&emsp;  å¦‚æœçŸ¥é“â€œå€¼åœ°å€çš„å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œåœ°å€ä¸Šä¿å­˜çš„å€¼å°±ä¼šè¢«é‡Šæ”¾â€ã€‚é‚£ä¹ˆåŒºåˆ«å°±ä¸éš¾ç†è§£ï¼Œweakä¿®é¥°çš„æŒ‡é’ˆAæŒ‡å‘çš„å€¼åœ°å€Cï¼Œé‚£ä¹ˆåœ°å€ä¸Šå½“å…¶ä»–æŒ‡å‘ä»–çš„æŒ‡é’ˆè¢«é‡Šæ”¾çš„æ—¶å€™ï¼Œè¿™ä¸ªå€¼åœ°å€å¼•ç”¨è®¡æ•°ä¹Ÿå°±å˜ä¸º0äº†ï¼Œè¿™ä¸ªAçš„å€¼ä¹Ÿå°±ä¸ºniläº†ã€‚æ¢å¥è¯è¯´å½“å€¼åœ°å€Cä¸Šæ²¡æœ‰å…¶ä»–å¼ºå¼•ç”¨æŒ‡é’ˆä¿®é¥°çš„æ—¶å€™Cå°±ä¼šè¢«ç«‹å³é‡Šæ”¾ï¼ŒAçš„å€¼å°±å˜ä¸ºniläº†ã€‚
&emsp;&emsp;  `æ¢å¥è¯è¯´ï¼Œå½“ä¸€ä¸ªå¼ºå¼•ç”¨å’Œä¸€ä¸ªå¼±å¼•ç”¨æŒ‡å‘å€¼åœ°å€Cæ—¶ï¼Œå¼ºå¼•ç”¨é‡Šæ”¾äº†ï¼Œé‚£ä¹ˆå¼±å¼•ç”¨æŒ‡å‘çš„å€¼ä¸ºnil`

&emsp;&emsp;  è¿™é‡Œæˆ‘ä»¬æ¥åˆå§‹åŒ–mstrOriginå’Œå¹¶å°†strongMStrè®¾ç½®ä¸ºnilè®©Cçš„å¼•ç”¨è®¡æ•°ä¸º0ï¼Œç„¶åè¾“å‡ºweakMStrï¼Œçœ‹æ˜¯å¦ä¸ºnil.
æ³¨ï¼šåˆå§‹åŒ–å’Œè®¾ä¸ºniléƒ½å¯ä»¥å°†æŒ‡é’ˆæ‰€æŒ‡å‘çš„æ•°æ®åœ°å€å¼•ç”¨è®¡æ•°å‡å°‘1ã€‚




```
- (void)memoryTest {
    
    NSMutableString*mstrOrigin = [[NSMutableString alloc]initWithString:@"mstrOriginValue*******"];
    
    self.strongMStr = mstrOrigin;
    self.weakMStr   = mstrOrigin;
    
    mstrOrigin = [[NSMutableString alloc]initWithString:@"mstrOriginChange3"];

    NSLog(@"mstrOriginè¾“å‡º:%p,%@\n", mstrOrigin,mstrOrigin);
    NSLog(@"strongMStrè¾“å‡º:%p,%@\n",_strongMStr,_strongMStr);
    NSLog(@"weakMStrè¾“å‡º:%p,%@\n",_weakMStr,_weakMStr);
    NSLog(@"1. å¼•ç”¨è®¡æ•°%@\n",[mstrOrigin valueForKey:@"retainCount"]);
    
    NSLog(@"------------------------ç½®ä¸ºnil-------------------------");
    self.strongMStr = nil;
    NSLog(@"mstrOriginè¾“å‡º:%p,%@\n", mstrOrigin,mstrOrigin);
    NSLog(@"strongMStrè¾“å‡º:%p,%@\n",_strongMStr,_strongMStr);
    NSLog(@"weakMStrè¾“å‡º:%p,%@\n",_weakMStr,_weakMStr);
    NSLog(@"2. å¼•ç”¨è®¡æ•°%@\n",[mstrOrigin valueForKey:@"retainCount"]);
}
```

æ‰“å°ç»“æœï¼š

```
2018-09-12 11:15:48.712824+0800 Test[2971:1923860] mstrOriginè¾“å‡º:0x600000247fb0,mstrOriginChange2

2018-09-12 11:15:48.713060+0800 Test[2971:1923860] strongMStrè¾“å‡º:0x600000247ad0,mstrOriginValue*******

2018-09-12 11:15:48.713288+0800 Test[2971:1923860] weakMStrè¾“å‡º:0x600000247ad0,mstrOriginValue*******

2018-09-12 11:15:48.713790+0800 Test[2971:1923860] 1. å¼•ç”¨è®¡æ•°1

2018-09-12 11:15:48.714106+0800 Test[2971:1923860] ------------------------ç½®ä¸ºnil-------------------------
2018-09-12 11:15:48.714564+0800 Test[2971:1923860] mstrOriginè¾“å‡º:0x600000247fb0,mstrOriginChange2

2018-09-12 11:15:48.715070+0800 Test[2971:1923860] strongMStrè¾“å‡º:0x0,(null)

2018-09-12 11:15:48.715226+0800 Test[2971:1923860] weakMStrè¾“å‡º:0x0,(null)

2018-09-12 11:15:48.715373+0800 Test[2971:1923860] 2. å¼•ç”¨è®¡æ•°1
```

**`å¯è§ä¹‹å‰å¼•ç”¨è®¡æ•°2æ˜¯mstrOriginå’ŒstrongMStræ·»åŠ çš„ã€‚`**

`ç»“è®ºï¼š`

&emsp;&emsp;  copyä¼šé‡æ–°å¼€è¾Ÿæ–°çš„å†…å­˜æ¥ä¿å­˜ä¸€ä»½ç›¸åŒçš„æ•°æ®ã€‚è¢«èµ‹å€¼å¯¹è±¡å’ŒåŸå€¼ä¿®æ”¹äº’ä¸å½±å“ã€‚strongå’Œweakè™½ç„¶éƒ½æŒ‡å‘åŸæ¥æ•°æ®åœ°å€ï¼ŒåŸå€¼ä¿®æ”¹çš„æ—¶å€™storngå’Œweakä¼šéšä¹‹å˜åŒ–ã€‚åŒºåˆ«æ˜¯å‰è€…ä¼šå¯¹æ•°æ®åœ°å€è¿›è¡Œå¼•ç”¨è®¡æ•°+1é˜²æ­¢åŸåœ°å€å€¼è¢«é‡Šæ”¾ï¼Œä½†åè€…ä¸ä¼šï¼Œå½“å…¶ä»–å€¼éƒ½ä¸åœ¨æŒ‡å‘å€¼åœ°å€æ—¶ï¼Œå€¼åœ°å€è¢«é‡Šæ”¾ï¼Œweakçš„å€¼ä¹Ÿå°±æ˜¯ä¸ºniläº†ã€‚æˆ‘ä»¬ç§°ä¼šå¯¹æ•°æ®åœ°å€å¢åŠ å¼•ç”¨è®¡æ•°çš„ä¸ºå¼ºå¼•ç”¨ï¼Œä¸æ”¹å˜å¼•ç”¨è®¡æ•°çš„ä¸ºå¼±å¼•ç”¨ã€‚






![](./../../Pictures/ios_oc1_58.png)
![](./../../Pictures/ios_oc1_59.png)
![](./../../Pictures/ios_oc1_60.png)



