> <h2 id=''></h2>
![](./../../Pictures/)
- [**异常类型**](#异常类型)
	- [内存爆增解决](#内存爆增解决)
	- [库版本兼容](#库版本兼容)
	- [没有导入文件或者类库](#没有导入文件或者类库)
	- [添加新账户或者验证账户是否具有有效凭证](#添加新账户或者验证账户是否具有有效凭证)
	- [模拟器可运行,真机无法运心](#模拟器可运行真机无法运心)
	- [再次添加内购不被审核](#再次添加内购不被审核)
	- [地理位置导致构建失败](#地理位置导致构建失败)


<br/>
<br/>
<br/>

***
<br/>

> <h1 id=''></h1>






<br/>
<br/>
<br/>

***
<br/>

> <h1 id=''></h1>







<br/>
<br/>
<br/>

***
<br/>

> <h1 id='异常类型'>异常类型</h1>

- **EXC_BAD_ACCESS/KERN_INVALID_ADDRESS** 访问未分配的内存地址造成，多是由数据访问或提取指令触发 
- **EXC_BAD_ACCESS/KERN_PROTECTION_FAILURE** 向只读区域写数据造成 
- **EXC_BAD_INSTRUCTION** 线程执行了非法指令 
- **EXC_ARITHMETIC/EXC_I386_DIV** 在基于 intel 计算机上执行了除零操作



<br/>
<br/>


> <h2 id='内存爆增解决'>内存爆增解决</h2>

<br/>

- **1.图片内存过大,导致App崩溃**

**Message from debugger: Terminated due to memory issue**

&emsp; 内存一直增长，导致无法释放，程序闪退。   使用Instrument的Allocations检查内存增长，对于一些临时产生的对象使用@autorelease进行释放。

**选择Allocations**

![选择 Allocations](https://upload-images.jianshu.io/upload_images/2959789-df5e0c87415c739d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


<br/>

**Allocations 配置**

![配置](https://upload-images.jianshu.io/upload_images/2959789-c8dbe5c9370a597c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


<br/>

**选择真机，运行查找内存Boss**

![检测内存增长的 boss](https://upload-images.jianshu.io/upload_images/2959789-77c4ad5c57091780.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


**`解决方法：清理内存`**

```
- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    
    //bug: 加载太多图片crash
    [SDImageCache sharedImageCache].config.shouldCacheImagesInMemory = NO;
    [[SDImageCache sharedImageCache] clearDiskOnCompletion:nil];
    [[SDImageCache sharedImageCache] clearMemory];
}

```








<br/>
<br/>


> <h2 id='库版本兼容'>库版本兼容</h2>

**The iOS Simulator deployment target is set to x.x, but the range of supported deployment target versions for this platform is 8.0 to 12.0. (in target 'xxx')**

```
post_install do |installer|
  installer.pods_project.targets.each do |target|
 target.build_configurations.each do |config|
  if config.build_settings['IPHONEOS_DEPLOYMENT_TARGET'].to_f < 8.0
    config.build_settings['IPHONEOS_DEPLOYMENT_TARGET'] = '8.0'
     end
   end
  end
end
```

&emsp; 将这个判断添加到Podfile文件的最后，然后执行pod install，再次运行项目，你会发现整个世界都清净了。   

&emsp; 上面对第三方库进行了判断若DEPLOYMENT_TARGET<8.0就会切换成8.0，可以说是一劳永逸，下次苹果再去提高最低版本只需要修改版本号就可以了。




<br/>
<br/>


> <h2 id='没有导入文件或者类库'>没有导入文件或者类库</h2>

![缺失文件或没有配置好][image-1]


<br/>
<br/>

> <h2 id='添加新账户或者验证账户是否具有有效凭证'>添加新账户或者验证账户是否具有有效凭证</h2>

![账户不正确存在问题][image-2]

`解决方案，请看下图：`
![融云demo下载，账户不正确问题的修改][image-3]


<br/>
<br/>


> <h2 id='模拟器可运行真机无法运心'>模拟器可运行,真机无法运心</h2>


&emsp; **模拟器可以运行真机不可以运行(反之模拟器不能运行，真机可以)报错：Undefined symbols for architecture i386:**

![报错截图][image-4]

解决方案：
![Build Active Architecture Only 的 Release 模式修改为 Yes][image-5]

`原因：`这是我当初在勾选了自动签名

![选择自动签名][image-6]

修改了自动签名时的代码签名导致的。

![修改代码签名导致][image-7]



<br/>
<br/>

> <h2 id='再次添加内购不被审核'>再次添加内购不被审核</h2>


&emsp;项目初建时添加的苹果内购项目，通过提交二进制代码通过审核批准后的内购项目。

![第一次内购审核通过后][image-8]

&emsp;  上图可以看到已通过的内购项目如绿色圆圈显示的。

&emsp;  当第二次更新APP版本并且又增加了内购项目时，我们需要`提前`在Appstore Connect -\> 我的App -\>App Store的
![版本或平台][image-9]上新建一个版本，然后在
![App 内购买项目][image-10]上添加新的内购项目。`若是没有建立新的版本`，苹果会把审核视为上一版本的内购，当他审核时会找不到，就会报错让你再次提交二进制代码。
 
&emsp;  结果就是你傻傻的提交，但是它还是报错，让你抓狂不已，叫天天不应，叫地地不灵！


正确的方法是：
- ①.建立新的版本，先放在那；
- ②.在![App 内购买项目][image-11]上添加你的内购信息，然后存储(千万不要点击`提交已审核`，若点了他会把这个内购视为你的上一个版本，你又做了无用功);
- ③.当你的这个版本开发完成后，提交二进制到App Store了，构建版本成功了，如下图：![2.3.5的版本][image-12]
你往下拉网页，你会看到![添加购买项目][image-13]
就像新添加的一样，你点击那个蓝色加号就会看见你这个版本要添加的IAP了，选择你要这次审核的IAP就好了。成功后的图为：![2.3.3版本的内购项目部分][image-14]


&emsp;  就为了这东西，上下了折腾了3次，烦死了！！！！




<br/>
<br/>


> <h2 id='地理位置导致构建失败'> 地理位置导致构建失败</h2>

&emsp; 地理位置隐私数据要求访问，但是没有提示，导致构建失败

`错误提示：`Your delivery was successful, but you may wish to correct the following issues in your next delivery:
Missing Purpose String in Info.plist File - Your app's code references one or more APIs that access sensitive user data. `The app's Info.plist file should contain a NSLocationAlwaysUsageDescription key with a user-facing purpose string explaining clearly and completely why your app needs the data.`Starting Spring 2019, all apps submitted to the App Store that access user data will be required to include a purpose string.

&emsp;  当时我看到了`NSLocationAlwaysUsageDescription`这个，就在APP内的 `Info.plist`文件中添加这个字段，然后打包，结果还是提示上述问题，而且
`NSLocationAlwaysUsageDescription`也没变。后来查了别人的博客才知道，原来使用一些第三方API(如：高德地图SDK)会要求定位，所以按照下图所示：

这几个访问地理字段的都有才可以：
	
	    <key>NSLocationAlwaysAndWhenInUseUsageDescription</key>
		<string>太极.道需要您的同意，才能使用GPS</string>
	
		<key>NSLocationAlwaysUsageDescription </key>
		<string>太极.道需要您的同意，才能始终访问位置</string>
	
		<key>NSLocationUsageDescription</key>
		<string>太极.道需要您的同意，才能访问位置</string>
	
		<key>NSLocationWhenInUseUsageDescription</key>
		<string>太极.道需要您的同意，才能在使用期间访问位置</string>

&emsp;  添加完以后，再次打包，上传到Appstore，在提交审核的地方等个15分钟，发现了要构建的新版本了。

[image-1]:	https://upload-images.jianshu.io/upload_images/2959789-c5a5b4882b2146f5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240
[image-2]:	https://upload-images.jianshu.io/upload_images/2959789-5882fd3cd40e8055.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240
[image-3]:	https://upload-images.jianshu.io/upload_images/2959789-15feec72a369a7df.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240
[image-4]:	https://upload-images.jianshu.io/upload_images/2959789-f56b99b7923d0dd8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240
[image-5]:	https://upload-images.jianshu.io/upload_images/2959789-4dcf8c80c66273a4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240
[image-6]:	https://upload-images.jianshu.io/upload_images/2959789-59f4ee92a049c28b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240
[image-7]:	https://upload-images.jianshu.io/upload_images/2959789-c1ba393f4cda301d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240
[image-8]:	https://upload-images.jianshu.io/upload_images/2959789-06a341638688b839.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240
[image-9]:	https://upload-images.jianshu.io/upload_images/2959789-4b7b26e583c561ad.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240
[image-10]:	https://upload-images.jianshu.io/upload_images/2959789-7aa044908bc9a770.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240
[image-11]:	https://upload-images.jianshu.io/upload_images/2959789-7aa044908bc9a770.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240
[image-12]:	https://upload-images.jianshu.io/upload_images/2959789-e901c1bcfc084515.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240
[image-13]:	https://upload-images.jianshu.io/upload_images/2959789-f6e935e654844802.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240
[image-14]:	https://upload-images.jianshu.io/upload_images/2959789-22f47a262f781570.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240



<br/>
<br/>


> <h2 id=''></h2>




<br/>
<br/>


> <h2 id=''></h2>








<br/>
<br/>
<br/>

***
<br/>

> <h1 id=''></h1>






<br/>
<br/>
<br/>

***
<br/>

> <h1 id=''></h1>


