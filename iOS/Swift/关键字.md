
> <h4 id=""><h4/>
- [**Unmanaged**](#Unmanaged)
- [**where**](#where)
	- [æ¡ä»¶æ‰©å±•](#æ¡ä»¶æ‰©å±•)
- [**intout**](#intout)
- [**mutating**](#mutating)
- [extension](#extension)
- [**guard**](#guard)
- [**Lazy**](#Lazyçš„ä½¿ç”¨)
- [è®¿é—®æƒé™å…³é”®å­—ä½¿ç”¨](#è®¿é—®æƒé™å…³é”®å­—ä½¿ç”¨) 
	- [è®¿é—®æƒé™private](#è®¿é—®æƒé™private)
	- [è¯†åˆ«åŸåˆ™](#è¯†åˆ«åŸåˆ™)
	- [é»˜è®¤è®¿é—®çº§åˆ«](#é»˜è®¤è®¿é—®çº§åˆ«)
	- [è‡ªå®šä¹‰ç±»å‹è®¿é—®æƒé™](#è‡ªå®šä¹‰ç±»å‹è®¿é—®æƒé™)
- [**internal(set) çš„ä½¿ç”¨**](#internal(set)çš„ä½¿ç”¨)
- [typealias](#typealias)
	- [èŒƒå‹ä¸­ä½¿ç”¨](#èŒƒå‹ä¸­ä½¿ç”¨)
	- [é—­åŒ…åˆ«åç®€åŒ–](#é—­åŒ…åˆ«åç®€åŒ–)
	- [ä¸å…ƒç¥–ç»“åˆ](#v)
	- [ç»„åˆåè®®](#ç»„åˆåè®®)
	- [å…³è”å±æ€§](#å…³è”å±æ€§)
- [**associatedTypeåè®®å…³è”ç±»å‹**](#associatedTypeåè®®å…³è”ç±»å‹) 
- [whereä¸èŒƒå‹çº¦æŸ](#whereä¸èŒƒå‹çº¦æŸ)
- [**Anyå’ŒAnyObject**](#Anyå’ŒAnyObject)
- [**AnyClass**](#AnyClass)
- [**Selfå’ŒdiscardableResult**](#Selfå’ŒdiscardableResult)
- [**derf**](#derf)
- [**@inline(never)å’Œ@inline(__always)**](#@inline(never)å’Œ@inline(__always))
- [**@_exported**](#@_exported)
- [**__strongä¿®é¥°ç¬¦**](#__strongä¿®é¥°ç¬¦)
- [**__weakä¿®é¥°ç¬¦**](#__weakä¿®é¥°ç¬¦)
- [**__unsafe_unretainedä¿®é¥°ç¬¦**](#__unsafe_unretainedä¿®é¥°ç¬¦)
- [æš´éœ²ç»™OCä½¿ç”¨@objcMembers](#æš´éœ²ç»™OCä½¿ç”¨@objcMembers)
- [**ç¼–è¯‘å±æ€§**](#ç¼–è¯‘å±æ€§)
	- [NS_SWIFT_NAMEåœ¨Objective-CæŒ‡å®šSwiftçš„åç§°](#NS_SWIFT_NAMEåœ¨Objective-CæŒ‡å®šSwiftçš„åç§°)
- **èµ„æ–™ï¼š**
	- 	[Swift å…³é”®å­—é›†é”¦](https://www.cnblogs.com/liYongJun0526/p/7522130.html)
	
	
	
<br/><br/><br/>

***
<br/>

> <h2 id='Unmanaged'>Unmanaged</h3>
**`ä¸å®‰å…¨çš„ä»£ç `**

&emsp;  Swift è¯­è¨€çš„ç±»éƒ½æ˜¯é‡‡ç”¨å¼•ç”¨è®¡æ•°è¿›è¡Œå†…å­˜ç®¡ç†çš„ã€‚Swift ç¼–è¯‘å™¨ä¼šåœ¨æ¯æ¬¡å¯¹è±¡è¢«è®¿é—®çš„æ—¶å€™æ’å…¥å¢åŠ å¼•ç”¨è®¡æ•°çš„ä»£ç ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä¸€ä¸ªéå†ä½¿ç”¨ç±»å®ç°çš„ä¸€ä¸ªé“¾è¡¨çš„ä¾‹å­ã€‚éå†é“¾è¡¨æ˜¯é€šè¿‡ç§»åŠ¨å¼•ç”¨åˆ°é“¾è¡¨çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ¥å®Œæˆçš„ï¼šelem = elem.nextï¼Œæ¯æ¬¡ç§»åŠ¨è¿™ä¸ªå¼•ç”¨ï¼ŒSwift éƒ½è¦å¢åŠ  next å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å¹¶å‡å°‘å‰ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œè¿™ç§å¼•ç”¨è®¡æ•°ä»£ä»·æ˜‚è´µä½†æ˜¯åªè¦ä½¿ç”¨ swift ç±»å°±æ— æ³•é¿å…ã€‚

```swift
final class Node {
 var next: Node?
 var data: Int
 ...
}
```
å»ºè®®ï¼šä½¿ç”¨æœªæ‰˜ç®¡çš„å¼•ç”¨é¿å…å¼•ç”¨è®¡æ•°çš„è´Ÿè·

åœ¨æ•ˆç‡è‡³ä¸Šçš„ä»£ç ä¸­ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨æœªæ‰˜ç®¡çš„å¼•ç”¨ã€‚Unmanagedç»“æ„ä½“å…è®¸å¼€å‘è€…å¯¹ç‰¹åˆ«çš„å¼•ç”¨å…³é—­å¼•ç”¨è®¡æ•° 

```swift
var Ref : Unmanaged = Unmanaged.passUnretained(Head)
  
while let Next = Ref.takeUnretainedValue().next {
  ...
  Ref = Unmanaged.passUnretained(Next)
}
```


å‚è€ƒèµ„æ–™
[^fn1]
[^fn1]: [Unmanaged](https://nshipster.cn/unmanaged/)

<br/><br/>
> <h3 id='where'>where</h3>
-  **åè®®ä½¿ç”¨where**

åªæœ‰åŸºç±»å®ç°äº†å½“å‰åè®®æ‰èƒ½æ·»åŠ æ‰©å±•,ä¹Ÿå°±æ˜¯å¤šä¸ªç±»å®ç°äº†åŒä¸€ä¸ªåè®®ï¼Œæ ¹æ®ç±»ååˆ†åˆ«ä¸ºè¿™äº›ç±»æ·»åŠ æ‰©å±•ã€‚

```swift
protocol SomeProtocol {
    func someMethod()
}
 
class A: SomeProtocol {
    let a = 1
    
    func someMethod() {
       print("call someMethod")
    }
}
 
class B {
    let a = 2
}
 
//åŸºç±»Aç»§æ‰¿äº†SomeProtocolåè®®æ‰èƒ½æ·»åŠ æ‰©å±•
extension SomeProtocol where Self: A {
    func showParamA() {
        print(self.a)
    }
}
//åä¾‹ï¼Œä¸ç¬¦åˆwhereæ¡ä»¶
extension SomeProtocol where Self: B {
    func showParamA() {
        print(self.a)
    }
}


let objA = A()
let objB = B()  //ç±»Bæ²¡å®ç°SomeProtocolï¼Œ æ‰€æœ‰æ²¡æœ‰åè®®æ–¹æ³•
objA.showParamA()  //è¾“å‡º1
```


è‹¥æ˜¯åœ¨è¿™é‡ŒæŸ‘æ©˜çœ‹ä¸å‡ºwhereçš„ä½¿ç”¨æƒ…å†µï¼Œå¯ä»¥çœ‹ä¸‹[å…³é”®å­—whereçº¦æŸå’ŒèŒƒå‹çš„è”åˆçš„å®è·µ](./../ProjectDesc/mtbp.md#å…³é”®å­—whereçº¦æŸå’ŒèŒƒå‹çš„è”åˆ)


<br/><br/>
> <h3 id="æ¡ä»¶æ‰©å±•">æ¡ä»¶æ‰©å±•</h3>

`extension Ordered where Self: Comparable` æ˜¯ä¸€ä¸ª**æ¡ä»¶æ‰©å±•**ï¼ˆConditional Extensionï¼‰çš„ä¾‹å­ï¼Œåœ¨ Swift ä¸­æ˜¯ä¸€ç§å¼ºå¤§çš„åŠŸèƒ½ï¼Œå…è®¸ä½ ä¸ºç‰¹å®šæ¡ä»¶æ»¡è¶³æ—¶çš„ç±»å‹æä¾›æ‰©å±•æ–¹æ³•ã€‚è®©æˆ‘ä»¬é€æ­¥åˆ†æä¸€ä¸‹è¿™æ®µä»£ç çš„å«ä¹‰ã€‚

<br/>
**1.`Ordered` ç±»å®šä¹‰**

```swift
class Ordered {
    func precedes(other: Ordered) -> Bool { fatalError("implement me!") }
}
```

è¿™ä¸ªæ–¹æ³•çš„ç›®çš„æ˜¯æ¯”è¾ƒå½“å‰å®ä¾‹ä¸å¦ä¸€ä¸ª `Ordered` ç±»å‹çš„å®ä¾‹ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰å®ä¾‹æ˜¯å¦â€œå…ˆäºâ€å¦ä¸€ä¸ªå®ä¾‹ã€‚å½“å‰çš„å®ç°é€šè¿‡ `fatalError` è®©è¿™ä¸ªæ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œæ„æ€æ˜¯å®ƒéœ€è¦åœ¨å­ç±»ä¸­å®ç°ã€‚

<br/>
**2.`extension Ordered where Self: Comparable`**

```swift
extension Ordered where Self: Comparable {
    func precedes(other: Self) -> Bool {
        return self < other
    }
}
```

è¿™éƒ¨åˆ†æ˜¯ä¸€ä¸ªæ‰©å±•ï¼Œé’ˆå¯¹ `Ordered` ç±»å¢åŠ äº† `precedes(other:)` æ–¹æ³•çš„å…·ä½“å®ç°ï¼Œå¹¶ä¸”ä½¿ç”¨äº† **æ¡ä»¶æ‰©å±•**ã€‚æ¡ä»¶æ‰©å±•çš„æ„æ€æ˜¯ï¼š**ä»…å½“æŸä¸ªæ¡ä»¶ï¼ˆè¿™é‡Œæ˜¯ `Self` éµå¾ª `Comparable` åè®®ï¼‰æˆç«‹æ—¶ï¼Œæ‰ä¼šä¸º `Ordered` ç±»æ·»åŠ è¿™ä¸ªæ‰©å±•ã€‚**

<br/>
- **å…³é”®ç‚¹ï¼š**
	- **`Self`**ï¼šåœ¨è¿™é‡Œï¼Œ`Self` ä»£è¡¨å½“å‰æ‰©å±•çš„ç±»å‹ï¼Œ`Self` æ˜¯ä¸€ç§æ³›å‹å ä½ç¬¦ï¼Œå®ƒä¼šæ ¹æ®ä¸Šä¸‹æ–‡åŠ¨æ€ç¡®å®šä¸ºå…·ä½“ç±»å‹ï¼ˆæ¯”å¦‚ `Int`, `Double` ç­‰ï¼‰ã€‚å½“ `Ordered` ç±»è¢«å…·ä½“åŒ–ä¸ºæŸä¸ªç±»å‹æ—¶ï¼Œ`Self` å°±ä»£è¡¨é‚£ä¸ªç±»å‹ã€‚
	- **`Comparable` åè®®**ï¼š`Comparable` æ˜¯ Swift ä¸­çš„ä¸€ä¸ªæ ‡å‡†åè®®ï¼Œå®ƒè¦æ±‚ç±»å‹æä¾› `<`ï¼ˆå°äºï¼‰å’Œå…¶ä»–æ¯”è¾ƒæ“ä½œç¬¦çš„å®ç°ã€‚å¦‚æœæŸä¸ªç±»å‹éµå¾ªäº† `Comparable` åè®®ï¼Œè¡¨ç¤ºå®ƒå¯ä»¥è¿›è¡Œæ¯”è¾ƒæ“ä½œï¼Œæ¯”å¦‚ `a < b`ã€‚
	- **`where Self: Comparable`**ï¼šè¿™æ˜¯æ¡ä»¶æ‰©å±•çš„æ ¸å¿ƒï¼Œæ„æ€æ˜¯åªæœ‰å½“ `Self` ç¡®å®šæ˜¯ç¬¦åˆ `Comparable` åè®®çš„ç±»å‹æ—¶ï¼Œæ‰©å±•ä¸­çš„æ–¹æ³•æ‰ä¼šè¢«æ·»åŠ åˆ° `Ordered` ç±»ä¸­ã€‚

<br/>

**3.å…·ä½“åŒ–è§£é‡Š**

å‡è®¾ä½ æœ‰ä¸€ä¸ª `Ordered` ç±»å‹çš„å­ç±» `IntegerOrdered`ï¼Œå¹¶ä¸” `IntegerOrdered` éµå¾ªäº† `Comparable` åè®®ï¼š

```swift
class IntegerOrdered: Ordered, Comparable {
    var value: Int
    init(value: Int) {
        self.value = value
    }

    static func <(lhs: IntegerOrdered, rhs: IntegerOrdered) -> Bool {
        return lhs.value < rhs.value
    }

    static func ==(lhs: IntegerOrdered, rhs: IntegerOrdered) -> Bool {
        return lhs.value == rhs.value
    }
}
```

åœ¨è¿™é‡Œï¼Œ`IntegerOrdered` éµå¾ªäº† `Comparable` åè®®ï¼Œå¹¶ä¸”ä¸º `IntegerOrdered` ç±»å‹æä¾›äº† `<` å’Œ `==` çš„å®ç°ã€‚ç”±äº `IntegerOrdered` ç±»å‹éµå¾ªäº† `Comparable` åè®®ï¼Œå› æ­¤æ»¡è¶³äº† `extension Ordered where Self: Comparable` ä¸­çš„æ¡ä»¶ï¼Œå› æ­¤ `precedes(other:)` æ–¹æ³•ä¼šè¢«è‡ªåŠ¨æä¾›ï¼Œä¸”é€šè¿‡ `<` è¿ç®—ç¬¦è¿›è¡Œæ¯”è¾ƒã€‚

ä½ ç°åœ¨å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š

```swift
let a = IntegerOrdered(value: 5)
let b = IntegerOrdered(value: 10)

a.precedes(other: b)  // è¿”å› trueï¼Œå› ä¸º 5 < 10
```

### æ€»ç»“

- **æ¡ä»¶æ‰©å±•**ï¼š`extension Ordered where Self: Comparable` æ˜¯ Swift çš„æ¡ä»¶æ‰©å±•ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä¸º `Ordered` ç±»æä¾›ä¸€ä¸ªæ‰©å±•æ–¹æ³•ï¼Œåªæœ‰å½“æ‰©å±•ç±»å‹éµå¾ªäº† `Comparable` åè®®æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œæ‰©å±•ä¸­çš„æ–¹æ³•ã€‚
- **`Self`**ï¼šä»£è¡¨å…·ä½“ç±»å‹ï¼Œå®ƒåœ¨æ­¤æ‰©å±•ä¸­è¢«ç”¨æ¥æŒ‡ä»£ç»§æ‰¿ `Ordered` ç±»çš„å…·ä½“ç±»å‹ã€‚
- **`Comparable` åè®®**ï¼šæ­¤æ‰©å±•åªå¯¹ç¬¦åˆ `Comparable` åè®®çš„ç±»å‹æœ‰æ•ˆï¼Œå…è®¸ä½¿ç”¨ `<` è¿ç®—ç¬¦è¿›è¡Œæ¯”è¾ƒã€‚


<br/><br/>
> <h3 id='intout'>intout</h3>

**`ä½¿ç”¨intoutæ³¨æ„äº‹é¡¹ï¼š`**
-  ä½¿ç”¨ inout å…³é”®å­—çš„å‡½æ•°ï¼Œåœ¨è°ƒç”¨æ—¶éœ€è¦åœ¨è¯¥å‚æ•°å‰åŠ ä¸Š & ç¬¦å·;
-  inout å‚æ•°åœ¨ä¼ å…¥æ—¶å¿…é¡»ä¸ºå˜é‡ï¼Œä¸èƒ½ä¸ºå¸¸é‡æˆ–å­—é¢é‡ï¼ˆliteralï¼‰;

```
//å¸¸é‡ä½¿ç”¨å…³é”®å­— let æ¥å£°æ˜
æ ¼å¼ï¼šlet constantName = <initial value>
å¦‚ï¼šlet constA = 42

//å­—é¢é‡ï¼šå°±æ˜¯æŒ‡èƒ½å¤Ÿç›´æ¥äº†å½“åœ°æŒ‡å‡ºè‡ªå·±çš„ç±»å‹å¹¶ä¸ºå˜é‡è¿›è¡Œèµ‹å€¼çš„å€¼ï¼Œä¸å¸¸é‡æ— å¼‚ã€‚
//å­—ç¬¦ä¸²å‹å­—é¢å¸¸é‡
let name = "DevZhang"

```

<br/>

-  inout å‚æ•°ä¸èƒ½æœ‰é»˜è®¤å€¼ï¼Œä¸èƒ½ä¸ºå¯å˜å‚æ•°

```
//å¯å˜å‚æ•°ï¼Œæœ‰å¤šä¸ªå‚æ•°ç”¨çœç•¥å·è¡¨ç¤º
func add(a:Int, b:Int ,others:Int ...) -> Int {
var result = a + b
for num in others {
    result += num
}
    return result
}

let number = add(2, b: 5, others: 2, 50, 4)
print(number)  //63
```

-  inout å‚æ•°ä¸ç­‰åŒäºå‡½æ•°è¿”å›å€¼ï¼Œæ˜¯ä¸€ç§ä½¿å‚æ•°çš„ä½œç”¨åŸŸè¶…å‡ºå‡½æ•°ä½“çš„æ–¹å¼
-  å¤šä¸ª inout å‚æ•°ä¸èƒ½åŒæ—¶ä¼ å…¥åŒä¸€ä¸ªå˜é‡ï¼Œå› ä¸ºæ‹·å…¥æ‹·å‡ºçš„é¡ºåºä¸å®šï¼Œé‚£ä¹ˆæœ€ç»ˆå€¼ä¹Ÿä¸èƒ½ç¡®å®š

<br/>

```
struct Point {
    var x = 0.0
    var y = 0.0
}

struct Rectangle {
    var width = 0.0
    var height = 0.0
    var origin = Point()
    
    var center: Point {
        get {
            print("center GETTER call")
            return Point(x: origin.x + width / 2,
                         y: origin.y + height / 2)
        }
        
        set {
            print("center SETTER call")
            origin.x = newValue.x - width / 2
            origin.y = newValue.y - height / 2
        }
    }
    
    func reset(center: inout Point) {
        center.x = 0.0
        center.y = 0.0
    }
    
}

var rect = Rectangle(width: 100, height: 100, origin: Point(x: -100, y: -100))
print("rect.center å€¼ï¼š\(rect.center)\n")

rect.reset(center: &rect.center)
print("rect.center é‡ç½®åçš„å€¼ï¼š\(rect.center)")
```

æ‰“å°ï¼š

```
center GETTER call
rect.center å€¼ï¼šPoint(x: -50.0, y: -50.0)

center GETTER call
center SETTER call
center GETTER call
rect.center é‡ç½®åçš„å€¼ï¼šPoint(x: 0.0, y: 0.0)
```

<br/>

**`inout å‚æ•°ä¼ é€’è¿‡ç¨‹`**

-  å½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå‚æ•°å€¼è¢«æ‹·è´
-  åœ¨å‡½æ•°ä½“å†…ï¼Œè¢«æ‹·è´çš„å‚æ•°ä¿®æ”¹
-  å‡½æ•°è¿”å›æ—¶ï¼Œè¢«æ‹·è´çš„å‚æ•°å€¼è¢«èµ‹å€¼ç»™åŸæœ‰çš„å˜é‡

&emsp;  å®˜æ–¹ç§°è¿™ä¸ªè¡Œä¸ºä¸ºï¼šcopy-in copy-out æˆ– call by value resultã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ KVO æˆ–è®¡ç®—å±æ€§æ¥è·Ÿè¸ªè¿™ä¸€è¿‡ç¨‹ï¼Œè¿™é‡Œä»¥è®¡ç®—å±æ€§ä¸ºä¾‹ã€‚æ’é™¤åœ¨è°ƒç”¨å‡½æ•°ä¹‹å‰ä¸ä¹‹åçš„ center GETTER callï¼Œä»ä¸­å¯ä»¥å‘ç°ï¼šå‚æ•°å€¼å…ˆè¢«è·å–åˆ°ï¼ˆsetter è¢«è°ƒç”¨ï¼‰ï¼Œæ¥ç€è¢«è®¾å€¼ï¼ˆsetter è¢«è°ƒç”¨ï¼‰ã€‚

&emsp;  æ ¹æ® inout å‚æ•°çš„ä¼ é€’è¿‡ç¨‹ï¼Œå¯ä»¥å¾—çŸ¥ï¼šinout å‚æ•°çš„æœ¬è´¨ä¸å¼•ç”¨ç±»å‹çš„ä¼ å‚å¹¶ä¸æ˜¯åŒä¸€å›äº‹ã€‚inout å‚æ•°æ‰“ç ´äº†å…¶ç”Ÿå‘½å‘¨æœŸï¼Œæ˜¯ä¸€ä¸ªå¯å˜æµ…æ‹·è´ã€‚åœ¨ Swift 3.0 ä¸­ï¼Œä¹Ÿå½»åº•æ‘’é™¤äº†åœ¨é€ƒé€¸é—­åŒ…ï¼ˆEscape Closureï¼‰ä¸­è¢«æ•è·ã€‚

<br/><br/>
> <h3 id='mutating'>mutating</h3>
- **`ä½¿ç”¨åœºæ™¯:`**
	-  ç»“æ„ä½“,æšä¸¾ç±»å‹ä¸­å£°æ˜ä¿®é¥°æ–¹æ³• mutating func funcName()
	-  extension, protocol ä¿®é¥° æ–¹æ³•

<br/>

- **`æ³¨æ„:`**
	-  Swift ä¸­struct,enum å‡å¯ä»¥åŒ…å«ç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•,Swiftå®˜æ–¹æ˜¯ä¸å»ºè®®åœ¨struct,enum çš„æ™®é€šæ–¹æ³•å†…ä¿®æ”¹å±æ€§å˜é‡,ä½†æ˜¯åœ¨func å‰é¢æ·»åŠ  mutating å…³é”®å­—ä¹‹åå°±å¯ä»¥åœ¨æ–¹æ³•å†…ä¿®æ”¹ï¼›Â Â  Â Â 
	
	-  å¯¹äºprotocol æ–¹æ³•ä¹Ÿæ˜¯é€‚ç”¨çš„,mutating å¯ä»¥ä¿®é¥°çš„ä»£ç†æ–¹æ³•,å¦‚æœstruct,enum,class å®ç°åè®®ä¹‹åä¹Ÿå¯ä»¥åœ¨å…¶å¯¹åº”çš„ mutating ä»£ç†æ–¹æ³•å†…ä¿®æ”¹æœ¬èº«çš„å±æ€§å˜é‡ã€‚(class ä¸å½±å“,å› ä¸ºå±æ€§å˜é‡å¯¹äºç±»çš„ç±»æ–¹æ³•,å®ä¾‹æ–¹æ³• æ˜¯é€æ˜çš„,å³éšæ—¶éƒ½å¯ä»¥æ”¹å˜)

**`Test å·¥ç¨‹ä¸­çš„ CustomController.swift æ–‡ä»¶`**

```swift
import UIKit

protocol MyProtocol {
    mutating func testMutatingKeyValue(index: Int)
}

struct MyStruct: MyProtocol {
    var  index = 0
    
    //åœ¨ç»“æ„ä½“å†…éƒ¨æ–¹æ³•ä¸­å¦‚æœä¿®æ”¹äº†ç»“æ„ä½“çš„æˆå‘˜ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•ä¹‹å‰åº”è¯¥åŠ å…¥ï¼šmutatingå…³é”®å­—
    mutating func testMutatingKeyValue(index: Int) {
        self.index = index
    } 
}

@objc class CustomController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()
        
        var ms = MyStruct()
        ms.testMutatingKeyValue(index: 20)
        print("index \(ms.index)")

    }
    

}

extension String {
    mutating func appendString(astring: String){
        self.append("test" + astring)
    }
}
```

<br/>

**`Test å·¥ç¨‹ä¸­çš„ ViewController.m æ–‡ä»¶`**

```swift
#import "Test-Swift.h"

@implementation ViewController
- (void)viewDidLoad {
    [super viewDidLoad];
    self.view.backgroundColor = [UIColor groupTableViewBackgroundColor];
    
    
    CustomController *cc = [CustomController new];
    [self presentViewController:cc animated:YES completion:nil];
}
```
è¾“å‡ºï¼š

```swift
index 20
```



<br/><br/><br/>
> <h3 id='guard'>guard</h3>
**1.Guardè¯­å¥çš„è¯­æ³•**

```swift
guard expression else { 
    //è¯­å¥
    //å¿…é¡»åŒ…å«ä¸€ä¸ªæ§åˆ¶è¯­å¥ï¼šreturnï¼Œbreakï¼Œcontinueæˆ–throwã€‚
}

è¿™é‡Œï¼Œexpressionæ˜¯ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼ï¼ˆè¿”å›trueæˆ–è€…falseï¼‰ã€‚
å¦‚æœå¯¹è¡¨è¾¾å¼æ±‚å€¼falseï¼Œguardåˆ™æ‰§è¡Œä»£ç å—å†…çš„è¯­å¥ã€‚
å¦‚æœå¯¹è¡¨è¾¾å¼æ±‚å€¼trueï¼Œguardåˆ™ä»æ‰§è¡Œä¸­è·³è¿‡ä»£ç å—å†…çš„è¯­å¥
```
![ios0.0.19.png](./../../Pictures/ios0.0.19.png)


<br/><br/>

**2.å‡½æ•°å†…guardè¯­å¥(èµ·åˆ°è§£åŒ…çš„ä½œç”¨)**

```swift
func changeOptionalStringToUpperCase() {

    var name:String?
    guard let temp = name else {
        print("Name is nil. Cannot process")
        return
    }
    print("Uppercased:\(temp.uppercased())")
}

changeOptionalStringToUpperCase()
```

<br/>

**4.1å…·æœ‰å¤šä¸ªæ¡ä»¶çš„ä¿æŠ¤**

```swift
func changeOptionalStringToUpperCase() {
	var name:String? = ""
	guard let temp = name , temp.count > 0  else {
		print("Name is nil or an empty string. Cannot process")
		return
	}
	print("Uppercased:\(temp.uppercased())")
}



changeOptionalStringToUpperCase()

//guard----æ§åˆ¶è¯­å¥æ‰§è¡Œ å³å®ˆæŠ¤
let oAge: Int? = 20
//åœ¨swift3.0ä¸­ï¼Œif-letå’Œguardè¯­å¥ä¸­çš„whereéƒ½ç”¨â€œ,â€æ›¿ä»£äº†
if let age = oAge , age > 18 {
     print(age)
}


 func guardTest(){
     let bAge:Int? = 30
     guard let age = bAge , age > 18 else {
         print("å¹´é¾„å°äº18å²")
         return
     }
     print(age)
 }
 var aa: Int?? = 20
 guardTest()
```

<br/><br/>

># <h3 id='extension'>[extension](https://www.jianshu.com/p/783df05a9b59)</h3>


<br/><br/>
> <h3 id='Lazyçš„ä½¿ç”¨'>Lazyçš„ä½¿ç”¨</h3>
[lazy ç®€å•çš„ä½¿ç”¨](https://www.jianshu.com/p/aa6707791ab6)


<br/><br/>

># <h2 id='è®¿é—®æƒé™å…³é”®å­—ä½¿ç”¨'>[è®¿é—®æƒé™å…³é”®å­—ä½¿ç”¨](https://swift.bootcss.com/02_language_guide/26_Access_Control#default-access-levels)</h2>

åœ¨è®¤è¯†å’Œå’Œæ³¨æ„**è®¿é—®æ§åˆ¶**ä¹‹å‰ï¼Œæœ‰å‡ ä¸ªæ¦‚å¿µéœ€è¦å¼„æ¸…æ¥šã€‚

Swift ä¸­çš„è®¿é—®æ§åˆ¶æ¨¡å‹åŸºäº**æ¨¡å—**å’Œ**æºæ–‡ä»¶**è¿™ä¸¤ä¸ªæ¦‚å¿µã€‚

æ¨¡å—æŒ‡çš„æ˜¯ç‹¬ç«‹çš„ä»£ç å•å…ƒï¼Œæ¡†æ¶æˆ–åº”ç”¨ç¨‹åºä¼šä½œä¸ºä¸€ä¸ª**ç‹¬ç«‹çš„æ¨¡å—æ¥æ„å»ºå’Œå‘å¸ƒ**ã€‚åœ¨ Swift ä¸­ï¼Œä¸€ä¸ªæ¨¡å—å¯ä»¥ä½¿ç”¨ import å…³é”®å­—å¯¼å…¥å¦å¤–ä¸€ä¸ªæ¨¡å—ã€‚

åœ¨ Swift ä¸­ï¼ŒXcode çš„æ¯ä¸ª targetï¼ˆä¾‹å¦‚æ¡†æ¶æˆ–åº”ç”¨ç¨‹åºï¼‰éƒ½è¢«å½“ä½œç‹¬ç«‹çš„æ¨¡å—å¤„ç†ã€‚å¦‚æœä½ æ˜¯ä¸ºäº†å®ç°æŸä¸ªé€šç”¨çš„åŠŸèƒ½ï¼Œæˆ–è€…æ˜¯ä¸ºäº†å°è£…ä¸€äº›å¸¸ç”¨æ–¹æ³•è€Œå°†ä»£ç æ‰“åŒ…æˆç‹¬ç«‹çš„æ¡†æ¶ï¼Œè¿™ä¸ªæ¡†æ¶å°±æ˜¯ Swift ä¸­çš„ä¸€ä¸ªæ¨¡å—ã€‚å½“å®ƒè¢«å¯¼å…¥åˆ°æŸä¸ªåº”ç”¨ç¨‹åºæˆ–è€…å…¶ä»–æ¡†æ¶æ—¶ï¼Œæ¡†æ¶çš„å†…å®¹éƒ½å°†å±äºè¿™ä¸ªç‹¬ç«‹çš„æ¨¡å—ã€‚

æºæ–‡ä»¶ å°±æ˜¯ Swift æ¨¡å—ä¸­çš„æºä»£ç æ–‡ä»¶ï¼ˆå®é™…ä¸Šï¼Œæºæ–‡ä»¶å±äºä¸€ä¸ªåº”ç”¨ç¨‹åºæˆ–æ¡†æ¶ï¼‰ã€‚å°½ç®¡æˆ‘ä»¬ä¸€èˆ¬ä¼šå°†ä¸åŒçš„ç±»å‹åˆ†åˆ«å®šä¹‰åœ¨ä¸åŒçš„æºæ–‡ä»¶ä¸­ï¼Œä½†æ˜¯åŒä¸€ä¸ªæºæ–‡ä»¶ä¹Ÿå¯ä»¥åŒ…å«å¤šä¸ªç±»å‹ã€å‡½æ•°ç­‰çš„å®šä¹‰ã€‚

**å…³é”®å­—æƒé™å›¾**

![ios0.0.18.png](./../../Pictures/ios0.0.18.png)

<br/><br/>
> <h3 id="è®¿é—®æƒé™private">è®¿é—®æƒé™private</h3>

- **1ã€private ä¿®é¥°ç¬¦**
	- private é™åˆ¶å®ä½“åªèƒ½åœ¨å…¶å®šä¹‰çš„ä½œç”¨åŸŸï¼Œä»¥åŠåŒä¸€æ–‡ä»¶å†…çš„ extension è®¿é—®ã€‚
	- å¦‚æœåŠŸèƒ½çš„éƒ¨åˆ†ç»†èŠ‚åªéœ€è¦åœ¨å½“å‰ä½œç”¨åŸŸå†…ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ private æ¥å°†å…¶éšè—

åŒä¸€æ–‡ä»¶**MyClass.swift**ä¸‹ä»£ç :

```swift
enum ConnectionState {
    case disconnected
    case connecting
    case connected
    case failed(Error)
}

class MyClass {
    private var myPrivateVar = "This is private"
    
    // åªè¯»çš„çŠ¶æ€ï¼Œå¤–éƒ¨åªèƒ½çœ‹ä¸èƒ½æ”¹
    private(set) var state: ConnectionState = .disconnected
    
    // å¯¹å¤–æä¾›åªè¯»å±æ€§ï¼ˆå¯é€‰ï¼‰
    var currentState: ConnectionState { state }
    
    // å†…éƒ¨ä½¿ç”¨çš„æ–¹æ³•æ¥æ”¹å˜çŠ¶æ€
    func connect() {
        state = .connecting
        // æ¨¡æ‹ŸæˆåŠŸè¿æ¥
        DispatchQueue.main.asyncAfter(deadline: .now() + 1) {
            self.state = .connected
        }
    }

    func disconnect() {
        state = .disconnected
    }

    private func fail(with error: Error) {
        state = .failed(error)
    }
    
    // åªèƒ½é€šè¿‡å†…éƒ¨æ–¹æ³•å¯¹å…¶è®¾å€¼
    func setupCustom(myVar: String) {
        // åœ¨è¿™é‡Œå¯ä»¥ç›´æ¥è®¿é—®myPrivateVar
        print(myPrivateVar)
        
        self.myPrivateVar = myPrivateVar
    }
    
    private func privateMethod() {
        print("This is a private method.")
    }
    
    func callPrivateMethod() {
        privateMethod() // ç›´æ¥è°ƒç”¨è‡ªå·±ç±»çš„privateæ–¹æ³•ï¼Œæ²¡é—®é¢˜
    }
}

extension MyClass {
    // åŒä¸€æ–‡ä»¶çš„å…¶æ‰©å¼ ç±»æ˜¯å¯ä»¥ä½¿ç”¨çš„
    func anotherMethod() {
        privateMethod() // åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ‰©å±•ä¹Ÿå¯ä»¥è®¿é—®privateæ–¹æ³•
    }
}

// åŒä¸€æ–‡ä»¶å†…çš„å…¶ä»–ç±»æ— æ³•è®¿é—®myPrivateVar
class OtherClass {
    func tryAccess() {
        // Error: Cannot access 'myPrivateVar'
        print(MyClass().myPrivateVar)
    }
}
```

- å¤–éƒ¨åªèƒ½è§‚å¯Ÿ `currentState`ï¼Œè€Œä¸èƒ½é€šè¿‡ `manager.state = ...` å¼ºè¡Œæ”¹çŠ¶æ€ï¼Œè¿™å°±ä¿æŠ¤äº†çŠ¶æ€æµç¨‹çš„å®Œæ•´æ€§ã€‚
- åªèƒ½é€šè¿‡ `setupCustom` æ–¹æ³•ä¿®æ”¹myPrivateVarï¼Œä¸èƒ½ç›´æ¥æ“ä½œ `myPrivateVar` å˜é‡ï¼Œé¿å…æ•°æ®è¢«éšæ„ç¯¡æ”¹

***

**å°è£…åŸåˆ™**

| åœºæ™¯              | è®¿é—®æƒé™                       | å»ºè®®ç”¨æ³•           |
| --------------- | -------------------------- | -------------- |
| åªè¯»å±æ€§ï¼ˆå¤–éƒ¨åªè¯»ï¼Œå†…éƒ¨è¯»å†™ï¼‰ | `private(set) var`         | æœ€å¸¸è§ï¼Œé€‚åˆçŠ¶æ€ã€é…ç½®ç­‰   |
| ä¸¥æ ¼å†…éƒ¨ä½¿ç”¨ï¼ˆä»…ç±»å†…è¯»å†™ï¼‰   | `private var`              | å¼ºå°è£…ï¼Œå¤–éƒ¨åªèƒ½é€šè¿‡æ¥å£è®¿é—® |
| å­ç±»ä¹Ÿä¸èƒ½è®¿é—®         | `private` è€Œé `fileprivate` | ä¿è¯å°è£…å±‚çº§         |
| é™åˆ¶å†™å…¥æ–¹å¼          | æä¾› `setXXX()` æ–¹æ³•           | æ§åˆ¶èµ‹å€¼æµç¨‹æˆ–å¼•å…¥æ ¡éªŒé€»è¾‘  |




<br/>


- **2ã€fileprivate ä¿®é¥°ç¬¦**
	- fileprivate é™åˆ¶å®ä½“åªèƒ½åœ¨å…¶å®šä¹‰çš„æ–‡ä»¶å†…éƒ¨è®¿é—®ã€‚
	- å¦‚æœåŠŸèƒ½çš„éƒ¨åˆ†å®ç°ç»†èŠ‚åªéœ€è¦åœ¨æ–‡ä»¶å†…ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ fileprivate æ¥å°†å…¶éšè—ã€‚


**AClass.swiftæ–‡ä»¶ä¸­**

```swift

class AClass {
    private func privateMethod() {
        print("This is a private method.")
    }
    
    fileprivate func filePrivateMethod() {
        print("This is a fileprivate method.")
    }
}

extension AClass {
    func testMethods() {
        privateMethod()      // å¯ä»¥è®¿é—®
        filePrivateMethod()   // å¯ä»¥è®¿é—®
    }
}

class AnotherClass {
    func testAccess() {
        // AClass().privateMethod()  // é”™è¯¯ï¼Œæ— æ³•è®¿é—® `private` æ–¹æ³•
        AClass().filePrivateMethod() // å¯ä»¥è®¿é—® `fileprivate` æ–¹æ³•
    }
}
```

<br/>

**æˆ–è€…AClass.swiftæ–‡ä»¶ä¸­**

```
class AClass {
    fileprivate var fileprivateVariable = "I am fileprivate"

    func printFileprivateVariable() {
        print(fileprivateVariable)
    }
}

extension AClass {
    func accessFileprivateVariable() {
        print(fileprivateVariable) // è¿™æ˜¯åˆæ³•çš„
    }
}
```



<br/>

- **3ã€public ä¿®é¥°ç¬¦**
	- open å’Œ public çº§åˆ«å¯ä»¥è®©å®ä½“è¢«åŒä¸€æ¨¡å—æºæ–‡ä»¶ä¸­çš„æ‰€æœ‰å®ä½“è®¿é—®ï¼Œåœ¨æ¨¡å—å¤–ä¹Ÿå¯ä»¥é€šè¿‡å¯¼å…¥è¯¥æ¨¡å—æ¥è®¿é—®æºæ–‡ä»¶é‡Œçš„æ‰€æœ‰å®ä½“ã€‚
	- é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ ä¼šä½¿ç”¨ open æˆ– public çº§åˆ«æ¥æŒ‡å®šæ¡†æ¶çš„å¤–éƒ¨æ¥å£ã€‚



```
public class PublicClass {
    public var publicVar = "This is public"
}

// åœ¨å¦ä¸€ä¸ªæ¨¡å—ä¸­å¯¼å…¥å¹¶ä½¿ç”¨
import MyModule
let pc = PublicClass()
print(pc.publicVar) // æ­£å¸¸è¾“å‡ºï¼š"This is public"
```


<br/>

- **4ã€open ä¿®é¥°ç¬¦**
	- open å’Œ public çº§åˆ«å¯ä»¥è®©å®ä½“è¢«åŒä¸€æ¨¡å—æºæ–‡ä»¶ä¸­çš„æ‰€æœ‰å®ä½“è®¿é—®ï¼Œåœ¨æ¨¡å—å¤–ä¹Ÿå¯ä»¥é€šè¿‡å¯¼å…¥è¯¥æ¨¡å—æ¥è®¿é—®æºæ–‡ä»¶é‡Œçš„æ‰€æœ‰å®ä½“ã€‚
	- é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ ä¼šä½¿ç”¨ open æˆ– public çº§åˆ«æ¥æŒ‡å®šæ¡†æ¶çš„å¤–éƒ¨æ¥å£ã€‚
	- open åªèƒ½ä½œç”¨äºç±»å’Œç±»çš„æˆå‘˜ï¼Œå®ƒå’Œ public çš„åŒºåˆ«ä¸»è¦åœ¨äº open é™å®šçš„ç±»å’Œæˆå‘˜èƒ½å¤Ÿåœ¨æ¨¡å—å¤–èƒ½è¢«ç»§æ‰¿å’Œé‡å†™ã€‚



```
open class OpenClass {
    open var openVar = "This is open"
    open func openMethod() {}
}

// åœ¨å¦ä¸€ä¸ªæ¨¡å—ä¸­å¯ä»¥ç»§æ‰¿OpenClass
import MyModule
class DerivedClass: OpenClass {
    override func openMethod() {
        super.openMethod()
        print(openVar)
    }
}
```

<br/>

**5.internal(äº†è§£å³å¯)**

internal çº§åˆ«è®©å®ä½“è¢«åŒä¸€æ¨¡å—æºæ–‡ä»¶ä¸­çš„ä»»ä½•å®ä½“è®¿é—®ï¼Œä½†æ˜¯ä¸èƒ½è¢«æ¨¡å—å¤–çš„å®ä½“è®¿é—®ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœæŸä¸ªæ¥å£åªåœ¨åº”ç”¨ç¨‹åºæˆ–æ¡†æ¶å†…éƒ¨ä½¿ç”¨ï¼Œå°±å¯ä»¥å°†å…¶è®¾ç½®ä¸º internal çº§åˆ«ã€‚

```
internal struct InternalStruct {
    internal var internalVar = "This is internal"
}

// åŒä¸€æ¨¡å—å†…çš„å…¶ä»–æ–‡ä»¶å¯ä»¥è®¿é—®InternalStructåŠå…¶æˆå‘˜
// ä½†ä¸åŒæ¨¡å—çš„ä»£ç æ— æ³•ç›´æ¥è®¿é—®
```

<br/>


**ä»é«˜åˆ°ä½æ’åºå¦‚ä¸‹ï¼š**

`open > public > fileprivate > private`

<br/><br/><br/>

> <h2 id="è¯†åˆ«åŸåˆ™">è¯†åˆ«åŸåˆ™</h2>

æœ‰æ—¶å€™åœ¨æƒ³ï¼Œè‹¥æ˜¯ç±»å®šä¹‰çš„privateï¼Œå®ƒçš„å±æ€§æˆ–è€…æ–¹æ³•æ˜¯publicæ€ä¹ˆåŠï¼Ÿ

<br/>

ä¸‹é¢çš„å›ç­”ï¼Œå¾ˆå¥½çš„è§£å†³äº†æˆ‘çš„ç–‘æƒ‘ï¼š

Swift ä¸­çš„è®¿é—®çº§åˆ«éµå¾ªä¸€ä¸ªåŸºæœ¬åŸåˆ™ï¼šå®ä½“ä¸èƒ½å®šä¹‰åœ¨å…·æœ‰æ›´ä½è®¿é—®çº§åˆ«ï¼ˆæ›´ä¸¥æ ¼ï¼‰çš„å®ä½“ä¸­ã€‚

ä¾‹å¦‚ï¼š

- ä¸€ä¸ª public çš„å˜é‡ï¼Œå…¶ç±»å‹çš„è®¿é—®çº§åˆ«ä¸èƒ½æ˜¯ internalï¼Œfileprivate æˆ–æ˜¯ privateã€‚
	- å› ä¸ºæ— æ³•ä¿è¯å˜é‡çš„ç±»å‹åœ¨ä½¿ç”¨å˜é‡çš„åœ°æ–¹ä¹Ÿå…·æœ‰è®¿é—®æƒé™ã€‚

- å‡½æ•°çš„è®¿é—®çº§åˆ«ä¸èƒ½é«˜äºå®ƒçš„å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹çš„è®¿é—®çº§åˆ«ã€‚
	- å› ä¸ºè¿™æ ·å°±ä¼šå‡ºç°å‡½æ•°å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¢«è®¿é—®ï¼Œä½†æ˜¯å®ƒçš„å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹å´ä¸å¯ä»¥çš„æƒ…å†µã€‚

<br/><br/><br/>

> <h2 id="é»˜è®¤è®¿é—®çº§åˆ«">é»˜è®¤è®¿é—®çº§åˆ«</h2>

ä½ ä»£ç ä¸­æ‰€æœ‰çš„å®ä½“ï¼Œå¦‚æœä½ ä¸æ˜¾å¼çš„æŒ‡å®šå®ƒä»¬çš„è®¿é—®çº§åˆ«ï¼Œé‚£ä¹ˆå®ƒä»¬å°†éƒ½æœ‰ä¸€ä¸ª **internal çš„é»˜è®¤è®¿é—®çº§åˆ«**ï¼Œï¼ˆæœ‰ä¸€äº›ä¾‹å¤–æƒ…å†µï¼Œæœ¬æ–‡ç¨åä¼šæœ‰è¯´æ˜ï¼‰ã€‚å› æ­¤ï¼Œå¤šæ•°æƒ…å†µä¸‹ä½ ä¸éœ€è¦æ˜¾ç¤ºæŒ‡å®šå®ä½“çš„è®¿é—®çº§åˆ«ã€‚

éš¾æ€ªæˆ‘ä¹‹å‰åˆ¶ä½œçš„swiftåº“ï¼Œåœ¨ç”¨ä¸»å·¥ç¨‹çš„çš„ä»£ç è°ƒç”¨çš„æ—¶å€™ï¼Œæ˜¯æ— æ³•è°ƒç”¨swiftçš„ä»£ç çš„ã€‚å½“æ—¶è¿˜åœ¨å¥‡æ€ªï¼ŒåŸæ¥**é»˜è®¤çš„ä½¿ç”¨äº†internal**äº†ã€‚

<br/><br/>

**æ¡†æ¶çš„è®¿é—®çº§åˆ«**

å½“ä½ å¼€å‘æ¡†æ¶æ—¶ï¼Œå°±éœ€è¦æŠŠä¸€äº›å¯¹å¤–çš„æ¥å£å®šä¹‰ä¸º open æˆ– public è®¿é—®çº§åˆ«ï¼Œä»¥ä¾¿ä½¿ç”¨è€…å¯¼å…¥è¯¥æ¡†æ¶åå¯ä»¥æ­£å¸¸ä½¿ç”¨å…¶åŠŸèƒ½ã€‚è¿™äº›è¢«ä½ å®šä¹‰ä¸ºå¯¹å¤–çš„æ¥å£ï¼Œå°±æ˜¯è¿™ä¸ªæ¡†æ¶çš„ APIã€‚

<br/><br/><br/>

> <h2 id="è‡ªå®šä¹‰ç±»å‹è®¿é—®æƒé™">è‡ªå®šä¹‰ç±»å‹è®¿é—®æƒé™</h2>

å¦‚æœæƒ³ä¸ºä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹æŒ‡å®šè®¿é—®çº§åˆ«ï¼Œåœ¨å®šä¹‰ç±»å‹æ—¶è¿›è¡ŒæŒ‡å®šå³å¯ã€‚æ–°ç±»å‹åªèƒ½åœ¨å®ƒçš„è®¿é—®çº§åˆ«é™åˆ¶èŒƒå›´å†…ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œä½ å®šä¹‰äº†ä¸€ä¸ª fileprivate çº§åˆ«çš„ç±»ï¼Œé‚£è¿™ä¸ªç±»å°±åªèƒ½åœ¨å®šä¹‰å®ƒçš„æºæ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œå¯ä»¥ä½œä¸ºå±æ€§ç±»å‹ã€å‡½æ•°å‚æ•°ç±»å‹æˆ–è€…è¿”å›ç±»å‹ç­‰ç­‰ã€‚

ä¸€ä¸ªç±»å‹çš„è®¿é—®çº§åˆ«ä¹Ÿä¼šå½±å“åˆ°ç±»å‹æˆå‘˜ï¼ˆå±æ€§ã€æ–¹æ³•ã€æ„é€ å™¨ã€ä¸‹æ ‡ï¼‰çš„é»˜è®¤è®¿é—®çº§åˆ«ã€‚å¦‚æœä½ å°†ç±»å‹æŒ‡å®šä¸º `private` æˆ–è€… `fileprivate `çº§åˆ«ï¼Œé‚£ä¹ˆè¯¥ç±»å‹çš„æ‰€æœ‰æˆå‘˜çš„é»˜è®¤è®¿é—®çº§åˆ«ä¹Ÿä¼šå˜æˆ `private` æˆ–è€… `fileprivate` çº§åˆ«ã€‚å¦‚æœä½ å°†ç±»å‹æŒ‡å®šä¸º `internal` æˆ– `public`ï¼ˆæˆ–è€…ä¸æ˜ç¡®æŒ‡å®šè®¿é—®çº§åˆ«ï¼Œè€Œä½¿ç”¨é»˜è®¤çš„ `internal` ï¼‰ï¼Œé‚£ä¹ˆè¯¥ç±»å‹çš„æ‰€æœ‰æˆå‘˜çš„é»˜è®¤è®¿é—®çº§åˆ«å°†æ˜¯ `internal`ã€‚

> ==**é‡ç‚¹**==
> ä¸Šé¢æåˆ°ï¼Œä¸€ä¸ª public ç±»å‹çš„æ‰€æœ‰æˆå‘˜çš„è®¿é—®çº§åˆ«é»˜è®¤ä¸º internal çº§åˆ«ï¼Œè€Œä¸æ˜¯ public çº§åˆ«ã€‚å¦‚æœä½ æƒ³å°†æŸä¸ªæˆå‘˜æŒ‡å®šä¸º public çº§åˆ«ï¼Œé‚£ä¹ˆä½ å¿…é¡»æ˜¾å¼æŒ‡å®šã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œåœ¨ä½ å®šä¹‰å…¬å…±æ¥å£çš„æ—¶å€™ï¼Œå¯ä»¥æ˜ç¡®åœ°é€‰æ‹©å“ªäº›æ¥å£æ˜¯éœ€è¦å…¬å¼€çš„ï¼Œå“ªäº›æ˜¯å†…éƒ¨ä½¿ç”¨çš„ï¼Œé¿å…ä¸å°å¿ƒå°†å†…éƒ¨ä½¿ç”¨çš„æ¥å£å…¬å¼€ã€‚

```
public class SomePublicClass {                  // æ˜¾å¼ public ç±»
    public var somePublicProperty = 0            // æ˜¾å¼ public ç±»æˆå‘˜
    var someInternalProperty = 0                 // éšå¼ internal ç±»æˆå‘˜
    fileprivate func someFilePrivateMethod() {}  // æ˜¾å¼ fileprivate ç±»æˆå‘˜
    private func somePrivateMethod() {}          // æ˜¾å¼ private ç±»æˆå‘˜
}

class SomeInternalClass {                       // éšå¼ internal ç±»
    var someInternalProperty = 0                 // éšå¼ internal ç±»æˆå‘˜
    fileprivate func someFilePrivateMethod() {}  // æ˜¾å¼ fileprivate ç±»æˆå‘˜
    private func somePrivateMethod() {}          // æ˜¾å¼ private ç±»æˆå‘˜
}

fileprivate class SomeFilePrivateClass {        // æ˜¾å¼ fileprivate ç±»
    func someFilePrivateMethod() {}              // éšå¼ fileprivate ç±»æˆå‘˜
    private func somePrivateMethod() {}          // æ˜¾å¼ private ç±»æˆå‘˜
}

private class SomePrivateClass {                // æ˜¾å¼ private ç±»
    func somePrivateMethod() {}                  // éšå¼ private ç±»æˆå‘˜
}
```




<br/><br/><br/>


> <h3 id='internal(set)çš„ä½¿ç”¨'>internal(set)çš„ä½¿ç”¨</h3>

[è®¿é—®æ§åˆ¶ US](https://www.cnblogs.com/xjf125/p/10088307.html)




<br/>
<br/>

> <h3 id='typealias'>typealias</h3>

&emsp; typealias æ˜¯ç”¨æ¥ä¸ºå·²ç»å­˜åœ¨çš„ç±»å‹é‡æ–°å®šä¹‰åå­—çš„ï¼Œé€šè¿‡å‘½åï¼Œå¯ä»¥ä½¿ä»£ç å˜å¾—æ›´åŠ æ¸…æ™°ã€‚ä½¿ç”¨çš„è¯­æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨ typealias å…³é”®å­—åƒä½¿ç”¨æ™®é€šçš„èµ‹å€¼è¯­å¥ä¸€æ ·ï¼Œå¯ä»¥å°†æŸä¸ªå·²ç»å­˜åœ¨çš„ç±»å‹èµ‹å€¼ä¸ºæ–°çš„åå­—

```
func distanceBetweenPoint(point: CGPoint, toPoint: CGPoint) -> Double {
    let dx = Double(toPoint.x - point.x)
    let dy = Double(toPoint.y - point.y)
    return sqrt(dx * dx + dy * dy)
}

let origin: CGPoint = CGPoint(x: 0, y: 0)
let point: CGPoint = CGPoint(x: 1, y: 1)

let distance: Double =  distanceBetweenPoint(origin, point)
```

ä½¿ç”¨typealias:

```
import UIKit

typealias Location = CGPoint
typealias Distance = Double

func distanceBetweenPoint(location: Location,
    toLocation: Location) -> Distance {
        let dx = Distance(location.x - toLocation.x)
        let dy = Distance(location.y - toLocation.y)
        return sqrt(dx * dx + dy * dy)
}

let origin: Location = Location(x: 0, y: 0)
let point: Location = Location(x: 1, y: 1)

let distance: Distance =  distanceBetweenPoint(origin, toLocation: point)
```

<br/>

> <h3 id='èŒƒå‹ä¸­ä½¿ç”¨'>èŒƒå‹ä¸­ä½¿ç”¨</h3>

ä¸€èˆ¬åœ¨ç½‘ç»œè¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬çš„å›è°ƒå‡½æ•°æ€»ä¼šæºå¸¦ä¸€äº›å…³äºå½“å‰ç½‘ç»œè¯·æ±‚çš„ç›¸å…³ä¿¡æ¯ï¼Œç”¨äºæˆ‘ä»¬çš„ Debug è¿‡ç¨‹ã€‚

```
typealias Handler<Number> = (Number, HTTPResponse?, Context) -> Void

typealias Success = Handler<Int>

typealias Failure = Handler<Error>

typealias Progress = Handler<Double>


class MyManager {
    var successHandler:Success?
    var failureHandler:Failure?
    //...
    func foo(success: Success, failure: Failure) {
        if isSuccess {
            success()
        } else {
            failure()
        }
    }

    func bar(success: @escaping Success, failure: @escaping Failure) {
        successHandler = success
        failureHandler = failure
        internalHandle()
    }
    // ...
    func internalHandle() {
        //...
    }
}
```

è¿™æ ·,æˆ‘ä»¬å®šä¹‰çš„Successã€Failure å’Œ Progress èƒ½å¤Ÿä¼ é€’æ›´å¤šçš„æ•°æ®



<br/>
<br/>

> <h3 id='é—­åŒ…åˆ«åç®€åŒ–'>é—­åŒ…åˆ«åç®€åŒ–</h3>

```
typealias Success = (Int) -> Int
typealias Failure = (Error) -> Void
typealias Progress = (Double) -> Void

class MyHttpManager {
    var successHandler:Success?
    var failureHandler:Failure?
    //...
    func foo(success: Success, failure: Failure) {
        if isSuccess {
            success()
        } else {
            failure()
        }
    }

    func bar(success: @escaping Success, failure: @escaping Failure) {
        successHandler = success
        failureHandler = failure
        internalHandle()
    }
    // ...
    func internalHandle() {
        //...
    }
}

```


<br/><br/>

> <h3 id='ä¸å…ƒç¥–ç»“åˆ'>ä¸å…ƒç¥–ç»“åˆ</h3>

ç±»ä¼¼åœ°ï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹å’Œå…ƒç»„æ¥å®šä¹‰ç±»å‹ï¼Œè€Œä¸å¿…å»å®šä¹‰ä¸€ä¸ª Structã€‚

```
typealias TypedUserInfoKey<T> = (key: String, type: T.Type)

let integerTypedKey = TypedUserInfoKey(key: "Foo", type: Int.self)
```
å°±è·Ÿå£°æ˜ç»“æ„ä½“ä¸€æ ·ï¼Œæˆ‘ä»¬ä¼¼ä¹å£°æ˜ä¸€ä¸ªå…·æœ‰é€ä¸€æˆå‘˜æ„é€ å™¨çš„å…ƒç¥–ã€‚


<br/><br/>

> <h3 id='ç»„åˆåè®®'>ç»„åˆåè®®</h3>

æœ‰æ—¶ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼šå­˜åœ¨å¤šä¸ªåè®®ï¼Œå¹¶ä¸”æœ‰ä¸€ç§ç‰¹å®šçš„ç±»å‹éœ€è¦å®ç°æ‰€æœ‰åè®®ã€‚
ä¾‹å¦‚ï¼Œåœ¨ Swift ä¸­çš„ Codable åè®®ï¼Œå°±æ˜¯ Decodable å’Œ Encodable ä¸¤ä¸ªåè®®çš„ Typealiasï¼š

```
typealias Codable = Decodable & Encodable
é€šè¿‡è¿™ç§ç»„åˆåè®®çš„æ–¹å¼ï¼Œæˆ‘ä»¬çš„ä»£ç æ›´å…·å¯è¯»æ€§ã€‚å¦ä¸€ä¸ªä¾‹å­å°±æ˜¯ï¼š
// è½½äºº
protocol CarriesPassengers { }

// è½½è´§
protocol CarriesCargo { }
    
//é™†åœ°
protocol OnRoad { }

//æ°´ä¸Š
protocol OnWater { }
//è½¦
typealias Car = CarriesPassengers & CarriesCargo & OnRoad
//èˆ¹
typealias Boat = CarriesPassengers & CarriesCargo & OnWater
```
æˆ‘ä»¬å¯ä»¥é€šè¿‡ç»„åˆåŠŸèƒ½æ¥å®ç°ä¸åŒçš„ç±»çš„å®šä¹‰ï¼Œè¿™ä¸å¤±ä¸ºä¸€ä¸ªè§£è€¦çš„å¥½åŠæ³•




<br/><br/><br/>

> <h3 id='å…³è”å±æ€§'>å…³è”å±æ€§</h3>




æˆ‘ä»¬åœ¨ Day11 

- åè®®å’Œæ‹“å±• ä¸­è®²è§£äº†åè®®ä¸­å…³è”ç±»å‹çš„ç”¨æ³•ã€‚

```
protocol Identifiable {
    associatedtype ID: Equatable & CustomStringConvertible
    var id: ID { get }
}

struct Book: Identifiable {
    let id: String
}

struct Clothes: Identifiable {
    let id: Int
}
```

å½“æˆ‘ä»¬ä¸æƒ³åœ¨åè®®ä¸­å£°æ˜ä¸€ä¸ªéµå¾ªå…³è”ç±»å‹çš„ç”¨æ³•æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Typealias  æ¥å®ç°

```
protocol Identifiable {
    associatedtype ID: Equatable & CustomStringConvertible
}

struct Book: Identifiable {
    typealias ID = String
    
    let id: ID
}

struct Clothes: Identifiable {
    typealias ID = Int
    
    let id: ID
}
```


<br/><br/><br/>

> <h3 id='associatedTypeåè®®å…³è”ç±»å‹'>associatedTypeåè®®å…³è”ç±»å‹</h3>


&emsp;  å®šä¹‰ä¸€ä¸ªåè®®æ—¶ï¼Œæœ‰çš„æ—¶å€™å£°æ˜ä¸€ä¸ªæˆ–å¤šä¸ªå…³è”ç±»å‹ä½œä¸ºåè®®å®šä¹‰çš„ä¸€éƒ¨åˆ†å°†ä¼šéå¸¸æœ‰ç”¨ã€‚å…³è”ç±»å‹ä¸ºåè®®ä¸­çš„æŸä¸ªç±»å‹ï¼ˆä»»æ„ç±»å‹ï¼‰æä¾›äº†ä¸€ä¸ªå ä½åï¼ˆæˆ–è€…è¯´åˆ«åï¼‰ï¼Œå…¶ä»£è¡¨çš„å®é™…ç±»å‹åœ¨åè®®è¢«é‡‡çº³æ—¶æ‰ä¼šè¢«æŒ‡å®šã€‚ä½ å¯ä»¥é€šè¿‡ associatedtype å…³é”®å­—æ¥æŒ‡å®šå…³è”ç±»å‹ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨æ¥è®¾è®¡apiç”¨æ¥æ„å»ºç»Ÿä¸€çš„å¤„ç†ç»“æ„ã€‚æ¯”å¦‚ä½¿ç”¨åè®®å£°æ˜æ›´æ–°cellçš„æ–¹æ³•ã€‚


```
class  detail {
          //some properties
}
class  briefdetail {
          //some properties
}
class  skudetail {
          //some properties
}

protocol DTCellItemPro {
    associatedtype  T
   func updateCell(_ data: T)
}

class MyDTTableViewCell: UITableViewCell, DTCellItemPro{
    ///åœ¨ç±»å‹ä¸ç¡®å®šçš„æƒ…å†µä¸‹ï¼Œéœ€è¦å£°æ˜ä¸€ä¸ªæˆ–å¤šä¸ªå…³è”ç±»å‹ã€‚
   ///ç›¸å½“äºä¸€ä¸ªå ä½åã€‚ä½œä¸ºå…³è”ç±»å‹åœ¨åè®®è¢«å®ç°ä¹‹å‰æ˜¯ä¸éœ€è¦æŒ‡å®šçš„ã€‚å…³é”®å­—ï¼štypealias
    typealias T = detail
    func updateCell(_ data: detail) {
             
    }
}
class MySKUTableViewCell: UITableViewCell, DTCellItemPro{
    typealias T = skudetail
    func updateCell(_ data: skudetail) {
             
    }
}
```


<br/>

**Demo**

```
protocol Container {
    associatedtype Item // å®šä¹‰å…³è”ç±»å‹ Item

    var count: Int { get } // åè®®è¦æ±‚å®ç°ä¸€ä¸ªè¿”å›å…ƒç´ æ•°é‡çš„å±æ€§
    mutating func add(item: Item) // åè®®è¦æ±‚å®ç°ä¸€ä¸ªæ·»åŠ å…ƒç´ çš„æ–¹æ³•
    func getItem(at index: Int) -> Item // åè®®è¦æ±‚å®ç°ä¸€ä¸ªè·å–æŒ‡å®šä½ç½®å…ƒç´ çš„æ–¹æ³•
}

struct MyContainer<T>: Container {
    // åœ¨è¿™é‡Œï¼Œå…³è”ç±»å‹ Item è¢«å®é™…ç±»å‹ T æ›¿ä»£
    typealias Item = T

    private var items: [T] = []

    var count: Int {
        return items.count
    }

    mutating func add(item: T) {
        items.append(item)
    }

    func getItem(at index: Int) -> T {
        return items[index]
    }
}

// ä½¿ç”¨ MyContainer
var myContainer = MyContainer<String>()
myContainer.add(item: "Hello")
myContainer.add(item: "World")

print("Container count: \(myContainer.count)")
print("Item at index 1: \(myContainer.getItem(at: 1))")
```

&emsp; åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼ŒContainer åè®®å®šä¹‰äº†ä¸€ä¸ªå…³è”ç±»å‹ Itemï¼Œè¡¨ç¤ºå®¹å™¨ä¸­çš„å…ƒç´ ç±»å‹ã€‚ç„¶åï¼ŒMyContainer ç»“æ„ä½“éµå¾ªäº† Container åè®®ï¼Œå¹¶ä½¿ç”¨ typealias æ¥æŒ‡å®šå…³è”ç±»å‹ Item çš„å…·ä½“ç±»å‹ä¸º Tã€‚è¿™æ ·ï¼ŒMyContainer ç»“æ„ä½“å°±å¯ä»¥ä½¿ç”¨æ³›å‹æ¥å®šä¹‰å®¹å™¨çš„å…ƒç´ ç±»å‹ã€‚



***
<br/><br/><br/>
> <h2 id="whereä¸èŒƒå‹çº¦æŸ">whereä¸èŒƒå‹çº¦æŸ</h2>

ä½ æƒ³è¦ï¼š

* ä½¿ç”¨ `enum APActivatorPeriod: Int, ActivatorPeriodProtocol { ... }` ä½œä¸ºç±»å‹ä¼ å…¥æ³›å‹ `DeviceActivatorConnectingView<T>` ä¸­ï¼›
* åœ¨æ–¹æ³•é‡Œè°ƒç”¨ `view.updateView(period: .connectNet)` ä¹‹ç±»çš„æ–¹æ³•ï¼›

é‚£å°±éœ€è¦ï¼š

1. `APActivatorPeriod` éµå®ˆ `ActivatorPeriodProtocol`ï¼›
2. `DeviceActivatorConnectingView` æ˜¯æ³›å‹ç±»ï¼Œä½†è¦æ±‚ `T == APActivatorPeriod`ï¼›
3. åœ¨ç±»ä¸­ä½¿ç”¨ `.connectNet` æšä¸¾å€¼æ—¶ï¼Œ**å‰ææ˜¯ `T` æœ¬èº«æ˜¯é‚£ä¸ªæšä¸¾ç±»å‹**ï¼ˆå› ä¸º `.connectNet` æ˜¯é™æ€æˆå‘˜ï¼‰ã€‚

<br/>

**1.æšä¸¾å®šä¹‰**

```swift
enum APActivatorPeriod: Int, ActivatorPeriodProtocol {
    case connectDevice = 1
    case connectNet = 2

    var name: String {
        switch self {
        case .connectDevice: return "è¿æ¥è®¾å¤‡"
        case .connectNet: return "è¿æ¥ç½‘ç»œ"
        }
    }
}
```

<br/>

**2.æ³›å‹ç±»æ”¯æŒ `updateView(period:)`ï¼Œä½†åªå…è®¸ `APActivatorPeriod`**

```swift
class DeviceActivatorConnectingView<T: ActivatorPeriodProtocol> {
    func updateView(period: T) {
        print("æ›´æ–°è§†å›¾çŠ¶æ€ï¼š\(period.name)")
    }
}
```

<br/>

**3.ä½¿ç”¨åœºæ™¯ï¼ˆåªé’ˆå¯¹ `APActivatorPeriod`ï¼‰**

```swift
func showInfo<T: ActivatorPeriodProtocol>(type: T.Type) where T == APActivatorPeriod {
    let view = DeviceActivatorConnectingView<APActivatorPeriod>()
    view.updateView(period: .connectNet)  // è¿™é‡Œå¯ä»¥ç”¨ .connectNet
}
```

è¿™æ · `view.updateView(period: .connectNet)` ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸º Swift å·²ç»çŸ¥é“ `T == APActivatorPeriod`ï¼Œå¯ä»¥ä½¿ç”¨å®ƒçš„é™æ€æˆå‘˜ã€‚

<br/> 

**âœ… å®Œæ•´ç¤ºä¾‹ä»£ç ï¼š**

```swift
import Foundation

// MARK: - åè®®
protocol ActivatorPeriodProtocol {
    var name: String { get }
}

// MARK: - æšä¸¾ç±»å‹ä½œä¸ºçŠ¶æ€
enum APActivatorPeriod: Int, ActivatorPeriodProtocol {
    case connectDevice = 1
    case connectNet = 2

    var name: String {
        switch self {
        case .connectDevice: return "è¿æ¥è®¾å¤‡"
        case .connectNet: return "è¿æ¥ç½‘ç»œ"
        }
    }
}

// MARK: - æ³›å‹ç±»
class DeviceActivatorConnectingView<T: ActivatorPeriodProtocol> {
    func updateView(period: T) {
        print("æ›´æ–°è§†å›¾çŠ¶æ€ï¼š\(period.name)")
    }
}

// MARK: - è°ƒç”¨
func showInfo<T: ActivatorPeriodProtocol>(type: T.Type) where T == APActivatorPeriod {
    let view = DeviceActivatorConnectingView<APActivatorPeriod>()
    view.updateView(period: .connectNet)  // âœ… ä½¿ç”¨ enum case
}

// MARK: - è¿è¡Œ
showInfo(type: APActivatorPeriod.self)
```

<br/>

 **è¾“å‡º**

```
æ›´æ–°è§†å›¾çŠ¶æ€ï¼šè¿æ¥ç½‘ç»œ
```

<br/> 

**ğŸ” æ‰©å±•**

ä½ å¯ä»¥ç»§ç»­ç”¨ç±»ä¼¼çš„æ–¹å¼å®šä¹‰ä¸åŒæšä¸¾ç±»å‹ï¼Œæ¯”å¦‚ï¼š

```swift
enum IPCActivatorPeriod: Int, ActivatorPeriodProtocol { ... }
```

ç„¶åï¼š

```swift
func showInfo<T: ActivatorPeriodProtocol>(type: T.Type) where T == IPCActivatorPeriod {
    let view = DeviceActivatorConnectingView<T>()
    view.updateView(period: .someCase) // ç¼–è¯‘å™¨çŸ¥é“å…·ä½“ç±»å‹
}
```



<br/><br/><br/>
> <h3 id='Anyå’ŒAnyObject'>Anyå’ŒAnyObject</h3>


* AnyObject å¯ä»¥ä»£è¡¨ä»»ä½• class ç±»å‹çš„å®ä¾‹*
* Any å¯ä»¥è¡¨ç¤ºä»»æ„ç±»å‹ï¼Œç”šè‡³åŒ…æ‹¬æ–¹æ³•ï¼ˆfuncï¼‰ç±»å‹*

æ¦‚å¿µä¸å¤šåšä»‹ç»äº†ï¼Œå¯ä»¥å‚è€ƒï¼š[ç‹å· Anyå’ŒAnyObject](http://swifter.tips/any-anyobject/)

<br/>

* ç±»å‹åˆ¤æ–­å’Œåº”ç”¨

```
class Boy {
}

class Girl {
}

func enter(_ child: AnyObject) {
    // æ–¹æ³•1
    switch child {
    case let boy as Boy:
        print("boy")
    case let girl as Girl:
        print("girl")
    default:
        break
    }
    
    // æ–¹æ³•2
    if child is Boy {
        print("boy")
    }
    if child is Girl {
        print("girl")
    }
}

enter(Boy())
```



<br/><br/><br/>

> <h3 id='AnyClass'>AnyClass</h3>
 
-  AnyObject.Type

&emsp;  `AnyObject.Type` è¿™ç§æ–¹å¼å¾—åˆ°çš„å°±æ˜¯ä¸€ä¸ªå…ƒç±»å‹`ï¼ˆMetaï¼‰`ï¼Œä¹Ÿå°±æ˜¯ `AnyClass`ã€‚åœ¨ Swift ä¸­è¢«ä¸€ä¸ª typealias å®šä¹‰ï¼š

```
typealias AnyClass = AnyObject.Type
```

<br/>

`.self `ç”¨åœ¨ç±»å‹åé¢å–å¾—ç±»å‹æœ¬èº«ï¼Œç”¨åœ¨å®ä¾‹åé¢å–å¾—å®ä¾‹æœ¬èº«:
`Meta.Type `ä»£è¡¨ `Meta` è¿™ä¸ªç±»å‹çš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªç”¨æ¥å­˜å‚¨` Meta `ç±»å‹çš„å…ƒç±»å‹ã€‚ç„¶åç”¨  `.self `ä» `Meta` ä¸­å–å‡ºå…¶ç±»å‹

```
class Meta {
    var title = ""
    required init(name: String) {
        self.title = name
    }
    
    func method1() {
        print(title)
    }
    
    class func method2() {
        print("class method")
    }
}

let typeMeta : Meta.Type = Meta.self
```

<br/>

- ç±»æ–¹æ³•è°ƒç”¨
- 
&emsp;  å¯ä»¥é€šè¿‡å…ƒç±»å‹ç›´æ¥è°ƒç”¨ ç±»æ–¹æ³•ï¼Œä¸Šé¢ä»£ç ä¸­ Meta ä¸­å£°æ˜äº†ä¸€ä¸ªå®ä¾‹æ–¹æ³•(method1)å’Œä¸€ä¸ªç±»æ–¹æ³•(method2)

```
let typeMeta1 : Meta.Type = Meta.self
typeMeta1.method2()

let typeMeta2: AnyClass = Meta.self
(typeMeta2 as! Meta.Type).method2()
```

<br/>

- å®ä¾‹æ–¹æ³•è°ƒç”¨

&emsp;  å®ä¾‹æ–¹æ³•çš„è°ƒç”¨è¦å…ˆå£°æ˜å®ä¾‹ï¼Œç›´æ¥é€šè¿‡ init æ–¹æ³•è·å–å®ä¾‹å›ºç„¶å¯ä»¥ï¼Œä½†æ˜¯æˆ‘ä»¬è¿™é‡Œä»‹ç»å¦‚æœä½¿ç”¨å…ƒç±»å‹è·å–å®ä¾‹ï¼Œç”šè‡³è°ƒç”¨å®ä¾‹æ–¹æ³•

```
let typeMeta : Meta.Type = Meta.self
typeMeta.method1(Meta(name: "new meta"))()
// print: new meta
```

&emsp;  ä¸Šé¢ä»£ç ä¸­` typeMeta` æ˜¯ `Meta.Type `ç±»å‹ï¼Œé€šè¿‡å®ƒè°ƒç”¨å®ä¾‹æ–¹æ³• method1éœ€è¦ä¼ å…¥ä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œç„¶åç³»ç»Ÿä¼šè¿”å›è¿™ä¸ªå®ä¾‹æ–¹æ³•æœ¬èº«ã€‚å¦‚æœä¸Šé¢ç¬¬äºŒè¡Œä»£ç ä¸å¥½ç†è§£ï¼Œçœ‹è¿™é‡Œ :

```
let f = typeMeta.method1(Meta(name: "new meta"))
f()
```

æˆ–è€…

```
let meta = typeMeta.init(name: "type init")
meta.method1()
```

&emsp;  è°ƒç”¨å®ä¾‹æ–¹æ³•ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥åˆ›å»ºå®ä¾‹å†è°ƒç”¨å‘¢ï¼Ÿä¾‹å¦‚ï¼šMeta().method1()ã€‚ç¡®å®ï¼Œå¯¹äºä¸€ä¸ªç‹¬ç«‹çš„ç±»å‹æ¥è¯´æˆ‘ä»¬å®Œå…¨æ²¡æœ‰å¿…è¦å…³å¿ƒå®ƒçš„å…ƒç±»å‹ï¼Œä½†æ˜¯å…ƒç±»å‹æˆ–è€…å…ƒç¼–ç¨‹çš„æ¦‚å¿µçš„ç†è§£å¯ä»¥è®©ä½ åœ¨è®¾è®¡æ¡†æ¶æ—¶é¿å…ä¸æ–­æ”¹åŠ¨ä»£ç ã€‚ä¸‹é¢è¿™æ®µä»£ç ä¾¿å¯çœ‹å‡ºå…ƒç±»å‹çš„ä¼˜åŠ¿ï¼š

```
class vc1: UIViewController {
}
class vc2: UIViewController {
}

func setupViewControllers(_ vcTypes: [AnyClass]) {
    for vctype in vcTypes {
        if vctype is UIViewController.Type {
            let vc = vctype.init()
            print(vc)
        }
    }
}

let usingvcTypes: [AnyClass] = [vc1.self, vc2.self]
setupViewControllers(usingvcTypes)
```

&emsp; ç±»ä¼¼è¿™æ ·çš„ç”¨æ³•ï¼Œå°±å¯ä»¥é¿å…ä½ åœ¨å¼€å‘ä¸­ä¸æ–­ä¿®æ”¹ä»£ç ï¼Œä¹Ÿè¿«ä½¿ä½ åœ¨å°è£…ä»£ç æ—¶ä¸æ–­ä¸¥æ ¼è¦æ±‚è‡ªå·±ã€‚



<br/><br/><br/>

> <h3 id='Selfå’ŒdiscardableResult'>Self å’Œ discardableResult</h3>

```
class CustomClass {
    var a: Int
    var b: Int
    
    init(a: Int, b: Int) {
        self.a = a
        self.b = b
    }
    
    @discardableResult
    func setValueA(parameter: Int) -> Self {
        self.a = parameter
        
        return self
    }
    
    deinit {
        print("CustomClass é‡Šæ”¾")    
    }
    
}


//è°ƒç”¨
let obj = CustomClass(a: 1, b: 2)
//æœ‰äº†è¿™ä¸ªdiscardableResultå…³é”®å­—ï¼Œå¯ä»¥æ²¡æœ‰è­¦å‘Šâš ï¸äº†
obj.setValueA(parameter: 3)
print("objA a: \(obj.a)")
```




<br/><br/><br/>

> <h3 id='derf'>derf</h3>


[derf çš„ä½¿ç”¨åœºæ™¯](https://www.jianshu.com/p/478cbb5cf8a1)



<br/><br/><br/>

> <h3 id='@inline(never)å’Œ@inline(__always)'>@inline(never) å’Œ @inline(__always)</h3>

```
@inline(never) // å£°æ˜è¿™ä¸ªå‡½æ•°neverç¼–è¯‘æˆinlineçš„å½¢å¼

@inline(__always) // å£°æ˜è¿™ä¸ªå‡½æ•°æ€»æ˜¯ç¼–è¯‘æˆinlineçš„å½¢å¼
```

inlineå‡½æ•°å¯ä»¥ç”¨ é—­åŒ… çš„å½¢å¼å®ç°



<br/><br/><br/>



> <h3 id='@_exported'>@_exported</h3>


**`å®ç°PCHçš„åŠŸèƒ½`**

```
@_exportedç”¨äºåœ¨è‡ªå·±æ¨¡å—ä¸­å¯¼å‡ºå…¶ä»–æ¨¡å—ã€‚

æ¯”å¦‚ï¼Œè‡ªå·±å®šä¹‰äº†ä¸€ä¸ª A æ¨¡å—ã€‚
åœ¨ A æ¨¡å—ä¸­å®šä¹‰ï¼š

@_exported import UIKit

å½“æˆ‘ä»¬å¼•å…¥ A æ¨¡å—ï¼ˆimport Aï¼‰æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ UIKit ä¸­çš„ç¬¦å·ã€‚

````


&emsp;  åœ¨ä½¿ç”¨å˜é‡æ—¶ï¼Œé»˜è®¤åœ¨å˜é‡å‰åŠ  __strong;
&emsp;  å¦‚:

```
 id __strong  test = [[Test alloc] init];
```

<br/>


&emsp;  **`ä½¿ç”¨ init/new/copy/mutableCopy æ–¹æ³•è¿”å›å€¼å–å¾—çš„å¯¹è±¡æ˜¯è‡ªå·±ç”Ÿæˆå¹¶æŒæœ‰çš„ã€‚ä½†é™¤äº†è¿™äº›æ–¹æ³•å¤–ç”Ÿæˆçš„å¯¹è±¡ï¼Œæ˜¯ç”Ÿæˆä½†ä¸æŒæœ‰ï¼Œå¯ä»¥é€šè¿‡ä¸€äº›ä¿®é¥°è¯æ¥è§£å†³ã€‚å¦‚ï¼š__strong`**

<br/><br/><br/>

>## <h3 id='__strongä¿®é¥°ç¬¦'>**__strongä¿®é¥°ç¬¦**</h3>

&emsp;  `idç±»å‹å’Œå¯¹è±¡ç±»å‹çš„æ‰€æœ‰æƒä¿®é¥°ç¬¦é»˜è®¤ä¸º__strongä¿®é¥°ç¬¦ï¼Œæ‰€ä»¥ä¸éœ€è¦å†å†™ä¸Šâ€œ__strongâ€ã€‚`

&emsp;  é€šè¿‡__strongä¿®é¥°ç¬¦ï¼Œä¸å¿…å†æ¬¡é”®å…¥retainæˆ–è€…releaseï¼Œå®Œç¾çš„æ»¡è¶³äº†â€œå¼•ç”¨æŠ€æœ¯å¼å†…å­˜ç®¡ç†çš„æ€è€ƒæ–¹å¼â€

```
id __strong        obj0;
id __weak          obj1;
id __autoreleasing obj2;

//ä¸Šé¢çš„èµ‹å€¼ç­‰åŒäºä¸‹é¢çš„ä»£ç æ®µ
id __strong        obj0 = nil;
id __weak          obj1 = nil;
id __autoreleasing obj2 = nil;
```


<br/><br/><br/>

> <h3 id='__weakä¿®é¥°ç¬¦'> **__weakä¿®é¥°ç¬¦** </h3>

å¾ªç¯å¼•ç”¨å®¹æ˜“å‘ç”Ÿå†…å­˜æ³„æ¼ã€‚

**`å†…å­˜æ³„æ¼`** å°±æ˜¯åº”å½“åºŸå¼ƒçš„å¯¹è±¡åœ¨è¶…å‡ºå…¶ç”Ÿå­˜å‘¨æœŸåç»§ç»­å­˜åœ¨ã€‚


<br/><br/><br/>

>## <h3 id='__unsafe_unretainedä¿®é¥°ç¬¦'>**__unsafe_unretainedä¿®é¥°ç¬¦**</h3>

é™„æœ‰__unsafe_unretainedä¿®é¥°ç¬¦çš„å˜é‡ä¸å±äºç¼–è¯‘å™¨çš„å†…å­˜ç®¡ç†å¯¹è±¡ã€‚


***
<br/><br/><br/>
> <h2 id="æš´éœ²ç»™OCä½¿ç”¨@objcMembers">æš´éœ²ç»™OCä½¿ç”¨@objcMembers</h2>
åœ¨ Swift ä¸­ï¼Œ`@objcMembers` æ˜¯ä¸€ä¸ªå±æ€§ï¼ˆattributeï¼‰ï¼Œç”¨äºç±»ï¼ˆ`class`ï¼‰å£°æ˜ä¸Šï¼Œä½œç”¨æ˜¯ï¼š

> è‡ªåŠ¨ä¸ºç±»ä¸­çš„æ‰€æœ‰ **ç¬¦åˆæ¡ä»¶** çš„æˆå‘˜ï¼ˆå±æ€§ã€æ–¹æ³•ç­‰ï¼‰åŠ ä¸Š `@objc` å±æ€§ï¼Œä½¿å®ƒä»¬å¯ä»¥æš´éœ²ç»™ Objective-C ä½¿ç”¨ï¼ˆæ¯”å¦‚è¢« Objective-C è°ƒç”¨ï¼Œæˆ–ç”¨äº KVC/KVOã€Selector ç­‰æœºåˆ¶ï¼‰ã€‚

---

### âœ… ä½¿ç”¨åœºæ™¯

* Swift ç±»éœ€è¦ä¸ Objective-C äº¤äº’æ—¶ï¼ˆæ¯”å¦‚å’Œ OC å†™çš„åº“äº¤äº’ï¼Œæˆ–è€…æ”¯æŒ `@objc` çš„ç‰¹æ€§ï¼Œæ¯”å¦‚ `Selector`ã€KVOã€NSCoding ç­‰ï¼‰ã€‚
* å‡å°‘æ¯ä¸ªæˆå‘˜å•ç‹¬åŠ  `@objc` çš„ç¹çå†™æ³•ã€‚

---

### ğŸ” ç¤ºä¾‹å¯¹æ¯”

#### ä¸ä½¿ç”¨ `@objcMembers`

```swift
class MyClass: NSObject {
    @objc var name: String = ""
    @objc func greet() {
        print("Hello")
    }
}
```

#### ä½¿ç”¨ `@objcMembers`

```swift
@objcMembers
class MyClass: NSObject {
    var name: String = ""
    func greet() {
        print("Hello")
    }
}
```

ä¸¤ä¸ªç±»åœ¨æš´éœ²ç»™ Objective-C æ—¶æ˜¯ç­‰ä»·çš„ã€‚

---

### âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¿…é¡»ç»§æ‰¿è‡ª `NSObject`** æ‰èƒ½ä½¿ç”¨ `@objcMembers`ã€‚å¦åˆ™ä¼šæŠ¥ç¼–è¯‘é”™è¯¯ã€‚
2. **åªæœ‰å…¼å®¹ Objective-C çš„ç±»å‹å’Œæˆå‘˜** æ‰èƒ½æˆåŠŸæš´éœ²ï¼ˆæ¯”å¦‚ `String`ã€`Int`ã€`NSObject` å­ç±»ç­‰ï¼‰ã€‚
3. å¦‚æœæˆå‘˜ä¸æ»¡è¶³ `@objc` è¦æ±‚ï¼ˆæ¯”å¦‚æ˜¯ Swift ç‰¹æœ‰çš„ç±»å‹ï¼Œç»“æ„ä½“ç­‰ï¼‰ï¼Œå³ä½¿ç”¨äº† `@objcMembers`ï¼Œä¹Ÿä¸ä¼šè‡ªåŠ¨å˜æˆ `@objc`ã€‚

---

### âœ… æ€»ç»“

| ç‰¹æ€§       | è¯´æ˜                                        |
| -------- | ----------------------------------------- |
| ä½œç”¨èŒƒå›´     | æ•´ä¸ªç±»çš„æˆå‘˜                                    |
| å¿…é¡»ç»§æ‰¿è‡ª    | `NSObject`                                |
| å¯æš´éœ²çš„æˆå‘˜é™åˆ¶ | ä»…é™å¯è¡¨ç¤ºä¸º Objective-C çš„æˆå‘˜                    |
| å¸¸ç”¨äº      | KVOã€NSCodingã€Selectorã€ä¸ Objective-C æ¡¥æ¥ç­‰åœºæ™¯ |

æ˜¯å¦ä½ æ˜¯åœ¨å†™å’Œ Objective-C äº¤äº’çš„ä»£ç ï¼Œæƒ³äº†è§£å¦‚ä½•è®© Swift ç±»æ”¯æŒ KVO æˆ–å…¶ä»–ç‰¹æ€§ï¼Ÿæˆ‘å¯ä»¥å¸®ä½ å…·ä½“åˆ†æã€‚



<br/>

***
<br/><br/><br/>

> <h1 id="ç¼–è¯‘å±æ€§">ç¼–è¯‘å±æ€§</h1>

<br/><br/><br/>

> <h2 id="NS_SWIFT_NAMEåœ¨Objective-CæŒ‡å®šSwiftçš„åç§°">NS_SWIFT_NAMEåœ¨Objective-CæŒ‡å®šSwiftçš„åç§°</h2>

`NS_SWIFT_NAME` æ˜¯ä¸€ä¸ªç¼–è¯‘å™¨å±æ€§ï¼Œç”¨äºåœ¨ Swift ä¸­**æŒ‡å®š Objective-C ç¬¦å·çš„ Swift åç§°**ã€‚åœ¨å°† Objective-C çš„ API æ›éœ²ç»™ Swift æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `NS_SWIFT_NAME` ä¸ºæ–¹æ³•ã€ç±»ã€æšä¸¾ã€å±æ€§ç­‰æŒ‡å®šæ›´ç¬¦åˆ Swift é£æ ¼çš„åç§°ï¼Œä½¿ä»£ç æ›´ç®€æ´ã€ç¬¦åˆ Swift å‘½åä¹ æƒ¯ã€‚

### ä½œç”¨
åœ¨æ··åˆå¼€å‘æ—¶ï¼Œé€šè¿‡ `NS_SWIFT_NAME` å¯ä»¥ï¼š
1. **æå‡ API å¯è¯»æ€§**ï¼šä¸º Swift ä»£ç æŒ‡å®šç®€æ´ã€ç›´è§‚çš„åç§°ï¼Œä½¿å¾— Objective-C çš„å†—é•¿æˆ–ä¸ç¬¦åˆ Swift é£æ ¼çš„å‘½åå˜å¾—æ›´åŠ ç¬¦åˆ Swift è§„èŒƒã€‚
2. **ä¾¿äºä½¿ç”¨**ï¼šå‡å°‘å¤æ‚çš„ç±»å‹åç§°ã€æ–¹æ³•åè½¬æ¢ï¼Œæ–¹ä¾¿å¼€å‘è€…è°ƒç”¨ APIã€‚

### å¸¸è§ç”¨æ³•ç¤ºä¾‹

#### 1. ç»™ç±»æˆ–æ–¹æ³•é‡å‘½å
å‡è®¾æœ‰ä¸€ä¸ª Objective-C ç±»æˆ–æ–¹æ³•ï¼Œå…¶åç§°ä¸ç¬¦åˆ Swift å‘½åä¹ æƒ¯ï¼Œå¯ä»¥ä½¿ç”¨ `NS_SWIFT_NAME` æŒ‡å®š Swift ä¸­æ˜¾ç¤ºçš„åç§°ã€‚

**Objective-C ä»£ç **
```objc
// Objective-C ä¸­çš„ä¸€ä¸ªç±»
@interface MyOldClassName : NSObject
- (void)performOperationWithArgument:(NSString *)argument NS_SWIFT_NAME(performOperation(argument:));
@end
```

**Swift ä¸­çš„æ•ˆæœ**
```swift
let myObject = MyOldClassName()
myObject.performOperation(argument: "test") // ä½¿ç”¨ Swift æ ·å¼çš„è°ƒç”¨
```

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ`performOperationWithArgument:` è¢«é‡å‘½åä¸º `performOperation(argument:)`ï¼Œè¿™æ ·å°±ç¬¦åˆ Swift ä¸­çš„å‚æ•°æ ‡ç­¾è¯­æ³•ã€‚

#### 2. ä¿®æ”¹æšä¸¾åç§°
åœ¨ Objective-C ä¸­ï¼Œæšä¸¾é€šå¸¸æœ‰å‰ç¼€ï¼Œæ¯”å¦‚ `MyEnumValueA`ã€`MyEnumValueB`ã€‚ä½¿ç”¨ `NS_SWIFT_NAME` å¯ä»¥åœ¨ Swift ä¸­å®šä¹‰æ›´ç®€æ´çš„åç§°ã€‚

**Objective-C ä»£ç **
```objc
typedef NS_ENUM(NSInteger, MyEnum) {
    MyEnumValueA NS_SWIFT_NAME(valueA),
    MyEnumValueB NS_SWIFT_NAME(valueB),
};
```

**Swift ä¸­çš„æ•ˆæœ**
```swift
let myValue: MyEnum = .valueA // æ›´åŠ ç®€æ´çš„ Swift æšä¸¾ç”¨æ³•
```

#### 3. ä¿®æ”¹å±æ€§åç§°
ä¹Ÿå¯ä»¥ä¸ºå±æ€§æŒ‡å®š Swift åç§°ã€‚

**Objective-C ä»£ç **
```objc
@property (nonatomic, copy) NSString *userFullName NS_SWIFT_NAME(fullName);
```

**Swift ä¸­çš„æ•ˆæœ**
```swift
let user = MyClass()
user.fullName = "John Doe" // ä½¿ç”¨æ›´ç¬¦åˆ Swift é£æ ¼çš„å±æ€§å
```

### ä½¿ç”¨ `NS_SWIFT_NAME` çš„æ³¨æ„äº‹é¡¹
- **å‘½åä¸€è‡´æ€§**ï¼šç¡®ä¿ Swift åç§°ç¬¦åˆ Swift å‘½åæƒ¯ä¾‹ï¼Œé€šå¸¸ä½¿ç”¨é©¼å³°å‘½åï¼Œç®€æ´æ¸…æ™°ã€‚
- **ä¿æŒå‚æ•°ä¸€è‡´**ï¼šå¦‚æœæ›´æ”¹æ–¹æ³•åæ—¶æ›´æ”¹äº†å‚æ•°æ ‡ç­¾ï¼Œè¦ç¡®ä¿æ–¹æ³•åŠŸèƒ½ä¿æŒä¸€è‡´ã€‚
- **è·¨è¯­è¨€å…¼å®¹æ€§**ï¼šé€šè¿‡ `NS_SWIFT_NAME`ï¼Œå¯ä»¥ä¿æŒ Objective-C å’Œ Swift API çš„ä¸€è‡´æ€§ï¼Œæ–¹ä¾¿è·¨è¯­è¨€è°ƒç”¨ã€‚

### æ€»ç»“
`NS_SWIFT_NAME` æ˜¯ä¸€ä¸ªæœ‰åŠ©äºåœ¨ Swift ä¸­ä¼˜åŒ– Objective-C API å‘½åçš„ç¼–è¯‘å™¨æŒ‡ä»¤ï¼Œé€šè¿‡å®ƒå¯ä»¥å®ç°æ›´ Swift é£æ ¼çš„è°ƒç”¨æ–¹å¼ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œä¸€è‡´æ€§ã€‚åœ¨æ··åˆè¯­è¨€é¡¹ç›®ä¸­ï¼Œ`NS_SWIFT_NAME` æ˜¯æå‡æ¥å£å‹å¥½åº¦å’Œå¼€å‘æ•ˆç‡çš„æœ‰åŠ›å·¥å…·ã€‚



