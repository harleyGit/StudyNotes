> <h2 id=""></h2>
- [**åŸºæœ¬ç”¨æ³•**](#åŸºæœ¬ç”¨æ³•)
	- [**Reactç¯å¢ƒæ­å»º**](#Reactç¯å¢ƒæ­å»º)
	- [**JSXç®€ä»‹**](#JSXç®€ä»‹)
		- [åŸç†](#åŸç†)
	- [**CSSé«˜çº§ä½¿ç”¨**](#CSSé«˜çº§ä½¿ç”¨)
		- [æ–‡ä»¶æ¨¡å—åŒ–](#æ–‡ä»¶æ¨¡å—åŒ–)
	- [propsç”¨æ³•](#propsç”¨æ³•)
		- [propsç±»å‹éªŒè¯](#propsç±»å‹éªŒè¯)
		- [è®¾ç½®é»˜è®¤å€¼](#è®¾ç½®é»˜è®¤å€¼)
		- [Childrençš„ç”¨æ³•](https://segmentfault.com/a/1190000011527160)
	- [ReactDOM](#ReactDOM)
		- [ReactDom.render](#ReactDom.render)
	- [Reactè§†å›¾æ¸²æŸ“](#Reactè§†å›¾æ¸²æŸ“)
	- [é¡¹ç›®æ–‡ä»¶æè¿°](#é¡¹ç›®æ–‡ä»¶æè¿°)
		- [importå’Œrequire](#importå’Œrequire)
	- [ç”Ÿå‘½å‘¨æœŸæ–¹æ³•](#ç”Ÿå‘½å‘¨æœŸæ–¹æ³•) 
	- [æ„é€ å‡½æ•°constructor](#æ„é€ å‡½æ•°constructor)
	- [React Hooks](#ReactHooks)
		- [useState](#useState)
			- [å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ çŠ¶æ€useState ](#å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ çŠ¶æ€useState)
		- [useEffect](#useEffect)
			- [å‰¯ä½œç”¨useEffect3ç§ä½¿ç”¨åœºæ™¯](#å‰¯ä½œç”¨useEffect3ç§ä½¿ç”¨åœºæ™¯)
			- [useEffectä¸­å¤šä¸ªç½‘ç»œè¯·æ±‚å®ä¾‹ç¼–ç ](#useEffectä¸­å¤šä¸ªç½‘ç»œè¯·æ±‚å®ä¾‹ç¼–ç )
			- [useEffectä¸­æ‰§è¡Œå¤šä¸ªç½‘ç»œè¯·æ±‚](#useEffectä¸­æ‰§è¡Œå¤šä¸ªç½‘ç»œè¯·æ±‚)
			- [å‰¯ä½œç”¨é’©å­useEffectæœ«å°¾3ç§å‚æ•°ä½¿ç”¨æ–¹æ³•](#å‰¯ä½œç”¨é’©å­useEffectæœ«å°¾3ç§å‚æ•°ä½¿ç”¨æ–¹æ³•)
		- [useCallback](#useCallback)
		- [useMemo](#useMemo)
			- [useMemoçš„ä¾èµ–æ•°ç»„](#useMemoçš„ä¾èµ–æ•°ç»„)
			- [é•¿è½®è¯¢æ¡ˆä¾‹](#é•¿è½®è¯¢æ¡ˆä¾‹)
	- [React Router](#ReactRouter)
		- [è·¯ç”±Demo](#è·¯ç”±Demo)
	- [å‚æ•°ä¼ é€’](#å‚æ•°ä¼ é€’)
		- [çˆ¶->å­ä¼ å‚](#çˆ¶å­ä¼ å‚)
		- [å­->çˆ¶ç»„ä»¶çš„é€šä¿¡](#å­çˆ¶ç»„ä»¶çš„é€šä¿¡)
		- [å…„å¼ŸèŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡](#å…„å¼ŸèŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡)
		- [contextä¼ å€¼](#contextä¼ å€¼)
		- [è®¢é˜…æ¨¡å‹](#è®¢é˜…æ¨¡å‹)
- [**ES6åŸºç¡€**](#ES6åŸºç¡€)
	- [å¼‚æ­¥ç¼–ç¨‹](#å¼‚æ­¥ç¼–ç¨‹)
- [**é¡¶å±‚API**](#é¡¶å±‚API)
	- [createElement](#createElement)
	- [cloneElement](#cloneElement)
- [**æ€§èƒ½ä¼˜åŒ–**](#æ€§èƒ½ä¼˜åŒ–)
	- [å€¼æ˜¯å¦ä¸ºç©ºæˆ–æœ‰å€¼](#å€¼æ˜¯å¦ä¸ºç©ºæˆ–æœ‰å€¼) 
- [**JavaScriptè¯­æ³•**](#JavaScriptè¯­æ³•)
	- [æ•°ç»„splice()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/splice)
- [**åˆ›å»ºåˆ°æ‰“åŒ…**](#åˆ›å»ºåˆ°æ‰“åŒ…)
- **å‚è€ƒèµ„æ–™ï¼š**
	- [**JavaScript(é˜®ä¸€å³°)**](https://www.ruanyifeng.com/blog/javascript/)
	- [**JavaScriptä¼˜ç§€æ•™ç¨‹**](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript)
	- [Material-UI Reactç»„ä»¶åº“](https://v4-2-1.material-ui.com/zh/getting-started/installation/)
	- [Reactç”Ÿå‘½å‘¨æœŸ](https://www.jianshu.com/p/c9bc994933d5)
	- [hook](https://juejin.cn/post/6844903999083118606)
	- [å¼‚æ­¥å’Œè½®è¯¢](https://juejin.cn/post/6844904170865033223)



<br/>

***
<br/>


![react31](./../Pictures/react31.png)







<br/>

***
<br/>


># <h1 id="åŸºæœ¬ç”¨æ³•">åŸºæœ¬ç”¨æ³•</h1>


<br/>

> <h2 id="Reactç¯å¢ƒæ­å»º">Reactç¯å¢ƒæ­å»º</h2>

å®‰è£…Reactæœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š
- ä½¿ç”¨CDNé“¾æ¥ï¼›
- ä½¿ç”¨create-react-appå·¥å…·ã€‚

<br/>
> **CDNé“¾æ¥**

å¼€å‘ç¯å¢ƒCDN(ä¸é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒ):

```
<script src="https://unpkg.com/react@16/umd/react.development.js">
</script>

â€¨<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js">
</script>
```


<br/>
ç”Ÿäº§ç¯å¢ƒCDN(æ˜¯ç»è¿‡ä¼˜åŒ–å¤„ç†åçš„ä¾èµ–åŒ…ï¼Œå¯ä»¥èŠ‚çº¦å¸¦å®½ï¼Œæé«˜æ•ˆç‡):

```
<script src="https://unpkg.com/react@16/umd/react.production.min.js">â€¨</script>
â€¨<script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js">â€¨</script>
```


&emsp; CDNçš„å…¨ç§°æ˜¯Content Delivery Networkï¼Œå³å†…å®¹åˆ†å‘ç½‘ç»œã€‚CDNæ˜¯æ„å»ºåœ¨ç°æœ‰ç½‘ç»œåŸºç¡€ä¹‹ä¸Šçš„æ™ºèƒ½è™šæ‹Ÿç½‘ç»œï¼Œä¾é éƒ¨ç½²åœ¨å„åœ°çš„è¾¹ç¼˜æœåŠ¡å™¨ï¼Œé€šè¿‡ä¸­å¿ƒå¹³å°çš„è´Ÿè½½å‡è¡¡ã€å†…å®¹åˆ†å‘å’Œè°ƒåº¦ç­‰åŠŸèƒ½æ¨¡å—ï¼Œä½¿ç”¨æˆ·å°±è¿‘è·å–æ‰€éœ€å†…å®¹ï¼Œé™ä½ç½‘ç»œæ‹¥å¡ï¼Œæé«˜ç”¨æˆ·è®¿é—®çš„å“åº”é€Ÿåº¦å’Œå‘½ä¸­ç‡ã€‚

&emsp; æ‰€ä»¥åœ¨é¡¹ç›®ä¸­æˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠCDNä¸‹è½½åˆ°æˆ‘ä»¬æœ¬åœ°,å¯ä»¥æé«˜è®¿é—®é€Ÿåº¦.é˜²æ­¢å› ä¸ºç½‘ç»œä¸å¥½æ— æ³•åŠ è½½ç½‘é¡µ.


<br/>

æ–°å»ºHTMLæ–‡ä»¶å¹¶å‘½åä¸ºreact_example.htmlï¼Œç¼–å†™ä»£ç å¦‚ä¸‹ï¼š


```
01  <!DOCTYPE html>
â€¨02  <html lang="en">
â€¨03  
â€¨04  <head>
â€¨05      <meta charset="UTF-8">
â€¨06      <title>React Example</title>
â€¨07      <script src="https://unpkg.com/react@16/umd/react.development.js">
â€¨        </script>â€¨
08      <script src="https://unpkg.com/react-dom@16/umd/react-dom.â€¨        development.js"></script>â€¨
09  </head>â€¨
10  â€¨
11  <body>â€¨
12      <div id="app"></div>â€¨
13  </body>â€¨
14  <script>â€¨
15      const e = React.createElement(â€¨
16          'h1',â€¨
17          null,â€¨
18          'Hello React!'â€¨
19      )â€¨
20      ReactDOM.render(â€¨
21          e,â€¨
22          document.getElementById('app')â€¨
23      )â€¨
24  </script>â€¨
25  â€¨
26  </html>
```

&emsp; ä¸Šè¿°ä»£ç ä¸­ä½¿ç”¨çš„æ˜¯Reactçš„åŸç”Ÿå†™æ³•ï¼Œä¸ºäº†ç®€åŒ–ç¼–ç ï¼ŒReactè¿˜æä¾›äº†ä¸€ç§å«ä½œJSXï¼ˆJavaScript XMLï¼‰çš„å†™æ³•ã€‚æƒ³è¦åœ¨Reactä¸­ä½¿ç”¨JSXï¼Œéœ€è¦å¼•å…¥Babelçš„ä¾èµ–åŒ…ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š

```
<script src="https://unpkg.com/babel-standalone@6/babel.min.js">
</script>
```

<br/>

> create-react-appåˆ›å»ºReacté¡¹ç›®

&emsp; create-react-appæ˜¯Reactå›¢é˜Ÿæ¨èçš„å·¥å…·ï¼Œé€šè¿‡è¯¥å·¥å…·æ— é¡»ä»»ä½•é…ç½®å°±èƒ½å¿«é€Ÿæ„å»ºReactå¼€å‘ç¯å¢ƒã€‚å®ƒåœ¨å†…éƒ¨ä½¿ç”¨Babelå’ŒWebpackï¼Œä½†è¯»è€…æ— é¡»äº†è§£å®ƒä»¬çš„ä»»ä½•ç»†èŠ‚ã€‚è¦ä½¿ç”¨è¯¥å·¥å…·ï¼Œéœ€è¦ç¡®ä¿å·²å®‰è£…çš„Nodeç‰ˆæœ¬æ˜¯8.10ä»¥ä¸Šï¼Œnpmç‰ˆæœ¬æ˜¯5.6ä»¥ä¸Šã€‚

ä½¿ç”¨è¿™ä¸ªæ¯”è¾ƒç®€å•,å‚»ç“œå¼æ“ä½œ,ä¸æ‡‚çš„è‡ªè¡Œç½‘ä¸Šæœç´¢.





<br/>
<br/>

> <h2 id="JSXç®€ä»‹">JSXç®€ä»‹</h2>


- **å®šä¹‰ç»„ä»¶æ—¶ï¼Œæœ€å¤–å±‚çš„æ ‡ç­¾åªèƒ½æœ‰ä¸€ä¸ªã€‚**

```
const Article = () => (
      <h3>This is title</h3>
      <p>This is content</p >     
      <span>This is author</span>â€¨  
  )
```

&emsp; ä¸Šè¿°ä»£ç ä¼šæŠ¥é”™,éœ€è¦åœ¨å…¶æœ€å¤–å±‚ç”¨ä¸€ä¸ªæ ‡ç­¾å¯¹å…¶è¿›è¡ŒåŒ…è£¹.å¯ä»¥ç”¨**`<div></div>ã€ <React.Fragment> </React.Fragment>ã€<>   </>`**.ä½†ä¸ºäº†ç²¾ç¡®,æœ€å¥½é€‰æ‹©æœ€åä¸€ç§,é˜²æ­¢å¤šæ¸²æŸ“ä¸€å±‚.


&emsp; **å°çŸ¥è¯†ï¼š** Babelæ˜¯ä¸€ä¸ªJavaScriptç¼–è¯‘å™¨ï¼Œå®ƒä¸»è¦ç”¨äºå°†ES 6åŠæ›´æ–°ç‰ˆæœ¬çš„ä»£ç è½¬æ¢ä¸ºå‘åå…¼å®¹çš„JavaScriptè¯­æ³•ã€‚Reactå®˜æ–¹çš„JSXç¼–è¯‘å™¨æ—©æœŸä¸ºJSTransformï¼Œä½†ç›®å‰å·²ç»ä¸å†ç»´æŠ¤äº†ã€‚ç°åœ¨çš„JSXå¤§å¤šä¾é Babelçš„JSXç¼–è¯‘å™¨è¿›è¡Œç¼–è¯‘ã€‚å…³äºBabelçš„æ›´å¤šå†…å®¹ï¼Œå¯ä»¥è®¿é—®å…¶[å®˜ç½‘](https://www.babeljs.cn/)ã€‚


<br/>
<br/>

> <h2 id='åŸç†'>åŸç†</h2>


- **1.createElementå‡½æ•°ä½“æ‹†è§£**

![react0_0.png](./../Pictures/react0_0.png)

<br/>

- **1.1createElementå‡½æ•°ä»£ç è®²è§£**

	- **1.1.1 å¦‚ä½•æ˜ å°„ä¸ºDOMæ ‘**

![react0_3.png](./../Pictures/react0_3.png)

![react0_4.png](./../Pictures/react0_4.png)

![react0_5.png](./../Pictures/react0_5.png)

![react0_6.png](./../Pictures/react0_6.png)

![react0_7.png](./../Pictures/react0_7.png)â€¨
<br/>
<br/>

- **2.Reactæ¸²æŸ“æµç¨‹**

![react0_1.png](./../Pictures/react0_1.png)



<br/>

- **3.è™šæ‹ŸDomæ ‘**

![react0_2.png](./../Pictures/react0_2.png)






<br/>
<br/>
<br/>

***
<br/>


> <h1 id="CSSä½¿ç”¨">CSSä½¿ç”¨</h1>


<br/>

>## <h2 id="æ–‡ä»¶æ¨¡å—åŒ–">[æ–‡ä»¶æ¨¡å—åŒ–](https://www.html.cn/create-react-app/docs/adding-a-css-modules-stylesheet/)</h2>

&emsp; CSSæ–‡ä»¶ä½¿ç”¨ **æ–‡ä»¶å.module.css**,ç„¶ååœ¨jsæ–‡ä»¶å¯¼å…¥ä½¿ç”¨å³å¯,é¿å…cssåå­—æ±¡æŸ“é—®é¢˜.

Button-style.module.css

```
.headText {
    font-size: 13px;
    font-family: PingFangSC-Regular, PingFang SC;
    font-weight: 400;
    color: #333333;
    line-height: 18px;
}
```

åœ¨Button.jsä¸­ä½¿ç”¨

```
import CallingVerifyStyle from './calling-verify.module.css';

render(
	return (
		<div className={CallingVerifyStyle.headText}/>
	)
)
```




<br/>
<br/>

> <h2 id="propsç”¨æ³•">propsç”¨æ³•</h2>

<br/>

> <h3 id="è®¾ç½®é»˜è®¤å€¼">è®¾ç½®é»˜è®¤å€¼</h3>

```
<body>

<div id="example"></div>
<script type="text/babel">
class HelloMessage extends React.Component {
	
	static defaultProps = {// å†™æ³•ä¸€: åœ¨ç»„ä»¶çš„é‡Œé¢
		name: '12345'
	}
	
  render() {
    return (
      <h1>Hello, {this.props.name}</h1>
    );
  }
}

HelloMessage.defaultProps = {// å†™æ³•äºŒ: åœ¨ç»„ä»¶çš„å¤–é¢
  name: 'Runoob'
};

const element = <HelloMessage/>;

ReactDOM.render(
  element,
  document.getElementById('example')
);
</script>

</body>
```

æ•ˆæœå›¾:

**Hello,Runoob**



<br/>
<br/>

> <h3 id="propsç±»å‹éªŒè¯">propsç±»å‹éªŒè¯</h3>

&emsp; Props éªŒè¯ä½¿ç”¨ propTypesï¼Œå®ƒå¯ä»¥ä¿è¯æˆ‘ä»¬çš„åº”ç”¨ç»„ä»¶è¢«æ­£ç¡®ä½¿ç”¨ï¼ŒReact.PropTypes æä¾›å¾ˆå¤šéªŒè¯å™¨ (validator) æ¥éªŒè¯ä¼ å…¥æ•°æ®æ˜¯å¦æœ‰æ•ˆã€‚å½“å‘ props ä¼ å…¥æ— æ•ˆæ•°æ®æ—¶ï¼ŒJavaScript æ§åˆ¶å°ä¼šæŠ›å‡ºè­¦å‘Š.

```

class MyTitle extends React.Component {
  render() {
    return (
      <h1>Hello, {this.props.title}</h1>
    );
  }
}
 
 
// è®¾ç½®ç±»å‹ä¸ºstring
MyTitle.propTypes = {
  title: PropTypes.string
};
```




<br/><br/><br/>
> <h2 id="ReactDOM">React DOM</h2>

- react.jsæ˜¯Reactçš„æ ¸å¿ƒæ–‡ä»¶ï¼Œå¦‚ç»„ä»¶ã€Hooksã€è™šæ‹ŸDOMç­‰ï¼Œéƒ½åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚
- react-dom.jsåˆ™æ˜¯å¯¹çœŸå®DOMçš„ç›¸å…³æ“ä½œï¼Œå¦‚å°†è™šæ‹ŸDOMæ¸²æŸ“åˆ°çœŸå®DOMé‡Œï¼Œæˆ–è€…ä»çœŸå®DOMä¸­è·å–èŠ‚ç‚¹ã€‚


<br/>

**ä»‹ç»ï¼š**ReactDOMå¯¹è±¡æ˜¯react-dom.jsæä¾›çš„ä¸€ä¸ªç”¨äºè¿›è¡ŒDOMæ“ä½œçš„å¯¹è±¡ï¼Œåœ¨è¯¥å¯¹è±¡ä¸‹æœ‰ä¸€ç³»åˆ—APIç”¨äºæ“ä½œDOMã€‚åœ¨Reactä¸­éœ€è¦å’ŒçœŸå®çš„DOMæ‰“äº¤é“æ—¶éƒ½éœ€è¦é€šè¿‡ReactDOMçš„APIè¿›è¡Œã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€äº›åŸç”ŸDOMçš„APIï¼Œä½†å¹¶ä¸æ¨èè¿™ä¹ˆåšã€‚


<br/>
> <h3 id='ReactDom.render'>ReactDom.render</h3>

```
ReactDOM.render(element, container[, callback])
```

- renderæ–¹æ³•æ˜¯ReactDOMåœ¨å¼€å‘æ—¶å”¯ä¸€å¸¸ç”¨çš„APIã€‚renderæ–¹æ³•ç”¨äºå°†Reactç”Ÿæˆçš„è™šæ‹ŸDOMç”Ÿæˆåˆ°çœŸå®çš„DOMä¸­å»ã€‚
- elementæ˜¯Reactç”Ÿæˆçš„è™šæ‹ŸDOMï¼Œä¹Ÿå«ä½œReactElementæˆ–ReactNodeã€‚é™¤æ­¤ä¹‹å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²å»å®ç°ã€‚
- elementè¦æ”¾ç½®åœ¨containerçš„å®¹å™¨ä¸­ï¼Œå®ƒå¿…é¡»æ˜¯ä¸€ä¸ªå·²ç»å­˜åœ¨çš„çœŸå®DOMèŠ‚ç‚¹ã€‚
- callbackæ˜¯å°†ReactNodeæ¸²æŸ“åˆ°containerä¹‹åçš„å›è°ƒå‡½æ•°ã€‚


**index.jsæ–‡ä»¶**
```
ReactDOM.render(
  // <h1>Hello World</h1>,
  'Hello React',
  document.getElementById('root'),
  () => {
    console.log('æ¸²æŸ“å®Œæˆäº†')
  }
);
```

æ•ˆæœï¼š

![react32](./../Pictures/react32.png)


è¿™é‡Œå°†â€œHello Reactâ€è¿™æ®µå­—ç¬¦ä¸²æ¸²æŸ“åˆ°äº†#rootè¿™ä¸ªdivä¸­ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åˆ©ç”¨React-Nodeåšæ›´å¤æ‚çš„ç»“æ„æ¸²æŸ“ã€‚

renderæ–¹æ³•é€šå¸¸ç”¨æ¥æ¸²æŸ“æ•´ä¸ªé¡¹ç›®çš„æ ¹ç»„ä»¶ï¼Œå…¶ä»–ç»„ä»¶éƒ½åœ¨æ ¹ç»„ä»¶ä¸­ä¸€å±‚å±‚è°ƒç”¨ã€‚åœ¨ä½¿ç”¨renderæ–¹æ³•æ—¶è¦æ³¨æ„containerä¸­å¦‚æœæœ‰å…¶ä»–å­å†…å®¹éƒ½ä¼šè¢«æ›¿æ¢æ‰ã€‚å¦å¤–renderæ–¹æ³•å¹¶ä¸ä¼šä¿®æ”¹containerçš„å…¶ä»–ç‰¹æ€§ï¼Œåªæ˜¯ä¿®æ”¹containerçš„å†…å®¹ã€‚


<br/>

> <h3 id=''></h3>



<br/>
<br/>


> <h2 id="Reactè§†å›¾æ¸²æŸ“">Reactè§†å›¾æ¸²æŸ“</h2>




<br/>

> <h3 id='React.createElement'>React.createElement</h3>


å½“éœ€è¦ç”¨Reactåˆ›å»ºè™šæ‹ŸDOMæ—¶ï¼ŒReactä¸“é—¨æä¾›äº†ä¸€ä¸ªæ–¹æ³•createElement()ã€‚æ³¨æ„è¯¥æ–¹æ³•å¹¶éæ˜¯åŸç”ŸDOMä¸­çš„createElementã€‚

```
React.createElement(type, config, children)
```


**å…·ä½“å‚æ•°å¦‚ä¸‹:**

1ï¼‰typeè¦åˆ›å»ºçš„æ ‡ç­¾ç±»å‹ã€‚å¦‚è¦åˆ›å»ºçš„æ˜¯ä¸ªdivæ ‡ç­¾ï¼Œåˆ™å†™React.createElementï¼ˆï¼‚divï¼‚ï¼‰ï¼Œä¸€å®šæ³¨æ„typeçš„ç±»å‹æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

2ï¼‰congfigå‚æ•°æ˜¯è®¾ç½®ç”Ÿæˆçš„èŠ‚ç‚¹çš„ç›¸å…³å±æ€§ï¼Œè¿™é‡Œè¦æ³¨æ„congfigçš„ç±»å‹æ˜¯ä¸€ä¸ªçº¯å¯¹è±¡;

3ï¼‰childrenä»£è¡¨è¯¥å…ƒç´ çš„å†…å®¹æˆ–è€…å­å…ƒç´ ,å¯ä»¥æ”¾å­—ç¬¦ä¸²ï¼Œæ•°ç»„ç­‰

ç¤ºä¾‹å¦‚ä¸‹ï¼š

```
let h1 = React.createElement('h1', null, 'Hello React')
let p = React.createElement('p', null, 'æ¬¢è¿åƒğŸ')
React.createElement("h1", {
    id: "title",
    className: "title",
    title: "æ¸¯é’",
    style: {
        width: '100px',
        height: '100px'
    }
}, [h1, p])
```

<br/>

> <h3 id=''></h3>





<br/>
<br/>


> <h2 id="é¡¹ç›®æ–‡ä»¶æè¿°">é¡¹ç›®æ–‡ä»¶æè¿°</h2>


![react33](./../Pictures/react33.png)

- node_modulesï¼Œåœ¨é¡¹ç›®ä¸­å®‰è£…çš„ä¾èµ–éƒ½ä¼šæ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹

- package.jsonï¼Œæ˜¯æ•´ä¸ªé¡¹ç›®çš„æè¿°æ–‡ä»¶ï¼Œé‡Œè¾¹æœ‰ä¸¤å—å†…å®¹è¿™é‡Œè¯¦ç»†è¯´ä¸€ä¸‹ã€‚

	- â‘ dependenciesé¡¹ç›®å®‰è£…çš„ä¾èµ–åç§°åŠç‰ˆæœ¬ä¿¡æ¯ã€‚å¯ä»¥çœ‹åˆ°åœ¨æ„å»ºå®Œçš„é¡¹ç›®ä¸­ï¼Œå·²ç»å¸®å¼€å‘è€…å®‰è£…å¥½äº†ä¸€äº›åŸºæœ¬çš„ä¾èµ–ï¼šï¼‚reactï¼‚:ï¼‚^16.13.1ï¼‚ï¼Œï¼‚react-domï¼‚:ï¼‚^16.13.1ï¼‚ï¼Œï¼‚react-scriptsï¼‚:ï¼‚3.4.1ï¼‚ã€‚reactå’Œreact-domä¸éœ€è¦å†å¤è¿°äº†ã€‚react-scriptsæ˜¯ä»€ä¹ˆï¼Ÿcreate-react-appä¼šæŠŠwebpackã€Babelã€ESLinté…ç½®å¥½åˆå¹¶åœ¨ä¸€ä¸ªåŒ…é‡Œï¼Œæ–¹ä¾¿å¼€å‘äººå‘˜ä½¿ç”¨ï¼Œè¿™ä¸ªåŒ…å°±æ˜¯react-scriptsã€‚
	
	- â‘¡scriptsä¸­å®šä¹‰çš„æ˜¯åœ¨å‘½ä»¤è¡Œå·¥å…·ä¸­å¯ä»¥ä½¿ç”¨åˆ°çš„ä¸€äº›å‘½ä»¤ã€‚åœ¨å½“å‰ç›®å½•my-appä¸­ï¼Œå¯åŠ¨å‘½ä»¤è¡Œå·¥å…·ï¼Œä¸€èµ·æ¥æµ‹è¯•ä¸€ä¸‹è¿™äº›å‘½ä»¤

- publicæ–‡ä»¶å¤¹ã€‚ç”¨æ¥å­˜æ”¾htmlæ¨¡æ¿ã€‚publicæ–‡ä»¶å¤¹ä¸­çš„index.htmlå°±æ˜¯é¡¹ç›®çš„htmlæ¨¡æ¿ï¼Œä¸å»ºè®®è¯»è€…ä¿®æ”¹åå­—ï¼Œå¦åˆ™éœ€è¦é‡æ–°é…ç½®htmlæ–‡ä»¶ã€‚
- srcæ–‡ä»¶å¤¹ã€‚è¯¥æ–‡ä»¶å¤¹ä¸­index.jsæ˜¯æ•´ä¸ªé¡¹ç›®çš„å…¥å£æ–‡ä»¶ã€‚ä¸ºäº†åŠ å¿«é‡æ–°æ„å»ºçš„é€Ÿåº¦ï¼Œwebpackåªå¤„ç†srcä¸­çš„æ–‡ä»¶ã€‚æ³¨æ„è¦å°†JSå’ŒCSSæ–‡ä»¶æ”¾åœ¨srcä¸­ï¼Œå¦åˆ™è¯¥æ–‡ä»¶ä¸ä¼šè¢«webpackæ‰“åŒ…ã€‚


<br/>


> React.StrictMode

&emsp; StrictModeæ˜¯ç”¨æ¥æ£€æŸ¥é¡¹ç›®ä¸­æ˜¯å¦æœ‰æ½œåœ¨é£é™©çš„æ£€æµ‹å·¥å…·ï¼Œç±»ä¼¼äºJavaScriptä¸­çš„ä¸¥æ ¼æ¨¡å¼ã€‚StrictModeè·ŸFragmentç±»ä¼¼ï¼Œä¸ä¼šæ¸²æŸ“ä»»ä½•çœŸå®çš„DOMã€‚åªæ˜¯ä¸ºåä»£å…ƒç´ è§¦å‘é¢å¤–çš„æ£€æŸ¥å’Œè­¦å‘Šã€‚

&emsp; StrictModeå¯ä»¥åœ¨ä»£ç ä¸­çš„ä»»æ„åœ°æ–¹ä½¿ç”¨ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ç”¨åœ¨index.jsä¸­ï¼Œå¼€å¯å…¨å±€æ£€æµ‹ã€‚é™¤ä¸Šè¿°æè¿°çš„ç‰¹å¾å¤–ï¼ŒStrictModeæ£€æŸ¥åªåœ¨å¼€å‘æ¨¡å¼ä¸‹è¿è¡Œï¼Œä¸ä¼šä¸ç”Ÿäº§æ¨¡å¼å†²çªã€‚

<br/>

**æ£€æµ‹çš„é¡¹ç›®å¦‚ä¸‹ï¼š**

1ï¼‰è¯†åˆ«å…·æœ‰ä¸å®‰å…¨ç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶ã€‚

2ï¼‰æœ‰å…³æ—§å¼å­—ç¬¦ä¸²refç”¨æ³•çš„è­¦å‘Šã€‚

3ï¼‰å…³äºå·²å¼ƒç”¨çš„findDOMNodeç”¨æ³•çš„è­¦å‘Šã€‚

4ï¼‰æ£€æµ‹æ„å¤–çš„å‰¯ä½œç”¨ã€‚

5ï¼‰æ£€æµ‹é—ç•™çš„context APIã€‚


åœ¨StrictModeæ¨¡å¼ä¸‹ï¼Œå¦‚æœæ£€æµ‹åˆ°ä»£ç æœ‰ä»¥ä¸Šé—®é¢˜ï¼ŒReactä¼šåœ¨æ§åˆ¶å°ä¸­æ‰“å°å‡ºç›¸åº”çš„è­¦å‘Šã€‚



<br/>
<br/>
<br/>

> <h3 id='importå’Œrequire'>importå’Œrequire</h3>

- **è°ƒç”¨æ—¶é—´**
	- require æ˜¯è¿è¡Œæ—¶è°ƒç”¨ï¼Œæ‰€ä»¥ç†è®ºä¸Šå¯ä»¥è¿ä½œåœ¨ä»£ç çš„ä»»ä½•åœ°æ–¹
	- import æ˜¯ç¼–è¯‘æ—¶è°ƒç”¨ï¼Œæ‰€ä»¥å¿…é¡»æ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´

<br/>

- **æœ¬è´¨åŒºåˆ«ï¼š**
	- require æ˜¯èµ‹å€¼è¿‡ç¨‹ï¼Œå…¶å®requireçš„ç»“æœå°±æ˜¯å¯¹è±¡ã€æ•°å­—ã€å­—ç¬¦ä¸²ã€å‡½æ•°ç­‰ï¼Œå†æŠŠç»“æœèµ‹å€¼ç»™æŸä¸ªå˜é‡ã€‚å®ƒæ˜¯æ™®é€šçš„å€¼æ‹·è´ä¼ é€’ã€‚

	- import æ˜¯è§£æ„è¿‡ç¨‹ã€‚ä½¿ç”¨importå¯¼å…¥æ¨¡å—çš„å±æ€§æˆ–è€…æ–¹æ³•æ˜¯å¼•ç”¨ä¼ é€’ã€‚ä¸”importæ˜¯read-onlyçš„ï¼Œå€¼æ˜¯å•å‘ä¼ é€’çš„ã€‚defaultæ˜¯ES6 æ¨¡å—åŒ–æ‰€ç‹¬æœ‰çš„å…³é”®å­—ï¼Œexport default {} è¾“å‡ºé»˜è®¤çš„æ¥å£å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰å‘½åï¼Œåˆ™åœ¨importæ—¶å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªåç§°ç”¨æ¥å…³è”è¿™ä¸ªå¯¹è±¡

<br/>

**requireç”¨æ³•å±•ç¤º**


&emsp; åœ¨å¯¼å‡ºçš„æ–‡ä»¶ä¸­ä½¿ç”¨module.exportså¯¹æ¨¡å—ä¸­çš„æ•°æ®å¯¼å‡ºï¼Œå†…å®¹ç±»å‹å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œå˜é‡ï¼Œå¯¹è±¡ï¼Œæ–¹æ³•ç­‰ä¸äºˆé™å®šã€‚ä½¿ç”¨require()å¼•å…¥åˆ°éœ€è¦çš„æ–‡ä»¶ä¸­å³å¯

&emsp; åœ¨æ¨¡å—ä¸­ï¼Œå°†æ‰€è¦å¯¼å‡ºçš„æ•°æ®å­˜æ”¾åœ¨moduleçš„exportå±æ€§ä¸­ï¼Œåœ¨ç»è¿‡CommonJs/AMDè§„èŒƒçš„å¤„ç†ï¼Œåœ¨éœ€è¦çš„é¡µé¢ä¸­ä½¿ç”¨requireæŒ‡å®šåˆ°è¯¥æ¨¡å—ï¼Œå³å¯å¯¼å‡ºæ¨¡å—ä¸­çš„exportå±æ€§å¹¶æ‰§è¡Œèµ‹å€¼æ“ä½œï¼ˆå€¼æ‹·è´ï¼‰

```
// module.js
module.exports = {
    a: function() {
        console.log('exports from module');
    }
}
```

```
// sample.js
var obj = require('./module.js');
obj.a()  // exports from module
```

&emsp; å½“æˆ‘ä»¬ä¸éœ€è¦å¯¼å‡ºæ¨¡å—ä¸­çš„å…¨éƒ¨æ•°æ®æ—¶ï¼Œä½¿ç”¨å¤§æ‹¬å·åŒ…å«æ‰€éœ€è¦çš„æ¨¡å—å†…å®¹

```
// module.js
function test(str) {
  console.log(str); 
}
module.exports = {
 test
}
```


```
// sample.js
let { test } =  require('./module.js');
test ('this is a test');
```



<br/>

**import çš„åŸºæœ¬è¯­æ³•**

&emsp; ä½¿ç”¨importå¯¼å‡ºçš„å€¼ä¸æ¨¡å—ä¸­çš„å€¼å§‹ç»ˆä¿æŒä¸€è‡´ï¼Œå³å¼•ç”¨æ‹·è´ï¼Œé‡‡ç”¨ES6ä¸­è§£æ„èµ‹å€¼çš„è¯­æ³•ï¼Œimporté…åˆexportç»“åˆä½¿ç”¨

```
// module.js
export function test(args) {
  console.log(args);
}
// å®šä¹‰ä¸€ä¸ªé»˜è®¤å¯¼å‡ºæ–‡ä»¶, ä¸€ä¸ªæ–‡ä»¶åªèƒ½å®šä¹‰ä¸€æ¬¡
export default {
  a: function() {
    console.log('export from module');
  }
}

export const name = 'gzc'
```

```
// ä½¿ç”¨_å¯¼å‡ºexport defaultçš„å†…å®¹
import _, { test, name } from './a.js'

test(`my name is ${name}`)  // æ¨¡æ¿å­—ç¬¦ä¸²ä¸­ä½¿ç”¨${}åŠ å…¥å˜é‡
```



<br/>

> <h3 id=''></h3>






<br/>
<br/>

>## <h2 id="ç”Ÿå‘½å‘¨æœŸæ–¹æ³•">[ç”Ÿå‘½å‘¨æœŸæ–¹æ³•](https://www.runoob.com/react/react-component-life-cycle.html)</h2>


![react37](./../Pictures/react37.png)


<br/>

![react0_8](./../Pictures/react0_8.png)

- **componentWillMount** åœ¨æ¸²æŸ“å‰è°ƒç”¨,åœ¨å®¢æˆ·ç«¯ä¹Ÿåœ¨æœåŠ¡ç«¯ã€‚

- **componentDidMount :** åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“åè°ƒç”¨ï¼Œåªåœ¨å®¢æˆ·ç«¯ã€‚ä¹‹åç»„ä»¶å·²ç»ç”Ÿæˆäº†å¯¹åº”çš„DOMç»“æ„ï¼Œå¯ä»¥é€šè¿‡this.getDOMNode()æ¥è¿›è¡Œè®¿é—®ã€‚ å¦‚æœä½ æƒ³å’Œå…¶ä»–JavaScriptæ¡†æ¶ä¸€èµ·ä½¿ç”¨ï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è°ƒç”¨setTimeout, setIntervalæˆ–è€…å‘é€AJAXè¯·æ±‚ç­‰æ“ä½œ(é˜²æ­¢å¼‚æ­¥æ“ä½œé˜»å¡UI)ã€‚

- **componentWillReceivePropsï¼š** è¿™ä¸ªæ–¹æ³•åœ¨åˆå§‹åŒ–renderæ—¶ä¸ä¼šè¢«è°ƒç”¨ï¼Œåœ¨ç»„ä»¶æ¥æ”¶åˆ°ä¸€ä¸ªæ–°çš„ prop (æ›´æ–°å)æ—¶è¢«è°ƒç”¨ã€‚ä¸€èˆ¬ç”¨äºçˆ¶ç»„ä»¶çŠ¶æ€æ›´æ–°æ—¶å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚è¿™ä¸ªä¸œè¥¿ååˆ†å¥½ç”¨ï¼Œä½†æ˜¯ä¸€æ—¦ç”¨é”™ä¹Ÿä¼šé€ æˆååˆ†ä¸¥é‡çš„åæœã€‚

- **shouldComponentUpdate** è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚åœ¨ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„propsæˆ–è€…stateæ—¶è¢«è°ƒç”¨ã€‚åœ¨åˆå§‹åŒ–æ—¶æˆ–è€…ä½¿ç”¨forceUpdateæ—¶ä¸è¢«è°ƒç”¨ã€‚å¯ä»¥åœ¨ä½ ç¡®è®¤ä¸éœ€è¦æ›´æ–°ç»„ä»¶æ—¶ä½¿ç”¨ã€‚

- **componentWillUpdate**åœ¨ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„propsæˆ–è€…stateä½†è¿˜æ²¡æœ‰renderæ—¶è¢«è°ƒç”¨ã€‚åœ¨åˆå§‹åŒ–æ—¶ä¸ä¼šè¢«è°ƒç”¨ã€‚

- **componentDidUpdate** åœ¨ç»„ä»¶å®Œæˆæ›´æ–°åç«‹å³è°ƒç”¨ã€‚åœ¨åˆå§‹åŒ–æ—¶ä¸ä¼šè¢«è°ƒç”¨ã€‚
- **componentWillUnmount**åœ¨ç»„ä»¶ä» DOM ä¸­ç§»é™¤ä¹‹å‰ç«‹åˆ»è¢«è°ƒç”¨ã€‚


<br/>

- ç»„ä»¶çš„æ„é€ 

```
import React,{ Component } from 'react';

class Demo extends Component {
  constructor(props,context) {
      super(props,context)
      this.state = {
          //å®šä¹‰state
      }
  }
componentWillMount () {}

componentDidMount () {}

//è¿™ç§æ–¹å¼ååˆ†é€‚åˆçˆ¶å­ç»„ä»¶çš„äº’åŠ¨ï¼Œé€šå¸¸æ˜¯çˆ¶ç»„ä»¶éœ€è¦é€šè¿‡æŸäº›çŠ¶æ€æ§åˆ¶å­ç»„ä»¶æ¸²æŸ“äº¦æˆ–é”€æ¯...
componentWillReceiveProps (nextProps) {//componentWillReceivePropsæ–¹æ³•ä¸­ç¬¬ä¸€ä¸ªå‚æ•°ä»£è¡¨å³å°†ä¼ å…¥çš„æ–°çš„Props
	if (this.props.sharecard_show !== nextProps.sharecard_show){
        //åœ¨è¿™é‡Œæˆ‘ä»¬ä»å¯ä»¥é€šè¿‡this.propsæ¥è·å–æ—§çš„å¤–éƒ¨çŠ¶æ€
        //é€šè¿‡æ–°æ—§çŠ¶æ€çš„å¯¹æ¯”ï¼Œæ¥å†³å®šæ˜¯å¦è¿›è¡Œå…¶ä»–æ–¹æ³•
        if (nextProps.sharecard_show){
            this.handleGetCard();
        }
}

shouldComponentUpdate (nextProps,nextState) {}

componentWillUpdate (nextProps,nextState) {}

componentDidUpdate (prevProps,prevState) {}

render () {
    return (
        <div></div>
    )
}

componentWillUnmount () {}
}

export default Demo;
```


<br/>
<br/>

**æµ‹è¯•Demoï¼š**

```

class Button extends React.Component {
  constructor(props) {
      super(props);
      this.state = {data: 0};
      this.setNewNumber = this.setNewNumber.bind(this);
  }
  
  setNewNumber() {
    this.setState({data: this.state.data + 1})
  }
  render() {
      return (
         <div>
            <button onClick = {this.setNewNumber}>INCREMENT</button>
            <Content myNumber = {this.state.data}></Content>
         </div>
      );
    }
}
 
 
class Content extends React.Component {
  componentWillMount() {
      console.log('Component WILL MOUNT!')
  }
  componentDidMount() {
       console.log('Component DID MOUNT!')
  }
  componentWillReceiveProps(newProps) {
        console.log('Component WILL RECEIVE PROPS!')
  }
  shouldComponentUpdate(newProps, newState) {
        return true;
  }
  componentWillUpdate(nextProps, nextState) {
        console.log('Component WILL UPDATE!');
  }
  componentDidUpdate(prevProps, prevState) {
        console.log('Component DID UPDATE!')
  }
  componentWillUnmount() {
         console.log('Component WILL UNMOUNT!')
  }
 
    render() {
      return (
        <div>
          <h3>{this.props.myNumber}</h3>
        </div>
      );
    }
}
ReactDOM.render(
   <div>
      <Button />
   </div>,
  document.getElementById('example')
);

```


æ•ˆæœå›¾ï¼š

![æµ‹è¯•ç”Ÿå‘½å‘¨æœŸ](./../Pictures/react7.png)


æ§åˆ¶å°æ‰“å°ï¼š

```
Component WILL MOUNT!
Component DID MOUNT!
```


ç‚¹å‡»æŒ‰é’®è¿›è¡Œ+1ï¼Œæ§åˆ¶å°æ‰“å°ï¼š

```
Component WILL RECEIVE PROPS!
Component WILL UPDATE!
Component DID UPDATE!
```

<br/>
<br/>





> <h2 id="æ„é€ å‡½æ•°constructor">æ„é€ å‡½æ•°constructor</h2>

```
Constructor(props){  
     super(props);  
}  
```

- åœ¨Reactä¸­ï¼Œæ„é€ å‡½æ•°ä¸»è¦ç”¨äºä¸¤ä¸ªç›®çš„ï¼š
	- å®ƒç”¨äºé€šè¿‡å‘this.stateåˆ†é…å¯¹è±¡æ¥åˆå§‹åŒ–ç»„ä»¶çš„æœ¬åœ°çŠ¶æ€ã€‚
	- å®ƒç”¨äºç»‘å®šç»„ä»¶ä¸­å‡ºç°çš„äº‹ä»¶å¤„ç†ç¨‹åºæ–¹æ³•ã€‚

**æ³¨æ„ï¼š** å¦‚æœä½ çš„Reactç»„ä»¶æ—¢ä¸åˆå§‹åŒ–çŠ¶æ€ï¼Œä¹Ÿä¸ç»‘å®šæ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦å®ç°Reactç»„ä»¶çš„æ„é€ å‡½æ•°ã€‚

&emsp; ä¸èƒ½åœ¨æ„é€ å‡½æ•°()ä¸­ç›´æ¥è°ƒç”¨setState()æ–¹æ³•ã€‚å¦‚æœç»„ä»¶éœ€è¦ä½¿ç”¨æœ¬åœ°çŠ¶æ€ï¼Œåˆ™éœ€è¦ç›´æ¥ä½¿ç”¨â€™this.state â€˜ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­åˆ†é…åˆå§‹çŠ¶æ€ã€‚æ„é€ å‡½æ•°åªä½¿ç”¨è¿™ä¸ªæ¥åˆ†é…åˆå§‹çŠ¶æ€ï¼Œæ‰€æœ‰å…¶ä»–æ–¹æ³•éƒ½éœ€è¦ä½¿ç”¨set.state()æ–¹æ³•ã€‚

App.js

```
import React, { Component } from 'react';  
  
class App extends Component {  
  constructor(props){  
    super(props);  
    this.state = {  
         data: 'www.srcmini.com'  
      }  
    this.handleEvent = this.handleEvent.bind(this);  
  }  
  handleEvent(){  
    console.log(this.props);  
  }  
  render() {  
    return (  
      <div className="App">  
    <h2>Reactæ„é€ å‡½æ•°ä¾‹å­</h2>  
    <input type ="text" value={this.state.data} />  
        <button onClick={this.handleEvent}>ç‚¹å‡»</button>  
      </div>  
    );  
  }  
}  
export default App;  
```

main.js

```
import React from 'react';  
import ReactDOM from 'react-dom';  
import App from './App.js';  
  
ReactDOM.render(<App />, document.getElementById('app'));  
```



<br/>

> æœ‰å¿…è¦åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨super()å—ï¼Ÿ

&emsp; æ˜¯çš„ï¼Œæœ‰å¿…è¦åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨super()ã€‚å¦‚æœéœ€è¦åœ¨ç»„ä»¶çš„æ„é€ å‡½æ•°ä¸­è®¾ç½®å±æ€§æˆ–è®¿é—®â€™thisâ€™ï¼Œåˆ™éœ€è¦è°ƒç”¨super()ã€‚

```
class App extends Component {  
    constructor(props){  
        this.fName = "Jhon"; // this'åœ¨super()ä¹‹å‰æ˜¯ä¸å…è®¸çš„  
    }  
    render () {  
        return (  
            <p> Name: { this.props.name }</p>  
        );  
    }  
}  
```

&emsp; å½“ä½ è¿è¡Œä¸Šé¢çš„ä»£ç æ—¶ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œåœ¨super()ä¹‹å‰ä¸å…è®¸ä½¿ç”¨â€™thisâ€™ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦è®¿é—®æ„é€ å‡½æ•°ä¸­çš„é“å…·ï¼Œéœ€è¦è°ƒç”¨super(props)ã€‚



<br/>

> ç®­å¤´å‡½æ•°

&emsp;  ç®­å¤´å‡½æ•°æ˜¯ES6æ ‡å‡†çš„æ–°ç‰¹æ€§ã€‚å¦‚æœéœ€è¦ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œåˆ™æ²¡æœ‰å¿…è¦å°†ä»»ä½•äº‹ä»¶ç»‘å®šåˆ°â€™this â€˜ã€‚åœ¨è¿™é‡Œï¼Œâ€œthisâ€çš„èŒƒå›´æ˜¯å…¨å±€çš„ï¼Œä¸å±€é™äºä»»ä½•è°ƒç”¨å‡½æ•°ã€‚å› æ­¤ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ç®­å¤´å‡½æ•°ï¼Œå°±ä¸éœ€è¦åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®šâ€™thisâ€™ã€‚


```
import React, { Component } from 'react';  
  
class App extends Component {  
  constructor(props){  
    super(props);  
    this.state = {  
         data: 'www.srcmini.com'  
      }  
  }  
  handleEvent = () => {  
    console.log(this.props);  
  }  
  render() {  
    return (  
      <div className="App">  
    <h2>Reactæ„é€ å‡½æ•°ä¾‹å­</h2>  
    <input type ="text" value={this.state.data} />  
        <button onClick={this.handleEvent}>ç‚¹å‡»</button>  
      </div>  
    );  
  }  
}  
export default App;  
```



***
<br/><br/><br/>
> <h2 id='ReactHooks'>React Hooks</h2>


<br/><br/>
> <h3 id='useState'>useState</h3>


```
function useState<S>(initialState: S | (() => S)): [S, Dispatch<SetStateAction<S>>];

// ç®€åŒ–
const [state, setState] = useState(initialState)
```

&emsp; è°ƒç”¨è¯¥æ–¹æ³•æ—¶ä¼ å…¥stateçš„åˆå§‹å€¼ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„ç¬¬0ä½æ˜¯stateå…·ä½“çš„å€¼ï¼Œè€Œç¬¬1ä½æ˜¯ä¿®æ”¹è¯¥stateçš„æ–¹æ³•ï¼ŒåŒç±»ç»„ä»¶çš„setStateæ–¹æ³•ä¸€æ ·ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ä¼šæ›´æ–°stateï¼Œç„¶åå¼•èµ·è§†å›¾æ›´æ–°ã€‚


**HOC.js**

```
export function TestHOC1() {
    const [name, setName] = useState('kkb')
    return <div>
        <p>{name}</p>
        <button
            onClick={() => {
                setName('å¼€è¯¾å§')
            }}>
            æ˜¾ç¤ºå…¨ç§°
        </button>
    </div>
}
```


æ•ˆæœå›¾: 

![react34](./../Pictures/react34.png)

**åœ¨ä½¿ç”¨useStateæ—¶ï¼Œæœ‰ä¸‰ä¸ªé—®é¢˜è¦æ³¨æ„:**

1ï¼‰useStateè¿”å›çš„setStateæ–¹æ³•åŒç±»ç»„ä»¶çš„setStateä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œéœ€è¦ç»„ä»¶æ›´æ–°ä¹‹åstateçš„å€¼æ‰ä¼šå˜æˆæ–°å€¼;

2ï¼‰useStateè¿”å›çš„setStateå¹¶ä¸å…·æœ‰ç±»ç»„ä»¶çš„setStateåˆå¹¶å¤šä¸ªstateçš„ä½œç”¨ï¼Œå¦‚æœstateä¸­æœ‰ä¸ªå¤šstateï¼Œåœ¨æ›´æ–°æ—¶ï¼Œå…¶ä»–å€¼ä¸€åŒæ›´æ–°.



```
export function TestHOC2() {
    const [data, setData] = useState({ name: 'kkb', age: 10 })
    return <div>
        <p>{data.name}</p>
        <button
            onClick={() => {
                setData({
                    ...data, name: 'å¼€è¯¾å§'
                })

            }}>
            æ˜¾ç¤ºå…¨ç§°
        </button>
    </div >
}
```

æ•ˆæœå›¾: 

![react35](./../Pictures/react35.png)


<br/><br/>
> <h3 id="å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ çŠ¶æ€useState">å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ çŠ¶æ€useState</h3>

React ä¸­çš„ **`useState` Hook è¯­æ³•**ï¼Œç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ çŠ¶æ€ï¼ˆstateï¼‰ã€‚

<br/>

```js
const [çŠ¶æ€å˜é‡, è®¾ç½®çŠ¶æ€çš„å‡½æ•°] = useState(åˆå§‹å€¼);
```

ä¾‹å¦‚ï¼š


```js
const [locale, setLocale] = useState('en');
```

å°±æ˜¯ï¼š

* `locale` å°±æ˜¯å½“å‰çš„è¯­è¨€ï¼ˆæ¯”å¦‚å½“å‰enï¼‰
* `setLocale()` æ˜¯æ”¹å˜è¿™ä¸ªçŠ¶æ€çš„æ–¹æ³•
* æ¯æ¬¡ä½ è°ƒç”¨ `setLocale()`ï¼ŒReact ä¼š**é‡æ–°æ¸²æŸ“è¿™ä¸ªç»„ä»¶**
	* åˆ›å»ºä¸€ä¸ªçŠ¶æ€ `locale`ï¼ˆå½“å‰è¯­è¨€ï¼‰
	* åˆå§‹å€¼æ˜¯ `'en'`
	* ä½¿ç”¨ `setLocale('zh')` å¯ä»¥æŠŠè¯­è¨€å˜æˆä¸­æ–‡
	
<br/>

**ğŸ” çŠ¶æ€ä½¿ç”¨ç¤ºä¾‹ï¼šåˆ‡æ¢è¯­è¨€**

```jsx
function App() {
  const [locale, setLocale] = useState('en'); // å½“å‰è¯­è¨€

  const switchLang = () => {
    setLocale(locale === 'en' ? 'zh' : 'en'); // ç‚¹å‡»åˆ‡æ¢
  };

  return (
    <div>
      <p>å½“å‰è¯­è¨€: {locale}</p>
      <button onClick={switchLang}>åˆ‡æ¢è¯­è¨€</button>
    </div>
  );
}
```



<br/><br/>
> <h3 id='useEffect'>useEffect</h3>

&emsp;Effectç¿»è¯‘æˆä¸“ä¸šæœ¯è¯­ç§°ä¹‹ä¸ºå‰¯ä½œç”¨ã€‚ç½‘ç»œè¯·æ±‚ã€DOMæ“ä½œéƒ½æ˜¯å‰¯ä½œç”¨çš„ä¸€ç§ï¼ŒuseEffectå°±æ˜¯ä¸“é—¨ç”¨æ¥å¤„ç†å‰¯ä½œç”¨çš„ã€‚åœ¨ç±»ç»„ä»¶ä¸­å‰¯ä½œç”¨é€šå¸¸åœ¨componentDid-Mountå’ŒcomponentDidUpdateä¸­è¿›è¡Œå¤„ç†ï¼Œè€ŒuseEffectå°±ç›¸å½“äºcomponentDidMountã€componentDidUpdateå’ŒcomponentWillUnmountçš„é›†åˆä½“ã€‚useEffectåŒ…æ‹¬ä¸¤ä¸ªå‚æ•°æ‰§è¡Œæ—¶çš„å›è°ƒå‡½æ•°å’Œä¾èµ–å‚æ•°ï¼Œå¹¶ä¸”å›è°ƒå‡½æ•°è¿˜æœ‰ä¸€ä¸ªè¿”å›å‡½æ•°


```
function TestHOC3_1() {
    const [course, setCourse] = useState('Webé«˜çº§å·¥ç¨‹å¸ˆ')
    const [num, setNum] = useState(1)

    useEffect(() => {
        console.log('âœˆï¸ç»„ä»¶æŒ‚è½½æˆ–æ›´æ–°')
        return () => {
            console.log('âœˆï¸æ¸…ç†æ›´æ–°å‰çš„ä¸€äº›å…¨å±€ç±»å®¹ï¼Œ æˆ–æ£€æµ‹ç»„ä»¶å³å°†å¸è½½')
        };
    }, [num]) // åªæœ‰numæ›´æ–°æ—¶æ‰ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°
					    // ä¸€å®šæ³¨æ„ä¾èµ–å‚æ•°è¦ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„ï¼Œä¸ä¼ çš„è¯ç»„ä»¶çš„ä»»ä½•æ›´æ–°éƒ½ä¼šè°ƒç”¨è¯¥å‰¯ä½œç”¨


    return <div>
        <div>
            é€‰æ‹©è¯¾ç¨‹ï¼š
            <select
                value={course}
                onChange={({ target }) => { setCourse(target.value) }}
            >
                <option value='Web å…¨æ ˆå·¥ç¨‹å¸ˆ'>Web å…¨æ ˆå·¥ç¨‹å¸ˆ</option>
                <option value='Web é«˜çº§å·¥ç¨‹å¸ˆ'>Web é«˜çº§å·¥ç¨‹å¸ˆ</option>

            </select>
        </div>
        <div>
            è´­ä¹°æ•°é‡ï¼š
            <input
                type='number'
                value={num}
                min={1}
                onChange={({ target }) => { setNum(target.value) }}
            >

            </input>
        </div>
    </div>
}

export function TestHOC3() {
    const [show, setShow] = useState(true)

    return <div>
        {show ? <TestHOC3_1 /> : ''}
        <button onClick={() => {
            setShow(!show)
        }}>
            {show ? 'éšè—è¯¾ç¨‹' : 'æ˜¾ç¤ºè¯¾ç¨‹'}
        </button>
    </div>
}


```



æ•ˆæœå›¾: 

![react36](./../Pictures/react36.png)


ä¾èµ–å‚æ•°ï¼Œå…¶æœ¬èº«æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨æ•°ç»„ä¸­æ”¾å…¥è¦ä¾èµ–çš„æ•°æ®ï¼Œå½“è¿™äº›æ•°æ®æœ‰æ›´æ–°æ—¶ï¼Œå°±ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚æ•´ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹å¦‚ä¸‹ï¼š

ç»„ä»¶æŒ‚è½½â†’æ‰§è¡Œå‰¯ä½œç”¨ï¼ˆå›è°ƒå‡½æ•°ï¼‰â†’ç»„ä»¶æ›´æ–°â†’æ‰§è¡Œæ¸…ç†å‡½æ•°ï¼ˆè¿”è¿˜å‡½æ•°ï¼‰â†’æ‰§è¡Œå‰¯ä½œç”¨ï¼ˆå›è°ƒå‡½æ•°ï¼‰â†’ç»„ä»¶å‡†å¤‡å¸è½½â†’æ‰§è¡Œæ¸…ç†å‡½æ•°ï¼ˆè¿”è¿˜å‡½æ•°ï¼‰â†’ç»„ä»¶å¸è½½ã€‚

ä¸Šæ–‡è®²è¿‡useEffectæ˜¯componentDidMountã€componentDidUpdateå’ŒcomponentWillUnmountçš„é›†åˆä½“ï¼Œå¦‚æœå•çº¯åªæƒ³è¦åœ¨æŒ‚è½½åã€æ›´æ–°åã€å¸è½½å‰å…¶ä¸­ä¹‹ä¸€çš„é˜¶æ®µæ‰§è¡Œï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹æ“ä½œã€‚

â‘ componentDidMountã€‚å¦‚æœåªæƒ³è¦åœ¨æŒ‚è½½åæ‰§è¡Œï¼Œå¯ä»¥æŠŠä¾èµ–å‚æ•°ç½®ä¸ºç©ºï¼Œè¿™æ ·åœ¨æ›´æ–°æ—¶å°±ä¸ä¼šæ‰§è¡Œè¯¥å‰¯ä½œç”¨äº†ã€‚

â‘¡componentWillUnmountã€‚å¦‚æœåªæƒ³è¦åœ¨å¸è½½å‰æ‰§è¡Œï¼ŒåŒæ ·æŠŠä¾èµ–å‚æ•°ç½®ä¸ºç©ºï¼Œè¯¥å‰¯ä½œç”¨çš„è¿”è¿˜å‡½æ•°å°±ä¼šåœ¨å¸è½½å‰æ‰§è¡Œã€‚

â‘¢componentDidUpdateã€‚åªæ£€æµ‹æ›´æ–°ç›¸å¯¹æ¯”è¾ƒéº»çƒ¦ï¼Œéœ€è¦åŒºåˆ†æ›´æ–°è¿˜æ˜¯æŒ‚è½½éœ€è¦æ£€æµ‹ä¾èµ–æ•°æ®å’Œåˆå§‹å€¼æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœå½“å‰çš„æ•°æ®å’Œåˆå§‹æ•°æ®ä¿æŒä¸€è‡´å°±è¯´æ˜æ˜¯æŒ‚è½½é˜¶æ®µï¼Œå½“ç„¶å®‰å…¨èµ·è§åº”å’Œä¸Šä¸€æ¬¡çš„å€¼è¿›è¡Œå¯¹æ¯”ï¼Œè‹¥å½“å‰çš„ä¾èµ–æ•°æ®å’Œä¸Šä¸€æ¬¡çš„ä¾èµ–æ•°æ®å®Œå…¨ä¸€æ ·ï¼Œåˆ™è¯´æ˜ç»„ä»¶æ²¡æœ‰æ›´æ–°




<br/><br/>
> <h3 id="å‰¯ä½œç”¨useEffect3ç§ä½¿ç”¨åœºæ™¯"> å‰¯ä½œç”¨useEffect3ç§ä½¿ç”¨åœºæ™¯</h3>

**`useEffect()`** æ˜¯ä¸€ä¸ªå¸¸ç”¨ Hookï¼Œç”¨äº**å¤„ç†å‰¯ä½œç”¨ï¼ˆside effectsï¼‰**ï¼Œæ¯”å¦‚ï¼š

* é¡µé¢åŠ è½½æ—¶æ‰§è¡ŒæŸäº›æ“ä½œ
* ç›‘å¬æŸä¸ªçŠ¶æ€å˜åŒ–
* è®¢é˜…/æ¸…ç†å®šæ—¶å™¨ã€äº‹ä»¶ã€ç½‘ç»œè¯·æ±‚ç­‰

***
<br/>

**âœ… 1.é¡µé¢åŠ è½½æ—¶æ‰§è¡ŒæŸäº›æ“ä½œï¼ˆå¦‚è·å–æ•°æ®ï¼‰**

```jsx
import { useEffect } from 'react';

function PageLoadExample() {
  useEffect(() => {
    console.log('ğŸ“¦ é¡µé¢åŠ è½½å®Œæˆæ—¶è¿è¡Œä¸€æ¬¡');

    // æ¨¡æ‹Ÿæ•°æ®è¯·æ±‚
    fetch('https://jsonplaceholder.typicode.com/posts/1')
      .then(res => res.json())
      .then(data => console.log('æ•°æ®:', data));
  }, []); // ğŸ‘ˆ ç©ºæ•°ç»„ï¼šåªåœ¨åˆå§‹åŠ è½½æ—¶æ‰§è¡Œä¸€æ¬¡

  return <h2>é¡µé¢åŠ è½½ç¤ºä¾‹</h2>;
}
```

<br/>

**2.ç›‘å¬æŸä¸ªçŠ¶æ€å˜åŒ–ï¼ˆå¦‚è¯­è¨€ã€æœç´¢è¯ï¼‰**

```js
import { useEffect, useState } from 'react';

function App() {
  const [locale, setLocale] = useState('en');

  useEffect(() => {
    console.log(`è¯­è¨€å˜åŒ–ä¸ºï¼š${locale}`);
  }, [locale]); // ğŸ‘ˆ å½“ locale å˜åŒ–æ—¶ä¼šè§¦å‘è¿™ä¸ªå‡½æ•°

  return (
    <div>
      <button onClick={() => setLocale(locale === 'en' ? 'zh' : 'en')}>
        åˆ‡æ¢è¯­è¨€
      </button>
    </div>
  );
}
```

<br/>

**æ€»ç»“ï¼šHooks å°æŠ„è¡¨**

| Hook          | ç”¨é€”            | ç¤ºä¾‹                                      |
| ------------- | ------------- | --------------------------------------- |
| `useState()`  | å®šä¹‰ç»„ä»¶å†…çš„çŠ¶æ€      | `const [count, setCount] = useState(0)` |
| `useEffect()` | å¤„ç†å‰¯ä½œç”¨ï¼ˆå¦‚åŠ è½½ã€ç›‘å¬ï¼‰ | `useEffect(() => {}, [ä¾èµ–])`  

<br/>

**âœ…3.è®¢é˜…/æ¸…ç†å®šæ—¶å™¨ã€äº‹ä»¶ã€WebSocket ç­‰**

```jsx
import { useEffect, useState } from 'react';

function TimerExample() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    console.log('â± å¯åŠ¨å®šæ—¶å™¨');
    const timer = setInterval(() => {
      setCount(c => c + 1);
      
      /** æ‰§è¡Œ1000æ¬¡åœæ­¢çš„é€»è¾‘
      setCount(c => {
	      if (c >= 1000) {
	        clearInterval(timer); // âœ… æ‰‹åŠ¨æ¸…ç†å®šæ—¶å™¨
	        return c;
	      }
	      return c + 1;
	    });
      */
    }, 1000); // æ¯éš” 1000 æ¯«ç§’ï¼ˆå³ 1 ç§’ï¼‰æ‰§è¡Œä¸€æ¬¡è¿™ä¸ªå›è°ƒå‡½æ•°ï¼Œæ³¨æ„ï¼š ä¸æ˜¯æ‰§è¡Œ1000æ¬¡å°±åœæ­¢å®šæ—¶å™¨
    
    // useEffect ä¸­çš„**â€œæ¸…ç†å‡½æ•°â€ï¼ˆcleanup functionï¼‰ï¼Œå®ƒçš„æ‰§è¡Œæ—¶æœºå¹¶ä¸æ˜¯ç”±ä¸šåŠ¡é€»è¾‘æ§åˆ¶ï¼ˆæ¯”å¦‚è®¡æ•°åˆ° 1000ï¼‰**ï¼Œè€Œæ˜¯ç”± React æ§åˆ¶ç»„ä»¶ç”Ÿå‘½å‘¨æœŸã€‚
    return () => {
      console.log('ğŸ§¹ æ¸…é™¤å®šæ—¶å™¨');
       // å½“ä¸‹æ¬¡ useEffect æ‰§è¡Œå‰ï¼Œå…ˆæ¸…ç†æ—§çš„å‰¯ä½œç”¨
      clearInterval(timer);
    };
  }, []); // ğŸ‘ˆ åªåœ¨é¦–æ¬¡åŠ è½½æ—¶è®¾ç½®å®šæ—¶å™¨ï¼Œå¹¶åœ¨å¸è½½æ—¶æ¸…é™¤

  return <h2>è®¡æ•°ï¼š{count}</h2>;
}
```

**âœ… æ€»ç»“ï¼š**

* `setInterval()`/`addEventListener()` ç­‰å‰¯ä½œç”¨éœ€è¦åœ¨ `useEffect` ä¸­è®¾ç½®
* åœ¨ `return` ä¸­ç¼–å†™æ¸…ç†å‡½æ•°ï¼ˆå¸è½½ç»„ä»¶æˆ–é‡æ–°æ‰§è¡Œå‰ä¼šè‡ªåŠ¨è°ƒç”¨ï¼‰
* ç±»ä¼¼ç±»ç»„ä»¶çš„ `componentWillUnmount`


<br/>
***

**æ•´ä½“æ€»ç»“è¡¨ï¼š**

| åœºæ™¯               | `useEffect` å½¢å¼                                  | ç”¨é€”è¯´æ˜          |
| ---------------- | ----------------------------------------------- | ------------- |
| é¡µé¢åŠ è½½æ—¶è¿è¡Œä¸€æ¬¡        | `useEffect(() => { ... }, [])`                  | è·å–æ•°æ®ã€åˆå§‹åŒ–      |
| çŠ¶æ€/props å˜åŒ–æ—¶è¿è¡Œ   | `useEffect(() => { ... }, [value])`             | å“åº”å¼ç›‘å¬çŠ¶æ€å˜åŒ–     |
| è®¢é˜…/å®šæ—¶å™¨/äº‹ä»¶ç»‘å®š + æ¸…ç† | `useEffect(() => { ...; return () => {} }, [])` | ç”Ÿå‘½å‘¨æœŸå†…å®‰å…¨å¤„ç†å¤–éƒ¨èµ„æº |     


<br/><br/>
> <h3 id="useEffectä¸­å¤šä¸ªç½‘ç»œè¯·æ±‚å®ä¾‹ç¼–ç ">useEffectä¸­å¤šä¸ªç½‘ç»œè¯·æ±‚å®ä¾‹ç¼–ç </h3>

å½“ `viewModel`ã€`viewModel11`ã€`viewModel12` ä¸­çš„æŸä¸ªå®ä¾‹å˜åŒ–æ—¶ï¼Œé‡æ–°æ‰§è¡Œè¯·æ±‚ã€‚

ä½ å†™çš„ï¼š

```jsx
useEffect(() => {
  viewModel.fetchUnitList().then(data => {
    setUnitList(data);
  });
  viewModel11.fetchUnitList11().then(data => {
    setUnitList(data);
  });
  viewModel12.fetchUnitList12().then(data => {
    setUnitList(data);
  });
}, [viewModel, viewModel11, viewModel12]);
```

-  **âœ… å¯è¡Œæ€§åˆ†æï¼š**

	- 1.âœ… è¿™ç¡®å®èƒ½åšåˆ°å½“ä¾èµ–æ•°ç»„ä¸­æŸä¸ª `viewModel` å‘ç”Ÿå˜åŒ–æ—¶é‡æ–°æ‰§è¡Œå‰¯ä½œç”¨ï¼ˆç½‘ç»œè¯·æ±‚ï¼‰ã€‚
	- 2.âŒ ä½† `setUnitList` è¢«ä½ è¿ç»­ä¸‰æ¬¡è°ƒç”¨ï¼Œ**åè€…ä¼šè¦†ç›–å‰è€…çš„ç»“æœ**ï¼Œæœ€ç»ˆåªæœ‰ `viewModel12` çš„æ•°æ®ç•™ä¸‹ã€‚

---
<br/>


**âœ… æ­£ç¡®ä¼˜é›…çš„åšæ³•ï¼ˆåˆ†ç¦»çŠ¶æ€ï¼Œæˆ–åˆå¹¶æ•°æ®ï¼‰**

 **âœ… æ–¹å¼ä¸€ï¼šå¤šä¸ª Stateï¼Œåˆ†åˆ«å­˜æ¯ä¸ªè¯·æ±‚çš„ç»“æœ**

```jsx
const [unitList, setUnitList] = useState([]);
const [unitList11, setUnitList11] = useState([]);
const [unitList12, setUnitList12] = useState([]);

useEffect(() => {
  viewModel.fetchUnitList().then(setUnitList);
  viewModel11.fetchUnitList11().then(setUnitList11);
  viewModel12.fetchUnitList12().then(setUnitList12);
}, [viewModel, viewModel11, viewModel12]);
```

è¿™æ ·æ¯ç»„æ•°æ®ç‹¬ç«‹å­˜å‚¨ï¼Œä¸ä¼šè¦†ç›–ã€‚

<br/>

**âœ… æ–¹å¼äºŒï¼šä¸€ä¸ªçŠ¶æ€é‡Œåˆå¹¶å¤šä¸ªç»“æœ**

```jsx
const [allData, setAllData] = useState({
  main: [],
  list11: [],
  list12: [],
});

useEffect(() => {
  Promise.all([
    viewModel.fetchUnitList(),
    viewModel11.fetchUnitList11(),
    viewModel12.fetchUnitList12(),
  ]).then(([main, list11, list12]) => {
    setAllData({ main, list11, list12 });
  });
}, [viewModel, viewModel11, viewModel12]);
```

- **ä¼˜ç‚¹ï¼š**
	* è¯·æ±‚æ˜¯å¹¶å‘çš„ï¼›
	* çŠ¶æ€æ•´åˆæˆä¸€ä¸ªå¯¹è±¡ï¼Œç®¡ç†æ›´æ–¹ä¾¿ï¼›
	* é¡µé¢æ¸²æŸ“å¯ä»¥è¿™æ ·å†™ï¼š

```jsx
<ul>
  {allData.main.map(...)}
</ul>
<ul>
  {allData.list11.map(...)}
</ul>
```

<br/>

**âœ… æ–¹å¼ä¸‰ï¼šè‹¥ä½ åªå¸Œæœ›åœ¨â€œåˆæ¬¡æ¸²æŸ“â€æ—¶è°ƒç”¨ï¼Œä¸ä¾èµ–å˜åŒ–**

```jsx
useEffect(() => {
  // åªæ‰§è¡Œä¸€æ¬¡
}, []);
```

<br/>

 **ğŸš« é”™è¯¯ç¤ºä¾‹ï¼šä¸è¦è¿™æ ·åšï¼**

```jsx
// è¿™æ ·ä¼šä¸¢æ•°æ®
setUnitList(data); // è¢«åé¢çš„ setUnitList è¦†ç›–
```




<br/><br/>
> <h3 id="useEffectä¸­æ‰§è¡Œå¤šä¸ªç½‘ç»œè¯·æ±‚">useEffectä¸­æ‰§è¡Œå¤šä¸ªç½‘ç»œè¯·æ±‚</h3>


**âœ… ğŸŒŸ å†™æ³•ä¸€ï¼šå¹¶è¡Œè¯·æ±‚ï¼ˆå¤šä¸ªæ¥å£åŒæ—¶è¯·æ±‚ï¼‰**

```js
useEffect(() => {
  const fetchData = async () => {
    try {
      setLoading(true);

      const [userRes, productRes] = await Promise.all([
        fetch('/api/user'),
        fetch('/api/products')
      ]);

      const user = await userRes.json();
      const products = await productRes.json();

      setUser(user);
      setProducts(products);
    } catch (error) {
      console.error('å‡ºé”™äº†:', error);
      setError(error);
    } finally {
      setLoading(false);
    }
  };

  fetchData();
}, []);
```

<br/>


**âœ… ğŸŒŸ å†™æ³•äºŒï¼šä¸²è¡Œè¯·æ±‚ï¼ˆç¬¬äºŒä¸ªè¯·æ±‚ä¾èµ–ç¬¬ä¸€ä¸ªç»“æœï¼‰**

```js
useEffect(() => {
  const fetchData = async () => {
    try {
      setLoading(true);

      const userRes = await fetch('/api/user');
      const user = await userRes.json();
      setUser(user);

      const productRes = await fetch(`/api/products?userId=${user.id}`);
      const products = await productRes.json();
      setProducts(products);
    } catch (error) {
      setError(error);
    } finally {
      setLoading(false);
    }
  };

  fetchData();
}, []);
```

<br/>

 âœ… **2.useEffect ä¸­ç›‘å¬å¤šä¸ªå˜é‡æ€ä¹ˆå†™ï¼Ÿ**



```js
useEffect(() => {
  // é€»è¾‘æˆ–ç½‘ç»œè¯·æ±‚
}, [username, password, token]);
```

**âœ… æ„æ€ï¼š**

> å½“ `username`ã€`password` æˆ– `token` ä¸­ä»»æ„ä¸€ä¸ªå€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ`useEffect` ä¼šé‡æ–°æ‰§è¡Œã€‚

<br/>

-  â— æ³¨æ„ç‚¹ï¼š

	* å¦‚æœä½ å†™æˆç©ºæ•°ç»„ `[]`ï¼Œæ„å‘³ç€è¿™ä¸ª `useEffect` **åªæ‰§è¡Œä¸€æ¬¡ï¼ˆåˆå§‹æŒ‚è½½ï¼‰**ã€‚
	* å¦‚æœä½ ä¾èµ–äº†æŸä¸ªå€¼å´æ²¡æ”¾å…¥æ•°ç»„ï¼Œä¼šå‡ºç°â€œé—­åŒ…å¼•ç”¨æ—§å€¼â€çš„ bugã€‚

---
<br/>


**âœ… ç»¼åˆç¤ºä¾‹ï¼šå¤šä¸ªä¾èµ– + å¤šä¸ªè¯·æ±‚**

```js
useEffect(() => {
  const fetchAll = async () => {
    try {
      setLoading(true);

      const userRes = await fetch(`/api/user?name=${username}`);
      const user = await userRes.json();
      setUser(user);

      const productRes = await fetch(`/api/products?token=${token}`);
      const products = await productRes.json();
      setProducts(products);
    } catch (e) {
      setError(e);
    } finally {
      setLoading(false);
    }
  };

  fetchAll();
}, [username, token]); // âœ… å¤šä¸ªä¾èµ–
```




<br/><br/>
># <h3 id="å‰¯ä½œç”¨é’©å­useEffectæœ«å°¾3ç§å‚æ•°ä½¿ç”¨æ–¹æ³•">[å‰¯ä½œç”¨é’©å­useEffectæœ«å°¾3ç§å‚æ•°ä½¿ç”¨æ–¹æ³•](./æ¶æ„æ¨¡å¼.md#å‰¯ä½œç”¨é’©å­useEffectæœ«å°¾3ç§å‚æ•°ä½¿ç”¨æ–¹æ³•)</h3>

<br/><br/>
> <h3 id='useCallback'>useCallback</h3>

**useCallback(fn,deps):**
- fnå°±æ˜¯æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠä½ æƒ³è¦åšçš„äº‹æ”¾åˆ°å‡½æ•°ä¸­
- depså°±æ˜¯æŒ‡fnå‡½æ•°æ‰€ä¾èµ–çš„å‚æ•°,å¦‚æœæ²¡æœ‰ä¾èµ–å°±å¯ä»¥ä¸éœ€è¦å¼•å…¥

&emsp; useCallbackçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªmemoizedå›è°ƒå‡½æ•°ï¼Œåœ¨å®ƒæ‰€ä¾èµ–çš„å‚æ•°ä¸å˜çš„è€Œæƒ…å†µä¸‹ï¼Œ(ä¹Ÿå°±æ˜¯æŒ‡depsä¸­çš„å‚æ•°)è¿”å›çš„å›è°ƒå‡½æ•°åœ°å€ä¸å˜ï¼Œå¦‚æœä¾èµ–çš„å‚æ•°å‘ç”Ÿå˜åŒ–ï¼Œusecallbackå°±ä¼šè¿”å›ä¸€ä¸ªæ–°çš„memoizedå›è°ƒå‡½æ•°ï¼Œè¿™æ—¶å‡½æ•°åœ°å€ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜.
&emsp; useCallbackçš„è¿™ç§å½¢å¼å’ŒcreateRefã€useRefæœ‰ç‚¹ç›¸ä¼¼ï¼ŒcreateRefå‡½æ•°åˆ›å»ºçš„refåœ¨æ¯æ¬¡æ‰§è¡Œæ—¶ï¼Œæˆ–è€…é‡æ–°æ›´æ–°ç»„ä»¶æ—¶éƒ½ä¼šé‡æ–°å»åˆ›å»ºrefï¼Œè¿™æ—¶refå’Œä¹‹å‰çš„refä¸åŒ.ä½†æ˜¯é€šè¿‡useRefåˆ›å»ºrefå°±ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºuseRefåˆ›å»ºçš„refå¯ä»¥ä½œä¸ºå…¨å±€å˜é‡ï¼Œå®ƒä¸ä¼šéšç€å‡½æ•°é‡æ–°æ‰§è¡Œæˆ–è€…ç»„ä»¶æ›´æ–°è€Œå»é‡æ–°åˆ›å»ºã€‚

**DEMO**

```
mport React, { useEffect, useState, useCallback, memo } from 'react';

function TestApp1() {
    let [count, setCount] = useState(0);

    const childClick = useCallback(() => {
        console.log("you click child")
    }, [count])

    function parentClick() {
        console.log("you click parent count: ", count);
        count++;

        if (count === 4)
            setCount(count);
    }

    return (
        <div>
            <div style={{ background: 'red', height: 44 }} onClick={parentClick}>ParentComponent</div>
            <ChildComponent childClick={childClick}></ChildComponent>
        </div>
    )
}

const ChildComponent = memo((props) => {
    console.log("ChildComponent is running")

    return <div onClick={props.childClick} style={{ background: 'yellow', height: 44 }} >
        ChildComponent
    </div>
})

//æˆ–è€…åœ¨å®šä¹‰ChildComponentæ—¶å¤–é¢ä¸è¦åŒ…è£¹ä¸€å±‚memo,å¯ç”¨const ChildComponentMemo = memo(ChildComponent);




export default TestApp1
```

ä½¿ç”¨:

```
  render() {
	  return (
            <TestApp1/>
        )
  }
```

æ•ˆæœå›¾:

![react35](./../Pictures/react35_0.png)



<br/><br/>
> <h3 id='useMemo'>useMemo</h3>

&emsp; useMemoã€useCallbackç”¨æ³•éƒ½å·®ä¸å¤šï¼Œéƒ½ä¼šåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™æ‰§è¡Œï¼Œä¹‹åä¼šåœ¨å…¶ä¾èµ–çš„å˜é‡å‘ç”Ÿæ”¹å˜æ—¶å†æ¬¡æ‰§è¡Œï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªhookséƒ½è¿”å›ç¼“å­˜çš„å€¼ï¼ŒuseMemoè¿”å›ç¼“å­˜çš„å˜é‡ï¼ŒuseCallbackè¿”å›ç¼“å­˜çš„å‡½æ•°ã€‚

```
import React, { useEffect, useState, useCallback, memo, useMemo } from 'react';

const Child = ({ name, onClick }) => {
    console.log('å­ç»„ä»¶?')
    return (
        <>
            <div style={{ color: name.color }}>æˆ‘æ˜¯ä¸€ä¸ªå­ç»„ä»¶ï¼Œçˆ¶çº§ä¼ è¿‡æ¥çš„æ•°æ®ï¼š{name.name}</div>
            <button onClick={onClick.bind(null, 'æ–°çš„å­ç»„ä»¶name')}>æ”¹å˜name</button>
        </>
    );
}
const ChildMemo = memo(Child);

const TestApp1 = (props) => {
    const [count, setCount] = useState(0);
    const [name, setName] = useState('Childç»„ä»¶');

    return (
        <>
            <button onClick={(e) => { setCount(count + 1) }}>åŠ 1</button>
            <p>count:{count}</p>
            <ChildMemo
                //ä½¿ç”¨useMemoï¼Œè¿”å›ä¸€ä¸ªå’ŒåŸæœ¬ä¸€æ ·çš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¾èµ–æ€§ï¼Œå½“nameå‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œæ‰äº§ç”Ÿä¸€ä¸ªæ–°çš„å¯¹è±¡
                name={
                    useMemo(() => ({
                        name,
                        color: name.indexOf('name') !== -1 ? 'red' : 'green'
                    }), [name])
                }
                onClick={useCallback((newName) => setName(newName), [])}
            // {/* useCallback((newName: string) => setName(newName),[]) */}
            // {/* è¿™é‡Œä½¿ç”¨äº†useCallbackä¼˜åŒ–äº†ä¼ é€’ç»™å­ç»„ä»¶çš„å‡½æ•°ï¼Œåªåˆå§‹åŒ–ä¸€æ¬¡è¿™ä¸ªå‡½æ•°ï¼Œä¸‹æ¬¡ä¸äº§ç”Ÿæ–°çš„å‡½æ•°*/}
            />
        </>
    )
}



export default TestApp1
```

ä½¿ç”¨:

```
  render() {
	  return (
            <TestApp1/>
        )
  }
```


![react35](./../Pictures/react35_1.png)

æ€»ç»“:åœ¨å­ç»„ä»¶ä¸éœ€è¦çˆ¶ç»„ä»¶çš„å€¼å’Œå‡½æ•°çš„æƒ…å†µä¸‹ï¼Œåªéœ€è¦ä½¿ç”¨memoå‡½æ•°åŒ…è£¹å­ç»„ä»¶å³å¯ã€‚è€Œåœ¨ä½¿ç”¨å‡½æ•°çš„æƒ…å†µï¼Œéœ€è¦è€ƒè™‘æœ‰æ²¡æœ‰å‡½æ•°ä¼ é€’ç»™å­ç»„ä»¶ä½¿ç”¨useCallbackã€‚è€Œåœ¨å€¼æœ‰æ‰€ä¾èµ–çš„é¡¹ï¼Œå¹¶ä¸”æ˜¯å¯¹è±¡å’Œæ•°ç»„ç­‰å€¼çš„æ—¶å€™è€Œä½¿ç”¨useMemoï¼ˆå½“è¿”å›çš„æ˜¯åŸå§‹æ•°æ®ç±»å‹å¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ï¼Œå°±ä¸è¦ä½¿ç”¨useMemoäº†ï¼‰ã€‚ä¸è¦ç›²ç›®ä½¿ç”¨è¿™äº›hooks

***
<br/><br/><br/>
># <h2 id="useMemoçš„ä¾èµ–æ•°ç»„">[useMemoçš„ä¾èµ–æ•°ç»„](./æ¶æ„æ¨¡å¼.md#useMemoçš„ä¾èµ–æ•°ç»„)</h2>


<br/>

> Hooksçš„ä½¿ç”¨è§„åˆ™


&emsp;Hooksä½¿ç”¨è§„åˆ™äº†è§£Hooksçš„ä½¿ç”¨ä¹‹åï¼Œè¿˜éœ€è¦å…·ä½“äº†è§£ä¸€ä¸‹Hooksçš„ä½¿ç”¨è§„åˆ™ï¼Œä¸»è¦ä¸ºä»¥ä¸‹ä¸¤ç‚¹ï¼š

1ï¼‰åªèƒ½åœ¨å‡½æ•°å¼ç»„ä»¶å’Œè‡ªå®šä¹‰Hooksä¹‹ä¸­è°ƒç”¨Hooksï¼Œæ™®é€šå‡½æ•°æˆ–è€…ç±»ç»„ä»¶ä¸­ä¸èƒ½ä½¿ç”¨Hooksï¼›

2ï¼‰åªèƒ½åœ¨å‡½æ•°çš„ç¬¬ä¸€å±‚è°ƒç”¨Hooksã€‚å¦‚æœå‡½æ•°ä¸­è¿˜åµŒå¥—äº†æµç¨‹æ§åˆ¶è¯­å¥å¦‚ifæˆ–è€…forï¼Œè¿™äº›åœ°æ–¹æ˜¯ä¸èƒ½å†è°ƒç”¨Hooksçš„ï¼Œå½“ç„¶å‡½æ•°ä¸­åµŒå¥—äº†å­å‡½æ•°ï¼Œå­å‡½æ•°ä¸­ä¹Ÿä¸€æ ·ä¸èƒ½ä½¿ç”¨Hooksã€‚Hooksçš„è®¾è®¡æåº¦ä¾èµ–å…¶å®šä¹‰æ—¶å€™çš„é¡ºåºï¼Œå¦‚ç»„ä»¶æ›´æ–°æ—¶Hooksçš„è°ƒç”¨é¡ºåºå˜äº†ï¼Œå°±ä¼šå‡ºç°ä¸å¯é¢„çŸ¥çš„é—®é¢˜ã€‚Hooksçš„ä½¿ç”¨åˆ™æ˜¯ä¸ºäº†ä¿è¯Hooksè°ƒç”¨é¡ºåºçš„ç¨³å®šæ€§ã€‚ä¸ºæ­¤Reactæä¾›ä¸€ä¸ªESLint pluginæ¥åšé™æ€ä»£ç æ£€æµ‹ã€‚eslint-plugin-react-hooksæ–°ç‰ˆçš„è„šæ‰‹æ¶ä¸­ï¼Œä¹Ÿå†…ç½®äº†è¿™å¥—æ£€æµ‹ã€‚å½“ä»£ç ä¸­çš„Hooksä½¿ç”¨ä¸ç¬¦åˆä¸Šè¿°è§„èŒƒæ—¶ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸­ä¼šæœ‰é”™è¯¯è­¦å‘Šã€‚

**æ³¨æ„ï¼š**

&emspï¼› åœ¨ä½¿ç”¨è‡ªå®šä¹‰Hookæ—¶ï¼ŒåŒæ ·éœ€è¦éµå®ˆHooksçš„ä½¿ç”¨è§„åˆ™ï¼Œå¦å¤–æ³¨æ„Reactè¦æ±‚è‡ªå®šä¹‰Hookçš„å‘½åä¹Ÿå¿…é¡»ä»¥useå¼€å§‹ï¼Œä»¥åŒºåˆ«äºå…¶ä»–å‡½æ•°ã€‚


<br/><br/>
> <h3 id='é•¿è½®è¯¢æ¡ˆä¾‹'>[é•¿è½®è¯¢æ¡ˆä¾‹](https://codeantenna.com/a/veVh4iDVA7)</h3>

```
const TestApp1 = () => {

    // è½®è¯¢ç®¡ç†å™¨
    const intervalManager = myInterval(main)

    // è½®è¯¢çš„æ–¹æ³•
    let count = 0
    function main() {
        count += 1
        if (count == 5) {
            count = 0
            intervalManager.stop()
        }
        console.log('ğŸ æ‰§è¡Œï¼š', count)
    }

    function main1() {
        const flag = parseInt(Math.random() * 2) === 1
        console.log('flag', flag)
        return flag ? Promise.resolve() : Promise.reject()
    }



    // è½®è¯¢
    function myInterval(callback, interval = 2000) {
        let timerId
        let isStop = false

        const start = async () => {
            isStop = false
            loop()
        }

        const stop = () => {
            console.log('âŒ åœæ­¢æ‰§è¡Œ')
            isStop = true
            clearTimeout(timerId)
        }

        const loop = async () => {
            try {
                await callback(stop)
            } catch (err) {
                console.error('è½®è¯¢å‡ºé”™ï¼š', err)
                throw new Error('è½®è¯¢å‡ºé”™ï¼š', err)
            }

            if (isStop) return
            return (timerId = setTimeout(loop, interval))
        }
        return {
            start,
            stop
        }
    }


    return (
        <div style={{ display: 'flex', flexDirection: 'column' }}>
            <div style={{ width: 100, height: 44, backgroundColor: 'yellow' }}
                onClick={intervalManager.start}
            >
                å¼€å§‹
            </div>
            <div style={{ width: 100, height: 44, backgroundColor: 'red' }}
                onClick={intervalManager.stop}
            >
                åœæ­¢
            </div>
        </div>
    )
}

export default TestApp1


//ä½¿ç”¨
 render() {
	 return (
            <TestApp1 name={'silajlgjsl'}/>
        )
 }
```


æ•ˆæœå›¾:

![é•¿è½®è¯¢](./../Pictures/react36_0.png)

<br/>

**å‡½æ•°åœ°å€è¯·æ±‚**

```
const TestApp = () => {
    const [origin, setOrigin] = useState('');
    const updateState = useCallback(async () => {
        const response = await fetch('https://httpbin.org/get');
        const data = await response.json();
        console.log('.ã€‹ã€‰ã€‹ã€‰ğŸ data:', data)
        setOrigin(data.origin);
    }, []);
    useEffect(() => {
        setInterval(updateState, 3000);
    }, [updateState]);
    return <main>{`Your origin is: ${origin}`}</main>;
}
```



<br/>
<br/>

> <h3 id=''></h3>



<br/>
<br/>
<br/>

> <h2 id='ReactRouter'>React Router</h2>

&emsp; SPAï¼ˆSingle Page Applicationï¼Œå•é¡µé¢åº”ç”¨ï¼‰ï¼Œæ•´ä¸ªåº”ç”¨åªåŠ è½½ä¸€ä¸ªé¡µé¢ï¼ˆå…¥å£é¡µé¢ï¼‰ï¼Œåç»­åœ¨ä¸ç”¨æˆ·çš„äº¤äº’è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡DOMæ“ä½œåœ¨è¿™ä¸ªå•é¡µä¸ŠåŠ¨æ€ç”Ÿæˆç»“æ„å’Œå†…å®¹ã€‚ä½¿ç”¨SPAå¯ä»¥ä½¿é¡¹ç›®æœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œå‡å°‘è¯·æ±‚ã€æ¸²æŸ“å’Œé¡µé¢è·³è½¬äº§ç”Ÿçš„ç­‰å¾…ä¸ç©ºç™½ï¼Œå¦å¤–å‰ç«¯åœ¨é¡¹ç›®ä¸­æ›´å…·é‡è¦æ€§ï¼Œæ•°æ®å’Œé¡µé¢å†…å®¹éƒ½ç”±å¼‚æ­¥è¯·æ±‚ï¼ˆAJAXï¼‰+DOMæ“ä½œæ¥å®Œæˆï¼Œå‰ç«¯åˆ™æ›´å¤šåœ°å»å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚

&emsp; React-Routerå°±æ˜¯ä¸€å¥—å‰ç«¯è·¯ç”±åº“ï¼Œåœ¨é¡¹ç›®ä¸­å®‰è£…å¥½React-Routerä¹‹åï¼Œå¼€å‘è€…å°±å¯ä»¥åŸºäºReactå¼€å‘å•é¡µé¢å¤šè§†å›¾çš„åº”ç”¨ã€‚

&emsp; React Router Dom å°±åªæ˜¯åŸºæ–¼ React Route æ›´é€²éšçš„å¥—ä»¶ï¼Œæ ¸å¿ƒéƒ½é‚„æ˜¯ React Routeï¼Œç›¸åŒåœ°ï¼Œreact-router-native ä¹Ÿæ˜¯åŸºæ–¼ React Route æ›´é€²éšçš„å¥—ä»¶ã€‚


React-Routerçš„å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼šnpm i react-router-dom

&emsp; React Router Dom å…¶å¯¦åªæ˜¯å¤šäº†å››å€‹ React Componentï¼šBrowserRouterã€ HashRouterã€Linkã€NavLinkã€‚


WEBç«¯çš„Routerä¸­æä¾›äº†ä¸¤ç§ä¸åŒçš„æ¨¡å¼**ï¼œHashRouter/ï¼**å’Œ**ï¼œBrowserRouter/ï¼**:

- HashRouteræ˜¯åŸºäºhashå®ç°çš„ä¸€ç§è·¯ç”±æ–¹å¼ï¼ŒURLå˜åŒ–æ—¶ä¸»è¦æ˜¯hashå€¼è¿›è¡Œå˜åŒ–ã€‚å¦‚http://127.0.0.1:3000/#/aboutã€http://127.0.0.1:3000/#/userï¼Œå¯ä»¥çœ‹åˆ°URLé‡Œä¸€å®šä¼šæœ‰ä¸€ä¸ª#å·ï¼Œä¹Ÿå°±æ˜¯hashæ ‡è¯†ã€‚hashæ¨¡å¼çš„å¥½å¤„æ˜¯ä¸€å®šä¸ä¼šå‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼Œä½†URLé‡Œä¸€å®šä¼šæœ‰ä¸€ä¸ª#å·ã€‚
- BrowserRouteråˆ™æ˜¯åŸºäºH5 history APIçš„ä¸€ç§è·¯ç”±æ–¹å¼ã€‚historyçš„URLåˆ‡æ¢åŸºäºhistoryæä¾›çš„pushStateæ–¹æ³•ï¼Œå¥½å¤„æ˜¯URLå’Œä¹‹å‰ç›´æ¥è¯·æ±‚åç«¯çš„URLæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå¦‚http://127.0.0.1:3000/aboutã€http://127.0.0.1:3000/userã€‚å½“ç„¶é—®é¢˜ä¹ŸåŒæ ·çªå‡ºï¼Œåœ¨éƒ¨ç½²çº¿ä¸Šæ—¶ï¼Œè¦æ³¨æ„ç›´æ¥è¾“å…¥URLè¿˜æ˜¯ä¼šå‘èµ·åç«¯è¯·æ±‚ï¼Œæ‰€ä»¥åç«¯ä¸€æ ·ä¹Ÿè¦åšå¤„ç†ã€‚


&emsp; åœ¨å®é™…å¼€å‘æ—¶ï¼Œä¸ç®¡é‡‡å–å“ªç§è·¯ç”±æ¨¡å¼ï¼Œéƒ½éœ€è¦åœ¨é¡¹ç›®æœ€å¤–å±‚é…ç½®å¥½è·¯ç”±ï¼Œå‘Šè¯‰Reactè¯¥é¡¹ç›®ä½¿ç”¨çš„æ˜¯å“ªç§è·¯ç”±ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š

**index.js**

```
import { BrowserRouter as Router, HashRouter } from 'react-router-dom';

ReactDOM.render(
  <React.StrictMode>
    <Router>
      <App />
    </Router>
  </React.StrictMode>,
  document.getElementById('root')
);
```


<br/>

**App.js**

```
render() {
    return <TestHOC4 />
}
```


<br/>

**HOC.js**

```
export function TestHOC4() {

    return <div style={{ width: '100%', height: '100%' }}>
        <React.Fragment>
            {/* <Link to='/about'>æ•°å­—</Link> */}
            <Route path="/about" component={About} />
        </React.Fragment>
    </div>
}

export function TestHOC4_1() {
    return <React.Fragment>
        <Link to='/about'>é¦–é¡µ</Link>
        <Route path='/about' render={() => <div>1234567890</div>} />
    </React.Fragment>
}
```

æ•ˆæœå›¾ï¼š

![38](./../Pictures/react38.png)

&emsp; å¦‚æœä½¿ç”¨çš„æ˜¯HashRouterï¼Œåˆ™æŠŠBrowserRouteræ›¿æ¢æˆHashRouterå³å¯ã€‚


<br/>
<br/>

> <h3 id='è·¯ç”±Demo'>è·¯ç”±Demo</h3>

**RouterAbout.js**

```
export default function RouterAboutView() {
    return <div>
        <h1>å…³äºè§†å›¾</h1>
        <p>å…³äºè§†å›¾å†…å®¹</p>
    </div>
}
```

<br/>

**RouterIndexView.js**

```
export default function RouterIndexView() {
    return <div>
        <h1>é¦–é¡µè§†å›¾</h1>
        <p>é¦–é¡µè§†å›¾å†…å®¹</p>
    </div>
}
```


<br/>

**RouterListView.js**

```
export default function RouterListView() {
    const pageLength = Math.ceil(Data.length / 3)

    let { page = 1 } = useParams()
    return <div>
        <h1>åˆ—è¡¨è§†å›¾</h1>
        <p>åˆ—è¡¨è§†å›¾å†…å®¹</p>
        <List activePage={page} />
        <Pagation activePage={page}
            pageLength={pageLength}
        />
    </div>
}

const pageLen = 3 //æ¯é¡µå¤šå°‘æ¡
export function List(props) {
    // æ¥å—çˆ¶çº§ä¼ é€’çš„propsï¼Œpropsä¸­å¿…é¡»åŒ…å«activePage
    // activePageä»£è¡¨å½“å‰å®ç°ç¬¬å‡ é¡µ
    let { activePage } = props
    // ä»å½“å‰é¡µç¬¬å‡ æ¡å¼€å§‹ï¼Œæ³¨æ„é¡µç ä»1å¼€å§‹è®¡æ•°ï¼Œä½†æ˜¯jsä»0å¼€å§‹è®¡æ•°ï¼Œæ‰€ä»¥å‡1
    let start = (activePage - 1) * pageLen
    let end = activePage * pageLen
    // å½“å‰é¡µåˆ°ç¬¬å‡ æ¡ç»“æŸ
    let nowData = Data.filter((item, index) => index >= start && index < end)

    return <ul>
        {nowData.map(item => {
            return (<li key={item.id}>
                <h2>{item.title}</h2>
                <p>{item.describe}</p>
            </li>)
        })}
    </ul>
}
```



<br/>

**RouterRouter.js**

```
let Routers = [
    {
        path: '/',
        exact: true,
        render(props) {
            return <RouterIndexView {...props} />
        }
    },
    {
        path: '/about',
        exact: true,
        render(props) {
            return <RouterAboutView {...props} />
        }
    },
    {
        path: ['/list', '/list/:page'],
        exact: true,
        render(props) {
            let { page = 1 } = props.match.params
            if (page >= 1) {// è§£æé¡µç ï¼Œå¦‚æœæ²¡æœ‰ä¼ é€’é¡µé¢åˆ™è®¾ç½®é»˜è®¤å€¼ä¸º1
                // è‹¥/list/aç­‰ä¸æ˜¯æ•°å­—çš„æƒ…å†µä¸‹ï¼Œåˆ™æ˜¾ç¤º404è§†å›¾
                return <RouterListView {...props} />
            }
            return <RouterUndefinedView {...props} />
        }
    },
    {
        path: '',
        exact: false,
        render(props) {
            return <RouterUndefinedView {...props} />
        }
    }
]


let Navs = [
    {
        to: '/',
        exact: true,
        title: 'é¦–é¡µ'
    },
    {
        to: '/about',
        exact: true,
        title: 'å…³äº'
    },
    {
        to: '/list',
        title: 'è¯¾ç¨‹åˆ—è¡¨',
        isActive(url) {
            let urlData = url.split('/')
            if (url === '/list' || (urlData.length === 3 && urlData[1] === 'list' && urlData[2] > 0)) {
                // åˆ¤æ–­urlä¸ºâ€˜/listâ€™æˆ–â€˜/list/å¤§äº1çš„æ•°å­—æ—¶â€™ï¼Œé€‰ä¸­å½“å‰é¡¹ï¼Œå¦åˆ™ä¸é€‰ä¸­
                return true
            }
            return false
        }
    },

]

export { Routers, Navs }



// ğŸ<==========================================>ğŸ

export function Nav() {
    let { pathname } = useLocation()

    return <nav>
        <span> | </span>
        {
            Navs.map(item => {
                return <Fragment key={item.to}>
                    <NavLink
                        to={item.to}
                        exact={item.exact}
                        isActive={item.isActive ? () => {
                            return item.isActive(pathname)
                        } : null
                        }
                        activeStyle={{
                            color: 'red'
                        }}
                    >
                        {item.title}
                        <span> | </span>
                    </NavLink>
                </Fragment>
            })
        }
    </nav>
}


// ğŸ<==========================================>ğŸ

/**
 * @description: ç¿»é¡µå¯¼èˆªç»„ä»¶
 */
export function Pagation(props) {
    // activePage   å½“å‰ç¬¬å‡ é¡µï¼Œ pageLengthæ€»å…±å¤šå°‘é¡µ
    let { activePage, pageLength } = props
    console.log(activePage)

    return <nav>
        {
            [...('.'.repeat(pageLength))].map((item, index) => {
                index++
                return <Fragment key={index}>
                    <span> | </span>
                    <Link
                        to={'/list/' + index}
                        style={{
                            color: activePage == index ? 'red' : '#000'
                        }}>
                        {index}
                    </Link>
                </Fragment>
            })
        }
        <span> | </span>
    </nav>
}




// ğŸ<==========================================>ğŸ


/**
 * @description: åˆ—è¡¨æ•°æ®
 */

export const Data = [{
    id: 0,
    title: ' iOS æ¶æ„å¸ˆ',
    describe: 'æˆè¯¾æ·±åº¦å¯¹æ ‡é˜¿é‡Œ P6ç­‰çº§ï¼Œè¿›å…¥BATç­‰ä¸€çº¿å¤§å‚ï¼Œæˆä¸ºå¤§å‚è¿›é˜¶ç¨€ç¼ºäººæ‰'
},
{
    id: 1,
    title: ' Web æ¶æ„å¸ˆ',
    describe: 'æˆè¯¾æ·±åº¦å¯¹æ ‡é˜¿é‡Œ P6ç­‰çº§ï¼Œè¿›å…¥BATç­‰ä¸€çº¿å¤§å‚ï¼Œæˆä¸ºå¤§å‚è¿›é˜¶ç¨€ç¼ºäººæ‰'
},
{
    id: 2,
    title: ' Go æ¶æ„å¸ˆ',
    describe: 'æˆè¯¾æ·±åº¦å¯¹æ ‡é˜¿é‡Œ P6ç­‰çº§ï¼Œè¿›å…¥BATç­‰ä¸€çº¿å¤§å‚ï¼Œæˆä¸ºå¤§å‚è¿›é˜¶ç¨€ç¼ºäººæ‰'
},
{
    id: 3,
    title: ' Go é‡‘ç‰Œå°±ä¸šç­',
    describe: 'æˆè¯¾æ·±åº¦å¯¹æ ‡é˜¿é‡Œ P6ç­‰çº§ï¼Œè¿›å…¥BATç­‰ä¸€çº¿å¤§å‚ï¼Œæˆä¸ºå¤§å‚è¿›é˜¶ç¨€ç¼ºäººæ‰'
},
{
    id: 4,
    title: ' iOS æ¶æ„å¸ˆ',
    describe: 'æˆè¯¾æ·±åº¦å¯¹æ ‡é˜¿é‡Œ P6ç­‰çº§ï¼Œè¿›å…¥BATç­‰ä¸€çº¿å¤§å‚ï¼Œæˆä¸ºå¤§å‚è¿›é˜¶ç¨€ç¼ºäººæ‰'
},
{
    id: 5,
    title: ' ç™¾ä¸‡æ¶æ„å¸ˆ',
    describe: 'æˆè¯¾æ·±åº¦å¯¹æ ‡é˜¿é‡Œ P6ç­‰çº§ï¼Œè¿›å…¥BATç­‰ä¸€çº¿å¤§å‚ï¼Œæˆä¸ºå¤§å‚è¿›é˜¶ç¨€ç¼ºäººæ‰'
}, {
    id: 6,
    title: ' JavaEE é‡‘ç‰Œå°±ä¸šç­',
    describe: 'æˆè¯¾æ·±åº¦å¯¹æ ‡é˜¿é‡Œ P6ç­‰çº§ï¼Œè¿›å…¥BATç­‰ä¸€çº¿å¤§å‚ï¼Œæˆä¸ºå¤§å‚è¿›é˜¶ç¨€ç¼ºäººæ‰'
},
{
    id: 7,
    title: ' æ•°æ®åˆ†æå…¨æ ˆå·¥ç¨‹å¸ˆ',
    describe: 'æˆè¯¾æ·±åº¦å¯¹æ ‡é˜¿é‡Œ P6ç­‰çº§ï¼Œè¿›å…¥BATç­‰ä¸€çº¿å¤§å‚ï¼Œæˆä¸ºå¤§å‚è¿›é˜¶ç¨€ç¼ºäººæ‰'
},
{
    id: 8,
    title: ' Android å¼€å‘å¸ˆ',
    describe: 'æˆè¯¾æ·±åº¦å¯¹æ ‡é˜¿é‡Œ P6ç­‰çº§ï¼Œè¿›å…¥BATç­‰ä¸€çº¿å¤§å‚ï¼Œæˆä¸ºå¤§å‚è¿›é˜¶ç¨€ç¼ºäººæ‰'
},
{
    id: 9,
    title: 'æµ‹è¯•å¸ˆ',
    describe: 'æˆè¯¾æ·±åº¦å¯¹æ ‡é˜¿é‡Œ P6ç­‰çº§ï¼Œè¿›å…¥BATç­‰ä¸€çº¿å¤§å‚ï¼Œæˆä¸ºå¤§å‚è¿›é˜¶ç¨€ç¼ºäººæ‰'
}
]

```


<br/>

**RouterUndefinedView.js**

```
export default function RouterUndefinedView() {
    return <div>
        <h1>404è§†å›¾</h1>
        <p>404è§†å›¾å†…å®¹</p>
    </div>
}
```

è°ƒç”¨ï¼š

```
/**
   * @description: è·¯ç”±å¯¼èˆªç»¼åˆç»ƒä¹ 
   * å¯¼èˆªç»„ä»¶
   */
  _testRouter2 = () => {
    return <Fragment>
      <Nav />
      <Switch>
        {Routers.map(item => {
          return <Route
            key={item.path}
            path={item.path}
            exact={item.exact}
            render={item.render} />
        })}
      </Switch>
    </Fragment>
  }
```

æ•ˆæœå›¾ï¼š

![39](./../Pictures/react39.png)


<br/>
<br/>

> <h3 id=''></h3>



<br/>
<br/>

> <h3 id=''></h3>



<br/>
<br/>

> <h3 id=''></h3>




<br/>
<br/>
<br/>

> <h2 id="å‚æ•°ä¼ é€’">å‚æ•°ä¼ é€’</h2>

<br>

> <h3 id="çˆ¶å­ä¼ å‚">çˆ¶->å­ä¼ å‚</h3>

&emsp; çˆ¶ç»„ä»¶é€šè¿‡propså°†æ•°æ®ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶é€šè¿‡this.props.å±æ€§åè°ƒç”¨


![Code](./../Pictures/react9.gif)

<br/>

æ•ˆæœï¼š

![æ•ˆæœ](./../Pictures/react10.png)



<br>
<br>

> <h3 id="å­çˆ¶ç»„ä»¶çš„é€šä¿¡">å­->çˆ¶ç»„ä»¶çš„é€šä¿¡</h3>

- çˆ¶ç»„ä»¶é€šè¿‡propsä¼ é€’ä¸€ä¸ªä¿®æ”¹è‡ªèº«æ•°æ®stateçš„æ–¹æ³•ç»™å­ç»„ä»¶

- å­ç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ–¹æ³•ï¼Œä¼ é€’å‚æ•°ï¼Œä¿®æ”¹çˆ¶ç»„ä»¶çš„å±æ€§ã€‚ç›¸å½“äºå­ç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶çš„æ–¹æ³•æ¥æ›´æ–°çˆ¶ç»„ä»¶çš„æ•°æ®ï¼Œæˆ–è€…å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®


![Code](./../Pictures/react11.png)

<br/>

![æ•ˆæœ](./../Pictures/react12.gif)




<br>
<br>

> <h3 id="å…„å¼ŸèŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡">å…„å¼ŸèŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡</h3>

&emsp; åœ¨ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ä¸­ä¿®æ”¹çˆ¶ç»„ä»¶çš„æ•°æ®ï¼Œç„¶åçˆ¶ç»„ä»¶ä¼šåŒæ­¥åˆ°å¦ä¸€ä¸ªéœ€è¦é€šä¿¡çš„å­ç»„ä»¶ï¼Œå°±å®Œæˆäº†ä¸€æ¬¡é€šä¿¡

![Code](./../Pictures/react13.png)



<br>
<br>

> <h3 id="contextä¼ å€¼">contextä¼ å€¼</h3>


![contextç®€å•ç»ƒä¹ ](./../Pictures/react55.png)







<br>
<br>

> <h3 id="è®¢é˜…æ¨¡å‹">è®¢é˜…æ¨¡å‹</h3>

- addEventListener å°±æ˜¯ä¸€ä¸ªå‘å¸ƒè®¢é˜…æ¨¡å‹

- è®¢é˜…ï¼šelement.addEventListener('click',callback)

- å‘å¸ƒï¼šå½“ç»‘å®šå…ƒç´ çš„clickäº‹ä»¶è¢«è§¦å‘çš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œå‘å¸ƒæµç¨‹ï¼Œè°ƒç”¨è®¢é˜…ç»‘å®šçš„callback


**åŸç†å›¾è§£ï¼š**

![æ¨¡å‹å›¾](./../Pictures/react14.png)

<br/>

![æ¨¡å‹å›¾](./../Pictures/react15.png)





<br/>

***
<br/>

> <h1 id="ES6åŸºç¡€">ES6åŸºç¡€</h1>

<br/>

> <h2 id='å¼‚æ­¥ç¼–ç¨‹'>å¼‚æ­¥ç¼–ç¨‹</h2>

&emsp; JavaScriptå¼•æ“æ˜¯åŸºäºäº‹ä»¶å¾ªç¯çš„æ¦‚å¿µå®ç°çš„ï¼ŒJavaScriptå¼•æ“ä¼šæŠŠä»»åŠ¡æ”¾åœ¨ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œé€šè¿‡äº‹ä»¶å¾ªç¯æœºåˆ¶ä¸€ä¸€æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ï¼Œä»ç¬¬ä¸€ä¸ªä¾æ¬¡æ‰§è¡Œåˆ°æœ€åä¸€ä¸ªã€‚æœ‰äº›ä»»åŠ¡æ‰§è¡Œå¯èƒ½æ—¶é—´ä¼šæ¯”è¾ƒé•¿ï¼Œå¦‚æœç­‰å¾…æ—¶é—´æ¯”è¾ƒé•¿çš„ä»»åŠ¡æ‰§è¡Œå®Œæˆä¹‹åå†æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡å°±ä¼šå½±å“ç”¨æˆ·ä½“éªŒï¼Œæ‰€ä»¥JavaScriptåœ¨è®¾è®¡çš„æ—¶å€™å°±æœ‰äº†åŒæ­¥å’Œå¼‚æ­¥ã€‚å¼‚æ­¥ä»»åŠ¡ä¸è¿›å…¥ä¸»çº¿ç¨‹ï¼Œè€Œè¿›å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œåªæœ‰ä»»åŠ¡é˜Ÿåˆ—é€šçŸ¥ä¸»çº¿ç¨‹ï¼ŒæŸä¸ªå¼‚æ­¥ä»»åŠ¡å¯ä»¥æ‰§è¡Œäº†ï¼Œè¿™ä¸ªä»»åŠ¡æ‰ä¼šè¿›å…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚å¼‚æ­¥ä»»åŠ¡åœ¨ES5æ ‡å‡†ä¸­é€šè¿‡å›è°ƒæ¥è§£å†³æ‰§è¡Œé¡ºåºé—®é¢˜.

```
/**
* @description: å¼‚æ­¥ç¼–ç¨‹
*/
_asynchronousTest = () => {
	asyncFn(function () {
	  console.log('æ‰§è¡Œå®Œä¹‹åçš„å›è°ƒæ‰“å°ã€‚ã€‚ã€‚ã€‚ã€‚')
	})
}

function asyncFn(cb) {
  setTimeout(() => {
    console.log('ğŸ å¼‚æ­¥é€»è¾‘')
    cb && cb()
  }, 1000);
}


```

è¾“å‡ºï¼š

```
ğŸ å¼‚æ­¥é€»è¾‘
node_modules/vconsole/dist/vconsole.min.js:10
æ‰§è¡Œå®Œä¹‹åçš„å›è°ƒæ‰“å°ã€‚ã€‚ã€‚ã€‚ã€‚
node_modules/vconsole/dist/vconsole.min.js:10
```

ä¸Šè¿°åªæ˜¯æ¨¡æ‹Ÿå¼‚æ­¥è¿‡ç¨‹ï¼Œä½†æ˜¯å›è°ƒå‡½æ•°å¤šäº†å®¹æ˜“åµŒå¥—é€ æˆâ€œå›è°ƒåœ°ç‹±â€ï¼Œé€ æˆä»£ç é˜…è¯»å›°éš¾ã€‚æ‰€ä»¥å¼•å…¥Promiseè¯­æ³•ã€‚


<br/>

> **PromiseåŸºæœ¬è¯­æ³•**

&emsp; é¦–å…ˆPromiseæ˜¯ç³»ç»Ÿä¸­é¢„å®šä¹‰çš„ç±»ï¼Œé€šè¿‡å®ä¾‹åŒ–å¯ä»¥å¾—åˆ°Promiseå¯¹è±¡ã€‚Promiseå¯¹è±¡ä¼šæœ‰ä¸‰ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯pendingã€resolvedã€rejected

```
_asynchronousTest1 = () => {
    let p1 = new Promise(function () {

    })
    console.log('ğŸ p1ï¼š', p1)

    let p2 = new Promise(function (resolve, reject) {
      resolve('success...')
    })
    console.log('ğŸ p2ï¼š', p2)


    let p3 = new Promise(function (resolve, reject) {
      resolve('reject...')
    })
    console.log('ğŸ p3ï¼š', p3)

}
```

è¾“å‡ºï¼š

```
ğŸ p1ï¼š Promise {[[PromiseState]]: 'pending', [[PromiseResult]]: undefined}
ğŸ p2ï¼š Promise {[[PromiseState]]: 'fulfilled', [[PromiseResult]]: 'success...'}
ğŸ p3ï¼š Promise {[[PromiseState]]: 'fulfilled', [[PromiseResult]]: 'reject...'}
```


&emsp; ä¸Šè¿°ä»£ç ä¸­Promiseå›è°ƒå‡½æ•°é‡Œå¦‚æœæ²¡æœ‰è°ƒå–resolveæˆ–è€…rejectï¼Œé‚£ä¹ˆå°±ä¼šè¿”è¿˜ä¸€ä¸ªPendingçŠ¶æ€çš„Promiseå¯¹è±¡ã€‚å¦‚æœè°ƒå–äº†resolveå‡½æ•°å°±ä¼šè¿”è¿˜ä¸€ä¸ªresolvedçŠ¶æ€çš„Promiseå¯¹è±¡ï¼ˆåœ¨ç«ç‹ä¸Šç•¥æœ‰ä¸åŒï¼Œä¼šæ˜¾ç¤ºfullfilledçŠ¶æ€çš„Promiseå¯¹è±¡ï¼‰ã€‚å¦‚æœè°ƒå–äº†rejectå‡½æ•°åˆ™ä¼šè¿”è¿˜ä¸€ä¸ªrejectedçŠ¶æ€çš„å¯¹è±¡ã€‚æ¯ä¸€ä¸ªPromiseå¯¹è±¡éƒ½ä¼šæœ‰ä¸€ä¸ªthenæ–¹æ³•ï¼Œthenæ–¹æ³•é‡Œä¼šæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼ˆå¯é€‰ï¼‰.


<br/>

&emsp; å¦‚ä¸‹ä»£ç åœ¨æ‰§è¡Œthençš„æ—¶å€™ä¼šæ‰§è¡Œåˆ°ç¬¬ä¸€ä¸ªæˆåŠŸçš„å›è°ƒä¸­å»ï¼Œå¦‚æœè°ƒå–rejectå‡½æ•°åˆ™ä¼šæ‰§è¡Œåˆ°thençš„ç¬¬äºŒä¸ªé”™è¯¯çš„å›è°ƒä¸­å»ã€‚å½“ç„¶Promiseä¹Ÿæä¾›catchæ–¹æ³•æ¥æ•æ‰rejecté”™è¯¯

```
let p2 = new Promise(function (resolve, reject) {
      // resolve('success...')
      reject('å¤±è´¥')
    })
    console.log('ğŸ p2ï¼š', p2)
    p2.then(res => {
      console.log('ğŸ â™¨ï¸ resï¼š', res)
    }, err => {
      console.log('ğŸ’£ resï¼š', err)
    })

```


è¾“å‡º:

```
ğŸ p2ï¼š Promise {[[PromiseState]]: 'rejected', [[PromiseResult]]: 'å¤±è´¥'}
ğŸ’£ resï¼š å¤±è´¥
node_modules/vconsole/dist/vconsole.min.js:10
```



<br/>

> 






<br/>
<br/>

> <h2 id=''></h2>



<br/>
<br/>

> <h2 id=''></h2>






<br/>

***
<br/>

> <h1 id="é¡¶å±‚API">é¡¶å±‚API</h1>


<br/>

> <h2 id="createElement">[createElement](https://juejin.cn/post/6844903970876440583)</h2>




<br/>

> <h2 id="cloneElement">cloneElement</h2>

```
React.cloneElement(
 element,
 [props],
 [...children]
)

å…‹éš†åŸæ¥çš„å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ React å…ƒç´ ï¼›
ä¿ç•™åŸå§‹å…ƒç´ çš„ propsï¼ŒåŒæ—¶å¯ä»¥æ·»åŠ æ–°çš„ propsï¼Œä¸¤è€…è¿›è¡Œæµ…åˆå¹¶ï¼›
key å’Œ ref ä¼šè¢«ä¿ç•™ï¼Œå› ä¸ºå®ƒä»¬æœ¬èº«ä¹Ÿæ˜¯ props ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ä¿®æ”¹ï¼›
æ ¹æ® react çš„æºç ï¼Œæˆ‘ä»¬å¯ä»¥ä»ç¬¬ä¸‰ä¸ªå‚æ•°å¼€å§‹å®šä¹‰ä»»æ„å¤šçš„å­å…ƒç´ ï¼Œå¦‚æœå®šä¹‰äº†æ–°çš„ children ï¼Œä¼šæ›¿æ¢åŸæ¥çš„ children ï¼›

ç¬¬ä¸€ä¸ªå‚æ•°ï¼šreactç»„ä»¶æˆ–è€…dom,è¿™domæ˜¯çœŸå®çš„domç»“æ„ä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰çš„ï¼›

ç¬¬äºŒä¸ªå‚æ•°ï¼šå½“å‰elementçš„propsã€keyã€refï¼Œä¹Ÿå¯ä»¥æ·»åŠ æ–°çš„propsï¼›

ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæ˜¯props.childrenï¼Œä¸æŒ‡å®šé»˜è®¤å±•ç¤ºæˆ‘ä»¬è°ƒç”¨æ—¶æ·»åŠ çš„å­å…ƒç´ ï¼Œå¦‚æœæŒ‡å®šä¼šè¦†ç›–æˆ‘ä»¬è°ƒç”¨å…‹éš†ç»„ä»¶æ—¶é‡Œé¢åŒ…å«çš„å…ƒç´ ã€‚
```


<br/>

> **éªŒè¯1:ç»„ä»¶å¤åˆ¶**

CloneElementTest.jsæ–‡ä»¶

```
export function CloneDemo(props) {
    console.dir(props)
    console.table({ 'text: %s': props.children.props.children, 'keyValue': props.keyValue})
    return React.cloneElement(<div style={{ backgroundColor: 'red', display: "flex", justifyContent: "center", alignItems: "center" }} />,
        props
    )
}
export function ContainerBox() {
    return <CloneDemo keyValue={'CloneDemoçš„Key'}><h1>ContainerBox: è¿™æ˜¯åœ¨çˆ¶ç»„ä»¶æ·»åŠ çš„å…ƒç´ </h1></CloneDemo>
}

```


Index.jsæ–‡ä»¶

```
import { ContainerBox } from './Test/CloneElementTest';




ReactDOM.render(
  <React.StrictMode>
   {<ContainerBox />}
   
	</React.StrictMode>,
  document.getElementById('root')
);


reportWebVitals();



```

æ•ˆæœå›¾ï¼š

![æ•ˆæœå›¾](./../Pictures/react16.png)



<br/>

> **éªŒè¯2:ä¼ å‚æ•°**

CloneElementTest.js

```

export function CloneDemo1({ dom = <div />, ...props }) {
    console.dir(props)
    console.table({ 'ğŸ text: ': props.children.props.children})

    return React.cloneElement(dom, { ...props })
}
export function ContainerBox1() {
    return <CloneDemo1 dom={<p></p>}><h1>è¿™æ˜¯åœ¨çˆ¶ç»„ä»¶æ·»åŠ çš„å…ƒç´ ContainerBox1</h1></CloneDemo1>
}
```

Index.js

```
//ç»„ä»¶å¯¼å…¥
import { ContainerBox1 } from './Test/CloneElementTest';




ReactDOM.render(
  <React.StrictMode>
  {<ContainerBox1/>}
  
  </React.StrictMode>,
  document.getElementById('root')
);



reportWebVitals();
```

![æ ‡ç­¾å…ƒç´ æ’åˆ—](./../Pictures/react17.png)



![propsæ‰“å°](./../Pictures/react18.png)





<br/>

> **éªŒè¯2:ä¼ å‚æ•°**




<br/>

> **éªŒè¯2:ä¼ æ ·å¼æ²¡æœ‰æ•ˆæœ**

CloneElementTest.js

```
const Exam2 = (props) => <div>è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„ReactElementå…ƒç´ {props.children}</div>
function CloneDemo2({ dom = <div />, ...rest }) {
    console.log('ğŸ <<<<<<<<<<<<<<<')
    console.dir(dom)
    console.log('ğŸ ===============')
    console.dir(rest)
    console.log('ğŸ >>>>>>>>>>>>>>>')

    return React.cloneElement(dom, { ...rest })
}
export function ContainerBox2() {
    return <CloneDemo2 dom={<Exam2 style={{ color: "red", textAlign: "center" }} />}><h1>è¿™æ˜¯åœ¨çˆ¶ç»„ä»¶æ·»åŠ çš„å…ƒç´ </h1></CloneDemo2>
}

```


index.js

```
import { ContainerBox2 } from './Test/CloneElementTest';


ReactDOM.render(
  <React.StrictMode>
  {<ContainerBox2 />}

  </React.StrictMode>,
  document.getElementById('root')
);



reportWebVitals();
```


![æ§åˆ¶å°æ‰“å°](./../Pictures/react19.png)

![æ ‡ç­¾æ˜¾ç¤º](./../Pictures/react20.png)




<br/>

> **éªŒè¯2:ä¼ æ ·å¼æœ‰æ•ˆæœ**


CloneElementTest.js

```
const Exam2_1 = (props) => {
    console.log('ğŸ <<<<<<<<<<<<<<<')
    console.dir(props)
    return <div style={{ ...props.styles, ...props.style }}>è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„ReactElementå…ƒç´ {props.children}</div>
}
function CloneDemo2_1({ dom = <div />, ...rest }) {
    const styles = {
        color: "blue",
        minWidth: "1200px",
        margin: "100px auto",
        textAlign: "left"
    }
    console.log('ğŸ ===============')
    console.dir(dom)
    console.log('ğŸ >>>>>>>>>>>>>>>')
    console.dir(rest)
    console.log('ğŸ --------------->end')


    return React.cloneElement(dom, { styles, ...rest })
}
export function ContainerBox2_1() {
    return <CloneDemo2_1 dom={<Exam2_1 style={{ color: "red", textAlign: "center" }} />}><h1>è¿™æ˜¯åœ¨çˆ¶ç»„ä»¶æ·»åŠ çš„å…ƒç´ props.children</h1></CloneDemo2_1>
}
```


index.js

```
import { ContainerBox2_1 } from './Test/CloneElementTest';


ReactDOM.render(
  <React.StrictMode>
	{<ContainerBox2_1 />}


  </React.StrictMode>,
  document.getElementById('root')
);



reportWebVitals();

```

![æ ‡ç­¾å…ƒç´ å±•ç¤º](./../Pictures/react23.png)


![å±æ€§æ‰“å°](./../Pictures/react22.png)




<br/>

> **éªŒè¯2:æ ·å¼ä¼˜å…ˆçº§**



```
const Exam2_2 = (props) => {
    console.table({'ğŸ Exam2_2 >>> props:%o': props,})
    return <div style={{ ...props.style }}>è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„ReactElementå…ƒç´ {props.children}</div>
}
function CloneDemo2_2({ dom = <div />, ...rest }) {
    console.table({'ğŸŠ CloneDemo2_2 >>> dom:%o': dom, 'rest: %o': rest})

    const styles = {
        color: "blue",
        minWidth: "1200px",
        margin: "100px auto",
        textAlign: "center"
    }
    return React.cloneElement(dom, {
        style: Object.assign({}, styles, dom.props.style), //å°†ä¼ å…¥çš„æ ·å¼æ”¾åˆ°æœ€åæé«˜ä»–çš„ä¼˜å…ˆçº§
        ...rest
    })
}
export function ContainerBox2_2() {
    return <CloneDemo2_2 dom={<Exam2_2 style={{ color: "red", textAlign: "center" }} />}><h1>è¿™æ˜¯åœ¨çˆ¶ç»„ä»¶æ·»åŠ çš„å…ƒç´ 2_2</h1></CloneDemo2_2>
}
```



index.js

```
import { ContainerBox2_2 } from './Test/CloneElementTest';


ReactDOM.render(
  <React.StrictMode>
  {<ContainerBox2_2 />}


  </React.StrictMode>,
  document.getElementById('root')
);



reportWebVitals();




```


![æ ‡ç­¾å…ƒç´ å±•ç¤º](./../Pictures/react24.png)


![å±æ€§æ‰“å°01](./../Pictures/react25.png)


![å±æ€§æ‰“å°02](./../Pictures/react26.png)






<br/>

> <h2 id=""></h2>




<br/>

> <h2 id=""></h2>



<br/>

> <h2 id=""></h2>





<br/>

***
<br/>

> <h1 id="æ€§èƒ½ä¼˜åŒ–">æ€§èƒ½ä¼˜åŒ–</h1>

<br/>

> <h2 id="å€¼æ˜¯å¦ä¸ºç©ºæˆ–æœ‰å€¼">å€¼æ˜¯å¦ä¸ºç©ºæˆ–æœ‰å€¼</h2>

&emsp; æ‰€ä»¥åœ¨åˆ¤æ–­æ˜¯å¦ä¸ºç©ºå‰ï¼Œåº”é¢„åˆ¤ã€ç¡®å®šæ•°æ®çš„ç±»å‹ï¼Œå¦‚æœæœŸæœ›ç±»å‹ä¸æ¸…æ™°ï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´é”™è¯¯çš„åˆ¤æ–­æˆ–è€ƒè™‘æƒ…å†µä¸å‘¨å…¨ã€‚

<br/>

- nullã€ä¸ºå®šä¹‰ã€0åˆ¤æ–­

```
var a1 = null
var a2
var a3 = 0
Var a4= 1//æˆ–è€… a4=-11

if (!a1) {
    console.log('a1 ä¸ºnull')
}

if (!a2) {
    console.log('a2 æ²¡æœ‰å®šä¹‰')
}

if (!a3) {
    console.log('a3 ä¸º0')
}

if (!a4) {
    console.log('a4 ä¸º0')
}
```

æ‰“å°ï¼š

```
a1 ä¸ºnull
a2 æ²¡æœ‰å®šä¹‰
a3 ä¸º0
//a4 æ²¡æœ‰æ‰“å°
```


<br/>

- a2æ²¡æœ‰å®šä¹‰åˆ¤æ–­

```
var a2

if (!a2) {
    console.log('a2 æ²¡æœ‰å®šä¹‰')
}

if (!a2.length) {
    console.log('a3 æ²¡æœ‰lengå±æ€§')
}

ä¼šæŠ¥é”™ï¼šï¼š
typeError: undefined is not an object(evaluating 'a2.length')
//å› ä¸ºa2æ²¡æœ‰å®šä¹‰ï¼Œä½ åˆä½¿ç”¨å®ƒçš„lengthå±æ€§ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™



var a2
 if (!a2 || !a2.length) {
    console.log('a2 æ²¡æœ‰å®šä¹‰')
}    
æ‰“å°ï¼š a2 æ²¡æœ‰å®šä¹‰

==================================   

var a2
  if (!a2.length) {
    console.log('a3 æ²¡æœ‰lengå±æ€§')
}

ä¼šæŠ¥é”™ï¼šï¼š
typeError: undefined is not an object(evaluating 'a2.length')

```




<br/>

&emsp; ç¡®å®šæ•°æ®ç±»å‹åï¼Œç„¶åæ ¹æ®ä¸åŒçš„æ•°æ®ç±»å‹ä½¿ç”¨ä¸åŒçš„æ–¹æ³•æ¥åˆ¤æ–­ï¼Œä¾‹

```
function isEmpty(v) {
    switch (typeof v) {
    case 'undefined':
        return true;
    case 'string':
        if (v.replace(/(^[ \t\n\r]*)|([ \t\n\r]*$)/g, '').length == 0) return true;
        break;
    case 'boolean':
        if (!v) return true;
        break;
    case 'number':
        if (0 === v || isNaN(v)) return true;
        break;
    case 'object':
        if (null === v || v.length === 0) return true;
        for (var i in v) {
            return false;
        }
        return true;
    }
    return false;
}


```


æµ‹è¯•æ¡ˆä¾‹ï¼š

```
isEmpty()              //true
isEmpty([])            //true
isEmpty({})            //true
isEmpty(0)             //true
isEmpty(Number("abc")) //true
isEmpty("")            //true
isEmpty("   ")         //true
isEmpty(false)         //true
isEmpty(null)          //true
isEmpty(undefined)     //true

```

**ç©ºå€¼æœ‰ï¼š** undefinedã€ nullã€ ''ã€ NaNã€falseã€0ã€[]ã€{} ã€ç©ºç™½å­—ç¬¦ä¸²ï¼Œè¿™äº›éƒ½è¿”å›trueã€‚



<br/>

***
<br/>

> <h1 id="JavaScriptè¯­æ³•">JavaScriptè¯­æ³•</h1>



<br/>

***
<br/>

> <h1 id="åˆ›å»ºåˆ°æ‰“åŒ…">åˆ›å»ºåˆ°æ‰“åŒ…</h1>

&emsp; æ­å»ºé¡¹ç›®ä½¿ç”¨çš„æ˜¯ `create-react-app (å·²è‡ªåŠ¨é›†æˆwebpackç›¸å…³é…ç½®)`å®˜æ–¹æä¾›çš„è„šæ‰‹æ¶å‘½ä»¤ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

![33](./../Pictures/react33.png)

asq: ä¸ºä»€ä¹ˆ æ²¡æœ‰webpacké…ç½®æ–‡ä»¶ï¼Ÿ

webpackçš„é…ç½®éœ€è¦ è¾“å…¥ npm run eject å‘½ä»¤å°†æ‰€æœ‰å†…å»ºçš„é…ç½®æš´éœ²å‡ºæ¥ã€‚

create-react-app å·²ç»ä¸ºåšäº†ç»å¤§éƒ¨åˆ†äº‹æƒ…ï¼Œé…å¥½äº†webpack

ç°åœ¨å°±èƒ½ä½¿ç”¨ npm run start å¼€å§‹å†™react é¡¹ç›®äº†

<br/>
<br/>

> <h2 id='æ‰“åŒ…'>æ‰“åŒ…</h2>

åœ¨package.jsonä¸­åˆè¿™ä¹ˆä¸€æ®µå¿«æ·æŒ‡ä»¤ï¼Œå…¶æ˜¯ï¼š

```
"scripts": {
    "build": "node scripts/build.js",
    "start": "node scripts/start.js",
    "test": "node scripts/test.js --env=jsdom",
  },
```

åˆ†åˆ«å¯¹åº”é¡¹ç›®scriptsä¸‹çš„æ–‡ä»¶ï¼š

![40](./../Pictures/react40.webp)

buildæ–‡ä»¶å°±æ˜¯æ‰“åŒ…é¡¹ç›®æ‰“åŒ…çš„ä¸€ç³»åˆ—é…ç½®.


è¿è¡Œ npm run build åé¡¹ç›®ä¸­ä¼šå¤šå‡ºä¸€ä¸ªbuildçš„æ–‡ä»¶å¤¹

![41](./../Pictures/react41.webp)


æˆ‘ä»¬åªéœ€è¦æŠŠ buildè¿™ä¸ªæ–‡ä»¶å¤¹ æ”¾åˆ°äº‘æœåŠ¡å™¨ä¸Š å³å¯






<br/>

***
<br/>

> <h1 id=""></h1>



<br/>

***
<br/>

> <h1 id=""></h1>



<br/>

***
<br/>

> <h1 id=""></h1>
