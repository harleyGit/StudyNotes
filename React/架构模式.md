- [**â€Œé¡µé¢ã€é€»è¾‘ä¸šåŠ¡ã€cssæ ·å¼æ¨¡å—åŒ–**](#é¡µé¢ã€é€»è¾‘ä¸šåŠ¡ã€cssæ ·å¼æ¨¡å—åŒ–)
	- [3.å‰¯ä½œç”¨é’©å­useEffectæœ«å°¾3ç§å‚æ•°ä½¿ç”¨æ–¹æ³•](#å‰¯ä½œç”¨é’©å­useEffectæœ«å°¾3ç§å‚æ•°ä½¿ç”¨æ–¹æ³•)
	- [4.useMemoçš„ä¾èµ–æ•°ç»„](#useMemoçš„ä¾èµ–æ•°ç»„)
- [**å‡ ç§è®¾è®¡æ¨¡å¼å¯¹ç…§**](#å‡ ç§è®¾è®¡æ¨¡å¼å¯¹ç…§ )
- [**å®¹å™¨ç»„ä»¶vså±•ç¤ºç»„ä»¶** ](#å®¹å™¨ç»„ä»¶vså±•ç¤ºç»„ä»¶)
- [**HOCé«˜é˜¶ç»„ä»¶æ¨¡å¼** ](#HOCé«˜é˜¶ç»„ä»¶æ¨¡å¼)
- [**RenderPropsæ¨¡å¼** ](#RenderPropsæ¨¡å¼)
- [**Hookså°è£…é€»è¾‘å¤ç”¨ï¼ˆCustomHookæ¨¡å¼ï¼‰**](#Hookså°è£…é€»è¾‘å¤ç”¨ï¼ˆCustomHookæ¨¡å¼ï¼‰)
- [**æœåŠ¡ç±»å°è£…ï¼ˆServicePatternï¼‰**](#æœåŠ¡ç±»å°è£…ï¼ˆServicePatternï¼‰)
- [å‡ ç§è®¾è®¡æ¨¡å¼æ¡ˆä¾‹-å•†å“åˆ—è¡¨é¡µé¢](#å‡ ç§è®¾è®¡æ¨¡å¼æ¡ˆä¾‹-å•†å“åˆ—è¡¨é¡µé¢)





<br/><br/><br/>

***
<br/>

> <h1 id="é¡µé¢ã€é€»è¾‘ä¸šåŠ¡ã€cssæ ·å¼æ¨¡å—åŒ–">é¡µé¢ã€é€»è¾‘ä¸šåŠ¡ã€cssæ ·å¼æ¨¡å—åŒ–</h1>

å°† **é¡µé¢ç»“æ„ JSX**ã€**ä¸šåŠ¡é€»è¾‘ JS**ã€**æ ·å¼ CSS** ä¸‰è€…æ‹†åˆ†ï¼Œä¾¿äºç»´æŠ¤ã€åä½œå’Œæ‰©å±•ã€‚

**ç»™ä¸€ä¸ªç®€å•çš„â€œç”¨æˆ·ç™»å½•é¡µé¢â€ä¸ºä¾‹ï¼š**

**ç›®å½•ç»“æ„å»ºè®®ï¼š**

```
/src/pages/Login/
â”‚
â”œâ”€â”€ index.jsx           // é¡µé¢ç»“æ„ï¼ˆJSXï¼‰
â”œâ”€â”€ logic.js            // ä¸šåŠ¡é€»è¾‘ï¼ˆJSï¼‰
â”œâ”€â”€ style.module.css    // æ ·å¼æ–‡ä»¶ï¼ˆCSS Moduleï¼‰
```

<br/>

**1.`index.jsx`ï¼šé¡µé¢ç»“æ„ï¼ˆè§†å›¾å±‚ï¼‰**

```jsx
// src/pages/Login/index.jsx

import React, { useState, useMemo } from 'react';
import styles from './style.module.css';
import { LoginLogic } from './logic';

export default function LoginPage() {
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');
  const [unitList, setUnitList] = useState([]);
  
   useEffect(() => {
    // è°ƒç”¨ VM çš„æ–¹æ³•è·å–æ•°æ®
    modalViewVM.fetchUnitList().then(data => {
      setUnitList(data);
    });
  }, []);

  // åˆ›å»º LoginLogic å®ä¾‹ï¼Œæ³¨å…¥çŠ¶æ€æ–¹æ³•
  const logic = useMemo(() => {
    return new LoginLogic({
      // 1.1ç»™ç±»ä¸€ä¸ªèƒ½åŠ›ï¼Œå®ƒå¯ä»¥å¤–éƒ¨è°ƒç”¨ä¿®æ”¹ username çŠ¶æ€ã€‚ 
      // 1.2 æ˜¯ const [username, setUsername] = useState(''); ä¸­çš„setUsername
      // 1.3 âœ… å°±æ˜¯ä¸Šé¢ useState ç”Ÿæˆçš„å‡½æ•°
      setUsername,
      setPassword,
      // âœ… å½“å‰ useState ä¸­çš„å€¼ï¼ˆè¯»å–ï¼‰
      getUsername: () => username, // ç±»å†…éƒ¨è°ƒç”¨æ—¶å¯ä»¥è¯»å–å½“å‰æœ€æ–°çš„ username
      getPassword: () => password,
    });
  }, [username, password]);
  
  

  return (
    <div className={styles.container}>
      <h2 className={styles.title}>ç™»å½•</h2>

      <div className={styles.formGroup}>
        <label>ç”¨æˆ·åï¼š</label>
        <input
          className={styles.input}
          type="text"
          value={username}
          onChange={(e) => logic.updateUsername(e.target.value)}
        />
      </div>

      <div className={styles.formGroup}>
        <label>å¯†ç ï¼š</label>
        <input
          className={styles.input}
          type="password"
          value={password}
          onChange={(e) => logic.updatePassword(e.target.value)}
        />
      </div>

      <button className={styles.button} onClick={logic.login}>
        ç™»å½•
      </button>
    </div>
  );
}
```

<br/>

**éƒ¨åˆ†ä»£ç è§£è¯»ï¼š**

**1.`useMemo()ï¼š`è®°å¿†åŒ–ä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–å€¼ï¼‰**

```
js
const logic = useMemo(() => {
  return new LoginLogic({
    ...
  });
}, [username, password]);
```
- ğŸ” useMemo() çš„ä½œç”¨æ˜¯ï¼šåªæœ‰å½“ username æˆ– password æ”¹å˜æ—¶ï¼Œæ‰é‡æ–°åˆ›å»º LoginLogic å®ä¾‹ï¼Œå¦åˆ™å¤ç”¨ä¸Šæ¬¡çš„å¯¹è±¡ã€‚

<br/>

**2.é‚£ä¹ˆä¸ºä»€ä¹ˆä¸ç›´æ¥ä¼  usernameï¼Œè€Œæ˜¯ä¼ ä¸€ä¸ª getUsername æ–¹æ³•ï¼Ÿ**

å› ä¸º React ä¸­çŠ¶æ€æ˜¯å¼‚æ­¥å˜åŒ–çš„ã€‚å¦‚æœä½ ç›´æ¥ä¼ å€¼ï¼š

```js
username // æ˜¯å½“å‰è¿™æ¬¡æ¸²æŸ“çš„å¿«ç…§ï¼Œåç»­å˜äº†ä¸æ›´æ–°
```

ä½†ä½ ä¼ ä¸€ä¸ªå‡½æ•°ï¼š

```js
getUsername: () => username
```
å°±å¯ä»¥åœ¨ç±»å†…éƒ¨éšæ—¶è·å– æœ€æ–°çš„ username å€¼ã€‚


<br/><br/>
> <h3 id="å‰¯ä½œç”¨é’©å­useEffectæœ«å°¾3ç§å‚æ•°ä½¿ç”¨æ–¹æ³•"> 3.å‰¯ä½œç”¨é’©å­useEffectæœ«å°¾3ç§å‚æ•°ä½¿ç”¨æ–¹æ³•</h3>

**âœ… `useEffect(() => { ... }, [])` ä¸­çš„ `[]` æ˜¯å¹²å˜›çš„ï¼Ÿ**

è¿™æ˜¯ **React çš„å‰¯ä½œç”¨é’©å­ `useEffect`**ï¼Œç”¨æ¥åœ¨ç»„ä»¶æ¸²æŸ“åæ‰§è¡Œä¸€äº›æ“ä½œï¼Œæ¯”å¦‚è·å–æ•°æ®ã€æ·»åŠ äº‹ä»¶ç›‘å¬ç­‰ã€‚


```js
useEffect(() => {
  // æ‰§è¡Œå‰¯ä½œç”¨é€»è¾‘ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ã€å®šæ—¶å™¨ã€DOMæ“ä½œç­‰
}, [ä¾èµ–é¡¹]);
```

* `[]` è¡¨ç¤ºä¾èµ–é¡¹ä¸ºç©ºæ•°ç»„ã€‚
* è¿™æ„å‘³ç€ `useEffect` **åªä¼šåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æŒ‚è½½æ—¶è¿è¡Œä¸€æ¬¡**ï¼Œç›¸å½“äº `componentDidMount` çš„æ•ˆæœã€‚
* å¦‚æœä½ å†™æˆ `[æŸå˜é‡]`ï¼Œé‚£å½“è¿™ä¸ªå˜é‡å‘ç”Ÿå˜åŒ–æ—¶ä¹Ÿä¼šé‡æ–°æ‰§è¡Œé‡Œé¢çš„å‡½æ•°ã€‚

<br/>

**å¯¹æ¯”ç¤ºä¾‹ï¼š**

| ä¾èµ–é¡¹å†™æ³• | å«ä¹‰            |
| ----- | ------------- |
| `[]`  | åªæ‰§è¡Œä¸€æ¬¡ï¼ˆåˆå§‹åŒ–ï¼‰    |
| `[a]` | `a` å˜åŒ–æ—¶ä¹Ÿæ‰§è¡Œ    |
| ä¸å†™    | æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œï¼ˆå¾ˆå°‘ç”¨ï¼‰ |

<br/>

 **âœ… `setUnitList(data)` æ˜¯ä¸æ˜¯æŠŠ data ç»™äº† `unitList`ï¼Ÿ**

æ˜¯çš„ï¼Œ**ä½ ç†è§£å¾—å¯¹**ï¼

```js
const [unitList, setUnitList] = useState([]);
```

è¿™æ˜¯ React çš„ **state hookï¼ˆçŠ¶æ€é’©å­ï¼‰**ï¼š

* `unitList` æ˜¯å½“å‰çš„çŠ¶æ€å˜é‡ã€‚
* `setUnitList` æ˜¯ä¿®æ”¹è¿™ä¸ªå˜é‡çš„å‡½æ•°ã€‚
* åˆå§‹å€¼æ˜¯ `[]`ï¼ˆç©ºæ•°ç»„ï¼‰ã€‚

æ‰€ä»¥è°ƒç”¨ï¼š

```js
setUnitList(data);
```

å°±æ˜¯ **æŠŠ `data` çš„å€¼èµ‹ç»™ `unitList`**ï¼ŒReact ä¼šè‡ªåŠ¨è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œç”¨æ–°çš„ `unitList` æ˜¾ç¤ºå†…å®¹ã€‚



<br/><br/>
> <h3 id="useMemoçš„ä¾èµ–æ•°ç»„">4.useMemoçš„ä¾èµ–æ•°ç»„</h3>

```js
[username, password]
```

**å®ƒå‡ºç°åœ¨ `useMemo` æˆ–å…¶ä»– React Hook çš„ä¾èµ–æ•°ç»„é‡Œ**ï¼Œæ¯”å¦‚ï¼š

```js
useMemo(() => {
  return new LoginLogic({
    setUsername,
    setPassword,
    getUsername: () => username,
    getPassword: () => password,
  });
}, [username, password]);
```

<br/> 

âœ… å®ƒæ˜¯ â€œä¾èµ–æ•°ç»„ï¼ˆdependency arrayï¼‰â€

React ä¸­çš„ `useMemo`ã€`useEffect`ã€`useCallback` ç­‰ Hook æ¥æ”¶çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå°±æ˜¯è¿™ä¸ªä¾èµ–æ•°ç»„ï¼Œæ„æ€æ˜¯ï¼š

> â€œâš ï¸ åªæœ‰æ•°ç»„é‡Œçš„æŸä¸ªå€¼å˜åŒ–æ—¶ï¼Œæˆ‘æ‰ä¼šé‡æ–°æ‰§è¡Œå‰é¢çš„å‡½æ•°é€»è¾‘ã€‚â€

<br/> 

**âœ… ä¸ºä»€ä¹ˆå†™ `[username, password]`ï¼Ÿ**

å› ä¸ºä½ å¸Œæœ› `username` æˆ– `password` **ä¸€æ—¦å˜äº†ï¼Œå°±é‡æ–°åˆ›å»º LoginLogic å®ä¾‹**ï¼ˆé€šè¿‡ `useMemo`ï¼‰ï¼Œç¡®ä¿å®ƒç”¨çš„æ˜¯æœ€æ–°çš„æ•°æ®ã€‚

<br/>

**âœ… å®ƒçš„ä½œç”¨æ€»ç»“å¦‚ä¸‹ï¼š**

| ä½œç”¨     | è¯´æ˜                                |
| ------ | --------------------------------- |
| æ€§èƒ½ä¼˜åŒ–   | é¿å…æ¯æ¬¡æ¸²æŸ“éƒ½é‡å¤æ‰§è¡Œ `new LoginLogic(...)` |
| ç²¾å‡†æ§åˆ¶æ›´æ–° | åªæœ‰ `username` æˆ– `password` å˜åŒ–æ‰é‡å»º  |
| é¿å…å†…å­˜æ³„æ¼ | æ§åˆ¶èµ„æºåˆ†é…çš„æ¬¡æ•°                         |
| ä½¿ç”¨æœ€æ–°å€¼  | ç¡®ä¿ `getUsername()` ç­‰æ‹¿åˆ°çš„æ˜¯æœ€æ–°çš„çŠ¶æ€å¿«ç…§   |

<br/>

 â—å¦‚æœä½ ä¸å†™ä¾èµ–æ•°ç»„ä¼šæ€ä¹ˆæ ·ï¼Ÿ

```js
useMemo(() => new LoginLogic(...)); // âš ï¸ æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡æ–°åˆ›å»ºå¯¹è±¡
```

è¿™æ ·å°±å¤±å»äº†æ€§èƒ½ä¼˜åŒ–çš„æ„ä¹‰ï¼Œè¿˜å¯èƒ½å¸¦æ¥ bugï¼ˆæ¯”å¦‚ä¸ä¸€è‡´çš„å¼•ç”¨ï¼‰ã€‚

---
<br/>


**âœ… ä¸¾ä¸ªç®€å•å¯¹æ¯”ä¾‹å­ï¼š**

```js
const value = useMemo(() => computeExpensiveThing(a, b), [a, b]);
```

* `a` å’Œ `b` æ˜¯ä¾èµ–é¡¹
* åªæœ‰ `a` æˆ– `b` æ”¹äº†ï¼Œ`computeExpensiveThing(a, b)` æ‰ä¼šé‡æ–°æ‰§è¡Œ
* å¦åˆ™ `value` ä¼šå¤ç”¨ä¸Šä¸€æ¬¡çš„ç»“æœ




<br/><br/>

**2.`logic.js`ï¼šä¸šåŠ¡é€»è¾‘ï¼ˆçŠ¶æ€ + äº‹ä»¶ï¼‰**

```js
// src/pages/Login/logic.js

export class LoginLogic {
  constructor(setters) {
    // ä»ç»„ä»¶ä¼ å…¥ setState æ–¹æ³•ï¼Œç”¨äºç»„ä»¶å†…éƒ¨çŠ¶æ€æ›´æ–°
    this.setUsername = setters.setUsername;
    this.setPassword = setters.setPassword;
    this.getUsername = setters.getUsername;
    this.getPassword = setters.getPassword;
  }

  updateUsername = (value) => {
    this.setUsername(value);
  };

  updatePassword = (value) => {
    this.setPassword(value);
  };
  
  clear() {
    this.setUsername('');
  }
  
   printName() {
    console.log('å½“å‰ç”¨æˆ·åï¼š', this.getUsername());
  }

  login = () => {
    const username = this.getUsername();
    const password = this.getPassword();

    if (!username || !password) {
      alert("è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ");
      return;
    }

    // æ¨¡æ‹Ÿç™»å½•é€»è¾‘
    console.log("æ­£åœ¨ç™»å½•:", { username, password });
    alert(`æ¬¢è¿ä½ ï¼Œ${username}ï¼`);
  };
  
  // æ–¹æ³•ï¼šè¿”å› Promiseï¼Œè®©å¤–éƒ¨è°ƒç”¨æ—¶å¯ä½¿ç”¨ async/await æˆ– .then()
  fetchUnitList() {
    return getUnitLists()
      .then(res => {
        if (res.code === 0) {
          return res.result || [];
        } else {
          return []; // æˆ–è€… throw new Error("é”™è¯¯æç¤º")
        }
      })
      .catch(error => {
        console.error('fetchUnitList error:', error);
        return []; // å‡ºé”™ä¹Ÿè¿”å›ç©ºæ•°ç»„ï¼Œé¿å…è°ƒç”¨å‡ºé”™
      });
  }
}

// export default new LoginLogic(); // ä½¿ç”¨å•ä¾‹æ¨¡å¼
```

<br/>

**3.`style.module.css`ï¼šæ ·å¼æ–‡ä»¶**

```css
/* src/pages/Login/style.module.css */

.container {
  max-width: 400px;
  margin: 100px auto;
  padding: 24px;
  border: 1px solid #ddd;
  border-radius: 8px;
  background-color: #fafafa;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.title {
  text-align: center;
  font-size: 24px;
  margin-bottom: 24px;
}

.formGroup {
  margin-bottom: 16px;
}

.input {
  width: 100%;
  padding: 8px;
  margin-top: 4px;
  box-sizing: border-box;
  border: 1px solid #ccc;
  border-radius: 4px;
}

.button {
  width: 100%;
  padding: 10px;
  background-color: #1890ff;
  color: white;
  font-weight: bold;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.button:hover {
  background-color: #40a9ff;
}
```

---
<br/>

**âœ… ä½¿ç”¨æ–¹å¼**

ä½ åªéœ€è¦åœ¨ä½ çš„ `App.jsx` æˆ–è·¯ç”±ä¸­å¼•å…¥è¿™ä¸ªé¡µé¢ï¼š

```jsx
import LoginPage from './pages/Login';

function App() {
  return <LoginPage />;
}

export default App;
```



<br/><br/><br/>

***
<br/>
> <h1 id="å‡ ç§è®¾è®¡æ¨¡å¼å¯¹ç…§">å‡ ç§è®¾è®¡æ¨¡å¼å¯¹ç…§</h1>


| æ¨¡å¼           | ç”¨é€”        | ç‰¹ç‚¹        |
| ------------ | --------- | --------- |
| å®¹å™¨ç»„ä»¶ vs å±•ç¤ºç»„ä»¶ | åˆ†ç¦»é€»è¾‘å’Œ UI  | ä½è€¦åˆï¼ŒèŒè´£æ¸…æ™°  |
| é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰    | é€»è¾‘å¤ç”¨      | åŒ…è£…ç»„ä»¶ï¼Œå¢å¼ºåŠŸèƒ½ |
| Render Props | å…±äº«é€»è¾‘ï¼Œçµæ´»æ¸²æŸ“ | åƒæ’æ§½ä¸€æ ·çµæ´»   |
| è‡ªå®šä¹‰ Hook     | å‡½æ•°ç»„ä»¶é€»è¾‘å¤ç”¨  | ç®€æ´ã€ç»„åˆæ€§å¼º   |
| æœåŠ¡ç±»å°è£…        | ç»Ÿä¸€å¤„ç†æ¥å£ã€å·¥å…· | è§£è€¦ç»„ä»¶ä¸æœåŠ¡å±‚  |





<br/><br/><br/>

***
<br/>

> <h1 id="å®¹å™¨ç»„ä»¶vså±•ç¤ºç»„ä»¶">å®¹å™¨ç»„ä»¶vså±•ç¤ºç»„ä»¶</h1>

**ğŸ’¡ ç›®çš„ï¼šå°†ä¸šåŠ¡é€»è¾‘ä¸ UI å±•ç¤ºåˆ†ç¦»**

```bash
/UserProfile/
â”œâ”€â”€ UserProfileContainer.jsx  // é€»è¾‘ç»„ä»¶
â”œâ”€â”€ UserProfileView.jsx       // å±•ç¤ºç»„ä»¶
```

<br/>

**ğŸ“„ UserProfileView\.jsxï¼ˆåªç®¡å±•ç¤ºï¼‰**

```jsx
// å±•ç¤ºç»„ä»¶ï¼šåªæ¥æ”¶ propsï¼Œä¸åŒ…å«é€»è¾‘
export default function UserProfileView({ name, age }) {
  return (
    <div>
      <p>ç”¨æˆ·åï¼š{name}</p>
      <p>å¹´é¾„ï¼š{age}</p>
    </div>
  );
}
```

<br/>

**ğŸ“„ UserProfileContainer.jsxï¼ˆåªç®¡é€»è¾‘ï¼‰**

```jsx
import React, { useEffect, useState } from 'react';
import UserProfileView from './UserProfileView';

export default function UserProfileContainer() {
  const [user, setUser] = useState({ name: '', age: 0 });

  useEffect(() => {
    // å‡è®¾ä» API è·å–æ•°æ®
    setTimeout(() => {
      setUser({ name: 'å¼ ä¸‰', age: 25 });
    }, 1000);
  }, []);

  return <UserProfileView name={user.name} age={user.age} />;
}
```

<br/>

- **âœ… ä¼˜åŠ¿**

	* View å±‚æ— ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œé€‚åˆå¤ç”¨
	* Container å±‚å¯å•ç‹¬æµ‹è¯•é€»è¾‘
	* ç»„ä»¶èŒè´£æ›´æ¸…æ™°

<br/><br/><br/>

***
<br/>
> <h1 id="HOCé«˜é˜¶ç»„ä»¶æ¨¡å¼">HOCï¼ˆHigher-Order Componentï¼‰é«˜é˜¶ç»„ä»¶æ¨¡å¼</h1>

**ğŸ’¡ ç›®çš„ï¼šå¢å¼ºç»„ä»¶åŠŸèƒ½ï¼Œä¸ä¿®æ”¹åŸç»„ä»¶**

**`ğŸ“„ withLoading.js`**

```js
import React from 'react';

export function withLoading(Component) {
  return function WrappedComponent({ loading, ...rest }) {
    if (loading) return <div>åŠ è½½ä¸­...</div>;
    return <Component {...rest} />;
  };
}
```

<br/>

**`ğŸ“„ ArticleList.jsx`**

```jsx
function ArticleList({ articles }) {
  return (
    <ul>
      {articles.map((a) => (
        <li key={a.id}>{a.title}</li>
      ))}
    </ul>
  );
}
```

<br/>

**ä½¿ç”¨ HOC**

```jsx
const ArticleListWithLoading = withLoading(ArticleList);

// ä½¿ç”¨
<ArticleListWithLoading loading={true} articles={[]} />
```

<br/>

- **âœ… ä¼˜åŠ¿**
	* åœ¨å¤šä¸ªç»„ä»¶ä¸­å¤ç”¨â€œåŠ è½½ä¸­â€é€»è¾‘
	* ä¿æŒåŸç»„ä»¶çº¯å‡€


<br/><br/><br/>

***
<br/>
> <h1 id="RenderPropsæ¨¡å¼">Render Props æ¨¡å¼</h1>

**ğŸ’¡ ç›®çš„ï¼šå…±äº«çŠ¶æ€æˆ–è¡Œä¸ºè€Œä¸æ±¡æŸ“ç»„ä»¶ç»“æ„**

`ğŸ“„ MouseTracker.js`

```jsx
class MouseTracker extends React.Component {
  state = { x: 0, y: 0 };

  handleMouseMove = (e) => {
    this.setState({ x: e.clientX, y: e.clientY });
  };

  render() {
    return (
      <div style={{ height: '100vh' }} onMouseMove={this.handleMouseMove}>
        {this.props.render(this.state)}
      </div>
    );
  }
}
```


<br/>

**ğŸ“„ ä½¿ç”¨æ–¹å¼ï¼š**

```jsx
<MouseTracker
  render={({ x, y }) => (
    <h2>å½“å‰é¼ æ ‡åæ ‡ï¼š{x}, {y}</h2>
  )}
/>
```

<br/> 

**âœ… ä¼˜åŠ¿**

* å¯å¤ç”¨é€»è¾‘ï¼ˆå¦‚æ‹–æ‹½ã€æ‚¬æµ®ã€é«˜äº®ï¼‰
* çµæ´»æ’æ§½å¼æ¸²æŸ“æ§åˆ¶




<br/><br/><br/>

***
<br/>
> <h1 id="Hookså°è£…é€»è¾‘å¤ç”¨ï¼ˆCustomHookæ¨¡å¼ï¼‰"> Hooks å°è£…é€»è¾‘å¤ç”¨ï¼ˆCustom Hook æ¨¡å¼ï¼‰</h1>
**ğŸ’¡ ç›®çš„ï¼šå°†çŠ¶æ€ç®¡ç†ã€é€»è¾‘å¤ç”¨æŠ½ç¦»ä¸º Hook**


 **`ğŸ“„ useWindowSize.js`**

```js
import { useState, useEffect } from 'react';

export function useWindowSize() {
  const [size, setSize] = useState({
    width: window.innerWidth,
    height: window.innerHeight,
  });

  useEffect(() => {
    const onResize = () => setSize({
      width: window.innerWidth,
      height: window.innerHeight,
    });

    window.addEventListener('resize', onResize);
    return () => window.removeEventListener('resize', onResize);
  }, []);

  return size;
}
```

<br/> 

**ğŸ“„ ä½¿ç”¨ï¼š**

```jsx
import { useWindowSize } from './useWindowSize';

function MyComponent() {
  const { width, height } = useWindowSize();

  return <p>çª—å£å¤§å°ï¼š{width} x {height}</p>;
}
```

<br/>

-  **âœ… ä¼˜åŠ¿**

	* æŠ½ç¦»é€»è¾‘ï¼Œä¸å½±å“ç»„ä»¶ UI
	* è‡ªç”±ç»„åˆå¤šä¸ª Hook å®ç°å¤æ‚ä¸šåŠ¡



<br/><br/><br/>

***
<br/>
> <h1 id="æœåŠ¡ç±»å°è£…ï¼ˆServicePatternï¼‰">æœåŠ¡ç±»å°è£…ï¼ˆService Patternï¼‰</h1>

 **ç›®çš„ï¼šæŠŠè¯·æ±‚æˆ–ä¸šåŠ¡é›†ä¸­å°è£…ï¼Œç»„ä»¶åªè´Ÿè´£è°ƒç”¨**

 **`ğŸ“„ userService.js`**

```js
export const UserService = {
  async getUser(id) {
    const res = await fetch(`/api/user/${id}`);
    return res.json();
  },

  async login(data) {
    const res = await fetch('/api/login', {
      method: 'POST',
      body: JSON.stringify(data),
    });
    return res.json();
  },
};
```

<br/>

**ğŸ“„ ä½¿ç”¨ï¼š**

```js
import { UserService } from './userService';

useEffect(() => {
  UserService.getUser(1).then(setUser);
}, []);
```


<br/>

-  **âœ… ä¼˜åŠ¿**

	* ç½‘ç»œè¯·æ±‚é›†ä¸­ç®¡ç†
	* é€»è¾‘å¤ç”¨æ€§å¼º
	* æ˜“äºæµ‹è¯•å’Œç»´æŠ¤


<br/><br/><br/>

***
<br/>
> <h1 id="å‡ ç§è®¾è®¡æ¨¡å¼æ¡ˆä¾‹-å•†å“åˆ—è¡¨é¡µé¢">å‡ ç§è®¾è®¡æ¨¡å¼æ¡ˆä¾‹-å•†å“åˆ—è¡¨é¡µé¢</h1>

ä»¥ä¸€ä¸ª\*\*å•†å“åˆ—è¡¨é¡µé¢ï¼ˆProductListï¼‰\*\*ä¸ºä¾‹ï¼Œç»¼åˆä½¿ç”¨ä»¥ä¸‹å‡ ä¸ªä¼˜ç§€çš„ React è®¾è®¡æ¨¡å¼ï¼š

---
<br/>

**è®¾è®¡ç›®æ ‡**

ä¸€ä¸ªå•†å“åˆ—è¡¨é¡µé¢ï¼Œå…·å¤‡ä»¥ä¸‹åŠŸèƒ½ï¼š

1. ä»æ¥å£åŠ è½½å•†å“æ•°æ®ï¼ˆä½¿ç”¨ Service ç±»æ¨¡å¼ï¼‰
2. å±•ç¤ºå•†å“å¡ç‰‡ï¼ˆä½¿ç”¨ å±•ç¤ºç»„ä»¶ï¼‰
3. é¡µé¢è´Ÿè´£é€»è¾‘ï¼ˆä½¿ç”¨ å®¹å™¨ç»„ä»¶ï¼‰
4. æ•°æ®åŠ è½½ + é”™è¯¯çŠ¶æ€å¤ç”¨ï¼ˆä½¿ç”¨è‡ªå®šä¹‰ Hookï¼‰
5. æ ·å¼æ¨¡å—åŒ–ï¼ˆCSS Moduleï¼‰

<br/>

**âœ… ç›®å½•ç»“æ„**

```
/src/pages/ProductList/
â”œâ”€â”€ index.jsx              // é¡µé¢å®¹å™¨ç»„ä»¶
â”œâ”€â”€ ProductCard.jsx        // å±•ç¤ºç»„ä»¶ï¼ˆå•ä¸ªå•†å“ï¼‰
â”œâ”€â”€ useProductData.js      // è‡ªå®šä¹‰ Hookï¼ˆæ•°æ®åŠ è½½é€»è¾‘ï¼‰
â”œâ”€â”€ productService.js      // Service ç±»ï¼ˆå°è£…æ¥å£ï¼‰
â”œâ”€â”€ style.module.css       // æ ·å¼
```

---
<br/>


**âœ… ä¸€ã€productService.jsï¼ˆæœåŠ¡ç±»ï¼‰**

```js
// src/pages/ProductList/productService.js

export class ProductService {
  static async fetchProducts() {
    const res = await fetch('/api/products'); // æ¨¡æ‹Ÿæ¥å£
    if (!res.ok) throw new Error('åŠ è½½å¤±è´¥');
    return await res.json();
  }
}
```

<br/>

**âœ… äºŒã€useProductData.jsï¼ˆè‡ªå®šä¹‰ Hookï¼‰**

```js
// src/pages/ProductList/useProductData.js

import { useEffect, useState } from 'react';
import { ProductService } from './productService';

export function useProductData() {
  const [products, setProducts] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    ProductService.fetchProducts()
      .then(setProducts)
      .catch(setError)
      .finally(() => setLoading(false));
  }, []);

  return { products, loading, error };
}
```

<br/>

 **âœ… ä¸‰ã€ProductCard.jsxï¼ˆå±•ç¤ºç»„ä»¶ï¼‰**

```jsx
// src/pages/ProductList/ProductCard.jsx

import React from 'react';
import styles from './style.module.css';

export default function ProductCard({ product }) {
  return (
    <div className={styles.card}>
      <h3>{product.name}</h3>
      <p>ä»·æ ¼ï¼šÂ¥{product.price}</p>
    </div>
  );
}
```

<br/>

**âœ… å››ã€style.module.cssï¼ˆæ ·å¼ï¼‰**

```css
/* src/pages/ProductList/style.module.css */

.container {
  padding: 24px;
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 16px;
}

.card {
  border: 1px solid #eee;
  border-radius: 8px;
  padding: 12px;
  background: white;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}
```

<br/>

**âœ… äº”ã€index.jsxï¼ˆé¡µé¢å®¹å™¨ç»„ä»¶ï¼‰**

```jsx
// src/pages/ProductList/index.jsx

import React from 'react';
import { useProductData } from './useProductData';
import ProductCard from './ProductCard';
import styles from './style.module.css';

export default function ProductListPage() {
  const { products, loading, error } = useProductData();

  if (loading) return <div className={styles.container}>åŠ è½½ä¸­...</div>;
  if (error) return <div className={styles.container}>åŠ è½½å¤±è´¥ï¼š{error.message}</div>;

  return (
    <div className={styles.container}>
      <h2>å•†å“åˆ—è¡¨</h2>
      <div className={styles.grid}>
        {products.map((p) => (
          <ProductCard key={p.id} product={p} />
        ))}
      </div>
    </div>
  );
}
```

<br/>

 **âœ… å…­ã€å‡è®¾ API æ•°æ®ï¼ˆæ¨¡æ‹Ÿï¼‰**

ä½ å¯ä»¥ç”¨ mock æ•°æ®æˆ–è€…æœ¬åœ° devServer æ¨¡æ‹Ÿä»¥ä¸‹æ•°æ®ï¼š

```json
[
  { "id": 1, "name": "æ‰‹æœº", "price": 2999 },
  { "id": 2, "name": "ç¬”è®°æœ¬", "price": 7999 },
  { "id": 3, "name": "è€³æœº", "price": 399 }
]
```

---
<br/>


**âœ… æ¨¡å¼æ€»ç»“è¡¨**

| æ–‡ä»¶                  | æ¨¡å¼         | ä½œç”¨                 |
| ------------------- | ---------- | ------------------ |
| `productService.js` | æœåŠ¡ç±»å°è£…      | ç½‘ç»œè¯·æ±‚é€»è¾‘é›†ä¸­           |
| `useProductData.js` | è‡ªå®šä¹‰ Hook   | æ•°æ®åŠ è½½é€»è¾‘å¤ç”¨           |
| `ProductCard.jsx`   | å±•ç¤ºç»„ä»¶æ¨¡å¼     | çº¯ç²¹ UI å±•ç¤º           |
| `index.jsx`         | å®¹å™¨ç»„ä»¶æ¨¡å¼     | é¡µé¢é€»è¾‘ã€è°ƒç”¨ Hookã€ç»„åˆ UI |
| `style.module.css`  | CSS Module | æ ·å¼éš”ç¦»ï¼Œç»„ä»¶ä¸“ç”¨          |






